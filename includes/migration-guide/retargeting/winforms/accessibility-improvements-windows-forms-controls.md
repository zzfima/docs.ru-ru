### <a name="accessibility-improvements-in-windows-forms-controls"></a><span data-ttu-id="fc648-101">Улучшения специальных возможностей для элементов управления Windows Forms</span><span class="sxs-lookup"><span data-stu-id="fc648-101">Accessibility improvements in Windows Forms controls</span></span>

|   |   |
|---|---|
|<span data-ttu-id="fc648-102">Подробные сведения</span><span class="sxs-lookup"><span data-stu-id="fc648-102">Details</span></span>|<span data-ttu-id="fc648-103">В Windows Forms улучшено использование специальных возможностей, обеспечивающих большее удобство для пользователей Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="fc648-103">Windows Forms is improving how it works with accessibility technologies to better support Windows Forms customers.</span></span> <span data-ttu-id="fc648-104">К ним относятся следующие изменения, начиная с .NET Framework 4.7.1:</span><span class="sxs-lookup"><span data-stu-id="fc648-104">These include the following changes starting with the .NET Framework 4.7.1:</span></span><ul><li><span data-ttu-id="fc648-105">Изменения для улучшения видимости в режиме высокой контрастности.</span><span class="sxs-lookup"><span data-stu-id="fc648-105">Changes to improve display during High Contrast mode.</span></span></li><li><span data-ttu-id="fc648-106">Изменения для улучшения работы с обозревателем свойств.</span><span class="sxs-lookup"><span data-stu-id="fc648-106">Changes to improve the property browser experience.</span></span> <span data-ttu-id="fc648-107">Список усовершенствований обозревателя свойств включает:</span><span class="sxs-lookup"><span data-stu-id="fc648-107">Property browser improvements include:</span></span></li><li><span data-ttu-id="fc648-108">Улучшенная навигация с помощью клавиатуры посредством различных окон выбора с раскрывающимися списками.</span><span class="sxs-lookup"><span data-stu-id="fc648-108">Better keyboard navigation through the various drop-down selection windows.</span></span></li><li><span data-ttu-id="fc648-109">Уменьшение числа ненужных позиций табуляции.</span><span class="sxs-lookup"><span data-stu-id="fc648-109">Reduced unnecessary tab stops.</span></span></li><li><span data-ttu-id="fc648-110">Улучшенные отчеты о типах элементов управления.</span><span class="sxs-lookup"><span data-stu-id="fc648-110">Better reporting of control types.</span></span></li><li><span data-ttu-id="fc648-111">Улучшенная работа экранного диктора.</span><span class="sxs-lookup"><span data-stu-id="fc648-111">Improved narrator behavior.</span></span></li><li><span data-ttu-id="fc648-112">Изменения в реализации отсутствующих шаблонов специальных возможностей пользовательского интерфейса в элементах управления.</span><span class="sxs-lookup"><span data-stu-id="fc648-112">Changes to implement missing UI accessibility patterns in controls.</span></span></li></ul>|
|<span data-ttu-id="fc648-113">Предложение</span><span class="sxs-lookup"><span data-stu-id="fc648-113">Suggestion</span></span>|<span data-ttu-id="fc648-114"><strong>Как принять или отклонить изменения</strong></span><span class="sxs-lookup"><span data-stu-id="fc648-114"><strong>How to opt in or out of these changes</strong></span></span></br><span data-ttu-id="fc648-115">Чтобы эти изменения можно было использовать в приложении, оно должно быть запущено на платформе .NET Framework 4.7.1 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="fc648-115">In order for the application to benefit from these changes, it must run on the .NET Framework 4.7.1 or later.</span></span> <span data-ttu-id="fc648-116">В приложении эти изменения можно использовать одним из следующих способов:</span><span class="sxs-lookup"><span data-stu-id="fc648-116">The application can benefit from these changes in either of the following ways:</span></span><ul><li><span data-ttu-id="fc648-117">Выполнить повторную компиляцию, чтобы нацелить приложение на .NET Framework 4.7.1.</span><span class="sxs-lookup"><span data-stu-id="fc648-117">It is recompiled to target the .NET Framework 4.7.1.</span></span> <span data-ttu-id="fc648-118">Эти специальные возможности включены по умолчанию для приложений Windows Forms, ориентированных на .NET Framework 4.7.1 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="fc648-118">These accessibility changes are enabled by default on Windows Forms applications that target the .NET Framework 4.7.1 or later.</span></span></li><li><span data-ttu-id="fc648-119">Для отказа от функций специальных возможностей предыдущих версий [переключатель AppContext](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) добавляется в раздел <code>&lt;runtime&gt;</code> файла конфигурации приложения и получает значение <code>false</code>, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="fc648-119">It opts out of the legacy accessibility behaviors by adding the following [AppContext switch](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) to the <code>&lt;runtime&gt;</code> section of the app.config file and setting it to <code>false</code>, as the following example shows.</span></span></li></ul><pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#13;&#10;&lt;configuration&gt;&#13;&#10;&lt;startup&gt;&#13;&#10;&lt;supportedRuntime version=&quot;v4.0&quot; sku=&quot;.NETFramework,Version=v4.7&quot;/&gt;&#13;&#10;&lt;/startup&gt;&#13;&#10;&lt;runtime&gt;&#13;&#10;&lt;!-- AppContextSwitchOverrides value attribute is in the form of &#39;key1=true/false;key2=true/false  --&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.UseLegacyAccessibilityFeatures=false&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;&lt;/configuration&gt;&#13;&#10;</code></pre></br><span data-ttu-id="fc648-120">В приложениях, предназначенных для .NET Framework 4.7.1 или более поздней версии, где требуется сохранить предыдущие функции специальных возможностей, можно выбрать прежние функции специальных возможностей, явно установив этот переключатель AppContext в значение <code>true</code>.</span><span class="sxs-lookup"><span data-stu-id="fc648-120">Applications that target the .NET Framework 4.7.1 or later and want to preserve the legacy accessibility behavior can opt in to the use of legacy accessibility features by explicitly setting this AppContext switch to <code>true</code>.</span></span><p/><span data-ttu-id="fc648-121">Обзор автоматизации пользовательского интерфейса см. в разделе [Общие сведения об автоматизации пользовательского интерфейса](~/docs/framework/ui-automation/ui-automation-overview.md).&lt;/p/&gt;</span><span class="sxs-lookup"><span data-stu-id="fc648-121">For an overview of UI automation, see the [UI Automation Overview](~/docs/framework/ui-automation/ui-automation-overview.md).&lt;/p/&gt;</span></span><p/><span data-ttu-id="fc648-122"><strong>Добавлена поддержка шаблонов и свойств автоматизации пользовательского интерфейса</strong></span><span class="sxs-lookup"><span data-stu-id="fc648-122"><strong>Added support for UI Automation patterns and properties</strong></span></span><br/><span data-ttu-id="fc648-123">Клиенты специальных возможностей могут использовать новые функции WinForms с помощью общедоступных и описанных шаблонов вызова.</span><span class="sxs-lookup"><span data-stu-id="fc648-123">Accessibility clients can take advantage of new WinForms accessibility functionality by using common, publicly described invocation patterns.</span></span> <span data-ttu-id="fc648-124">Эти шаблоны предназначены не только для WinForms.</span><span class="sxs-lookup"><span data-stu-id="fc648-124">These patterns are not WinForms-specific.</span></span> <span data-ttu-id="fc648-125">Например, клиенты специальных возможностей могут вызывать метод QueryInterface для интерфейса IAccessible (MAAS), чтобы получить интерфейс IServiceProvider.</span><span class="sxs-lookup"><span data-stu-id="fc648-125">For instance, accessibility clients can call the QueryInterface method on the IAccessible interface (MAAS) to obtain an IServiceProvider interface.</span></span> <span data-ttu-id="fc648-126">Если этот интерфейс доступен, клиенты могут использовать его метод QueryService для запроса интерфейса IAccessibleEx.</span><span class="sxs-lookup"><span data-stu-id="fc648-126">If this interface is available, clients can use its QueryService method to request an IAccessibleEx interface.</span></span> <span data-ttu-id="fc648-127">Дополнительные сведения см. в разделе [Использование интерфейса IAccessibleEx из клиента](https://msdn.microsoft.com/library/windows/desktop/dd561924.aspx).</span><span class="sxs-lookup"><span data-stu-id="fc648-127">For more information, see [Using IAccessibleEx from a Client](https://msdn.microsoft.com/library/windows/desktop/dd561924.aspx).</span></span> <span data-ttu-id="fc648-128">Начиная с версии .NET Framework 4.7.1 интерфейсы IServiceProvider и [IAccessibleEx](https://msdn.microsoft.com/library/windows/desktop/dd561898.aspx) (где применимо) доступны объектам специальных возможностей WinForms.</span><span class="sxs-lookup"><span data-stu-id="fc648-128">Starting with the .NET Framework 4.7.1, IServiceProvider and [IAccessibleEx](https://msdn.microsoft.com/library/windows/desktop/dd561898.aspx) (where applicable) are available for WinForms accessibility objects.</span></span><p/><span data-ttu-id="fc648-129">В .NET Framework 4.7.1 добавлена поддержка следующих шаблонов и свойств автоматизации пользовательского интерфейса:</span><span class="sxs-lookup"><span data-stu-id="fc648-129">The .NET Framework 4.7.1 adds support for the following UI automation patterns and properties:</span></span><ul><li><span data-ttu-id="fc648-130">Элементы управления <xref:System.Windows.Forms.ToolStripSplitButton> и <xref:System.Windows.Forms.ComboBox> поддерживают [шаблон развертывания/свертывания](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</span><span class="sxs-lookup"><span data-stu-id="fc648-130">The <xref:System.Windows.Forms.ToolStripSplitButton> and <xref:System.Windows.Forms.ComboBox> controls support the [Expand/Collapse pattern](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</span></span></li><li><span data-ttu-id="fc648-131">Элемент управления <xref:System.Windows.Forms.ToolStripMenuItem> использует для свойства [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) значение <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fc648-131">The <xref:System.Windows.Forms.ToolStripMenuItem> control has a [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) property value <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>.</span></span></li><li><span data-ttu-id="fc648-132">Элемент управления <xref:System.Windows.Forms.ToolStripItem> поддерживает свойство <xref:System.Windows.Automation.AutomationElement.NameProperty> и [шаблон развертывания/свертывания](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</span><span class="sxs-lookup"><span data-stu-id="fc648-132">The <xref:System.Windows.Forms.ToolStripItem> control supports the <xref:System.Windows.Automation.AutomationElement.NameProperty> property and the [Expand/Collapse pattern](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</span></span></li><li><span data-ttu-id="fc648-133">Элемент управления <xref:System.Windows.Forms.ToolStripDropDownItem> поддерживает <xref:System.Windows.Forms.AccessibleEvents> с указанием StateChange и NameChange при развертывании или свертывании раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="fc648-133">The <xref:System.Windows.Forms.ToolStripDropDownItem> control supports <xref:System.Windows.Forms.AccessibleEvents> indicating StateChange and NameChange when drop down is expanded or collapsed.</span></span></li><li><span data-ttu-id="fc648-134">Элемент управления <xref:System.Windows.Forms.ToolStripDropDownButton> использует для свойства [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) значение <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fc648-134">The <xref:System.Windows.Forms.ToolStripDropDownButton> control has a [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) property value of <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>.</span></span></li><li><span data-ttu-id="fc648-135">Элемент управления <xref:System.Windows.Forms.DataGridViewCheckBoxCell> поддерживает <xref:System.Windows.Automation.TogglePattern>.</span><span class="sxs-lookup"><span data-stu-id="fc648-135">The <xref:System.Windows.Forms.DataGridViewCheckBoxCell> control supports the <xref:System.Windows.Automation.TogglePattern>.</span></span></li><li><span data-ttu-id="fc648-136">Элементы управления <xref:System.Windows.Forms.NumericUpDown> и <xref:System.Windows.Forms.DomainUpDown> поддерживают свойство <xref:System.Windows.Automation.AutomationElement.NameProperty> и используют для [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-spinner-control-type.md) значение <xref:System.Windows.Automation.ControlType.Spinner?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fc648-136">The <xref:System.Windows.Forms.NumericUpDown> and <xref:System.Windows.Forms.DomainUpDown> controls support the <xref:System.Windows.Automation.AutomationElement.NameProperty> property and have a [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-spinner-control-type.md) of <xref:System.Windows.Automation.ControlType.Spinner?displayProperty=nameWithType>.</span></span></p></li></ul><span data-ttu-id="fc648-137"><strong>Улучшения элемента управления PropertyGrid</strong></span><span class="sxs-lookup"><span data-stu-id="fc648-137"><strong>Improvements to the PropertyGrid control</strong></span></span></br><span data-ttu-id="fc648-138">В .NET Framework 4.7.1 добавлены следующие улучшения браузерного элемента управления PropertyBrowser:</span><span class="sxs-lookup"><span data-stu-id="fc648-138">The .NET Framework 4.7.1 adds the following improvements to the PropertyBrowser control:</span></span><ul><li><span data-ttu-id="fc648-139">Кнопка <strong>Подробнее</strong> в диалоговом окне ошибки, которое появляется при вводе пользователем неверного значения в элемент управления <xref:System.Windows.Forms.PropertyGrid>, поддерживает [шаблон развертывания/свертывания](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md), уведомления об изменении имени и состояния, а также свойство [ControlType]~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) со значением <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fc648-139">The <strong>Details</strong> button in the error dialog that is displayed when the user enters an incorrect value in the <xref:System.Windows.Forms.PropertyGrid> control supports the [Expand/Collapse pattern](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md), state and name change notifications, and a [ControlType]~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) property with a value of <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>.</span></span></li><li><span data-ttu-id="fc648-140">Область сообщений, которая отображается при развертывании кнопки <strong>Подробнее</strong> в диалоговом окне ошибки, теперь доступна с клавиатуры и поддерживает объявление содержимого сообщения об ошибке с помощью экранного диктора.</span><span class="sxs-lookup"><span data-stu-id="fc648-140">The message pane displayed when the <strong>Details</strong> button of the error dialog is expanded is now keyboard accessible and allows Narrator to announce the content of the error message.</span></span></li><li><span data-ttu-id="fc648-141">Значение <xref:System.Windows.Forms.AccessibleRole> для строк в элементе управления <xref:System.Windows.Forms.PropertyGrid> изменилось со &quot;Строка&quot; на &quot;Ячейка&quot;.</span><span class="sxs-lookup"><span data-stu-id="fc648-141">The <xref:System.Windows.Forms.AccessibleRole> of rows in the <xref:System.Windows.Forms.PropertyGrid> control have changed from &quot;Row&quot; to &quot;Cell&quot;.</span></span> <span data-ttu-id="fc648-142">Ячейка сопоставляется с типом элемента управления &quot;DataItem&quot; модели автоматизации пользовательского интерфейса, благодаря чему обеспечивается поддержка соответствующих сочетаний клавиш и объявлений экранного диктора.</span><span class="sxs-lookup"><span data-stu-id="fc648-142">The cell maps to UIA ControlType &quot;DataItem&quot;, which allows it to support appropriate keyboard shortcuts and Narrator announcements.</span></span></li><li><span data-ttu-id="fc648-143">Строки элемента управления <xref:System.Windows.Forms.PropertyGrid>, которые представляют элементы заголовка в том случае, если для элемента управления <xref:System.Windows.Forms.PropertyGrid> свойство <xref:System.Windows.Forms.PropertyGrid.PropertySort> имеет значение <xref:System.Windows.Forms.PropertySort.Categorized?displayProperty=nameWithType>, имеют значение свойства [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md), равное <xref:System.Windows.Automation.ControlType.Button?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fc648-143">The <xref:System.Windows.Forms.PropertyGrid> control rows that represent header items when the <xref:System.Windows.Forms.PropertyGrid> control has a <xref:System.Windows.Forms.PropertyGrid.PropertySort> property set to <xref:System.Windows.Forms.PropertySort.Categorized?displayProperty=nameWithType> have a [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) property value of <xref:System.Windows.Automation.ControlType.Button?displayProperty=nameWithType>.</span></span></li><li><span data-ttu-id="fc648-144">Строки элемента управления <xref:System.Windows.Forms.PropertyGrid>, которые представляют элементы заголовка в том случае, если для элемента управления <xref:System.Windows.Forms.PropertyGrid> свойство <xref:System.Windows.Forms.PropertyGrid.PropertySort> имеет значение <xref:System.Windows.Forms.PropertySort.Categorized?displayProperty=nameWithType>, поддерживают [шаблон развертывания/свертывания](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</span><span class="sxs-lookup"><span data-stu-id="fc648-144">The <xref:System.Windows.Forms.PropertyGrid> control rows that represent header items when the <xref:System.Windows.Forms.PropertyGrid> control has a <xref:System.Windows.Forms.PropertyGrid.PropertySort>  property set to <xref:System.Windows.Forms.PropertySort.Categorized?displayProperty=nameWithType> support the [Expand/Collapse pattern](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</span></span></li><li><span data-ttu-id="fc648-145">Улучшена навигация с помощью клавиатуры между сеткой и расположенной над ней панелью инструментов.</span><span class="sxs-lookup"><span data-stu-id="fc648-145">Improved keyboard navigation between the grid and the ToolBar above it.</span></span> <span data-ttu-id="fc648-146">При нажатии клавиш &quot;SHIFT+TAB&quot; теперь выбирается не вся панель инструментов, а только ее первая кнопка.</span><span class="sxs-lookup"><span data-stu-id="fc648-146">Pressing &quot;Shift-Tab&quot; now selects the first ToolBar button, instead of the whole ToolBar.</span></span></li><li><span data-ttu-id="fc648-147">Элементы управления <xref:System.Windows.Forms.PropertyGrid>, отображаемые в режиме высокой контрастности, теперь отрисовывают прямоугольник фокуса вокруг кнопки панели инструментов, которая соответствует текущему значению свойства <xref:System.Windows.Forms.PropertyGrid.PropertySort>.</span><span class="sxs-lookup"><span data-stu-id="fc648-147"><xref:System.Windows.Forms.PropertyGrid> controls displayed in High Contrast mode will now draw a focus rectangle around the ToolBar button which corresponds to the current <xref:System.Windows.Forms.PropertyGrid.PropertySort> property value.</span></span></li><li><span data-ttu-id="fc648-148">Элементы управления <xref:System.Windows.Forms.PropertyGrid>, которые отображаются в режиме высокой контрастности и имеют свойство <xref:System.Windows.Forms.PropertyGrid.PropertySort>, равное <xref:System.Windows.Forms.PropertySort.Categorized?displayProperty=nameWithType>, теперь используют цвет высокой контрастности для отображения фона заголовков категорий.</span><span class="sxs-lookup"><span data-stu-id="fc648-148"><xref:System.Windows.Forms.PropertyGrid> controls displayed in High Contrast mode and with a <xref:System.Windows.Forms.PropertyGrid.PropertySort> property set to <xref:System.Windows.Forms.PropertySort.Categorized?displayProperty=nameWithType> will now display the background of category headers in a highly contrasting color.</span></span></li><li><span data-ttu-id="fc648-149">Элементы управления <xref:System.Windows.Forms.PropertyGrid> обеспечивают более заметные различия между находящимися в фокусе элементами панели инструментов и теми элементами панели инструментов, которые указывают текущее значение свойства <xref:System.Windows.Forms.PropertyGrid.PropertySort>.</span><span class="sxs-lookup"><span data-stu-id="fc648-149"><xref:System.Windows.Forms.PropertyGrid> controls better differentiates between ToolBar items with focus and the ToolBar items which indicate the current value of the <xref:System.Windows.Forms.PropertyGrid.PropertySort> property.</span></span> <span data-ttu-id="fc648-150">Это исправление включает в себя изменение режима высокой контрастности, а также изменения других сценариев.</span><span class="sxs-lookup"><span data-stu-id="fc648-150">This fix consists of a High Contrast change and a change for non-High Contrast scenarios.</span></span></li><li><span data-ttu-id="fc648-151">Элементы панели инструментов для элемента управления <xref:System.Windows.Forms.PropertyGrid>, которые указывают текущее значение свойства <xref:System.Windows.Forms.PropertyGrid.PropertySort>, поддерживают <xref:System.Windows.Automation.TogglePattern>.</span><span class="sxs-lookup"><span data-stu-id="fc648-151"><xref:System.Windows.Forms.PropertyGrid> control ToolBar items which indicates the current value of the <xref:System.Windows.Forms.PropertyGrid.PropertySort> property support the <xref:System.Windows.Automation.TogglePattern>.</span></span></li><li><span data-ttu-id="fc648-152">Улучшенная поддержка экранного диктора для различения выбранного режима выравнивания в соответствующем средстве.</span><span class="sxs-lookup"><span data-stu-id="fc648-152">Improved Narrator support for distinguishing the selected alignment in the Alignment Picker.</span></span></li><li><span data-ttu-id="fc648-153">Если в форме отображается пустой элемент управления <xref:System.Windows.Forms.PropertyGrid>, он будет получать фокус в тех случаях, в которых это ранее не происходило.</span><span class="sxs-lookup"><span data-stu-id="fc648-153">When an empty <xref:System.Windows.Forms.PropertyGrid> control is displayed on a form, it will now receive focus where previously it would not.</span></span></p></li></ul><span data-ttu-id="fc648-154"><strong>Использование определенных в ОС цветов в темах высокой контрастности</strong></span><span class="sxs-lookup"><span data-stu-id="fc648-154"><strong>Use of OS-defined colors in High Contrast themes</strong></span></span></br><ul><li><span data-ttu-id="fc648-155">Элементы управления <xref:System.Windows.Forms.Button> и <xref:System.Windows.Forms.CheckBox>, для которых свойству <xref:System.Windows.Forms.ButtonBase.FlatStyle> присвоено значение <xref:System.Windows.Forms.FlatStyle.System?displayProperty=nameWithType> (стиль по умолчанию), теперь используют определенные в ОС цвета при выборе темы высокой контрастности.</span><span class="sxs-lookup"><span data-stu-id="fc648-155">The <xref:System.Windows.Forms.Button> and <xref:System.Windows.Forms.CheckBox> controls with their <xref:System.Windows.Forms.ButtonBase.FlatStyle> property set to <xref:System.Windows.Forms.FlatStyle.System?displayProperty=nameWithType>, which is the default style, now use OS-defined colors in High Contrast theme when selected.</span></span> <span data-ttu-id="fc648-156">Ранее цвета текста и фона не были контрастными, что ухудшало разборчивость.</span><span class="sxs-lookup"><span data-stu-id="fc648-156">Previously, text and background colors were not contrasting and were hard to read.</span></span></li><li><span data-ttu-id="fc648-157">Элементы управления <xref:System.Windows.Forms.Button>, <xref:System.Windows.Forms.CheckBox>, <xref:System.Windows.Forms.RadioButton>, <xref:System.Windows.Forms.Label>, <xref:System.Windows.Forms.LinkLabel> и <xref:System.Windows.Forms.GroupBox>, для которых свойству <xref:System.Windows.Forms.Control.Enabled> присвоено значение <strong>false</strong>, использовали затененный цвет для отображения текста в темах высокой контрастности, в результате чего не обеспечивался достаточный контраст между текстом и фоном.</span><span class="sxs-lookup"><span data-stu-id="fc648-157">The <xref:System.Windows.Forms.Button>, <xref:System.Windows.Forms.CheckBox>, <xref:System.Windows.Forms.RadioButton>, <xref:System.Windows.Forms.Label>, <xref:System.Windows.Forms.LinkLabel> and <xref:System.Windows.Forms.GroupBox> controls with their <xref:System.Windows.Forms.Control.Enabled> property set to <strong>false</strong> used a shaded color to render text in High Contrast themes, resulting in low contrast against the background.</span></span> <span data-ttu-id="fc648-158">Теперь для этих элементов управления используется цвет &quot;Выключенный текст&quot;, определенный в ОС.</span><span class="sxs-lookup"><span data-stu-id="fc648-158">Now these controls use the &quot;Disabled Text&quot; color defined by the OS.</span></span> <span data-ttu-id="fc648-159">Это исправление применяется к элементам управления, для которых свойству <code>FlatStyle</code> присвоено значение, отличное от <xref:System.Windows.Forms.FlatStyle.System?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fc648-159">This fix applies to controls with their <code>FlatStyle</code> property set to a value other than <xref:System.Windows.Forms.FlatStyle.System?displayProperty=nameWithType>.</span></span> <span data-ttu-id="fc648-160">Последние элементы управления отображаются операционной системой.</span><span class="sxs-lookup"><span data-stu-id="fc648-160">The latter controls are rendered by the OS.</span></span></li><li><span data-ttu-id="fc648-161"><xref:System.Windows.Forms.DataGridView> теперь отображает видимый прямоугольник вокруг содержимого ячейки, в которой в данный момент установлен фокус.</span><span class="sxs-lookup"><span data-stu-id="fc648-161"><xref:System.Windows.Forms.DataGridView> now renders a visible rectangle around the content of the cell which has the current focus.</span></span> <span data-ttu-id="fc648-162">Ранее в некоторых темах высокой контрастности этот прямоугольник был незаметен.</span><span class="sxs-lookup"><span data-stu-id="fc648-162">Previously, this was not visible in certain High Contrast themes.</span></span></li><li><span data-ttu-id="fc648-163">Элементы управления <xref:System.Windows.Forms.ToolStripMenuItem>, для которых свойству <xref:System.Windows.Forms.ToolStripMenuItem.Enabled> присвоено значение <strong>false</strong>, теперь используют цвет &quot;Выключенный текст&quot;, определенный в ОС.</span><span class="sxs-lookup"><span data-stu-id="fc648-163"><xref:System.Windows.Forms.ToolStripMenuItem> controls with their <xref:System.Windows.Forms.ToolStripMenuItem.Enabled> property set to <strong>false</strong> now use the &quot;Disabled Text&quot; color defined by the OS.</span></span></li><li><span data-ttu-id="fc648-164">Элементы управления <xref:System.Windows.Forms.ToolStripMenuItem>, для которых свойству <xref:System.Windows.Forms.ToolStripMenuItem.Checked> присвоено значение <strong>true</strong>, теперь отображают соответствующий флажок с использованием контрастного системного цвета.</span><span class="sxs-lookup"><span data-stu-id="fc648-164"><xref:System.Windows.Forms.ToolStripMenuItem> controls with their <xref:System.Windows.Forms.ToolStripMenuItem.Checked> property set to <strong>true</strong> now render the associated check mark in a contrasting system color.</span></span>  <span data-ttu-id="fc648-165">Ранее цвет флажка был недостаточно контрастным, в результате чего он был не виден в некоторых темах высокой контрастности.</span><span class="sxs-lookup"><span data-stu-id="fc648-165">Previously the check mark color was not contrasting enough and not visible in High Contrast themes.</span></span></li></ul><span data-ttu-id="fc648-166">ПРИМЕЧАНИЕ. В Windows 10 изменены значения некоторых системных цветов для тем высокой контрастности.</span><span class="sxs-lookup"><span data-stu-id="fc648-166">NOTE: Windows 10 has changed values for some high contrast system colors.</span></span> <span data-ttu-id="fc648-167">Платформа Windows Forms Framework построена на основе Win32.</span><span class="sxs-lookup"><span data-stu-id="fc648-167">Windows Forms Framework is based on the Win32 framework.</span></span> <span data-ttu-id="fc648-168">Для достижения наилучших результатов используйте самую последнюю версию Windows и согласитесь на последние изменения операционной системы, добавив файл app.manifest в тестовое приложение и раскомментировав следующий код:</span><span class="sxs-lookup"><span data-stu-id="fc648-168">For the best experience, run on the latest version of Windows and opt in to the latest OS changes by adding an app.manifest file in a test application and uncommenting the following code:</span></span><pre><code class="lang-xml">&lt;!-- Windows 10 --&gt;&#13;&#10;&lt;supportedOS Id=&quot;{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}&quot; /&gt;&#13;&#10;</code></pre></br><span data-ttu-id="fc648-169"><strong>Улучшение навигации с помощью клавиатуры</strong></span><span class="sxs-lookup"><span data-stu-id="fc648-169"><strong>Improved keyboard navigation</strong></span></span><ul><li><span data-ttu-id="fc648-170">Если для элемента управления <xref:System.Windows.Forms.ComboBox> свойство <xref:System.Windows.Forms.ComboBox.DropDownStyle> имеет значение <xref:System.Windows.Forms.ComboBoxStyle.DropDownList?displayProperty=nameWithType> и он является первым элементом управления на вкладке формы, при открытии родительской формы с помощью клавиатуры он теперь отображает прямоугольник фокуса.</span><span class="sxs-lookup"><span data-stu-id="fc648-170">When a <xref:System.Windows.Forms.ComboBox> control has its <xref:System.Windows.Forms.ComboBox.DropDownStyle> property set to <xref:System.Windows.Forms.ComboBoxStyle.DropDownList?displayProperty=nameWithType> and is the first control in the tab order on the form, it now displays a focus rectangle when the parent form is opened using the keyboard.</span></span> <span data-ttu-id="fc648-171">До этого изменения фокус устанавливался в этот элемент управления, однако индикатор фокуса не отображался.</span><span class="sxs-lookup"><span data-stu-id="fc648-171">Before this change, keyboard focus was on this control, but a focus indicator was not rendered.</span></span></li></ul><span data-ttu-id="fc648-172"><strong>Улучшенная поддержка экранного диктора</strong></span><span class="sxs-lookup"><span data-stu-id="fc648-172"><strong>Improved Narrator support</strong></span></span><ul><li><span data-ttu-id="fc648-173">Для элемента управления <xref:System.Windows.Forms.MonthCalendar> добавлена поддержка вспомогательных технологий, обеспечивающих доступ к элементу управления, в том числе возможность объявления значения элемента управления с помощью экранного диктора, которая ранее отсутствовала.</span><span class="sxs-lookup"><span data-stu-id="fc648-173">The <xref:System.Windows.Forms.MonthCalendar> control has added support for assistive technologies to access the control, including the ability for Narrator to read the value of the control when previously it could not.</span></span></li><li><span data-ttu-id="fc648-174">Элемент управления <xref:System.Windows.Forms.CheckedListBox> теперь направляет в экранный диктор уведомления об изменении свойства <xref:System.Windows.Forms.CheckBox.CheckState?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fc648-174">The <xref:System.Windows.Forms.CheckedListBox> control now notifies Narrator when a <xref:System.Windows.Forms.CheckBox.CheckState?displayProperty=nameWithType> property has been changed.</span></span> <span data-ttu-id="fc648-175">Ранее экранный диктор не получал уведомления, в результате чего пользователи на знали об обновлении свойства <xref:System.Windows.Forms.CheckBox.CheckState>.</span><span class="sxs-lookup"><span data-stu-id="fc648-175">Previously, Narrator did not receive notification and as a result users would not be informed that the <xref:System.Windows.Forms.CheckBox.CheckState> property had been updated.</span></span></li><li><span data-ttu-id="fc648-176">Для элемента управления <xref:System.Windows.Forms.LinkLabel> изменился способ уведомления экранного диктора о тексте элемента управления.</span><span class="sxs-lookup"><span data-stu-id="fc648-176">The <xref:System.Windows.Forms.LinkLabel> control has changed the way it notifies Narrator of the text of in the control.</span></span> <span data-ttu-id="fc648-177">Ранее экранный диктор объявлял этот текст дважды и читал символы &quot;&amp;&quot; как реальный текст, хотя они не были видны пользователю.</span><span class="sxs-lookup"><span data-stu-id="fc648-177">Previously, Narrator announced this text twice and read &quot;&amp;&quot; symbols as real text even though they are not visible to a user.</span></span> <span data-ttu-id="fc648-178">Из объявлений экранного диктора исключены ненужные символы &quot;&amp;&quot; и повторяющийся текст.</span><span class="sxs-lookup"><span data-stu-id="fc648-178">The duplicated text was removed from the Narrator announcements, as well as unnecessary &quot;&amp;&quot; symbols.</span></span></li><li><span data-ttu-id="fc648-179">Типы элемента управления <xref:System.Windows.Forms.DataGridViewCell> теперь корректно сообщают о состоянии только для чтения экранному диктору и другим вспомогательным технологиям.</span><span class="sxs-lookup"><span data-stu-id="fc648-179">The <xref:System.Windows.Forms.DataGridViewCell> control types now correctly report the read-only status to Narrator and other assistive technologies.</span></span></li><li><span data-ttu-id="fc648-180">Экранный диктор теперь может считывать системное меню дочерних окон в приложении [Multiple-Document Interface]~/docs/framework/winforms/advanced/multiple-document-interface-mdi-applications.md).</span><span class="sxs-lookup"><span data-stu-id="fc648-180">Narrator is now able to read the System Menu of child windows in [Multiple-Document Interface]~/docs/framework/winforms/advanced/multiple-document-interface-mdi-applications.md) applications.</span></span></li><li><span data-ttu-id="fc648-181">Экранный диктор теперь может читать элементы управления <xref:System.Windows.Forms.ToolStripMenuItem>, для которых свойству <xref:System.Windows.Forms.ToolStripItem.Enabled?displayProperty=nameWithType> присвоено значение <strong>false</strong>.</span><span class="sxs-lookup"><span data-stu-id="fc648-181">Narrator is now able to read <xref:System.Windows.Forms.ToolStripMenuItem> controls with a <xref:System.Windows.Forms.ToolStripItem.Enabled?displayProperty=nameWithType> property set to <strong>false</strong>.</span></span> <span data-ttu-id="fc648-182">Ранее экранный диктор не мог получить фокус для отключенных пунктов меню, чтобы считывать их содержимое.</span><span class="sxs-lookup"><span data-stu-id="fc648-182">Previously, Narrator was unable to focus on disabled menu items to read the content.</span></span></li></ul>|
|<span data-ttu-id="fc648-183">Область</span><span class="sxs-lookup"><span data-stu-id="fc648-183">Scope</span></span>|<span data-ttu-id="fc648-184">Значительно</span><span class="sxs-lookup"><span data-stu-id="fc648-184">Major</span></span>|
|<span data-ttu-id="fc648-185">Версия</span><span class="sxs-lookup"><span data-stu-id="fc648-185">Version</span></span>|<span data-ttu-id="fc648-186">4.7.1</span><span class="sxs-lookup"><span data-stu-id="fc648-186">4.7.1</span></span>|
|<span data-ttu-id="fc648-187">Тип</span><span class="sxs-lookup"><span data-stu-id="fc648-187">Type</span></span>|<span data-ttu-id="fc648-188">Изменение целевой платформы</span><span class="sxs-lookup"><span data-stu-id="fc648-188">Retargeting</span></span>|
|<span data-ttu-id="fc648-189">Затронутые API</span><span class="sxs-lookup"><span data-stu-id="fc648-189">Affected APIs</span></span>|<ul><li><xref:System.Windows.Forms.ToolStripDropDownButton.CreateAccessibilityInstance?displayProperty=nameWithType></li><li><xref:System.Windows.Forms.DomainUpDown.DomainUpDownAccessibleObject.Name?displayProperty=nameWithType></li><li>[<span data-ttu-id="fc648-190">MonthCalendar.AccessibilityObject</span><span class="sxs-lookup"><span data-stu-id="fc648-190">MonthCalendar.AccessibilityObject</span></span>](xref:System.Windows.Forms.Control.AccessibilityObject)</li></ul>|

