---
title: Документирование кода с помощью XML-комментариев
description: Сведения о том, как документировать код с использованием комментариев XML-документации и создавать XML-файл документации во время компиляции.
ms.date: 01/21/2020
ms.technology: csharp-fundamentals
ms.assetid: 8e75e317-4a55-45f2-a866-e76124171838
ms.openlocfilehash: 1ed39c4733c36b3932fcb85bf50d4f4c0e53aa6f
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/14/2020
ms.locfileid: "79146321"
---
# <a name="document-your-code-with-xml-comments"></a>Документирование кода с помощью XML-комментариев

Комментарии к XML-документации — это особый тип комментария, добавляемого перед определением определяемого пользователем типа или члена.
Их особенность в том, что компилятор может обрабатывать их для создания XML-файла документации во время компиляции.
Созданный компилятором XML-файл можно распространять вместе со сборкой .NET, чтобы Visual Studio и другие интегрированные среды разработки могли использовать IntelliSense для отображения кратких сведений о типах или членах. Кроме того, XML-файл можно запускать с помощью таких средств, как [DocFX](https://dotnet.github.io/docfx/) и [Sandcastle](https://github.com/EWSoftware/SHFB), и создавать веб-сайты со справочными сведениями по API.

Комментарии к XML-документации, как и все другие комментарии, пропускаются компилятором.

Можно создать XML-файл во время компиляции, выполнив одно из следующих действий.

- Если вы разрабатываете приложение с использованием .NET Core из командной строки, добавьте элемент `GenerateDocumentationFile` в раздел `<PropertyGroup>` CSPROJ-файла проекта. Также можно указать путь к файлу документации напрямую с помощью [элемента `DocumentationFile`](/visualstudio/msbuild/common-msbuild-project-properties). В следующем примере создается XML-файл в каталоге проекта с тем же именем корневого файла, что и у сборки:

   ```xml
   <GenerateDocumentationFile>true</GenerateDocumentationFile>
   ```

   Оно эквивалентно следующему выражению:

   ```xml
   <DocumentationFile>bin\$(Configuration)\$(TargetFramework)\$(AssemblyName).xml</DocumentationFile>
   ```

- Если вы разрабатываете приложение с помощью Visual Studio, щелкните правой кнопкой мыши проект и выберите **Свойства**. В диалоговом окне свойств откройте вкладку **Сборка** и выберите **XML-файл документации**. Можно также изменить расположение, в котором компилятор записывает файл.

- Если вы компилируете приложение .NET Framework из командной строки, добавьте [параметр компилятора -doc](language-reference/compiler-options/doc-compiler-option.md) во время компиляции.  

Для вставки комментария к XML-документации используются три символа косой черты (`///`) и текст комментария в формате XML. Пример:

[!code-csharp[XML Documentation Comment](../../samples/snippets/csharp/concepts/codedoc/xml-comment.cs)]

## <a name="walkthrough"></a>Пошаговое руководство

Давайте разберем документирование простейшей математической библиотеки, чтобы новые разработчики могли без труда понимать и дополнять ее, а сторонние разработчики — легко использовать ее.

Ниже приведен код для простой математической библиотеки.

[!code-csharp[Sample Library](../../samples/snippets/csharp/concepts/codedoc/sample-library.cs)]

Этот пример библиотеки поддерживает четыре основные арифметические операции `add`, `subtract`, `multiply` и `divide` с типами данных `int` и `double`.

Теперь вам нужна возможность создания справочного документа по API из кода для сторонних разработчиков, которые используют библиотеку, но не имеют доступа к исходному коду.
Как упоминалось ранее, это можно сделать с помощью тегов XML-документации. Сейчас вы познакомитесь со стандартными XML-тегами, которые поддерживает компилятор C#.

## <a name="summary"></a>\<summary>

Тег `<summary>` добавляет краткие сведения о типе или члене.
Я продемонстрирую использование тега путем его добавления в определение класса `Math` и первый метод `Add`. Кроме того, его можно применить к остальной части кода.

[!code-csharp[Summary Tag](~/samples/snippets/csharp/concepts/codedoc/summary-tag.cs)]

Тег `<summary>` имеет важное значение. Мы рекомендуем всегда использовать его, так как его содержимое — основной источник информации о типе или члене в IntelliSense либо справочном документе по API.

## <a name="remarks"></a>\<remarks>

Тег `<remarks>` дополняет сведения о типах или членах, предоставляемые тегом `<summary>`. В этом примере вы просто добавите его в класс.

[!code-csharp[Remarks Tag](~/samples/snippets/csharp/concepts/codedoc/remarks-tag.cs)]

## <a name="returns"></a>\<returns>

Тег `<returns>` описывает возвращаемое значение объявления метода.
Как и ранее, в следующем примере демонстрируется тег `<returns>` в первом методе `Add`. То же самое можно сделать и с другими методами.

[!code-csharp[Returns Tag](~/samples/snippets/csharp/concepts/codedoc/returns-tag.cs)]

## <a name="value"></a>\<value>

Тег `<value>` аналогичен тегу `<returns>`, за исключением того, что он используется для свойств.
Если бы в библиотеке `Math` было статическое свойство `PI`, вы использовали бы этот тег следующим образом:

[!code-csharp[Value Tag](~/samples/snippets/csharp/concepts/codedoc/value-tag.cs)]

## <a name="example"></a>\<example>

Тег `<example>` применяется для включения примера в XML-документацию.
В этом случае нужно использовать дочерний тег `<code>`.

[!code-csharp[Example Tag](~/samples/snippets/csharp/concepts/codedoc/example-tag.cs)]

Тег `code` сохраняет разрывы строк и отступы для более длинных примеров.

## <a name="para"></a>\<para>

Тег `<para>` используется для форматирования содержимого в его родительском теге. `<para>` обычно используется внутри тега, такого как `<remarks>` или `<returns>`, чтобы разделить текст на абзацы.
Содержимое тега `<remarks>` для определения класса можно отформатировать.

[!code-csharp[Para Tag](~/samples/snippets/csharp/concepts/codedoc/para-tag.cs)]

## <a name="c"></a>\<c>

Что касается форматирования, можно использовать тег `<c>` для пометки части текста в качестве кода.
Он подобен тегу `<code>`, но является встроенным. Он полезен, если требуется показать пример кода как часть содержимого тега.
Давайте обновим в документацию для класса `Math`.

[!code-csharp[C Tag](~/samples/snippets/csharp/concepts/codedoc/c-tag.cs)]

## <a name="exception"></a>\<exception>

С помощью тега `<exception>` можно сообщить разработчикам, что метод может генерировать определенные исключения.
Если взглянуть на библиотеку `Math`, можно увидеть, что оба метода `Add` создают исключение при выполнении определенного условия. Метод `Divide` с типом integer также создает исключение (хотя и не столь очевидно), если параметр `b` равен нулю. Теперь добавьте в этот метод документацию по исключению.

[!code-csharp[Exception Tag](~/samples/snippets/csharp/concepts/codedoc/exception-tag.cs)]

Атрибут `cref` представляет ссылку на исключение, которое доступно из текущей среды компиляции.
Это может быть любой тип, определенный в проекте или ссылочной сборке. Компилятор выдаст предупреждение, если его значение не может быть разрешено.

## <a name="see"></a>\<see>

Тег `<see>` позволяет создать активную ссылку на страницу документации по другому элементу кода. В следующем примере будет создана активная ссылка между двумя методами `Add`.

[!code-csharp[See Tag](~/samples/snippets/csharp/concepts/codedoc/see-tag.cs)]

Атрибут `cref` является **обязательным** и представляет ссылку на тип или его член, который доступен из текущей среды компиляции.
Это может быть любой тип, определенный в проекте или ссылочной сборке.

## <a name="seealso"></a>\<seealso>

Тег `<seealso>` используется так же, как тег `<see>`. Единственное различие заключается в том, что его содержимое обычно помещается в раздел "См. также". Мы добавим тег `seealso` в метод `Add` с типом integer для ссылки на другие методы в классе, принимающие параметры с типом integer:

[!code-csharp[Seealso Tag](~/samples/snippets/csharp/concepts/codedoc/seealso-tag.cs)]

Атрибут `cref` представляет ссылку на тип или его член, который доступен из текущей среды компиляции.
Это может быть любой тип, определенный в проекте или ссылочной сборке.

## <a name="param"></a>\<param>

Тег `<param>` используется для описания параметров метода. Ниже приведен пример метода double `Add`: Параметр, описываемый тегом, указан в **обязательном** атрибуте `name`.

[!code-csharp[Param Tag](~/samples/snippets/csharp/concepts/codedoc/param-tag.cs)]

## <a name="typeparam"></a>\<typeparam>

Тег `<typeparam>` используется так же, как тег `<param>`, но для объявлений универсального типа или метода он служит для описания универсального параметра.
Добавьте в класс `Math` быстрый универсальный метод, чтобы проверить, что одно количество больше другого.

[!code-csharp[Typeparam Tag](~/samples/snippets/csharp/concepts/codedoc/typeparam-tag.cs)]

## <a name="paramref"></a>\<paramref>

Иногда в процессе описания выполнения метода в теге `<summary>` может потребоваться создание ссылки на параметр. Для этого отлично подойдет тег `<paramref>`. Обновим сводку по методу `Add` с типом double. Как и для тега `<param>`, имя параметра указано в **обязательном** атрибуте `name`.

[!code-csharp[Paramref Tag](~/samples/snippets/csharp/concepts/codedoc/paramref-tag.cs)]

## <a name="typeparamref"></a>\<typeparamref>

Тег `<typeparamref>` используется так же, как тег `<paramref>`, но для объявлений универсального типа или метода он служит для описания универсального параметра.
Можно использовать созданные ранее универсальный метод.

[!code-csharp[Typeparamref Tag](~/samples/snippets/csharp/concepts/codedoc/typeparamref-tag.cs)]

## <a name="list"></a>\<list>

Тег `<list>` используется для форматирования сведений о документации в виде упорядоченного списка, неупорядоченного списка или таблицы. Создайте неупорядоченный список для каждой математической операции, поддерживаемой библиотекой `Math`.

[!code-csharp[List Tag](~/samples/snippets/csharp/concepts/codedoc/list-tag.cs)]

Упорядоченный список или таблицу можно сформировать, изменив атрибут `type` на `number` или `table` соответственно.

## <a name="inheritdoc"></a>\<inheritdoc>

Тег `<inheritdoc>` можно использовать для наследования XML-комментариев от базовых классов, интерфейсов и аналогичных методов. Это позволяет обойтись без копирования и вставки одинаковых XML-комментариев и автоматически поддерживать их синхронизацию.

[!code-csharp-interactive[InheritDoc Tag](~/samples/snippets/csharp/concepts/codedoc/inheritdoc-tag.cs)]

### <a name="put-it-all-together"></a>Заключение

Вы выполнили инструкции в этом учебнике и включили теги в код там, где необходимо. Теперь ваш код должен иметь следующий вид:

[!code-csharp[Tagged Library](~/samples/snippets/csharp/concepts/codedoc/tagged-library.cs)]

В коде можно создать подробную документацию к веб-сайту, содержащую интерактивные перекрестные ссылки. При этом вы можете столкнуться с другой проблемой — такой код очень трудно читать.
Для любого разработчика, который хочет вносить дополнения в этот код, необходимость обработки большого количества данных становится настоящим кошмаром.
К счастью, есть XML-тег, который поможет справиться с этой задачей:

## <a name="include"></a>\<include>

Тег `<include>` позволяет обращаться к комментариям в отдельном XML-файле, описывающем типы и члены в исходном коде, а не размещать комментарии к документации непосредственно в файле исходного кода.

Переместим все XML-теги в отдельный файл XML с именем `docs.xml`. Файлу можно задать любое имя.

[!code-xml[Sample XML](~/samples/snippets/csharp/concepts/codedoc/include.xml)]

В приведенном выше XML комментарии к документации по каждому члену отображаются непосредственно внутри тега с именем, соответствующим его назначению. Можно выбрать собственную стратегию.
Теперь, когда комментарии XML находятся в отдельном файле, давайте посмотрим, как можно улучшить удобочитаемость кода с помощью тега `<include>`.

[!code-csharp[Include Tag](~/samples/snippets/csharp/concepts/codedoc/include-tag.cs)]

Сейчас чтение кода снова не вызывает сложностей, и никакие сведения не были потеряны.

Атрибут `file` представляет имя XML-файла, содержащего документацию.

Атрибут `path` представляет запрос [XPath](../standard/data/xml/xpath-queries-and-namespaces.md) к `tag name`, находящемуся в указанном `file`.

Атрибут `name` представляет спецификатор имени в теге, который предшествует комментариям.

Атрибут `id`, который можно использовать вместо `name`, представляет идентификатор для тега, предшествующего комментариям.

### <a name="user-defined-tags"></a>Пользовательские теги

Все описанные выше теги распознаются компилятором C#. Тем не менее пользователь может определять собственные теги.
Такие средства, как Sandcastle, обеспечивают поддержку дополнительных тегов, например [\<событие>](https://ewsoftware.github.io/XMLCommentsGuide/html/81bf7ad3-45dc-452f-90d5-87ce2494a182.htm) и [\<примечание>](https://ewsoftware.github.io/XMLCommentsGuide/html/4302a60f-e4f4-4b8d-a451-5f453c4ebd46.htm), и даже поддержку [пространств имен документирования](https://ewsoftware.github.io/XMLCommentsGuide/html/BD91FAD4-188D-4697-A654-7C07FD47EF31.htm).
Средства создания пользовательской или внутренней документации также можно использовать со стандартными тегами. Кроме того, поддерживается несколько выходных форматов — от HTML до PDF.

## <a name="recommendations"></a>Рекомендации

Документирование кода рекомендуется по многим причинам. Далее приводится ряд рекомендаций, распространенные сценарии использования и вопросы, которые нужно иметь в виду при работе с тегами XML-документации в коде C#.

- Для обеспечения согласованности все открытые типы и их члены должны быть задокументированы. Если это необходимо, задокументируйте их все.
- Закрытые члены можно также задокументировать с помощью XML-комментариев. Однако это приводит к раскрытию внутренних (возможно, конфиденциальных) процессов библиотеки.
- Как минимум, типы и их члены должен иметь тег `<summary>`, так как его содержимое требуется для IntelliSense.
- Текст документации должны быть написан с использованием законченных предложений, в конце которых ставится точка.
- Разделяемые классы полностью поддерживаются, и данные о документации объединяются в одну запись для этого типа.
- Компилятор проверяет синтаксис тегов `<exception>`, `<include>`, `<param>`, `<see>`, `<seealso>` и `<typeparam>`.
- Компилятор проверяет параметры, которые содержат пути к файлам и ссылки на другие части кода.

## <a name="see-also"></a>См. также

- [Комментарии к XML-документации (руководство по программированию на C#)](programming-guide/xmldoc/index.md)
- [Рекомендуемые теги для комментариев документации (руководство по программированию на C#)](programming-guide/xmldoc/recommended-tags-for-documentation-comments.md)
