---
title: Ветви и циклы. Вводное руководство по C#
description: В рамках этого руководства, посвященного ветвям и циклам, вы создадите пример кода на C#, который демонстрирует возможности языка для организации условного ветвления и циклического выполнения операторов.
ms.date: 10/31/2017
ms.custom: mvc
ms.openlocfilehash: 44b634e3c2120116ee7fd66770398a6b66c8ed8c
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/14/2020
ms.locfileid: "73739123"
---
# <a name="learn-conditional-logic-with-branch-and-loop-statements"></a>Изучение условной логики с операторами ветви и цикла

В этом руководстве объясняется, как написать код, который позволяет проверить переменные и изменить путь выполнения на основе этих переменных. Вы напишете код C# и сможете просмотреть результаты его компиляции и выполнения. Это руководство содержит ряд уроков, в которых рассматриваются конструкции ветвления и циклов в C#. В рамках этих занятий вы ознакомитесь с основами языка C#.

Для работы с этим руководством вам потребуется компьютер, который можно использовать для разработки. В руководстве .NET по созданию программы [Hello World за 10 минут](https://dotnet.microsoft.com/learn/dotnet/hello-world-tutorial/intro) содержатся инструкции по настройке локальной среды разработки в macOS, Windows или Linux. Краткий обзор команд, которые будут здесь использоваться, и ссылки на дополнительные сведения представлены в статье [Become familiar with the .NET development tools](local-environment.md) (Знакомство со средствами разработки для .NET).

## <a name="make-decisions-using-the-if-statement"></a>Принятие решений с помощью оператора `if`

Создайте каталог с именем *branches-tutorial*. Сделайте его текущим, выполнив следующую команду:

```dotnetcli
dotnet new console -n BranchesAndLoops -o .
```

Эта команда создает консольное приложение .NET Core в текущем каталоге.

Откройте файл *Program.cs* в любом редакторе и замените строку `Console.WriteLine("Hello World!");` следующим кодом:

```csharp
int a = 5;
int b = 6;
if (a + b > 10)
    Console.WriteLine("The answer is greater than 10.");
```

Чтобы выполнить этот код, введите `dotnet run` в окне консоли. В консоли должно появиться сообщение The answer is greater than 10 (Ответ больше 10).

Измените объявление `b`, чтобы сумма была меньше 10:

```csharp
int b = 3;
```

Введите `dotnet run` еще раз. Так как ответ меньше 10, никакие данные не выводятся. Проверяемое **условие** имеет значение false. У вас еще нет кода для выполнения, так как вы написали только одну из возможных ветвей для оператора `if` — ветвь true.

> [!TIP]
> Вероятнее всего, при изучении C# (как и любого другого языка программирования) вы будете допускать ошибки в коде. Компилятор найдет ошибки и сообщит о них. Внимательно просмотрите выходные данные ошибки и код, вызвавший ошибку. Как правило, сведения о причине ошибки можно найти в сообщении об ошибке компилятора.

В первом примере показаны возможности `if` и логические типы. *Логическое значение* — это переменная, которая может иметь одно из двух значений: `true` или `false`. Логические переменные в C# определяются особым типом — `bool`. Оператор `if` проверяет значение `bool`. Если значение `true`, выполняется оператор, следующий после `if`. В противном случае он пропускается.

Этот процесс проверки условий и выполнения операторов на основе этих условий предоставляет широкие возможности.

## <a name="make-if-and-else-work-together"></a>Объединение операторов if и else

Чтобы выполнить разный код в ветвях true и false, создайте ветвь `else`, которая будет выполняться, если условие имеет значение false. Попробуйте сделать следующее. Добавьте две последние строки из приведенного ниже кода в метод `Main` (первые четыре должны быть уже добавлены):

```csharp
int a = 5;
int b = 3;
if (a + b > 10)
    Console.WriteLine("The answer is greater than 10");
else
    Console.WriteLine("The answer is not greater than 10");
```

Оператор после ключевого слова `else` выполняется, только если проверяемое условие имеет значение `false`. Объединив операторы `if` и `else` с логическими условиями, вы получите все необходимые возможности для обработки условий `true` и `false`.

> [!IMPORTANT]
> Отступы под операторами `if` и `else` предназначены только для удобства чтения.
> В языке C# необязательно ставить отступы или пробелы.
> Операторы после ключевого слова `if` или `else` будут выполняться на основе условия. Во всех строках в примерах кода, представленных в этом руководстве, отступы традиционно соответствуют потоку управления операторов.

Так как отступ не обязателен, используйте скобки `{` и `}`, если нужно указать несколько операторов в блоке кода, который выполняется в зависимости от условий. Программисты C# обычно используют эти фигурные скобки во всех предложениях `if` и `else`. Следующий пример аналогичен только что созданному. Измените код выше, чтобы он соответствовал следующему коду:

```csharp
int a = 5;
int b = 3;
if (a + b > 10)
{
    Console.WriteLine("The answer is greater than 10");
}
else
{
    Console.WriteLine("The answer is not greater than 10");
}
```

> [!TIP]
> Все примеры кода в следующих разделах руководства содержат фигурные скобки в соответствии с принятой практикой.

Можно проверить более сложные условия. Добавьте следующий код в метод `Main` после написанного кода:

```csharp
int c = 4;
if ((a + b + c > 10) && (a == b))
{
    Console.WriteLine("The answer is greater than 10");
    Console.WriteLine("And the first number is equal to the second");
}
else
{
    Console.WriteLine("The answer is not greater than 10");
    Console.WriteLine("Or the first number is not equal to the second");
}
```

Символ `==` позволяет проверить *равенство*. С помощью `==` обозначается отличие проверки равенства от назначения, которое показано в `a = 5`.

`&&` представляет оператор and. То есть для выполнения оператора в ветви true оба условия должны иметь значение true.  В этих примерах также показано, что в каждой условной ветви можно задать несколько операторов. Нужно лишь заключить их в скобки `{` и `}`.

Вы также можете использовать оператор `||`, который представляет оператор or. Добавьте следующий фрагмент после написанного кода:

```csharp
if ((a + b + c > 10) || (a == b))
{
    Console.WriteLine("The answer is greater than 10");
    Console.WriteLine("Or the first number is equal to the second");
}
else
{
    Console.WriteLine("The answer is not greater than 10");
    Console.WriteLine("And the first number is not equal to the second");
}
```

Измените значения `a`, `b` и `c`, а также переключитесь между `&&` и `||` для изучения. Так вы лучше поймете, как работают операторы `&&` и `||`.

Вы завершили первый этап. Прежде чем перейти к следующему разделу, переместим текущий код в отдельный метод. Это упростит начало работы с новым примером. Переименуйте метод `Main` в `ExploreIf` и запишите новый метод `Main`, который вызывает `ExploreIf`. В результате ваш код должен выглядеть примерно следующим образом:

```csharp
using System;

namespace BranchesAndLoops
{
    class Program
    {
        static void ExploreIf()
        {
            int a = 5;
            int b = 3;
            if (a + b > 10)
            {
                Console.WriteLine("The answer is greater than 10");
            }
            else
            {
                Console.WriteLine("The answer is not greater than 10");
            }

            int c = 4;
            if ((a + b + c > 10) && (a > b))
            {
                Console.WriteLine("The answer is greater than 10");
                Console.WriteLine("And the first number is greater than the second");
            }
            else
            {
                Console.WriteLine("The answer is not greater than 10");
                Console.WriteLine("Or the first number is not greater than the second");
            }

            if ((a + b + c > 10) || (a > b))
            {
                Console.WriteLine("The answer is greater than 10");
                Console.WriteLine("Or the first number is greater than the second");
            }
            else
            {
                Console.WriteLine("The answer is not greater than 10");
                Console.WriteLine("And the first number is not greater than the second");
            }
        }

        static void Main(string[] args)
        {
            ExploreIf();
        }
    }
}
```

Закомментируйте вызов `ExploreIf()`. Это поможет упорядочить выходные данные в этом разделе.

```csharp
//ExploreIf();
```

`//` запускает **комментарий** в C#. Комментарии — это любой текст, который должен быть сохранен в исходном коде, но не должен выполняться как код. Компилятор не создает исполняемый код из комментариев.

## <a name="use-loops-to-repeat-operations"></a>Использование циклов для повторения операций

В этом разделе **циклы** используются для повторения операторов. Выполните в методе `Main` следующий код:

```csharp
int counter = 0;
while (counter < 10)
{
    Console.WriteLine($"Hello World! The counter is {counter}");
    counter++;
}
```

Оператор `while` проверяет условие и выполняет инструкцию или блок инструкций, следующий после `while`. Проверка условия и выполнение этих операторов будут повторяться, пока условие не примет значение false.

В этом примере представлен еще один новый оператор. Объект `++` после переменной `counter` представляет собой оператор **инкремента**. Он добавляет 1 к значению `counter` и сохраняет это значение в переменной `counter`.

> [!IMPORTANT]
> Напишите такой код, при выполнении которого значение условия цикла `while` изменится на false. В противном случае будет создан **бесконечный цикл**, в котором выполнение программы никогда не закончится. Это не показано в примере, так как нужно принудительно закрыть программу, нажав клавиши **CTRL+C**, или другим способом.

В цикле `while` условие проверяется, прежде чем выполнить код, который следует после `while`. А в цикле `do` ... `while` сначала выполняется код, а потом проверяется условие. Действие во время цикла показано в следующем примере кода.

```csharp
int counter = 0;
do
{
    Console.WriteLine($"Hello World! The counter is {counter}");
    counter++;
} while (counter < 10);
```

Этот цикл `do` и цикл `while`, приведенный выше, выводят одинаковый результат.

## <a name="work-with-the-for-loop"></a>Работа с циклом for

Цикл **for** широко используется в C#. Выполните в методе Main() следующий код:

```csharp
for (int index = 0; index < 10; index++)
{
    Console.WriteLine($"Hello World! The index is {index}");
}
```

Этот цикл работает так же, как циклы `while` и `do`, использованные ранее. Оператор `for` состоит из трех частей, которые отвечают за его работу.

Первая часть — **для инициализатора**: `int index = 0;` объявляет `index` переменной цикла и задает для ее начальное значение `0`.

Средняя часть — **для условия**: `index < 10` объявляет, что этот цикл `for` продолжает выполняться, пока значение счетчика меньше 10.

Последняя часть — **для итератора**: `index++` определяет, как изменится переменная цикла после выполнения блока, следующего после оператора `for`. В нашем случае определяется, что значение `index` должно увеличиваться на 1 каждый раз, когда выполняется блок.

Попробуйте сделать это самостоятельно. Попытайтесь выполнить следующие задания:

- Измените инициализатор, чтобы цикл начинался с другого значения.
- Измените условие, чтобы цикл заканчивался другим значением.

По окончании попробуйте самостоятельно написать код, чтобы применить полученные знания.

## <a name="combine-branches-and-loops"></a>Объединение ветвей и циклов

Теперь, когда вы ознакомились с оператором `if` и конструкциями цикла на языке C#, попытайтесь написать код C# для поиска суммы всех целых чисел от 1 до 20, которые делятся на 3.  Вот несколько подсказок:

- оператор `%` позволяет получить остаток от операции деления;
- оператор `if` предоставляет условие, которое позволяет определить, будет ли число учитываться в сумме;
- цикл `for` позволяет повторить последовательность шагов для всех чисел от 1 до 20.

Попробуйте самостоятельно. Затем проверьте результат. Вы должны получить ответ "63". Один из возможных ответов можно увидеть в [полном примере кода в GitHub](https://github.com/dotnet/samples/tree/master/csharp/branches-quickstart/Program.cs#L46-L54).

Вы ознакомились с руководством по ветвям и циклам.

Теперь вы можете перейти к ознакомлению с руководством [Массивы и коллекции](arrays-and-collections.md) в своей среде разработки.

Дополнительные сведения об этих понятиях см. в следующих разделах:

- [if-else (справочник по C#)](../../language-reference/keywords/if-else.md)
- [while (справочник по C#)](../../language-reference/keywords/while.md)
- [do (справочник по C#)](../../language-reference/keywords/do.md)
- [for (справочник по C#)](../../language-reference/keywords/for.md)
