---
title: Управление версиями языка C# — руководство по C#
description: Дополнительные сведения о том, как версия языка C# определяется на основе вашего проекта и какие значения можно настроить вручную.
ms.date: 07/10/2019
ms.openlocfilehash: 90624816a68de694cacd0017c6d3162f6a89431c
ms.sourcegitcommit: 5f236cd78cf09593c8945a7d753e0850e96a0b80
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2020
ms.locfileid: "75713875"
---
# <a name="c-language-versioning"></a>Управление версиями языка C#

Компилятор C# последней версии определяет версию языка по умолчанию на основе целевой платформы или платформ проекта. Это обусловлено тем, что язык C# может иметь функции, которые зависят от типов или компонентов среды выполнения и не доступны в каждой реализации .NET. Это также гарантирует, что для любой целевой платформы, для которой выполняется сборка проекта, вы получаете последнюю совместимую версию языка по умолчанию.

Правила, описанные в этой статье, относятся к компилятору, поставляемому с Visual Studio 2019, или пакету SDK для .NET Core 3.0. Компиляторы C#, которые являются частью установки Visual Studio 2017 или более ранних версий пакета SDK для .NET Core предназначены для C# 7.0 по умолчанию. 

## <a name="defaults"></a>Значения по умолчанию

Компилятор определяет значение по умолчанию на основе следующих правил:

|Целевая платформа|version|Версия языка C# по умолчанию|
|----------------|-------|---------------------------|
|.NET Core|3.x|C# 8.0|
|.NET Core|2.x|C# 7.3|
|.NET Standard|2.1|C# 8.0|
|.NET Standard|2.0|C# 7.3|
|.NET Standard|1.x|C# 7.3|
|.NET Framework|все|C# 7.3|

## <a name="default-for-previews"></a>Параметры по умолчанию для предварительных версий

Если проект предназначен для платформы в предварительной версии с поддержкой соответствующего языка в предварительной версии, будет использоваться язык, поддерживаемый в предварительной версии. Это гарантирует, что вы можете использовать новейшие возможности, которые точно будут работать с этой предварительной версией в любой среде, не затрагивая проекты, предназначенные для выпущенной версии .NET Core.

## <a name="override-a-default"></a>Переопределение значения по умолчанию

Если необходимо явно указать версию C#, это можно сделать несколькими способами:

- Вручную изменить [файл проекта](#edit-the-project-file).
- Задать версию языка [для нескольких проектов в подкаталоге](#configure-multiple-projects).
- настройка [параметра компилятора `-langversion`](compiler-options/langversion-compiler-option.md).

### <a name="edit-the-project-file"></a>Изменение файла проекта

Версию языка можно задать в файле проекта. Например, если доступ к предварительной версии функций должен быть задан явным образом, можно добавить следующий элемент:

```xml
<PropertyGroup>
   <LangVersion>preview</LangVersion>
</PropertyGroup>
```

Значение `preview` использует последнюю предварительную версию языка C#, которую поддерживает компилятор.

### <a name="configure-multiple-projects"></a>Настройка нескольких проектов

Можно создать файл **Directory.Build.props**, содержащий элемент `<LangVersion>`, чтобы настроить несколько каталогов. Обычно это делается в каталоге решения. Добавьте следующий код в файл **Directory.Build.props** в каталоге решения:

```xml
<Project>
 <PropertyGroup>
   <LangVersion>preview</LangVersion>
 </PropertyGroup>
</Project>
```

Теперь сборки в каждом подкаталоге каталога, который содержит этот файл, будут использовать предварительную версию C#. Дополнительные сведения см. в статье о [настройке сборки](/visualstudio/msbuild/customize-your-build).

## <a name="c-language-version-reference"></a>Справочник по версиям языка C#

В следующей таблице показаны все текущие версии языка C#. Ваш компилятор может не распознавать все значения, если имеет более раннюю версию. Если вы установите .NET Core 3.0, вы получите доступ ко всем значениям в таблице.

|Значение|Значение|
|------------|-------------|
|preview|Компилятор допускает использование любого допустимого синтаксиса языка из последней предварительной версии.|
|latest|Компилятор принимает синтаксис из последней выпущенной версии компилятора (включая дополнительный номер версии).|
|latestMajor|Компилятор принимает синтаксис из последней основной версии компилятора.|
|8.0|Компилятор принимает только синтаксис, включенный в спецификацию C# 8.0 или более ранней версии.|
|7.3|Компилятор принимает только синтаксис, включенный в спецификацию C# 7.3 или более ранней версии.|
|7.2|Компилятор принимает только синтаксис, включенный в спецификацию C# 7.2 или более ранней версии.|
|7.1|Компилятор принимает только синтаксис, включенный в спецификацию C# 7.1 или более ранней версии.|
|7|Компилятор принимает только синтаксис, включенный в спецификацию C# 7.0 или более ранней версии.|
|6|Компилятор принимает только синтаксис, включенный в спецификацию C# 6.0 или более ранней версии.|
|5|Компилятор принимает только синтаксис, включенный в спецификацию C# 5.0 или более ранней версии.|
|4|Компилятор принимает только синтаксис, включенный в спецификацию C# 4.0 или более ранней версии.|
|3|Компилятор принимает только синтаксис, включенный в спецификацию C# 3.0 или более ранней версии.|
|ISO-2|Компилятор принимает только синтаксис, включенный в спецификацию ISO/IEC 23270:2006 C# (2.0) |
|ISO-1|Компилятор принимает только синтаксис, включенный в спецификацию ISO/IEC 23270:2003 C# (1.0/1.2) |
