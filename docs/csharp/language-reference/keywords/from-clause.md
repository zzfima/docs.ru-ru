---
title: Справочник по C#. Предложение from
ms.date: 07/20/2015
f1_keywords:
- from_CSharpKeyword
- from
helpviewer_keywords:
- from clause [C#]
- from keyword [C#]
ms.assetid: 1aefd18c-1314-47f8-99ec-9bcefb09e699
ms.openlocfilehash: 388b9c0245b112d619fc173f6019b3f7dbf59940
ms.sourcegitcommit: 5f236cd78cf09593c8945a7d753e0850e96a0b80
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2020
ms.locfileid: "75715291"
---
# <a name="from-clause-c-reference"></a>Предложение from (справочник по C#)

Выражение запроса должно начинаться с предложения `from`. Кроме того, выражение запроса может содержать вложенные запросы, которые также начинаются с предложения `from`. Предложение `from` определяет следующее:

- Источник данных, в отношении которого будет выполнен запрос или вложенный запрос.

- Локальная *переменная диапазона*, которая представляет каждый элемент в последовательности источника.

Переменная диапазона и источник данных строго типизированы. Источник данных, на который ссылается предложение `from`, должен иметь тип <xref:System.Collections.IEnumerable>, <xref:System.Collections.Generic.IEnumerable%601> или производный от них тип, например <xref:System.Linq.IQueryable%601>.

В следующем примере `numbers` — это источник данных, а `num` — переменная диапазона. Обратите внимание, что обе переменные строго типизированы, даже несмотря на использование ключевого слова [var](var.md).

[!code-csharp[cscsrefQueryKeywords#1](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsCsrefQueryKeywords/CS/From.cs#1)]

## <a name="the-range-variable"></a>Переменная диапазона

Компилятор выводит тип переменной диапазона, если источник данных реализует <xref:System.Collections.Generic.IEnumerable%601>. Например, если источник данных имеет тип `IEnumerable<Customer>`, выводится переменная диапазона `Customer`. Явно задавать тип необходимо только в том случае, если источник имеет не являющийся универсальным тип `IEnumerable`, например <xref:System.Collections.ArrayList>. Дополнительные сведения см. в статье [Практическое руководство. Выполнение запроса к ArrayList с помощью LINQ (C#)](../../programming-guide/concepts/linq/how-to-query-an-arraylist-with-linq.md).

В предыдущем примере `num` выводится к типу `int`. Поскольку переменная диапазона строго типизирована, вы можете использовать ее в вызовах методов и других операциях. Например, вместо кода `select num` можно использовать запись `select num.ToString()`, в результате чего выражение запроса будет возвращать последовательность строк вместо целых чисел. Также можно использовать запись `select num + 10`, в результате чего выражение будет возвращать последовательность 14, 11, 13, 12, 10. Дополнительные сведения см. в разделе [Предложение select](select-clause.md).

Переменные диапазона схожи с переменными итерации в инструкции [foreach](foreach-in.md), за исключением одного важного отличия: в переменной диапазона никогда не хранятся фактические данные из источника. Это лишь способ оптимизировать код, позволяющий запросу описывать действия, которые произойдут при выполнении запроса. Дополнительные сведения см. в разделе [Введение в запросы LINQ (C#)](../../programming-guide/concepts/linq/introduction-to-linq-queries.md).

## <a name="compound-from-clauses"></a>Составные предложения from

В некоторых случаях каждый элемент в последовательности источника может сам представлять собой последовательность или содержать ее. Например, в качестве источника данных может выступать `IEnumerable<Student>`, в котором каждый объект учащегося представляет собой последовательность, содержащую список полученных оценок. Для доступа к внутреннему списку каждого элемента `Student` можно использовать составные предложения `from`. Этот способ аналогичен использованию вложенных предложений [foreach](foreach-in.md). Для фильтрации результатов можно добавить предложения [where](partial-method.md) или [orderby](orderby-clause.md) в любое из предложений `from`. В следующем примере показана последовательность объектов `Student`, каждый из которых содержит внутренний список `List` с целыми числами, соответствующими оценкам. Для доступа к внутреннему списку следует использовать предложение `from`. При необходимости вы можете вставлять предложения между двумя предложениями `from`.

[!code-csharp[cscsrefQueryKeywords#2](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsCsrefQueryKeywords/CS/From.cs#2)]

## <a name="using-multiple-from-clauses-to-perform-joins"></a>Использование нескольких предложений from для выполнения соединений

Составное предложение `from` используется для доступа к внутренним коллекциям в одном источнике данных. Тем не менее запрос может содержать несколько предложений `from`, которые создают дополнительные запросы из независимых источников данных. Такой способ позволяет выполнять определенные типы операций соединения, которые нельзя выполнить с помощью [предложения join](join-clause.md).

В следующем примере показано, как можно выполнить полное перекрестное соединение двух источников данных с помощью двух предложений `from`.

[!code-csharp[cscsrefQueryKeywords#3](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsCsrefQueryKeywords/CS/From.cs#3)]

Дополнительные сведения об операциях соединения, использующих несколько предложений `from`, см. в разделе [Выполнение левых внешних соединений](../../linq/perform-left-outer-joins.md).

## <a name="see-also"></a>См. также

- [Ключевые слова запроса (LINQ)](query-keywords.md)
- [LINQ](../../linq/index.md)
