---
title: "Использование индексаторов (Руководство по программированию в C#) | Microsoft Docs"
ms.date: "2015-07-20"
ms.prod: ".net"
ms.technology: 
  - "devlang-csharp"
ms.topic: "article"
dev_langs: 
  - "CSharp"
helpviewer_keywords: 
  - "индексаторы [C#], об индексаторах"
ms.assetid: df70e1a2-3ce3-4aba-ad80-4b2f3538699f
caps.latest.revision: 30
author: "BillWagner"
ms.author: "wiwagn"
caps.handback.revision: 30
---
# Использование индексаторов (Руководство по программированию в C#)
Индексаторы являются синтаксическим удобством, позволяющим создавать [класс](../../../csharp/language-reference/keywords/class.md), [структуру](../../../csharp/language-reference/keywords/struct.md) или [интерфейс](../../../csharp/language-reference/keywords/interface.md), доступ к которому клиентские приложения получают, как к массиву.  Чаще всего индексаторы реализуются в типах, главная цель которых — инкапсуляция внутренней коллекции или массива.  Например, предположим, что имеется класс с именем "TempRecord", представляющий набор температур по шкале Фаренгейта, полученных в 10 различных моментов в течение 24 часов.  Класс содержит массив с именем "temps" типа "float", представляющий температуры, и <xref:System.DateTime>, представляющий дату регистрации температур.  Путем внедрения в этот класс индексатора клиенты получат доступ к температурам в экземпляре TempRecord с помощью `float temp = tr[4]`, а не `float temp = tr.temps[4]`.  Использование индексатора не только упрощает синтаксис для клиентских приложений, но и делает класс и его назначение интуитивно понятными для других разработчиков.  
  
 Чтобы объявить индексатор для класса или структуры, используйте ключевое слово [this](../../../csharp/language-reference/keywords/this.md) как показано в следующем примере:  
  
```  
public int this[int index]    // Indexer declaration  
{  
    // get and set accessors  
}  
  
```  
  
## Заметки  
 Тип индексатора и типы его параметров должны иметь по крайней мере такой же уровень доступности, как и сам индексатор.  Дополнительные сведения об уровнях доступности см. в разделе [Модификаторы доступа](../../../csharp/language-reference/keywords/access-modifiers.md).  
  
 Дополнительные сведения об использовании индексаторов с интерфейсом см. в разделе [Индексаторы интерфейсов](../../../csharp/programming-guide/indexers/indexers-in-interfaces.md).  
  
 Сигнатура индексатора состоит из количества и типов его формальных параметров.  В сигнатуру не включается тип индексатора или имена формальных параметров.  Если в одном классе объявлено несколько индексаторов, у них должны быть различные сигнатуры.  
  
 Значение индексатора не классифицируется как переменная, поэтому не допускается передача значения индексатора как параметра [ref](../../../csharp/language-reference/keywords/ref.md) или [out](../../../csharp/language-reference/keywords/out.md).  
  
 Чтобы предоставить индексатору имя, которое можно использовать в других языках, используйте в объявлении атрибут `name`.  Примеры.  
  
```  
[System.Runtime.CompilerServices.IndexerName("TheItem")]  
public int this [int index]   // Indexer declaration  
{  
}  
```  
  
 Этот индексатор будет иметь имя `TheItem`.  Если атрибут имени не предоставлен, используется имя по умолчанию `Item`.  
  
## Пример 1  
  
### Описание  
 В следующем примере показано, как объявить закрытое поле массива `temps` и индексатор.  Индексатор обеспечивает прямой доступ к экземпляру `tempRecord[i]`.  В качестве альтернативы применению индексатора можно объявить массив как член типа [public](../../../csharp/language-reference/keywords/public.md) осуществлять прямой доступ к его членам `tempRecord.temps[i]`.  
  
 Обратите внимание, что при вычислении доступа индексатора, например, в инструкции `Console.Write` вызывается метод доступа [get](../../../csharp/language-reference/keywords/get.md).  Таким образом, если не существует метода доступа `get`, происходит ошибка времени компиляции.  
  
### Код  
 [!code-cs[csProgGuideIndexers#1](../../../csharp/programming-guide/classes-and-structs/codesnippet/CSharp/using-indexers_1.cs)]  
  
## Индексирование с использованием других значений  
 C\# не ограничивает тип индексатора типом "integer".  Например, может оказаться полезным использовании в индексаторе строки.  Такой индексатор можно реализовать, выполнив поиск строки в коллекции и возвратив соответствующее значением.  Методы доступа можно перегружать, версии типа "string" и "integer" могут сосуществовать.  
  
## Пример 2  
  
### Описание  
 В этом примере объявляется класс, в котором хранятся дни недели.  Объявляется метод доступа `get`, который принимает строку \(название дня недели\) и возвращает соответствующее целое число.  Например, воскресенье возвращает 0, понедельник возвращает 1 и т. д.  
  
### Код  
 [!code-cs[csProgGuideIndexers#2](../../../csharp/programming-guide/classes-and-structs/codesnippet/CSharp/using-indexers_2.cs)]  
  
## Надежное программирование  
 Существуют два основных способа повышения надежности и безопасности индексаторов.  
  
-   Внедрите стратегию обработки ошибок на тот случай, если код клиента передаст недопустимое значение индекса.  В первом примере, приведенном ранее в этом разделе, класс "TempRecord" предоставляет свойство "Length", позволяющее коду клиента проверить введенные данные перед тем, как передать их индексатору.  Также можно поместить код обработки ошибки в индексатор.  Задокументируйте для пользователей любые исключения, которые были созданы внутри метода доступа индексатора.  
  
-   Установите максимальное обоснованное ограничение доступности для методов доступа `get` и [set](../../../csharp/language-reference/keywords/set.md).  Это особенно важно для метода доступа `set`.  Дополнительные сведения см. в разделе [Ограничение доступности методов доступа](../../../csharp/programming-guide/classes-and-structs/restricting-accessor-accessibility.md).  
  
## См. также  
 [Руководство по программированию на C\#](../../../csharp/programming-guide/index.md)   
 [Индексаторы](../../../csharp/programming-guide/indexers/index.md)   
 [Свойства](../../../csharp/programming-guide/classes-and-structs/properties.md)