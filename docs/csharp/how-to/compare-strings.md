---
title: Практическое руководство. Сравнение строк (руководство по C#)
description: Сведения о том, как сравнивать и упорядочивать строковые значения с учетом или без учета регистра и порядка для определенного языка.
ms.date: 10/03/2018
helpviewer_keywords:
- strings [C#], comparison
- comparing strings [C#]
ms.openlocfilehash: dda3ec8cb6a0131867e6ea3bb0cf7199d86058ff
ms.sourcegitcommit: f348c84443380a1959294cdf12babcb804cfa987
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/12/2019
ms.locfileid: "73973325"
---
# <a name="how-to-compare-strings-in-c"></a><span data-ttu-id="6df7b-103">Сравнение строк в C\#</span><span class="sxs-lookup"><span data-stu-id="6df7b-103">How to compare strings in C\#</span></span>

<span data-ttu-id="6df7b-104">Сравнивая строки, вы хотите ответить на один из двух вопросов: "Равны ли две эти строки?"</span><span class="sxs-lookup"><span data-stu-id="6df7b-104">You compare strings to answer one of two questions: "Are these two strings equal?"</span></span> <span data-ttu-id="6df7b-105">или "В каком порядке должны следовать эти строки при их сортировке?".</span><span class="sxs-lookup"><span data-stu-id="6df7b-105">or "In what order should these strings be placed when sorting them?"</span></span>

<span data-ttu-id="6df7b-106">Однако эту задачу осложняют факторы, влияющие на сравнение строк:</span><span class="sxs-lookup"><span data-stu-id="6df7b-106">Those two questions are complicated by factors that affect string comparisons:</span></span>

- <span data-ttu-id="6df7b-107">Вы можете выбрать порядковое или лингвистическое сравнение.</span><span class="sxs-lookup"><span data-stu-id="6df7b-107">You can choose an ordinal or linguistic comparison.</span></span>
- <span data-ttu-id="6df7b-108">Вы можете указать, учитывается ли регистр.</span><span class="sxs-lookup"><span data-stu-id="6df7b-108">You can choose if case matters.</span></span>
- <span data-ttu-id="6df7b-109">Вы можете выбрать сравнения для конкретного языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="6df7b-109">You can choose culture-specific comparisons.</span></span>
- <span data-ttu-id="6df7b-110">Лингвистические сравнения зависят от языка и региональных параметров, а также от используемой платформы.</span><span class="sxs-lookup"><span data-stu-id="6df7b-110">Linguistic comparisons are culture and platform-dependent.</span></span>

[!INCLUDE[interactive-note](~/includes/csharp-interactive-note.md)]

<span data-ttu-id="6df7b-111">При сравнении строк вы определяете их порядок.</span><span class="sxs-lookup"><span data-stu-id="6df7b-111">When you compare strings, you define an order among them.</span></span> <span data-ttu-id="6df7b-112">Сравнения используются для сортировки последовательности строк.</span><span class="sxs-lookup"><span data-stu-id="6df7b-112">Comparisons are used to sort a sequence of strings.</span></span> <span data-ttu-id="6df7b-113">Если последовательность имеет известный порядок, это упрощает поиск как для программного обеспечения, так и для пользователей.</span><span class="sxs-lookup"><span data-stu-id="6df7b-113">Once the sequence is in a known order, it is easier to search, both for software and for humans.</span></span> <span data-ttu-id="6df7b-114">Другие сравнения могут проверять совпадение строк.</span><span class="sxs-lookup"><span data-stu-id="6df7b-114">Other comparisons may check if strings are the same.</span></span> <span data-ttu-id="6df7b-115">Эти проверки тождественности похожи на проверки равенства, но позволяют игнорировать некоторые различия, например различия в регистре.</span><span class="sxs-lookup"><span data-stu-id="6df7b-115">These sameness checks are similar to equality, but some differences, such as case differences, may be ignored.</span></span>

## <a name="default-ordinal-comparisons"></a><span data-ttu-id="6df7b-116">Порядковые сравнения по умолчанию</span><span class="sxs-lookup"><span data-stu-id="6df7b-116">Default ordinal comparisons</span></span>

<span data-ttu-id="6df7b-117">Ниже представлены самые распространенные операции по умолчанию:</span><span class="sxs-lookup"><span data-stu-id="6df7b-117">By default, the most common operations:</span></span>

- <xref:System.String.CompareTo%2A?displayProperty=nameWithType>
- <xref:System.String.Equals%2A?displayProperty=nameWithType>
- <span data-ttu-id="6df7b-118"><xref:System.String.op_Equality%2A?displayProperty=nameWithType> и <xref:System.String.op_Inequality%2A?displayProperty=nameWithType>, т. е. операторы [равенства `==` и `!=`](../language-reference/operators/equality-operators.md#string-equality) соответственно</span><span class="sxs-lookup"><span data-stu-id="6df7b-118"><xref:System.String.op_Equality%2A?displayProperty=nameWithType> and <xref:System.String.op_Inequality%2A?displayProperty=nameWithType>, that is, [equality operators `==` and `!=`](../language-reference/operators/equality-operators.md#string-equality), respectively</span></span>

<span data-ttu-id="6df7b-119">выполняют порядковое сравнение с учетом регистра и используют текущие значения языка и региональных параметров при необходимости.</span><span class="sxs-lookup"><span data-stu-id="6df7b-119">perform a case-sensitive ordinal comparison and, if necessary, use the current culture.</span></span> <span data-ttu-id="6df7b-120">Это показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="6df7b-120">The following example demonstrates that:</span></span>

[!code-csharp-interactive[Comparing strings using an ordinal comparison](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#1)]

<span data-ttu-id="6df7b-121">При порядковых сравнениях строк по умолчанию лингвистические правила не учитываются.</span><span class="sxs-lookup"><span data-stu-id="6df7b-121">The default ordinal comparison doesn't take linguistic rules into account when comparing strings.</span></span> <span data-ttu-id="6df7b-122">В них сравнивается двоичное значение каждого объекта <xref:System.Char> в двух строках.</span><span class="sxs-lookup"><span data-stu-id="6df7b-122">It compares the binary value of each <xref:System.Char> object in two strings.</span></span> <span data-ttu-id="6df7b-123">Таким образом, в порядковом сравнении по умолчанию также учитывается регистр.</span><span class="sxs-lookup"><span data-stu-id="6df7b-123">As a result, the default ordinal comparison is also case-sensitive.</span></span>

<span data-ttu-id="6df7b-124">Обратите внимание, что проверка на равенство с использованием <xref:System.String.Equals%2A?displayProperty=nameWithType>, а также операторов `==` и `!=` отличается от сравнения строк с использованием методов <xref:System.String.CompareTo%2A?displayProperty=nameWithType> и <xref:System.String.Compare(System.String,System.String)?displayProperty=nameWithType)>.</span><span class="sxs-lookup"><span data-stu-id="6df7b-124">Note that the test for equality with <xref:System.String.Equals%2A?displayProperty=nameWithType> and the `==` and `!=` operators differs from string comparison using the <xref:System.String.CompareTo%2A?displayProperty=nameWithType> and <xref:System.String.Compare(System.String,System.String)?displayProperty=nameWithType)> methods.</span></span> <span data-ttu-id="6df7b-125">Хотя в проверках на равенство выполняется порядковое сравнение с учетом регистра, метод сравнения выполняет сравнение с учетом регистра, с учетом языка и региональных параметров с использованием текущего значения языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="6df7b-125">While the tests for equality perform a case-sensitive ordinal comparison, the comparison methods perform a case-sensitive, culture-sensitive comparison using the current culture.</span></span> <span data-ttu-id="6df7b-126">Поскольку методы сравнения по умолчанию часто выполняют сравнения различных типов, рекомендуется всегда четко определять назначение кода путем вызова перегрузки, которая явно указывает тип выполняемого сравнения.</span><span class="sxs-lookup"><span data-stu-id="6df7b-126">Because the default comparison methods often perform different types of comparisons, we recommend that you always make the intent of your code clear by calling an overload that explicitly specifies the type of comparison to perform.</span></span>

## <a name="case-insensitive-ordinal-comparisons"></a><span data-ttu-id="6df7b-127">Порядковые сравнения без учета регистра</span><span class="sxs-lookup"><span data-stu-id="6df7b-127">Case-insensitive ordinal comparisons</span></span>

<span data-ttu-id="6df7b-128">Метод <xref:System.String.Equals(System.String,System.StringComparison)?displayProperty=nameWithType> позволяет указать значение <xref:System.StringComparison> для объекта <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="6df7b-128">The <xref:System.String.Equals(System.String,System.StringComparison)?displayProperty=nameWithType> method enables you to specify a <xref:System.StringComparison> value of <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType></span></span>
<span data-ttu-id="6df7b-129">для порядкового сравнения без учета регистра.</span><span class="sxs-lookup"><span data-stu-id="6df7b-129">for a case-insensitive ordinal comparison.</span></span> <span data-ttu-id="6df7b-130">Также имеется статический метод <xref:System.String.Compare(System.String,System.String,System.StringComparison)?displayProperty=nameWithType>, позволяющий проводить порядковое сравнение без учета регистра, если указать значение <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> для аргумента <xref:System.StringComparison>.</span><span class="sxs-lookup"><span data-stu-id="6df7b-130">There is also a static <xref:System.String.Compare(System.String,System.String,System.StringComparison)?displayProperty=nameWithType> method that performs a case-insensitive ordinal comparison if you specify a value of <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> for the <xref:System.StringComparison> argument.</span></span> <span data-ttu-id="6df7b-131">Это показано в следующем коде:</span><span class="sxs-lookup"><span data-stu-id="6df7b-131">These are shown in the following code:</span></span>

[!code-csharp-interactive[Comparing strings ignoring case](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#2)]

<span data-ttu-id="6df7b-132">При выполнении порядкового сравнения без учета регистра эти методы используют соглашения о регистре для [инвариантного языка и региональных параметров](xref:System.Globalization.CultureInfo.InvariantCulture).</span><span class="sxs-lookup"><span data-stu-id="6df7b-132">When performing a case-insensitive ordinal comparison, these methods use the casing conventions of the [invariant culture](xref:System.Globalization.CultureInfo.InvariantCulture).</span></span>

## <a name="linguistic-comparisons"></a><span data-ttu-id="6df7b-133">Лингвистические сравнения</span><span class="sxs-lookup"><span data-stu-id="6df7b-133">Linguistic comparisons</span></span>

<span data-ttu-id="6df7b-134">Строки могут быть упорядочены с использованием лингвистических правил для текущих значений языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="6df7b-134">Strings can also be ordered using linguistic rules for the current culture.</span></span>
<span data-ttu-id="6df7b-135">Иногда это называется порядком сортировки слов.</span><span class="sxs-lookup"><span data-stu-id="6df7b-135">This is sometimes referred to as "word sort order."</span></span> <span data-ttu-id="6df7b-136">При лингвистическом сравнении некоторые символы Юникода, отличные от алфавитно-цифровых, могут иметь особые весовые коэффициенты.</span><span class="sxs-lookup"><span data-stu-id="6df7b-136">When you perform a linguistic comparison, some nonalphanumeric Unicode characters might have special weights assigned.</span></span> <span data-ttu-id="6df7b-137">Например, дефис "-" может иметь очень низкий весовой коэффициент, чтобы слова "co-op" и "coop" находились рядом друг с другом в порядке сортировки.</span><span class="sxs-lookup"><span data-stu-id="6df7b-137">For example, the hyphen "-" may have a very small weight assigned to it so that "co-op" and "coop" appear next to each other in sort order.</span></span> <span data-ttu-id="6df7b-138">Кроме того, некоторые символы Юникода могут быть эквивалентны последовательности экземпляров <xref:System.Char>.</span><span class="sxs-lookup"><span data-stu-id="6df7b-138">In addition, some Unicode characters may be equivalent to a sequence of <xref:System.Char> instances.</span></span> <span data-ttu-id="6df7b-139">В следующем примере используется фраза "Они танцуют на улице."</span><span class="sxs-lookup"><span data-stu-id="6df7b-139">The following example uses the phrase "They dance in the street."</span></span> <span data-ttu-id="6df7b-140">на немецком языке с буквами "ss" (U+0073 U+0073) в одной строке и буквой "ß" (U+00DF) в другой.</span><span class="sxs-lookup"><span data-stu-id="6df7b-140">in German with the "ss" (U+0073 U+0073) in one string and 'ß' (U+00DF) in another.</span></span> <span data-ttu-id="6df7b-141">Лингвистически (в Windows) буквы "ss" равнозначны немецкому символу эсцет "ß" в языках "en-US" и "de-DE".</span><span class="sxs-lookup"><span data-stu-id="6df7b-141">Linguistically (in Windows), "ss" is equal to the German Esszet: 'ß' character in both the "en-US" and "de-DE" cultures.</span></span>

[!code-csharp-interactive[Comparing strings using linguistic rules](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#3)]

<span data-ttu-id="6df7b-142">Этот пример демонстрирует зависимость операций лингвистического сравнения от операционной системы.</span><span class="sxs-lookup"><span data-stu-id="6df7b-142">This sample demonstrates the operating system-dependent nature of linguistic comparisons.</span></span> <span data-ttu-id="6df7b-143">Для интерактивного окна используется узел Linux.</span><span class="sxs-lookup"><span data-stu-id="6df7b-143">The host for the interactive window is a Linux host.</span></span> <span data-ttu-id="6df7b-144">Лингвистические и порядковые сравнения дают одинаковые результаты.</span><span class="sxs-lookup"><span data-stu-id="6df7b-144">The linguistic and ordinal comparisons produce the same results.</span></span> <span data-ttu-id="6df7b-145">Если запустить этот пример на узле Windows, отображаются следующие выходные данные:</span><span class="sxs-lookup"><span data-stu-id="6df7b-145">If you ran this same sample on a Windows host, you would see the following output:</span></span>

```console
<coop> is less than <co-op> using invariant culture
<coop> is greater than <co-op> using ordinal comparison
<coop> is less than <cop> using invariant culture
<coop> is less than <cop> using ordinal comparison
<co-op> is less than <cop> using invariant culture
<co-op> is less than <cop> using ordinal comparison
```

<span data-ttu-id="6df7b-146">В Windows порядок сортировки "cop", "coop" и "co-op" изменяется при переходе от лингвистического сравнения к порядковому.</span><span class="sxs-lookup"><span data-stu-id="6df7b-146">On Windows, the sort order of "cop", "coop", and "co-op" change when you change from a linguistic comparison to an ordinal comparison.</span></span> <span data-ttu-id="6df7b-147">Два предложения на немецком языке также сравниваются по-разному при использовании разных типов сравнения.</span><span class="sxs-lookup"><span data-stu-id="6df7b-147">The two German sentences also compare differently using the different comparison types.</span></span>

## <a name="comparisons-using-specific-cultures"></a><span data-ttu-id="6df7b-148">Сравнения с использованием определенных языков и региональных параметров</span><span class="sxs-lookup"><span data-stu-id="6df7b-148">Comparisons using specific cultures</span></span>

<span data-ttu-id="6df7b-149">Этот пример сохраняет объекты <xref:System.Globalization.CultureInfo> для языков "en-US" и "de-DE".</span><span class="sxs-lookup"><span data-stu-id="6df7b-149">This sample stores <xref:System.Globalization.CultureInfo> objects for the en-US and de-DE cultures.</span></span>
<span data-ttu-id="6df7b-150">Сравнения выполняются с использованием объекта <xref:System.Globalization.CultureInfo>, чтобы учесть язык и региональные параметры.</span><span class="sxs-lookup"><span data-stu-id="6df7b-150">The comparisons are performed using a <xref:System.Globalization.CultureInfo> object to ensure a culture-specific comparison.</span></span>

<span data-ttu-id="6df7b-151">Используемые значения языка и региональных параметров влияют на операции лингвистического сравнения.</span><span class="sxs-lookup"><span data-stu-id="6df7b-151">The culture used affects linguistic comparisons.</span></span> <span data-ttu-id="6df7b-152">В следующем примере показаны результаты сравнения двух предложений на немецком с использованием языка и региональных параметров "en US" и "de-DE":</span><span class="sxs-lookup"><span data-stu-id="6df7b-152">The following example shows the results of comparing the two German sentences using the "en-US" culture and the "de-DE" culture:</span></span>

[!code-csharp-interactive[Comparing strings across cultures](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#4)]

<span data-ttu-id="6df7b-153">Сравнения с учетом языка и региональных параметров обычно используются для сравнения и сортировки строк, вводимых пользователями.</span><span class="sxs-lookup"><span data-stu-id="6df7b-153">Culture-sensitive comparisons are typically used to compare and sort strings input by users with other strings input by users.</span></span> <span data-ttu-id="6df7b-154">Символы и правила сортировки этих строк могут различаться в зависимости от языкового стандарта компьютера пользователя.</span><span class="sxs-lookup"><span data-stu-id="6df7b-154">The characters and sorting conventions of these strings might vary depending on the locale of the user's computer.</span></span> <span data-ttu-id="6df7b-155">Даже строки, содержащие идентичные символы, могут быть отсортированы по-разному, в зависимости от языка и региональных параметров текущего потока.</span><span class="sxs-lookup"><span data-stu-id="6df7b-155">Even strings that contain identical characters might sort differently depending on the culture of the current thread.</span></span> <span data-ttu-id="6df7b-156">Кроме того, попробуйте запустить этот пример кода локально на компьютере с Windows, и вы получите следующие результаты:</span><span class="sxs-lookup"><span data-stu-id="6df7b-156">In addition, try this sample code locally on a Windows machine, and you will the following results:</span></span>

```console
<coop> is less than <co-op> using en-US culture
<coop> is greater than <co-op> using ordinal comparison
<coop> is less than <cop> using en-US culture
<coop> is less than <cop> using ordinal comparison
<co-op> is less than <cop> using en-US culture
<co-op> is less than <cop> using ordinal comparison
```

<span data-ttu-id="6df7b-157">Лингвистические сравнения зависят от текущих значений языка и региональных параметров, а также от операционной системы.</span><span class="sxs-lookup"><span data-stu-id="6df7b-157">Linguistic comparisons are dependent on the current culture, and are OS dependent.</span></span> <span data-ttu-id="6df7b-158">Это необходимо учитывать при работе со строковыми сравнениями.</span><span class="sxs-lookup"><span data-stu-id="6df7b-158">You must take that into account when you work with string comparisons.</span></span>

## <a name="linguistic-sorting-and-searching-strings-in-arrays"></a><span data-ttu-id="6df7b-159">Лингвистическая сортировка и поиск строк в массивах</span><span class="sxs-lookup"><span data-stu-id="6df7b-159">Linguistic sorting and searching strings in arrays</span></span>

<span data-ttu-id="6df7b-160">Приведенные ниже примеры показывают, как сортировать и искать строки в массиве с помощью лингвистического сравнения, зависящего от текущих значений языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="6df7b-160">The following examples show how to sort and search for strings in an array using a linguistic comparison dependent on the current culture.</span></span> <span data-ttu-id="6df7b-161">Используйте статические методы <xref:System.Array>, которые принимают параметр <xref:System.StringComparer?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6df7b-161">You use the static <xref:System.Array> methods that take a <xref:System.StringComparer?displayProperty=nameWithType> parameter.</span></span>

<span data-ttu-id="6df7b-162">В этом примере показано, как сортировать массив строк с использованием текущих значений языка и региональных параметров:</span><span class="sxs-lookup"><span data-stu-id="6df7b-162">This example shows how to sort an array of strings using the current culture:</span></span>

[!code-csharp-interactive[Sorting an array of strings](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#5)]

<span data-ttu-id="6df7b-163">После сортировки массива можно выполнить поиск записей с помощью двоичного поиска.</span><span class="sxs-lookup"><span data-stu-id="6df7b-163">Once the array is sorted, you can search for entries using a binary search.</span></span> <span data-ttu-id="6df7b-164">Двоичный поиск начинается с середины коллекции, чтобы определить, какая половина коллекции содержит искомую строку.</span><span class="sxs-lookup"><span data-stu-id="6df7b-164">A binary search starts in the middle of the collection to determine which half of the collection would contain the sought string.</span></span> <span data-ttu-id="6df7b-165">Каждое последующее сравнение делит оставшуюся часть коллекции пополам.</span><span class="sxs-lookup"><span data-stu-id="6df7b-165">Each subsequent comparison subdivides the remaining part of the collection in half.</span></span>  <span data-ttu-id="6df7b-166">Массив сортируется с использованием <xref:System.StringComparer.CurrentCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6df7b-166">The array is sorted using the <xref:System.StringComparer.CurrentCulture?displayProperty=nameWithType>.</span></span> <span data-ttu-id="6df7b-167">Локальная функция `ShowWhere` отображает сведения о том, где была найдена строка.</span><span class="sxs-lookup"><span data-stu-id="6df7b-167">The local function `ShowWhere` displays information about where the string was found.</span></span> <span data-ttu-id="6df7b-168">Если строка не найдена, возвращаемое значение указывает, где бы оно находилось, если было бы найдено.</span><span class="sxs-lookup"><span data-stu-id="6df7b-168">If the string was not found, the returned value indicates where it would be if it were found.</span></span>

[!code-csharp-interactive[Searching in a sorted array](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#6)]

## <a name="ordinal-sorting-and-searching-in-collections"></a><span data-ttu-id="6df7b-169">Порядковая сортировка и поиск в коллекциях</span><span class="sxs-lookup"><span data-stu-id="6df7b-169">Ordinal sorting and searching in collections</span></span>

<span data-ttu-id="6df7b-170">Следующий код использует класс коллекции <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> для хранения строк.</span><span class="sxs-lookup"><span data-stu-id="6df7b-170">The following code uses the <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> collection class to store strings.</span></span> <span data-ttu-id="6df7b-171">Строки сортируются с помощью метода <xref:System.Collections.Generic.List%601.Sort%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6df7b-171">The strings are sorted using the <xref:System.Collections.Generic.List%601.Sort%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="6df7b-172">Этому методу нужен делегат, который сравнивает и упорядочивает две строки.</span><span class="sxs-lookup"><span data-stu-id="6df7b-172">This method needs a delegate that compares and orders two strings.</span></span> <span data-ttu-id="6df7b-173">Метод <xref:System.String.CompareTo%2A?displayProperty=nameWithType> предоставляет эту функцию сравнения.</span><span class="sxs-lookup"><span data-stu-id="6df7b-173">The <xref:System.String.CompareTo%2A?displayProperty=nameWithType> method provides that comparison function.</span></span> <span data-ttu-id="6df7b-174">Запустите пример и следите за порядком.</span><span class="sxs-lookup"><span data-stu-id="6df7b-174">Run the sample and observe the order.</span></span> <span data-ttu-id="6df7b-175">Эта операция сортировки использует порядковую сортировку с учетом регистра.</span><span class="sxs-lookup"><span data-stu-id="6df7b-175">This sort operation uses an ordinal case sensitive sort.</span></span> <span data-ttu-id="6df7b-176">Можно использовать статические методы <xref:System.String.Compare%2A?displayProperty=nameWithType>, чтобы указать разные правила сравнения.</span><span class="sxs-lookup"><span data-stu-id="6df7b-176">You would use the static <xref:System.String.Compare%2A?displayProperty=nameWithType> methods to specify different comparison rules.</span></span>

[!code-csharp-interactive[Sorting a list of strings](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#7)]

<span data-ttu-id="6df7b-177">После сортировки по списку строк можно осуществлять двоичный поиск.</span><span class="sxs-lookup"><span data-stu-id="6df7b-177">Once sorted, the list of strings can be searched using a binary search.</span></span> <span data-ttu-id="6df7b-178">Приведенный ниже пример описывает поиск в отсортированном списке с использованием той же функции сравнения.</span><span class="sxs-lookup"><span data-stu-id="6df7b-178">The following sample shows how to search the sorted listed using the same comparison function.</span></span> <span data-ttu-id="6df7b-179">Локальная функция `ShowWhere` показывает, где находится или находился бы искомый текст:</span><span class="sxs-lookup"><span data-stu-id="6df7b-179">The local function `ShowWhere` shows where the sought text is or would be:</span></span>

[!code-csharp-interactive[csProgGuideStrings#11](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#8)]

<span data-ttu-id="6df7b-180">Всегда используйте один и тот же тип сравнения для сортировки и поиска.</span><span class="sxs-lookup"><span data-stu-id="6df7b-180">Always make sure to use the same type of comparison for sorting and searching.</span></span> <span data-ttu-id="6df7b-181">Использование разных типов сравнения приводит к неожиданным результатам.</span><span class="sxs-lookup"><span data-stu-id="6df7b-181">Using different comparison types for sorting and searching produces unexpected results.</span></span>

<span data-ttu-id="6df7b-182">Классы коллекций, такие как <xref:System.Collections.Hashtable?displayProperty=nameWithType>, <xref:System.Collections.Generic.Dictionary%602?displayProperty=nameWithType>, и <xref:System.Collections.Generic.List%601?displayProperty=nameWithType>, имеют конструкторы, принимающие параметр <xref:System.StringComparer?displayProperty=nameWithType>, если типом элементов или ключей является `string`.</span><span class="sxs-lookup"><span data-stu-id="6df7b-182">Collection classes such as <xref:System.Collections.Hashtable?displayProperty=nameWithType>, <xref:System.Collections.Generic.Dictionary%602?displayProperty=nameWithType>, and <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> have constructors that take a <xref:System.StringComparer?displayProperty=nameWithType> parameter when the type of the elements or keys is `string`.</span></span> <span data-ttu-id="6df7b-183">В целом, по возможности следует использовать эти конструкторы и задавать либо <xref:System.StringComparer.Ordinal?displayProperty=nameWithType>, либо <xref:System.StringComparer.OrdinalIgnoreCase?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6df7b-183">In general, you should use these constructors whenever possible, and specify either <xref:System.StringComparer.Ordinal?displayProperty=nameWithType> or <xref:System.StringComparer.OrdinalIgnoreCase?displayProperty=nameWithType>.</span></span>

## <a name="reference-equality-and-string-interning"></a><span data-ttu-id="6df7b-184">Равенство ссылок и интернирование строк</span><span class="sxs-lookup"><span data-stu-id="6df7b-184">Reference equality and string interning</span></span>

<span data-ttu-id="6df7b-185">Ни один из примеров не использовал <xref:System.Object.ReferenceEquals%2A>.</span><span class="sxs-lookup"><span data-stu-id="6df7b-185">None of the samples have used <xref:System.Object.ReferenceEquals%2A>.</span></span> <span data-ttu-id="6df7b-186">Этот метод определяет, являются ли две строки одним объектом.</span><span class="sxs-lookup"><span data-stu-id="6df7b-186">This method determines if two strings are the same object.</span></span> <span data-ttu-id="6df7b-187">Это может привести к непредсказуемым результатам при сравнении строк.</span><span class="sxs-lookup"><span data-stu-id="6df7b-187">This can lead to inconsistent results in string comparisons.</span></span> <span data-ttu-id="6df7b-188">Следующий пример демонстрирует функцию *интернирования строк* в C#.</span><span class="sxs-lookup"><span data-stu-id="6df7b-188">The following example demonstrates the *string interning* feature of C#.</span></span> <span data-ttu-id="6df7b-189">При объявлении программой двух или более идентичных переменных строк компилятор сохраняет их в одном расположении.</span><span class="sxs-lookup"><span data-stu-id="6df7b-189">When a program declares two or more identical string variables, the compiler stores them all in the same location.</span></span> <span data-ttu-id="6df7b-190">Вызвав метод <xref:System.Object.ReferenceEquals%2A>, можно увидеть, что две строки фактически ссылаются на один и тот же объект в памяти.</span><span class="sxs-lookup"><span data-stu-id="6df7b-190">By calling the <xref:System.Object.ReferenceEquals%2A> method, you can see that the two strings actually refer to the same object in memory.</span></span> <span data-ttu-id="6df7b-191">Чтобы избежать интернирования, используйте метод <xref:System.String.Copy%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6df7b-191">Use the <xref:System.String.Copy%2A?displayProperty=nameWithType> method to avoid interning.</span></span> <span data-ttu-id="6df7b-192">После копирования две строки имеют разное расположение хранения, хотя и имеют одинаковое значение.</span><span class="sxs-lookup"><span data-stu-id="6df7b-192">After the copy has been made, the two strings have different storage locations, even though they have the same value.</span></span> <span data-ttu-id="6df7b-193">Запустите следующий пример, показывающий, что строки `a` и `b` *интернированы*, находятся в одном хранилище.</span><span class="sxs-lookup"><span data-stu-id="6df7b-193">Run the following sample to show that strings `a` and `b` are *interned* meaning they share the same storage.</span></span> <span data-ttu-id="6df7b-194">Строки `a` и `c` таковыми не являются.</span><span class="sxs-lookup"><span data-stu-id="6df7b-194">The strings `a` and `c` are not.</span></span>

[!code-csharp-interactive[Demonstrating string interning](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#9)]

> [!NOTE]
> <span data-ttu-id="6df7b-195">При проверке строк на равенство нужно использовать методы, которые явно указывают, какой вид сравнения следует выполнить.</span><span class="sxs-lookup"><span data-stu-id="6df7b-195">When you test for equality of strings, you should use the methods that explicitly specify what kind of comparison you intend to perform.</span></span> <span data-ttu-id="6df7b-196">Это делает код намного более понятным и удобочитаемым.</span><span class="sxs-lookup"><span data-stu-id="6df7b-196">Your code is much more maintainable and readable.</span></span> <span data-ttu-id="6df7b-197">Используйте перегрузки методов классов <xref:System.String?displayProperty=nameWithType> и <xref:System.Array?displayProperty=nameWithType>, которые принимают параметр перечисления <xref:System.StringComparison>.</span><span class="sxs-lookup"><span data-stu-id="6df7b-197">Use the overloads of the methods of the <xref:System.String?displayProperty=nameWithType> and <xref:System.Array?displayProperty=nameWithType> classes that take a <xref:System.StringComparison> enumeration parameter.</span></span> <span data-ttu-id="6df7b-198">Это позволяет указать тип выполняемого сравнения.</span><span class="sxs-lookup"><span data-stu-id="6df7b-198">You specify which type of comparison to perform.</span></span> <span data-ttu-id="6df7b-199">Старайтесь избегать использования операторов `==` и `!=` при проверке на равенство.</span><span class="sxs-lookup"><span data-stu-id="6df7b-199">Avoid using the `==` and `!=` operators when you test for equality.</span></span> <span data-ttu-id="6df7b-200">Методы экземпляра <xref:System.String.CompareTo%2A?displayProperty=nameWithType> всегда выполняют порядковое сравнение с учетом регистра.</span><span class="sxs-lookup"><span data-stu-id="6df7b-200">The <xref:System.String.CompareTo%2A?displayProperty=nameWithType> instance methods always perform an ordinal case-sensitive comparison.</span></span> <span data-ttu-id="6df7b-201">Они предназначены, прежде всего, для упорядочивания строк в алфавитном порядке.</span><span class="sxs-lookup"><span data-stu-id="6df7b-201">They are primarily suited for ordering strings alphabetically.</span></span>

<span data-ttu-id="6df7b-202">Вы можете интернировать строку или получить ссылку на существующую интернированную строку, вызвав метод <xref:System.String.Intern%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6df7b-202">You can intern a string or retrieve a reference to an existing interned string by calling the <xref:System.String.Intern%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="6df7b-203">Чтобы определить, является ли строка интернированной, вызовите метод <xref:System.String.IsInterned%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="6df7b-203">To determine whether a string is interned, call the <xref:System.String.IsInterned%2A?displayProperty=nameWithType> method.</span></span>

## <a name="see-also"></a><span data-ttu-id="6df7b-204">См. также</span><span class="sxs-lookup"><span data-stu-id="6df7b-204">See also</span></span>

- <xref:System.Globalization.CultureInfo?displayProperty=nameWithType>
- <xref:System.StringComparer?displayProperty=nameWithType>
- [<span data-ttu-id="6df7b-205">Строки</span><span class="sxs-lookup"><span data-stu-id="6df7b-205">Strings</span></span>](../programming-guide/strings/index.md)
- [<span data-ttu-id="6df7b-206">Сравнение строк в .NET Framework</span><span class="sxs-lookup"><span data-stu-id="6df7b-206">Comparing Strings</span></span>](../../standard/base-types/comparing.md)
- [<span data-ttu-id="6df7b-207">Глобализация и локализация приложений</span><span class="sxs-lookup"><span data-stu-id="6df7b-207">Globalizing and Localizing Applications</span></span>](/visualstudio/ide/globalizing-and-localizing-applications)
