---
title: Разработка приложений .NET Core
description: См. дополнительные сведения о развертывании приложения .NET Core.
ms.date: 12/03/2018
ms.openlocfilehash: 41c5285f2a9ddf38e4be7326bd5cba1c58370fe7
ms.sourcegitcommit: 9a97c76e141333394676bc5d264c6624b6f45bcf
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2020
ms.locfileid: "75740818"
---
# <a name="net-core-application-deployment"></a><span data-ttu-id="b2d39-103">Развертывание приложений .NET Core</span><span class="sxs-lookup"><span data-stu-id="b2d39-103">.NET Core application deployment</span></span>

<span data-ttu-id="b2d39-104">Для приложений .NET Core можно создавать два типа развертываний:</span><span class="sxs-lookup"><span data-stu-id="b2d39-104">You can create three types of deployments for .NET Core applications:</span></span>

- <span data-ttu-id="b2d39-105">Развертывание, зависящее от платформы.</span><span class="sxs-lookup"><span data-stu-id="b2d39-105">Framework-dependent deployment.</span></span> <span data-ttu-id="b2d39-106">Как понятно из названия, зависящее от платформы развертывание (FDD) требует наличия в целевой системе общей для всей системы версии .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b2d39-106">As the name implies, framework-dependent deployment (FDD) relies on the presence of a shared system-wide version of .NET Core on the target system.</span></span> <span data-ttu-id="b2d39-107">Так как платформа .NET Core уже имеется, приложение можно переносить между установками .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b2d39-107">Because .NET Core is already present, your app is also portable between installations of .NET Core.</span></span> <span data-ttu-id="b2d39-108">Приложение содержит только собственный код и зависимости сторонних разработчиков, которые не входят в библиотеки .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b2d39-108">Your app contains only its own code and any third-party dependencies that are outside of the .NET Core libraries.</span></span> <span data-ttu-id="b2d39-109">Зависящие от платформы развертывания содержат *DLL*-файлы, которые можно запускать с помощью [служебной программы dotnet](../tools/dotnet.md) из командной строки.</span><span class="sxs-lookup"><span data-stu-id="b2d39-109">FDDs contain *.dll* files that can be launched by using the [dotnet utility](../tools/dotnet.md) from the command line.</span></span> <span data-ttu-id="b2d39-110">Например, команда `dotnet app.dll` запускает приложение с именем `app`.</span><span class="sxs-lookup"><span data-stu-id="b2d39-110">For example, `dotnet app.dll` runs an application named `app`.</span></span>

- <span data-ttu-id="b2d39-111">Автономные развертывания.</span><span class="sxs-lookup"><span data-stu-id="b2d39-111">Self-contained deployment.</span></span> <span data-ttu-id="b2d39-112">В отличие от зависящих от платформы развертываний автономное развертывание (SCD) не требует наличия в целевой системе каких-либо общих компонентов.</span><span class="sxs-lookup"><span data-stu-id="b2d39-112">Unlike FDD, a self-contained deployment (SCD) doesn't rely on the presence of shared components on the target system.</span></span> <span data-ttu-id="b2d39-113">Все компоненты, включая библиотеки .NET Core и среду выполнения .NET Core, включены в приложение и изолированы от других приложений .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b2d39-113">All components, including both the .NET Core libraries and the .NET Core runtime, are included with the application and are isolated from other .NET Core applications.</span></span> <span data-ttu-id="b2d39-114">Автономные развертывания включают исполняемый файл (например, *app.exe* на платформах Windows для приложения с именем `app`), который является переименованной версией связанного с платформой узла .NET Core, и *DLL*-файл (например *app.dll*), представляющий само приложение.</span><span class="sxs-lookup"><span data-stu-id="b2d39-114">SCDs include an executable (such as *app.exe* on Windows platforms for an application named `app`), which is a renamed version of the platform-specific .NET Core host, and a *.dll* file (such as *app.dll*), which is the actual application.</span></span>

- <span data-ttu-id="b2d39-115">Исполняемые файлы, связанные с платформой.</span><span class="sxs-lookup"><span data-stu-id="b2d39-115">Framework-dependent executables.</span></span> <span data-ttu-id="b2d39-116">Создает исполняемый файл, который выполняется на целевой платформе.</span><span class="sxs-lookup"><span data-stu-id="b2d39-116">Produces an executable that runs on a target platform.</span></span> <span data-ttu-id="b2d39-117">Как и в случае зависящих от платформы развертываний, зависящие от платформы исполняемые файлы связаны с платформой и не являются автономными.</span><span class="sxs-lookup"><span data-stu-id="b2d39-117">Similar to FDDs, framework-dependent executables (FDE) are platform-specific and aren't self-contained.</span></span> <span data-ttu-id="b2d39-118">Эти развертывания зависят от наличия в целевой системе общей для всей системы версии .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b2d39-118">These deployments still rely on the presence of a shared system-wide version of .NET Core to run.</span></span> <span data-ttu-id="b2d39-119">В отличие от автономных развертываний приложение содержит только собственный код и сторонние зависимости, которые не входят в библиотеки .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b2d39-119">Unlike an SCD, your app only contains your code and any third-party dependencies that are outside of the .NET Core libraries.</span></span> <span data-ttu-id="b2d39-120">Зависящие от платформы исполняемые файлы создают исполняемый файл, который выполняется на целевой платформе.</span><span class="sxs-lookup"><span data-stu-id="b2d39-120">FDEs produce an executable that runs on the target platform.</span></span>

## <a name="framework-dependent-deployments-fdd"></a><span data-ttu-id="b2d39-121">Развертывания, зависящие от платформы</span><span class="sxs-lookup"><span data-stu-id="b2d39-121">Framework-dependent deployments (FDD)</span></span>

<span data-ttu-id="b2d39-122">При развертывании, зависящем от платформы, вы развертываете только свое приложение и сторонние зависимости.</span><span class="sxs-lookup"><span data-stu-id="b2d39-122">For an FDD, you deploy only your app and third-party dependencies.</span></span> <span data-ttu-id="b2d39-123">Приложение будет использовать версию .NET Core, доступную в целевой системе.</span><span class="sxs-lookup"><span data-stu-id="b2d39-123">Your app will use the version of .NET Core that's present on the target system.</span></span> <span data-ttu-id="b2d39-124">Это стандартная модель развертывания для приложений .NET Core и ASP.NET Core, использующих .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b2d39-124">This is the default deployment model for .NET Core and ASP.NET Core apps that target .NET Core.</span></span>

### <a name="why-create-a-framework-dependent-deployment"></a><span data-ttu-id="b2d39-125">Зачем использовать развертывание, зависящее от платформы</span><span class="sxs-lookup"><span data-stu-id="b2d39-125">Why create a framework-dependent deployment?</span></span>

<span data-ttu-id="b2d39-126">Развертывание, зависящее от платформы, имеет ряд преимуществ.</span><span class="sxs-lookup"><span data-stu-id="b2d39-126">Deploying an FDD has a number of advantages:</span></span>

- <span data-ttu-id="b2d39-127">Вам не нужно предварительно определять целевые операционные системы, в которых будет выполняться приложение .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b2d39-127">You don't have to define the target operating systems that your .NET Core app will run on in advance.</span></span> <span data-ttu-id="b2d39-128">Так как .NET Core использует общий формат файлов PE для исполняемых файлов и библиотек вне зависимости от операционной системы, ваше приложение может выполняться вне зависимости от базовой операционной системы.</span><span class="sxs-lookup"><span data-stu-id="b2d39-128">Because .NET Core uses a common PE file format for executables and libraries regardless of operating system, .NET Core can execute your app regardless of the underlying operating system.</span></span> <span data-ttu-id="b2d39-129">Дополнительные сведения о формате файлов PE см. в разделе [Формат файла сборки .NET](../../standard/assembly/file-format.md).</span><span class="sxs-lookup"><span data-stu-id="b2d39-129">For more information on the PE file format, see [.NET Assembly File Format](../../standard/assembly/file-format.md).</span></span>

- <span data-ttu-id="b2d39-130">Пакет развертывания имеет небольшой размер.</span><span class="sxs-lookup"><span data-stu-id="b2d39-130">The size of your deployment package is small.</span></span> <span data-ttu-id="b2d39-131">Нужно развернуть только приложение и его зависимости, но не саму платформу .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b2d39-131">You only deploy your app and its dependencies, not .NET Core itself.</span></span>

- <span data-ttu-id="b2d39-132">Если переопределение не выполнено, зависящие от платформы развертывания будут использовать последнюю версию обслуживаемой среды выполнения, установленной в целевой системе.</span><span class="sxs-lookup"><span data-stu-id="b2d39-132">Unless overridden, FDDs will use the latest serviced runtime installed on the target system.</span></span> <span data-ttu-id="b2d39-133">Так приложение сможет использовать последнюю исправленную версию среды выполнения .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b2d39-133">This allows your application to use the latest patched version of the .NET Core runtime.</span></span> 

- <span data-ttu-id="b2d39-134">Несколько приложений используют одну и ту же установку .NET Core, что сокращает использование дискового пространства и памяти в системе.</span><span class="sxs-lookup"><span data-stu-id="b2d39-134">Multiple apps use the same .NET Core installation, which reduces both disk space and memory usage on host systems.</span></span>

<span data-ttu-id="b2d39-135">Имеется и ряд недостатков.</span><span class="sxs-lookup"><span data-stu-id="b2d39-135">There are also a few disadvantages:</span></span>

- <span data-ttu-id="b2d39-136">Приложение может выполняться, только если в системе уже установлена целевая [или более поздняя версия](../versions/selection.md#framework-dependent-apps-roll-forward) .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b2d39-136">Your app can run only if the version of .NET Core your app targets, [or a later version](../versions/selection.md#framework-dependent-apps-roll-forward), is already installed on the host system.</span></span>

- <span data-ttu-id="b2d39-137">Среда выполнения и библиотеки .NET Core могут изменяться в будущих выпусках, о чем вы можете не знать.</span><span class="sxs-lookup"><span data-stu-id="b2d39-137">It's possible for the .NET Core runtime and libraries to change without your knowledge in future releases.</span></span> <span data-ttu-id="b2d39-138">В редких случаях это может повлиять на работу вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="b2d39-138">In rare cases, this may change the behavior of your app.</span></span>

## <a name="self-contained-deployments-scd"></a><span data-ttu-id="b2d39-139">Автономные развертывания</span><span class="sxs-lookup"><span data-stu-id="b2d39-139">Self-contained deployments (SCD)</span></span>

<span data-ttu-id="b2d39-140">В случае с автономным развертыванием приложение и зависимости сторонних разработчиков развертываются вместе с версией .NET Core, с помощью которой создавалось приложение.</span><span class="sxs-lookup"><span data-stu-id="b2d39-140">For a self-contained deployment, you deploy your app and any required third-party dependencies along with the version of .NET Core that you used to build the app.</span></span> <span data-ttu-id="b2d39-141">Процесс создания автономного развертывания не включает [собственные зависимости .NET Core](https://github.com/dotnet/core/blob/master/Documentation/prereqs.md) для различных платформ, поэтому их нужно установить перед запуском приложения.</span><span class="sxs-lookup"><span data-stu-id="b2d39-141">Creating an SCD doesn't include the [native dependencies of .NET Core](https://github.com/dotnet/core/blob/master/Documentation/prereqs.md) on various platforms, so these must be present before the app runs.</span></span> <span data-ttu-id="b2d39-142">См. дополнительные сведения о [привязке версий в среде выполнения .NET Core](../versions/selection.md).</span><span class="sxs-lookup"><span data-stu-id="b2d39-142">For more information on version binding at runtime, see the article on [version binding in .NET Core](../versions/selection.md).</span></span>

<span data-ttu-id="b2d39-143">Начиная с версии пакета SDK 2.1 (2.1.300) для NET Core, платформа .NET Core поддерживает *накат версии исправления*.</span><span class="sxs-lookup"><span data-stu-id="b2d39-143">Starting with NET Core 2.1 SDK (version 2.1.300), .NET Core supports *patch version roll forward*.</span></span> <span data-ttu-id="b2d39-144">При создании автономного развертывания средства .NET Core автоматически реализуют последнюю обслуживаемую версию среды выполнения .NET Core, для которой предназначено приложение.</span><span class="sxs-lookup"><span data-stu-id="b2d39-144">When you create a self-contained deployment, .NET Core tools automatically include the latest serviced runtime of the .NET Core version that your application targets.</span></span> <span data-ttu-id="b2d39-145">(Последняя обслуживаемая версия среды выполнения включает исправления безопасности и другие исправления ошибок.) Обслуживаемая среда выполнения не обязательно должна присутствовать в системе сборки. Она автоматически скачивается на сайте NuGet.org. Дополнительные сведения о том, как отказаться от наката версии исправления, включая инструкции, см. в статье [Обновление версии среды выполнения автономного развертывания](runtime-patch-selection.md).</span><span class="sxs-lookup"><span data-stu-id="b2d39-145">(The latest serviced runtime includes security patches and other bug fixes.) The serviced runtime does not have to be present on your build system; it is downloaded automatically from NuGet.org. For more information, including instructions on how to opt out of patch version roll forward, see [Self-contained deployment runtime roll forward](runtime-patch-selection.md).</span></span>

<span data-ttu-id="b2d39-146">Для автономного и зависимого от платформы развертываний создаются разные исполняемые файлы. Поэтому вы можете подписать исполняемый файл, созданный для автономного развертывания, своей подписью издателя.</span><span class="sxs-lookup"><span data-stu-id="b2d39-146">FDD and SCD deployments use separate host executables, so you can sign a host executable for an SCD with your publisher signature.</span></span>

### <a name="why-deploy-a-self-contained-deployment"></a><span data-ttu-id="b2d39-147">Зачем использовать автономное развертывание</span><span class="sxs-lookup"><span data-stu-id="b2d39-147">Why deploy a self-contained deployment?</span></span>

<span data-ttu-id="b2d39-148">Автономное развертывание имеет два основных преимущества.</span><span class="sxs-lookup"><span data-stu-id="b2d39-148">Deploying a Self-contained deployment has two major advantages:</span></span>

- <span data-ttu-id="b2d39-149">Вы единолично контролируете версию .NET Core, которая развертывается вместе с приложением.</span><span class="sxs-lookup"><span data-stu-id="b2d39-149">You have sole control of the version of .NET Core that is deployed with your app.</span></span> <span data-ttu-id="b2d39-150">Платформа .NET Core может предоставляться только вами.</span><span class="sxs-lookup"><span data-stu-id="b2d39-150">.NET Core can be serviced only by you.</span></span>

- <span data-ttu-id="b2d39-151">Вы можете быть уверены в том, что приложение .NET Core может выполняться в целевой системе, так как вы предоставили соответствующую версию .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b2d39-151">You can be assured that the target system can run your .NET Core app, since you're providing the version of .NET Core that it will run on.</span></span>

<span data-ttu-id="b2d39-152">Есть также ряд недостатков.</span><span class="sxs-lookup"><span data-stu-id="b2d39-152">It also has a number of disadvantages:</span></span>

- <span data-ttu-id="b2d39-153">Так как платформа .NET Core включается в пакет развертывания, необходимо заранее выбрать целевые платформы, для которых вы создаете пакеты развертывания.</span><span class="sxs-lookup"><span data-stu-id="b2d39-153">Because .NET Core is included in your deployment package, you must select the target platforms for which you build deployment packages in advance.</span></span>

- <span data-ttu-id="b2d39-154">Пакет развертывания имеет относительно большой размер, так как в него необходимо включить платформу .NET Core в дополнение к приложению и зависимостям сторонних разработчиков.</span><span class="sxs-lookup"><span data-stu-id="b2d39-154">The size of your deployment package is relatively large, since you have to include .NET Core as well as your app and its third-party dependencies.</span></span>

  <span data-ttu-id="b2d39-155">Начиная с версии .NET Core 2.0 можно уменьшить размер развертывания в системах Linux примерно на 28 МБ с помощью [*инвариантного режима глобализации* ](https://github.com/dotnet/runtime/blob/master/docs/design/features/globalization-invariant-mode.md) в .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b2d39-155">Starting with .NET Core 2.0, you can reduce the size of your deployment on Linux systems by approximately 28 MB by using .NET Core [*globalization invariant mode*](https://github.com/dotnet/runtime/blob/master/docs/design/features/globalization-invariant-mode.md).</span></span> <span data-ttu-id="b2d39-156">Как правило, .NET Core использует в Linux [библиотеки ICU](http://icu-project.org) для поддержки глобализации.</span><span class="sxs-lookup"><span data-stu-id="b2d39-156">Ordinarily, .NET Core on Linux relies on the [ICU libraries](http://icu-project.org) for globalization support.</span></span> <span data-ttu-id="b2d39-157">В инвариантном режиме библиотеки не включаются в развертывание и все языки и региональные параметры используются как [инвариантные](xref:System.Globalization.CultureInfo.InvariantCulture?displayProperty=nameWithType).</span><span class="sxs-lookup"><span data-stu-id="b2d39-157">In invariant mode, the libraries are not included with your deployment, and all cultures behave like the [invariant culture](xref:System.Globalization.CultureInfo.InvariantCulture?displayProperty=nameWithType).</span></span>

- <span data-ttu-id="b2d39-158">При развертывании множества автономных приложений .NET Core в системе может использоваться значительный объем дискового пространства, так как каждое приложение создает копии файлов .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b2d39-158">Deploying numerous self-contained .NET Core apps to a system can consume significant amounts of disk space, since each app duplicates .NET Core files.</span></span>

## <a name="framework-dependent-executables-fde"></a><span data-ttu-id="b2d39-159">Зависящие от платформы исполняемые файлы</span><span class="sxs-lookup"><span data-stu-id="b2d39-159">Framework-dependent executables (FDE)</span></span>

<span data-ttu-id="b2d39-160">Начиная с версии .NET Core 2.2, можно развернуть приложение как зависящий от платформы исполняемый файл, используя любые сторонние зависимости.</span><span class="sxs-lookup"><span data-stu-id="b2d39-160">Starting with .NET Core 2.2, you can deploy your app as an FDE, along with any required third-party dependencies.</span></span> <span data-ttu-id="b2d39-161">Приложение будет использовать версию .NET Core, установленную в целевой системе.</span><span class="sxs-lookup"><span data-stu-id="b2d39-161">Your app will use the version of .NET Core that's installed on the target system.</span></span>

### <a name="why-deploy-a-framework-dependent-executable"></a><span data-ttu-id="b2d39-162">Преимущества зависящих от платформы развертываний</span><span class="sxs-lookup"><span data-stu-id="b2d39-162">Why deploy a framework-dependent executable?</span></span>

<span data-ttu-id="b2d39-163">Зависящие от платформы развертывания имеют ряд преимуществ:</span><span class="sxs-lookup"><span data-stu-id="b2d39-163">Deploying an FDE has a number of advantages:</span></span>

- <span data-ttu-id="b2d39-164">Пакет развертывания имеет небольшой размер.</span><span class="sxs-lookup"><span data-stu-id="b2d39-164">The size of your deployment package is small.</span></span> <span data-ttu-id="b2d39-165">Нужно развернуть только приложение и его зависимости, но не саму платформу .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b2d39-165">You only deploy your app and its dependencies, not .NET Core itself.</span></span>

- <span data-ttu-id="b2d39-166">Несколько приложений используют одну и ту же установку .NET Core, что сокращает использование дискового пространства и памяти в системе.</span><span class="sxs-lookup"><span data-stu-id="b2d39-166">Multiple apps use the same .NET Core installation, which reduces both disk space and memory usage on host systems.</span></span>

- <span data-ttu-id="b2d39-167">Приложение может выполняться путем вызова опубликованного исполняемого файла без прямого вызова служебной программы `dotnet`.</span><span class="sxs-lookup"><span data-stu-id="b2d39-167">Your app can be run by calling the published executable without invoking the `dotnet` utility directly.</span></span>

<span data-ttu-id="b2d39-168">Имеется и ряд недостатков.</span><span class="sxs-lookup"><span data-stu-id="b2d39-168">There are also a few disadvantages:</span></span>

- <span data-ttu-id="b2d39-169">Приложение может выполняться, только если в системе уже установлена целевая [или более поздняя версия](../versions/selection.md#framework-dependent-apps-roll-forward) .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b2d39-169">Your app can run only if the version of .NET Core your app targets, [or a later version](../versions/selection.md#framework-dependent-apps-roll-forward), is already installed on the host system.</span></span>

- <span data-ttu-id="b2d39-170">Среда выполнения и библиотеки .NET Core могут изменяться в будущих выпусках, о чем вы можете не знать.</span><span class="sxs-lookup"><span data-stu-id="b2d39-170">It's possible for the .NET Core runtime and libraries to change without your knowledge in future releases.</span></span> <span data-ttu-id="b2d39-171">В редких случаях это может повлиять на работу вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="b2d39-171">In rare cases, this may change the behavior of your app.</span></span>

- <span data-ttu-id="b2d39-172">Приложение необходимо публиковать для каждой целевой платформы.</span><span class="sxs-lookup"><span data-stu-id="b2d39-172">You must publish your app for each target platform.</span></span>

## <a name="step-by-step-examples"></a><span data-ttu-id="b2d39-173">Примеры с пошаговыми инструкциями</span><span class="sxs-lookup"><span data-stu-id="b2d39-173">Step-by-step examples</span></span>

<span data-ttu-id="b2d39-174">Пошаговые примеры развертывания приложений .NET Core с помощью средств командной строки см. в [этой статье](deploy-with-cli.md).</span><span class="sxs-lookup"><span data-stu-id="b2d39-174">For step-by-step examples of deploying .NET Core apps with CLI tools, see [Deploying .NET Core Apps with CLI Tools](deploy-with-cli.md).</span></span> <span data-ttu-id="b2d39-175">Пошаговые примеры развертывания приложений .NET Core с помощью Visual Studio см. в [этой статье](deploy-with-vs.md).</span><span class="sxs-lookup"><span data-stu-id="b2d39-175">For step-by-step examples of deploying .NET Core apps with Visual Studio, see [Deploying .NET Core Apps with Visual Studio](deploy-with-vs.md).</span></span> 

## <a name="see-also"></a><span data-ttu-id="b2d39-176">См. также</span><span class="sxs-lookup"><span data-stu-id="b2d39-176">See also</span></span>

- [<span data-ttu-id="b2d39-177">Развертывание приложений .NET Core с помощью средств командной строки (CLI)</span><span class="sxs-lookup"><span data-stu-id="b2d39-177">Deploying .NET Core Apps with CLI Tools</span></span>](deploy-with-cli.md)
- [<span data-ttu-id="b2d39-178">Развертывание приложений .NET Core с помощью Visual Studio</span><span class="sxs-lookup"><span data-stu-id="b2d39-178">Deploying .NET Core Apps with Visual Studio</span></span>](deploy-with-vs.md)
- [<span data-ttu-id="b2d39-179">Пакеты, метапакеты и платформы</span><span class="sxs-lookup"><span data-stu-id="b2d39-179">Packages, Metapackages and Frameworks</span></span>](../packages.md)
- [<span data-ttu-id="b2d39-180">Каталог идентификаторов сред выполнения (RID) в .NET Core</span><span class="sxs-lookup"><span data-stu-id="b2d39-180">.NET Core Runtime IDentifier (RID) catalog</span></span>](../rid-catalog.md)
