---
title: Единицы измерения
description: Узнайте, как число с плавающей запятой и вошли целочисленных значений в F# могут иметь связанные единицы измерения, которые обычно используются для указания длины, тома и запоминающих устройств.
ms.date: 05/16/2016
ms.openlocfilehash: 935dbff3545f92736ce8c51de86a168429dc194f
ms.sourcegitcommit: fa38fe76abdc8972e37138fcb4dfdb3502ac5394
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/19/2018
ms.locfileid: "53610987"
---
# <a name="units-of-measure"></a>Единицы измерения

Число с плавающей запятой и вошли целочисленных значений в F# могут иметь связанные единицы измерения, которые обычно используются для указания длины, тома, запоминающих устройств и т. д. С помощью количества единиц, позволяет компилятору проверять, что арифметические связи имеют правильный единицы измерения, что позволяет избежать ошибок программирования.

## <a name="syntax"></a>Синтаксис

```fsharp
[<Measure>] type unit-name [ = measure ]
```

## <a name="remarks"></a>Примечания

Предыдущий синтаксис определяет *наименование единицы измерения* как единица измерения. Необязательная часть используется для определения новой меры с точки зрения ранее определенных единиц измерения. Например, следующая строка определяет меру `cm` (сантиметр).

```fsharp
[<Measure>] type cm
```

В следующей строке определяется мера `ml` (миллиметр определяется) с помощью кубического сантиметра (`cm^3`).

```fsharp
[<Measure>] type ml = cm^3
```

В приведенном выше синтаксисе *мер* — это формула, которая содержит единицы измерения. В формулах, содержащих единицы измерения, поддерживаются целочисленные степени (положительные и отрицательные), пробелы между единицами указывают на произведение двух блоков, `*` также указывает измерения, и `/` указывает на частное единиц. Для обратных единиц, вы можете использовать power отрицательное целое число или `/` , разделяющий числителя и знаменателя формулы единицы измерения. Несколько единиц в знаменателе должны быть заключены в круглые скобки. Единицы, разделенного пробелами после `/` интерпретируются как часть знаменатель, но единицы, следующие `*` интерпретируются как часть числитель.

1 можно использовать в выражениях модульных, либо отдельно, чтобы обозначить количество без измерений, или другие единицы измерения, как в числителе. Например, единицы частоты записываются в виде `1/s`, где `s` секунд. В формулах единиц не используются скобки. Числовые константы преобразования не указан в формулах единиц; Тем не менее можно определить преобразование константы с единицами отдельно и использовать их в вычислениях с проверкой единиц.

Формулы единиц, означает то же могут записываться различными способами. Таким образом компилятор преобразует формулы единиц в единообразный вид, который преобразует отрицательные степени на обратные, группирует единицы в единый числителя и знаменателя и выполняет сортировку по алфавиту единицы в числителя и знаменателя.

Например, формулы единиц `kg m s^-2` и `m /s s * kg` преобразуются в `kg m/s^2`.

Выражения с плавающей точкой используется единицы измерения. С помощью числа с плавающей запятой соответствующих единиц измерения повышает уровень безопасности типов и помогает избежать ошибки несоответствия единицы, которые могут возникнуть в формулах, при использовании слабо типизированным числа с плавающей запятой. При написании плавающей точки выражение, которое использует единицы, единицы измерения в выражении должны совпадать.

Пользователь может снабдить литералы с формулы единицы измерения в угловых скобках, как показано в следующих примерах.

```fsharp
1.0<cm>
55.0<miles/hour>
```

Не следует добавлять пробел между числом и угловой скобки; Тем не менее, можно включить литеральный суффикс, такие как `f`, как показано в следующем примере.

```fsharp
// The f indicates single-precision floating point.
55.0f<miles/hour>
```

Такой заметки изменяет тип литерала с примитивного (такие как `float`) на тип с измерением, такие как `float<cm>` или, в этом случае `float<miles/hour>`. Заметка единицы `<1>` указывает количество без измерений и его тип эквивалентен типу-примитиву без параметра единицы измерения.

Тип единицы измерения — это число с плавающей запятой или целого типа, а также дополнительных модульных заметки, указаны в скобках со знаком. Таким образом, при создании типа преобразования из `g` (г) для `kg` (килограммы) типы описываются следующим образом.

```fsharp
let convertg2kg (x : float<g>) = x / 1000.0<g/kg>
```

Единицы измерения используются для проверки единиц компиляции, но не сохраняются в среде выполнения. Таким образом они не влияют на производительность.

Единицы измерения, которые могут применяться к любому типу, не только типы с плавающей запятой; Тем не менее только типы с плавающей запятой, вошедшим целочисленные типы и десятичных типов поддерживают количества с измерениями. Таким образом он имеет смысл только использовать единицы измерения, на типы-примитивы и статистических выражений, содержащих эти типы-примитивы.

Следующий пример иллюстрирует использование единиц измерения.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6901.fs)]

В следующем примере кода показано, как преобразовать из безразмерные число с плавающей запятой в случае многомерных значение с плавающей запятой. Вы только что умножьте 1.0, применение размеры 1.0. Это можно было абстрагировать в функции, например `degreesFahrenheit`.

Кроме того, при передаче размерные значения в функции, ожидающие безразмерные числа с плавающей запятой, необходимо исключить единицы измерения или привести к `float` с помощью `float` оператор. В этом примере выполняется деление `1.0<degC>` для аргументов `printf` поскольку `printf` ожидает безразмерные.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6902.fs)]

В следующем примере сеанса показаны выходные данные и входные данные этого кода.

```
Enter a temperature in degrees Fahrenheit.
90
That temperature in degrees Celsius is    32.22.
```

## <a name="using-generic-units"></a>Использование универсальных единиц

Можно написать универсальные функции, которые работают на данные, которые имеют связанную единицу измерения. Это делается путем указания типа вместе с универсальной единицей в качестве параметра типа, как показано в следующем примере кода.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6903.fs)]

## <a name="creating-aggregate-types-with-generic-units"></a>Создание типов статистических выражений с универсальными единицами

Приведенный ниже показано, как создать Агрегатный тип, состоящий из отдельных значений с плавающей запятой единиц измерения, которые являются обобщенными. Это позволяет один тип должен быть создан, работает с несколькими единицами. Кроме того универсальные единицы повышают безопасность типа, гарантируя, что универсальный тип, который имеет один набор единицы — это тип, отличный от одного универсального типа с другим набором значений. Основой этого приема является то, что `Measure` атрибут может быть применен к параметру типа.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6904.fs)]

## <a name="units-at-runtime"></a>Единицы, во время выполнения

Единицы измерения используются для проверки статических типов. При компиляции с плавающей запятой единицы измерения исключаются, поэтому единицы измерения будут потеряны во время выполнения. Таким образом любая попытка реализации функциональности, зависит от того, проверки единицы измерения во время выполнения не поддерживается. Например, реализация `ToString` функцию для распечатки единиц не поддерживается.

## <a name="conversions"></a>Преобразования

Для преобразования типа, имеющего единицы (например, `float<'u>`) к типу, который не поддерживает единиц, можно использовать функцию стандартное преобразование. Например, можно использовать `float` для преобразования в `float` значение, которое не поддерживает единицы, как показано в следующем коде.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6905.fs)]

Чтобы преобразовать значение без единиц измерения в значение, которое имеет единиц, можно умножить значение 1 или 1.0, которое помечается с помощью соответствующие единицы. Однако для создания уровней взаимодействия, существуют также некоторые явные функции, которые можно использовать для преобразования значений без единиц измерения в значения с единицами измерения. Они находятся в [Microsoft.FSharp.Core.LanguagePrimitives](https://msdn.microsoft.com/library/69d08ac5-5d51-4c20-bf1e-850fd312ece3) модуля. Например, для преобразования из в `float` для `float<cm>`, использовать [FloatWithMeasure](https://msdn.microsoft.com/library/69520bc7-d67b-46b8-9004-7cac9646b8d9), как показано в следующем коде.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6906.fs)]

## <a name="units-of-measure-in-the-f-core-library"></a>Единицы измерения в F# основной библиотеки

Библиотека модульных доступен в `FSharp.Data.UnitSystems.SI` пространства имен. Он включает SI единицы в оба символа форме (как `m` для метрики) в `UnitSymbols` sub-пространство имен, а также их полным именам (как `meter` для метрики) в `UnitNames` sub-пространство имен.

## <a name="see-also"></a>См. также

- [Справочник по языку F#](index.md)