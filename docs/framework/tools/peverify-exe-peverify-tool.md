---
title: "Peverify.exe (средство PEVerify)"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- portable executable files, PEVerify
- verifying MSIL and metadata
- PEVerify tool
- type safety requirements
- MSIL
- PEverify.exe
- PE files, PEVerify
ms.assetid: f4f46f9e-8d08-4e66-a94b-0c69c9b0bbfa
caps.latest.revision: "18"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 5acb6da7c68f899daa4144e897e9ec31fcfa868a
ms.sourcegitcommit: c0dd436f6f8f44dc80dc43b07f6841a00b74b23f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/19/2018
---
# <a name="peverifyexe-peverify-tool"></a>Peverify.exe (средство PEVerify)
Средство PEVerify помогает разработчикам, создающим код на языке CIL — авторам компиляторов, обработчиков скриптов и т. д. — определить, соответствует ли этот код и связанные с ним метаданные требованиям безопасности типов. Некоторые компиляторы создают проверяемый типобезопасный код только в том случае, если разработчик не применяет определенные языковые конструкции. При работе с таким компилятором разработчику иногда требуется проверить, сохранена ли в коде безопасность типов. В этом случае для проверки CIL и метаданных в файлах можно использовать инструмент PEVerify.  
  
 Эта программа автоматически устанавливается вместе с Visual Studio. Чтобы применить этот инструмент, воспользуйтесь командной строкой разработчика (или командной строкой Visual Studio в Windows 7). Дополнительные сведения см. в разделе [Командные строки](../../../docs/framework/tools/developer-command-prompt-for-vs.md).  
  
 В командной строке введите следующее.  
  
## <a name="syntax"></a>Синтаксис  
  
```  
peverify filename [options]  
```  
  
#### <a name="parameters"></a>Параметры  
  
|Аргумент|Описание:|  
|--------------|-----------------|  
|*filename*|Переносимый исполняемый файл (PE-файл), который требуется проверить на корректность CIL и метаданных.|  
  
|Параметр|Описание:|  
|------------|-----------------|  
|**/break=** *maxErrorCount*|Прекращает проверку, если число ошибок в файле достигло значения параметра *maxErrorCount*.<br /><br /> Этот параметр не поддерживается в .NET Framework 2.0 и более поздних версий.|  
|**/clock**|Измеряет и выводит значения времени следующих проверок (в миллисекундах):<br /><br /> **MD Val. cycle**<br /> Цикл проверки метаданных<br /><br /> **MD Val. pure**<br /> Чистое время проверки метаданных<br /><br /> **IL Ver. cycle**<br /> Цикл проверки языка CIL<br /><br /> **IL Ver pure**<br /> Чистое время проверки языка CIL<br /><br /> Значения **MD Val. cycle** и **IL Ver. cycle** включают время, затраченное на необходимые процедуры запуска и завершения проверки. Значения **MD Val. pure** и **IL Ver pure** отражают время, требуемое только для проверки.|  
|**/help**|Отображает синтаксис команд и параметров программы.|  
|**/hresult**|Отображает коды ошибок в шестнадцатеричном формате.|  
|**/ignore=** *hex.code* [, *hex.code*]|Игнорирует ошибки с заданными кодами.|  
|**/ignore=@** *responseFile*|Игнорирует ошибки с кодами, перечисленными в указанном файле ответов.|  
|**/il**|Проверяет безопасность типов CIL для методов, реализованных в сборке, указанной в параметре *filename*. Если не задан параметр **/quiet**, средство выводит подробное описание всех обнаруженных проблем.|  
|**/md**|Проверяет метаданные в сборке, указанной в параметре *filename*. Средство проверяет всю структуру метаданных в файле и выводит описание всех обнаруженных проблем.|  
|**/nologo**|Отключает отображение сведений о версии продукта и авторских правах.|  
|**/nosymbols**|В платформе .NET Framework версии 2.0 отключает номера строк для обеспечения обратной совместимости.|  
|**/quiet**|Задает тихий режим. Отключает вывод сообщений об обнаруженных проблемах. Средство Peverify.exe все равно уведомляет, соблюдается ли безопасность типов в файле, однако не сообщает об обнаруженных проблемах.|  
|`/transparent`|Ограничивает проверку только прозрачными методами.|  
|**/unique**|Игнорирует повторяющиеся коды ошибок.|  
|**/verbose**|В платформе .NET Framework версии 2.0 отображает дополнительные сведения в сообщениях проверки CIL.|  
|**/?**|Отображает синтаксис команд и параметров программы.|  
  
## <a name="remarks"></a>Примечания  
 В среде CLR реализация механизмов безопасности и изоляции основана на типобезопасном выполнении кода приложения. Обычно код, для которого невозможно [проверить типобезопасность](http://msdn.microsoft.com/library/095cd1f6-d8db-4c0e-bce2-83ccb34dd5dc), не выполняется, хотя можно настроить политику безопасности таким образом, чтобы допускалось выполнение доверенного непроверяемого кода.  
  
 Если параметры **/md** и **/il** не заданы, Peverify.exe проверяет как CIL, так и метаданные. Сначала Peverify.exe проверяет метаданные (параметр **/md**). Если ошибок нет, выполняется проверка CIL (параметр **/il**). Если задан и параметр **/md**, и параметр **/il**, проверка по параметру **/il** производится даже при наличии ошибок в метаданных. Поэтому при отсутствии ошибок в метаданных команда **peverify** *имя_файла* эквивалентна команде **peverify** *имя_файла* **/md** **/il**.  
  
 Средство Peverify.exe осуществляет полную проверку CIL на основе анализа потоков данных и проверяет правильность метаданных на основе списка из нескольких сотен правил. Дополнительные сведения о проверках, производимых Peverify.exe, см. в разделах, посвященных спецификации проверки метаданных и спецификации набора инструкций CIL в папке "Tools Developers Guide" в [!INCLUDE[winsdklong](../../../includes/winsdklong-md.md)].  
  
 Обратите внимание, что в платформе .NET Framework 2.0 или более поздних версий поддерживается возврат проверяемых значений `byref`, заданных с использованием следующих инструкций CIL: `dup`, `ldsflda`, `ldflda`, `ldelema`, `call` и `unbox`.  
  
## <a name="examples"></a>Примеры  
 Следующая команда проверяет метаданные и безопасность типов CIL для методов, реализованных в сборке `myAssembly.exe`.  
  
```  
peverify myAssembly.exe /md /il  
```  
  
 После успешного завершения обработки этого запроса Peverify.exe отображает следующее сообщение.  
  
```  
All classes and methods in myAssembly.exe Verified  
```  
  
 Следующая команда проверяет метаданные и безопасность типов CIL для методов, реализованных в сборке `myAssembly.exe`. Средство отображает затраченное на проверку время.  
  
```  
peverify myAssembly.exe /md /il /clock  
```  
  
 После успешного завершения обработки этого запроса Peverify.exe отображает следующее сообщение.  
  
```  
All classes and methods in myAssembly.exe Verified  
Timing: Total run     320 msec  
        MD Val.cycle  40 msec  
        MD Val.pure   10 msec  
        IL Ver.cycle  270 msec  
        IL Ver.pure   230 msec  
```  
  
 Следующая команда проверяет метаданные и безопасность типов CIL для методов, реализованных в сборке `myAssembly.exe`. Однако Peverify.exe останавливается, если число ошибок достигло максимального — то есть 100. Средство также игнорирует ошибки с заданными кодами.  
  
```  
peverify myAssembly.exe /break=100 /ignore=0x12345678,0xABCD1234  
```  
  
 Следующая команда дает тот же результат, что и команда из предыдущего примера, но коды игнорируемых ошибок извлекаются из файла ответов `ignoreErrors.rsp`.  
  
```  
peverify myAssembly.exe /break=100 /ignore@ignoreErrors.rsp  
```  
  
 Файл ответов содержит список кодов ошибок, разделенных запятыми.  
  
```  
0x12345678, 0xABCD1234  
```  
  
 Ошибки в файле ответов можно также задавать по одной в строке.  
  
```  
0x12345678  
0xABCD1234  
```  
  
## <a name="see-also"></a>См. также  
 [Инструменты](../../../docs/framework/tools/index.md)  
 [NIB. Написание проверяемого типобезопасного кода](http://msdn.microsoft.com/library/d18f10ef-3b48-4f47-8726-96714021547b)  
 [Безопасность типа и безопасность](http://msdn.microsoft.com/library/095cd1f6-d8db-4c0e-bce2-83ccb34dd5dc)  
 [Командные строки](../../../docs/framework/tools/developer-command-prompt-for-vs.md)
