---
title: Winres.exe (редактор для локализации ресурсов Windows)
ms.date: 08/15/2018
helpviewer_keywords:
- Winres.exe
- Windows Forms Resource Editor
- Windows Resource Localization Editor
- localization
- Windows Forms, localization
- forms, localizing
- resx files
- .resx files
ms.assetid: cb8bc835-9221-4888-af53-1a4f5fad6c48
ms.openlocfilehash: 2cfb2d9874b34eef78fe462e0270fd70307a9f61
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/15/2020
ms.locfileid: "75715710"
---
# <a name="winresexe-windows-resource-localization-editor"></a>Winres.exe (редактор для локализации ресурсов Windows)

Редактор для локализации ресурсов Windows (Winres.exe) — это программа визуальной разметки, используемая при локализации ресурсов пользовательского интерфейса Windows Forms. Файлы RESX и RESOURCES, используемые как входные для программы Winres.exe, могут быть созданы с использованием среды визуального проектирования, такой как Microsoft Visual Studio. Информацию о развертывании ресурсов в приложениях .NET Framework см. в разделе [Ресурсы в приложениях для настольных систем](../resources/index.md).

Приложение Winres.exe устанавливается вместе с Visual Studio. Для запуска средства используйте командную строку разработчика Visual Studio. Дополнительные сведения см. в разделе [Командные строки](developer-command-prompt-for-vs.md).

## <a name="syntax"></a>Синтаксис

```console
winres resourceFile
winres /?
```

## <a name="arguments"></a>Аргументы

|Аргумент|Описание:|
|--------------|-----------------|
|`resourceFile`|Файл ресурсов, который требуется локализовать. Это должен быть файл ресурсов Windows Forms с расширением RESX или RESOURCES, созданный с помощью конструктора Visual Studio. Программа Winres.exe не может открывать универсальные RESX-файлы и RESOURCES-файлы.|

|Параметр|Описание:|
|------------|-----------------|
|**/?**|Отображает синтаксис команд и параметров программы.|

## <a name="remarks"></a>Remarks

Состояние элементов пользовательского интерфейса формы в проекте Windows Forms обычно хранится в файлах ресурсов — файлах на основе XML с расширением RESX или соответствующих им скомпилированных двоичных версиях с расширением RESOURCES. Программа Winres.exe предоставляет ограниченные возможности редактирования файлов обоих типов вне среды разработки Visual Studio. В частности, она поддерживает следующие виды операций редактирования.

- Предусмотрено редактирование файла ресурсов, зависящего или не зависящего от языка и региональных параметров, для изменения свойств пользовательского интерфейса формы или ее элементов управления, например текста, размера или положения.

- Можно создавать файлы ресурсов, зависящие или не зависящие от языка и региональных параметров, из файла ресурсов по умолчанию.

- Файл ресурсов определенного языка и региональных параметров можно сохранить в виде файла ресурсов другого языка региональных параметров. Например, файл ресурсов английского языка (США) можно сохранить как файл ресурсов польского языка. Обычно новый файл требует дополнительного редактирования для приведения в соответствие новому языку и региональным параметрам.

Также см. раздел [Иерархическая организация ресурсов для локализации](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2012/756hydy4(v=vs.110)) или [Иерархическая организация ресурсов для локализации](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/756hydy4(v=vs.120)).

Программа Winres.exe не может преобразовать RESX-файл в соответствующий ему RESOURCES-файл, для этого используется программа Resgen.exe. Дополнительные сведения о программе Resgen.exe см. в разделе [Resgen.exe (генератор файлов ресурсов)](resgen-exe-resource-file-generator.md).

Программа Winres.exe представляет собой графическое приложение, которое воссоздает форму Windows Forms в виде версии этапа разработки, используя лишь файл ресурсов, без доступа к исходному коду. Интерфейс программы Winres.exe включает **конструктор форм Windows Forms** из Visual Studio и **окно свойств**. Такой подход позволяет визуально редактировать RESOURCES-файл или RESX-файл, содержащий форму Windows Forms. Обычно программа Winres.exe используется для изменения подписей элементов управления и настройки их расположения и размера, чтобы подписи могли вместить текст на требуемом языке.

Если программа Winres.exe не может разрешить какой-либо тип элемента управления, она создает его прототип в локализованном файле RESX или RESOURCES. Прототип элемента управления отображается в форме Windows Forms в виде заштрихованного окна. Размер и расположение заштрихованного окна совпадают с размером и расположением самого элемента управления. Все доступные для локализации свойства прототипа элемента управления показаны в окне **Свойства**. Все изменения, внесенные в прототип, сохраняются в самом элементе управления.

## <a name="winresexe-versus-visual-studio"></a>Сравнение программы Winres.exe со средой Visual Studio

Обычно, прежде чем приступать к локализации форм Windows Forms для приложения, необходимо выбрать инструмент локализации: Visual Studio или программа Winres.exe. Свободное переключение между этими двумя инструментами для локализации может быть невозможно из-за проблем совместимости версий, описанных ниже.

Преимущество среды Visual Studio заключается в том, что ее можно использовать как для разработки приложения, так и для его локализации. Чтобы локализовать форму после ее разработки, задайте значение <xref:System.ComponentModel.LocalizableAttribute> для свойства **(свойство**Localizable**в**редакторе свойств`true`) и значение, соответствующее требуемому языку локализации, для свойства **Language**. Затем необходимо отредактировать строки и настроить расположение и размер элементов управления таким образом, чтобы они смогли вместить строки на языке локализации. Среда Visual Studio при сохранении локализованного RESX-файла записывает в него только локализуемые свойства (изменяющиеся на языке локализации). Среда Visual Studio автоматически создает в нужном каталоге вспомогательную сборку для локализованного RESX-файла.

Хотя Visual Studio обеспечивает интегрированную среду разработки и локализации, сторонним локализаторам рекомендуется использовать программу Winres.exe. Так как программа Winres.exe предназначена только для локализации, она позволяет более четко отделить код приложения от локализуемых форм, что лучше подходит для управления большими проектами.

## <a name="using-winresexe"></a>Использование программы Winres.exe

Чтобы выполнить локализацию с помощью программы Winres.exe, необходимо сначала разработать приложение с помощью визуального конструктора, такого как **конструктор Windows Forms** в Visual Studio. После завершения разработки присвойте свойству <xref:System.ComponentModel.LocalizableAttribute> данной формы (свойство **Localizable** в редакторе **свойств**) значение `true` и передайте стороннему локализатору RESX-файл с языком и региональными параметрами по умолчанию. Такой RESX-файл содержит дополнительные сведения, которые программа Winres.exe использует для воссоздания версии исходной формы, соответствующей времени разработки.

> [!NOTE]
> Программу Winres.exe нельзя использовать для редактирования файла ресурсов по умолчанию. Программа Winres.exe интерпретирует все измененные свойства как локализованные и сохраняет их в файле ресурсов на языке локализации.

Окончательные версии файлов ресурсов на языке локализации могут в итоге быть использованы для создания локализованных версий приложения. Дополнительные сведения см. в разделе [Ресурсы в приложениях для настольных систем](../resources/index.md).

Программа Winres.exe поддерживает следующие возможности:

- Программа Winres может работать в режиме одного файла (SFM) или в режиме файлов Visual Studio (VSFM). SFM — это устаревший режим, предусматривающий хранение всей информации о форме и ее содержимом в файле ресурсов. В режиме VSFM в файле ресурсов хранятся только изменения, связанные с языком и региональными параметрами.

- Окно сообщений об ошибках находится в левом нижнем углу основного окна.

- С помощью команды **Проверить сочетания клавиш** в меню **Формат** можно проверить наличие дублирующихся сочетаний клавиш.

## <a name="version-compatibility"></a>Совместимость версий

Рекомендуется использовать версию Winres.exe, выпущенную вместе с платформой .NET Framework. В таблице ниже представлен список совместимых версий:

|Visual Studio|.NET Framework|Winres.exe|
|-------------------|--------------------|----------------|
|Visual Studio .NET 2002|1,0|1,0|
|Visual Studio .NET 2003|1,1|1,1|
|Visual Studio 2005|2.0|2.0|
|Visual Studio 2008|3.0 и 3.5|3.0 и 3.5|
|Visual Studio 2010|4.0|4.0|
|Visual Studio 2017|4.6|4.6|

> [!NOTE]
> Режим VSFM обладает преимуществом в плане совместимости с Visual Studio, но поскольку в этом режиме в файле ресурсов хранятся только измененные значения, для программы Winres.exe требуется, чтобы в каталоге текущего файла ресурсов располагались и его родительские файлы. Например, при редактировании немецкоязычного файла ресурсов `TestApp.de-DE.resources` необходимо наличие файла ресурсов по умолчанию `TestApp.resx`, а также, возможно, не зависящего от языка файла ресурсов `TestApp.de.resources`.

## <a name="examples"></a>Примеры

### <a name="to-localize-a-resx-or-resources-file-associated-with-a-form"></a>Локализация файла RESX или RESOURCES, связанного с формой

1. Чтобы запустить программу Winres.exe, введите в командной строке разработчика `winres`.

2. Чтобы открыть ресурсы по умолчанию для локализуемой формы, выберите команду **Открыть** в меню **Файл** и найдите нужный файл.

     -или-

     При запуске программы Winres.exe в командной строке укажите файл, который требуется открыть.

     Следующая команда запускает программу Winres.exe и загружает форму, связанную с файлом `TestApp.resx`, в конструктор форм.

    ```console
    winres TestApp.resx
    ```

     Следующая команда запускает программу Winres.exe и загружает форму, связанную с файлом `TestApp.resources`, в конструктор форм.

    ```console
    winres TestApp.resources
    ```

    > [!NOTE]
    > Если форма, ресурсы которой редактируются, является унаследованной, необходимо, чтобы и сборка, содержавшая исходную форму, и сборка, содержащая наследующую (производную) форму, были зарегистрированы в глобальном кэше сборок или располагались в том же каталоге, что и программа WinRes.exe. Дополнительные сведения об установке компонентов .NET Framework в глобальный кэш сборок см. в разделе [Глобальный кэш сборок](../app-domains/gac.md).

3. Выберите элементы управления в форме и измените значения их свойства <xref:System.Windows.Forms.Control.Text%2A> и других свойств в соответствии с языком локализации и региональными параметрами. Переместите элементы управления или измените их размер, чтобы вместить локализованный текст.

4. Чтобы сохранить локализованную версию файла RESX или RESOURCES, щелкните значок **Сохранить** или выберите команду с тем же именем в меню **Файл**. Откроется окно **Выбор языка и региональных параметров**.

5. Выберите нужный язык и файловый режим и нажмите кнопку **ОК**.

   Программа сохранит файл, используя правила присвоения имен, которые среда выполнения требует применять к локализованным файлам ресурсов. Например, при локализации файла `TestApp.resources` на немецкий язык (Германия) этот файл будет сохранен как `TestApp.de-DE.resources`. При локализации файла `TestApp.resx` на немецкий язык (Германия) файл сохраняется как `TestApp.de-DE.resx`. Подробнее о соглашениях об именовании ресурсов см. в разделе [Упаковка и развертывание ресурсов](../resources/packaging-and-deploying-resources-in-desktop-apps.md). Список предварительно определенных названий языков, используемых средой выполнения, см. в разделе о классе <xref:System.Globalization.CultureInfo>.

## <a name="see-also"></a>См. также раздел

- <xref:System.ComponentModel.LocalizableAttribute>
- <xref:System.Globalization.CultureInfo>
- <xref:System.Resources.ResourceManager>
- <xref:System.Resources.ResourceReader>
- <xref:System.Resources.ResourceWriter>
- [Инструменты](index.md)
- [Ресурсы в приложениях для настольных систем](../resources/index.md)
- [Глобализация и локализация](../../standard/globalization-localization/index.md)
