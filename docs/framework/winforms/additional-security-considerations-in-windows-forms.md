---
title: Дополнительные вопросы безопасности в формах Windows Forms
ms.date: 03/30/2017
helpviewer_keywords:
- Windows Forms, secure calls to Windows API
- security [Windows Forms]
- security [Windows Forms], calling APIs
- Clipboard [Windows Forms], securing access
ms.assetid: 15abda8b-0527-47c7-aedb-77ab595f2bf1
ms.openlocfilehash: 0dc0ddaa1f64b75c0b4ccc1f5e73638576ea3da2
ms.sourcegitcommit: efff8f331fd9467f093f8ab8d23a203d6ecb5b60
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/01/2018
ms.locfileid: "43408456"
---
# <a name="additional-security-considerations-in-windows-forms"></a><span data-ttu-id="0efdd-102">Дополнительные вопросы безопасности в формах Windows Forms</span><span class="sxs-lookup"><span data-stu-id="0efdd-102">Additional Security Considerations in Windows Forms</span></span>
<span data-ttu-id="0efdd-103">Приложение может работать по-разному в среде с частичным доверием и на локальном компьютере из-за параметров безопасности [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0efdd-103">[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] security settings might cause your application to run differently in a partial trust environment than on your local computer.</span></span> <span data-ttu-id="0efdd-104">[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] ограничивает доступ, помимо прочего, к таким важным локальным ресурсам, как файловая система, сеть и неуправляемые API.</span><span class="sxs-lookup"><span data-stu-id="0efdd-104">The [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] restricts access to such critical local resources as the file system, network, and unmanaged APIs, among other things.</span></span> <span data-ttu-id="0efdd-105">Параметры безопасности влияют на возможность вызова интерфейса Microsoft Win32 API или других интерфейсов API, которые не могут быть проверены системой безопасности.</span><span class="sxs-lookup"><span data-stu-id="0efdd-105">The security settings affect the ability to call the Microsoft Win32 API or other APIs that cannot be verified by the security system.</span></span> <span data-ttu-id="0efdd-106">Безопасность также влияет на другие аспекты приложения, включая доступ к файлам и данным, и вывод на печать.</span><span class="sxs-lookup"><span data-stu-id="0efdd-106">Security also affects other aspects of your application, including file and data access, and printing.</span></span> <span data-ttu-id="0efdd-107">Дополнительные сведения о доступе к файлам и данным в среде с частичным доверием см. в разделе [Более безопасный доступ к файлам и данным в Windows Forms](../../../docs/framework/winforms/more-secure-file-and-data-access-in-windows-forms.md).</span><span class="sxs-lookup"><span data-stu-id="0efdd-107">For more information about file and data access in a partial trust environment, see [More Secure File and Data Access in Windows Forms](../../../docs/framework/winforms/more-secure-file-and-data-access-in-windows-forms.md).</span></span> <span data-ttu-id="0efdd-108">Дополнительные сведения о выводе на печать в среде с частичным доверием см. в разделе [Более безопасная печать в Windows Forms](../../../docs/framework/winforms/more-secure-printing-in-windows-forms.md).</span><span class="sxs-lookup"><span data-stu-id="0efdd-108">For more information about printing in a partial trust environment, see [More Secure Printing in Windows Forms](../../../docs/framework/winforms/more-secure-printing-in-windows-forms.md).</span></span>  
  
 <span data-ttu-id="0efdd-109">В следующих разделах описывается работа с буфером обмена, управление окнами и вызов Win32 API из приложений, работающих в среде с частичным доверием.</span><span class="sxs-lookup"><span data-stu-id="0efdd-109">The following sections discuss how to work with the Clipboard, perform window manipulation, and call the Win32 API from applications that are running in a partial trust environment.</span></span>  
  
## <a name="clipboard-access"></a><span data-ttu-id="0efdd-110">Доступ к буферу обмена</span><span class="sxs-lookup"><span data-stu-id="0efdd-110">Clipboard Access</span></span>  
 <span data-ttu-id="0efdd-111"><xref:System.Security.Permissions.UIPermission> Класс управляет доступом к буфера обмена, а также <xref:System.Security.Permissions.UIPermissionClipboard> значение перечисления указывает уровень доступа.</span><span class="sxs-lookup"><span data-stu-id="0efdd-111">The <xref:System.Security.Permissions.UIPermission> class controls access to the Clipboard, and the associated <xref:System.Security.Permissions.UIPermissionClipboard> enumeration value indicates the level of access.</span></span> <span data-ttu-id="0efdd-112">В следующей таблице приведены возможные уровни разрешения.</span><span class="sxs-lookup"><span data-stu-id="0efdd-112">The following table shows the possible permission levels.</span></span>  
  
|<span data-ttu-id="0efdd-113">Значение UIPermissionClipboard</span><span class="sxs-lookup"><span data-stu-id="0efdd-113">UIPermissionClipboard value</span></span>|<span data-ttu-id="0efdd-114">Описание:</span><span class="sxs-lookup"><span data-stu-id="0efdd-114">Description</span></span>|  
|---------------------------------|-----------------|  
|<xref:System.Security.Permissions.UIPermissionClipboard.AllClipboard>|<span data-ttu-id="0efdd-115">Буфер обмена можно использовать без ограничений.</span><span class="sxs-lookup"><span data-stu-id="0efdd-115">The Clipboard can be used without restriction.</span></span>|  
|<xref:System.Security.Permissions.UIPermissionClipboard.OwnClipboard>|<span data-ttu-id="0efdd-116">Буфер обмена можно использовать с некоторыми ограничениями.</span><span class="sxs-lookup"><span data-stu-id="0efdd-116">The Clipboard can be used with some restrictions.</span></span> <span data-ttu-id="0efdd-117">Возможность размещения данных в буфере обмена (операции с командами копирования и вырезания) не ограничена.</span><span class="sxs-lookup"><span data-stu-id="0efdd-117">The ability to put data on the Clipboard (Copy or Cut command operations) is unrestricted.</span></span> <span data-ttu-id="0efdd-118">Встроенные элементы управления, которые принимают операцию вставки, например текстовое поле, могут принимать данные из буфера обмена, но пользовательские элементы управления не могут программно считывать данные из буфера обмена.</span><span class="sxs-lookup"><span data-stu-id="0efdd-118">Intrinsic controls that accept paste, such as a text box, can accept Clipboard data, but user controls cannot programmatically read from the Clipboard.</span></span>|  
|<xref:System.Security.Permissions.UIPermissionClipboard.NoClipboard>|<span data-ttu-id="0efdd-119">Буфер обмена использовать нельзя.</span><span class="sxs-lookup"><span data-stu-id="0efdd-119">The Clipboard cannot be used.</span></span>|  
  
 <span data-ttu-id="0efdd-120">По умолчанию в зону локальной интрасети получает <xref:System.Security.Permissions.UIPermissionClipboard.AllClipboard> доступа и зона Интернета получает <xref:System.Security.Permissions.UIPermissionClipboard.OwnClipboard> доступа.</span><span class="sxs-lookup"><span data-stu-id="0efdd-120">By default, the Local Intranet zone receives <xref:System.Security.Permissions.UIPermissionClipboard.AllClipboard> access and the Internet zone receives <xref:System.Security.Permissions.UIPermissionClipboard.OwnClipboard> access.</span></span> <span data-ttu-id="0efdd-121">Это означает, что приложение может копировать данные в буфер обмена, но не может программно вставлять или считывать данные из буфера обмена.</span><span class="sxs-lookup"><span data-stu-id="0efdd-121">This means that the application can copy data to the Clipboard, but the application cannot programmatically paste to or read from the Clipboard.</span></span> <span data-ttu-id="0efdd-122">Благодаря таким ограничениям программы, не имеющие полного доверия, не могут считывать содержимое из буфера обмена, скопированное другим приложением.</span><span class="sxs-lookup"><span data-stu-id="0efdd-122">These restrictions prevent programs without full trust from reading content copied to the Clipboard by another application.</span></span> <span data-ttu-id="0efdd-123">Если приложению требуется полный доступ к буферу обмена, но у вас нет соответствующих разрешений, для приложения необходимо повысить уровень разрешений.</span><span class="sxs-lookup"><span data-stu-id="0efdd-123">If your application requires full Clipboard access but you do not have the permissions, you will have to elevate the permissions for your application.</span></span> <span data-ttu-id="0efdd-124">Дополнительные сведения о повышении уровня разрешений см. в разделе [Общее администрирование политик безопасности](https://msdn.microsoft.com/library/5121fe35-f0e3-402c-94ab-4f35b0a87b4b).</span><span class="sxs-lookup"><span data-stu-id="0efdd-124">For more information about elevating permissions, see [General Security Policy Administration](https://msdn.microsoft.com/library/5121fe35-f0e3-402c-94ab-4f35b0a87b4b).</span></span>  
  
## <a name="window-manipulation"></a><span data-ttu-id="0efdd-125">Управление окнами</span><span class="sxs-lookup"><span data-stu-id="0efdd-125">Window Manipulation</span></span>  
 <span data-ttu-id="0efdd-126"><xref:System.Security.Permissions.UIPermission> Класс также управляет разрешениями для выполнения работы с окнами и других действий, связанных с пользовательского интерфейса, а также <xref:System.Security.Permissions.UIPermissionWindow> значение перечисления указывает уровень доступа.</span><span class="sxs-lookup"><span data-stu-id="0efdd-126">The <xref:System.Security.Permissions.UIPermission> class also controls permission to perform window manipulation and other UI-related actions, and the associated <xref:System.Security.Permissions.UIPermissionWindow> enumeration value indicates the level of access.</span></span> <span data-ttu-id="0efdd-127">В следующей таблице приведены возможные уровни разрешения.</span><span class="sxs-lookup"><span data-stu-id="0efdd-127">The following table shows the possible permission levels.</span></span>  
  
 <span data-ttu-id="0efdd-128">По умолчанию в зону локальной интрасети получает <xref:System.Security.Permissions.UIPermissionWindow.AllWindows> доступа и зона Интернета получает <xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows> доступа.</span><span class="sxs-lookup"><span data-stu-id="0efdd-128">By default, the Local Intranet zone receives <xref:System.Security.Permissions.UIPermissionWindow.AllWindows> access and the Internet zone receives <xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows> access.</span></span> <span data-ttu-id="0efdd-129">Это означает, что в зоне Интернета приложение может выполнять большинство операций с окнами и пользовательским интерфейсом, но внешний вид окна будет изменяться.</span><span class="sxs-lookup"><span data-stu-id="0efdd-129">This means that in the Internet zone, the application can perform most windowing and UI actions, but the window's appearance will be modified.</span></span> <span data-ttu-id="0efdd-130">В измененном окне при первом запуске отображается всплывающее уведомление. В таком окне также изменен заголовок, а в строке заголовка должна быть кнопка "Закрыть".</span><span class="sxs-lookup"><span data-stu-id="0efdd-130">The modified window displays a balloon notification when first run, contains modified title bar text, and requires a close button on the title bar.</span></span> <span data-ttu-id="0efdd-131">Всплывающее уведомление и строка заголовка информируют пользователя приложения о том, что данное приложение выполняется в режиме частичного доверия.</span><span class="sxs-lookup"><span data-stu-id="0efdd-131">The balloon notification and the title bar identify to the user of the application that the application is running under partial trust.</span></span>  
  
|<span data-ttu-id="0efdd-132">Значение UIPermissionWindow</span><span class="sxs-lookup"><span data-stu-id="0efdd-132">UIPermissionWindow value</span></span>|<span data-ttu-id="0efdd-133">Описание:</span><span class="sxs-lookup"><span data-stu-id="0efdd-133">Description</span></span>|  
|------------------------------|-----------------|  
|<xref:System.Security.Permissions.UIPermissionWindow.AllWindows>|<span data-ttu-id="0efdd-134">Пользователи могут использовать все окна и события пользовательского ввода без каких-либо ограничений.</span><span class="sxs-lookup"><span data-stu-id="0efdd-134">Users can use all windows and user input events without restriction.</span></span>|  
|<xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows>|<span data-ttu-id="0efdd-135">Пользователи могут использовать для рисования только более безопасные окна верхнего уровня и дочерние окна, а также события пользовательского ввода для пользовательского интерфейса в таких окнах и дочерних окнах.</span><span class="sxs-lookup"><span data-stu-id="0efdd-135">Users can use only safer top-level windows and safer subwindows for drawing, and can use only user input events for the user interface within those top-level windows and subwindows.</span></span> <span data-ttu-id="0efdd-136">Такие более безопасные окна имеют специальные метки, а также ограничения на минимальный и максимальный размер.</span><span class="sxs-lookup"><span data-stu-id="0efdd-136">These safer windows are clearly labeled and have minimum and maximum size restrictions.</span></span> <span data-ttu-id="0efdd-137">Эти ограничения предотвращают потенциально опасные атаки с подменой, такие как имитация экрана входа в систему или рабочего стола системы и ограничивают программный доступ к родительским windows API, связанные с фокусом и использование <xref:System.Windows.Forms.ToolTip> элемента управления,</span><span class="sxs-lookup"><span data-stu-id="0efdd-137">The restrictions prevent potentially harmful spoofing attacks, such as imitating system logon screens or the system desktop, and restricts programmatic access to parent windows, focus-related APIs, and use of the <xref:System.Windows.Forms.ToolTip> control,</span></span>|  
|<xref:System.Security.Permissions.UIPermissionWindow.SafeSubWindows>|<span data-ttu-id="0efdd-138">Пользователи могут использовать для рисования только более безопасные дочерние окна, а также события пользовательского ввода для пользовательского интерфейса в таких дочерних окнах.</span><span class="sxs-lookup"><span data-stu-id="0efdd-138">Users can use only safer subwindows for drawing, and can use only user input events for the user interface within that subwindow.</span></span> <span data-ttu-id="0efdd-139">Примером такого более безопасного дочернего окна является элемент управления, отображаемый в браузере.</span><span class="sxs-lookup"><span data-stu-id="0efdd-139">A control displayed within a browser is an example of a safer subwindow.</span></span>|  
|<xref:System.Security.Permissions.UIPermissionWindow.NoWindows>|<span data-ttu-id="0efdd-140">Пользователи не могут использовать никакие окна и события пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="0efdd-140">Users cannot use any windows or user interface events.</span></span> <span data-ttu-id="0efdd-141">Пользовательский интерфейс использовать нельзя.</span><span class="sxs-lookup"><span data-stu-id="0efdd-141">No user interface can be used.</span></span>|  
  
 <span data-ttu-id="0efdd-142">Каждый уровень разрешений, определенный <xref:System.Security.Permissions.UIPermissionWindow> перечисление позволяет выполнять меньшее количество действий, чем на уровень выше.</span><span class="sxs-lookup"><span data-stu-id="0efdd-142">Each permission level identified by the <xref:System.Security.Permissions.UIPermissionWindow> enumeration allows fewer actions than the level above it.</span></span> <span data-ttu-id="0efdd-143">В следующих таблицах указаны действия, которые ограничены <xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows> и <xref:System.Security.Permissions.UIPermissionWindow.SafeSubWindows> значения.</span><span class="sxs-lookup"><span data-stu-id="0efdd-143">The following tables indicate the actions that are restricted by the <xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows> and <xref:System.Security.Permissions.UIPermissionWindow.SafeSubWindows> values.</span></span> <span data-ttu-id="0efdd-144">Точные разрешения, необходимые для каждого члена, представлены в справочном разделе для этого члена в документации по библиотеке классов .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="0efdd-144">For exact permissions that are required for each member, see the reference for that member in the .NET Framework class library documentation.</span></span>  
  
 <span data-ttu-id="0efdd-145"><xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows> разрешение ограничивает действия, приведенные в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="0efdd-145"><xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows> permission restricts the actions listed in the following table.</span></span>  
  
|<span data-ttu-id="0efdd-146">Компонент</span><span class="sxs-lookup"><span data-stu-id="0efdd-146">Component</span></span>|<span data-ttu-id="0efdd-147">Ограниченные действия</span><span class="sxs-lookup"><span data-stu-id="0efdd-147">Restricted actions</span></span>|  
|---------------|------------------------|  
|<xref:System.Windows.Forms.Application>|<span data-ttu-id="0efdd-148">— Задание значения для свойства <xref:System.Windows.Forms.Application.SafeTopLevelCaptionFormat%2A>.</span><span class="sxs-lookup"><span data-stu-id="0efdd-148">-   Setting the <xref:System.Windows.Forms.Application.SafeTopLevelCaptionFormat%2A> property.</span></span>|  
|<xref:System.Windows.Forms.Control>|<span data-ttu-id="0efdd-149">— Получение <xref:System.Windows.Forms.Control.Parent%2A> свойство.</span><span class="sxs-lookup"><span data-stu-id="0efdd-149">-   Getting the <xref:System.Windows.Forms.Control.Parent%2A> property.</span></span><br /><span data-ttu-id="0efdd-150">— Задание значения для свойства `Region`.</span><span class="sxs-lookup"><span data-stu-id="0efdd-150">-   Setting the `Region` property.</span></span><br /><span data-ttu-id="0efdd-151">— Вызов <xref:System.Windows.Forms.Control.FindForm%2A> , <xref:System.Windows.Forms.Control.Focus%2A>, <xref:System.Windows.Forms.Control.FromChildHandle%2A> и <xref:System.Windows.Forms.Control.FromHandle%2A>, <xref:System.Windows.Forms.Control.PreProcessMessage%2A>, <xref:System.Windows.Forms.Control.ReflectMessage%2A>, или <xref:System.Windows.Forms.Control.SetTopLevel%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="0efdd-151">-   Calling the <xref:System.Windows.Forms.Control.FindForm%2A> , <xref:System.Windows.Forms.Control.Focus%2A>, <xref:System.Windows.Forms.Control.FromChildHandle%2A> and <xref:System.Windows.Forms.Control.FromHandle%2A>, <xref:System.Windows.Forms.Control.PreProcessMessage%2A>, <xref:System.Windows.Forms.Control.ReflectMessage%2A>, or <xref:System.Windows.Forms.Control.SetTopLevel%2A> method.</span></span><br /><span data-ttu-id="0efdd-152">— Вызов <xref:System.Windows.Forms.Control.GetChildAtPoint%2A> метод, если возвращенный элемент управления не является дочерним элементом вызывающего элемента управления.</span><span class="sxs-lookup"><span data-stu-id="0efdd-152">-   Calling the <xref:System.Windows.Forms.Control.GetChildAtPoint%2A> method if the control returned is not a child of the calling control.</span></span><br /><span data-ttu-id="0efdd-153">— Изменение фокуса элемента управления в контейнерном элементе управления.</span><span class="sxs-lookup"><span data-stu-id="0efdd-153">-   Modify control focus inside a container control.</span></span>|  
|<xref:System.Windows.Forms.Cursor>|<span data-ttu-id="0efdd-154">— Задание значения для свойства <xref:System.Windows.Forms.Cursor.Clip%2A>.</span><span class="sxs-lookup"><span data-stu-id="0efdd-154">-   Setting the <xref:System.Windows.Forms.Cursor.Clip%2A> property.</span></span><br /><span data-ttu-id="0efdd-155">— Вызов <xref:System.Windows.Forms.Control.Hide%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="0efdd-155">-   Calling the <xref:System.Windows.Forms.Control.Hide%2A> method.</span></span>|  
|<xref:System.Windows.Forms.DataGrid>|<span data-ttu-id="0efdd-156">— Вызов <xref:System.Windows.Forms.ContainerControl.ProcessTabKey%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="0efdd-156">-   Calling the <xref:System.Windows.Forms.ContainerControl.ProcessTabKey%2A> method.</span></span>|  
|<xref:System.Windows.Forms.Form>|<span data-ttu-id="0efdd-157">— Получение <xref:System.Windows.Forms.Form.ActiveForm%2A> или <xref:System.Windows.Forms.Form.MdiParent%2A> свойство.</span><span class="sxs-lookup"><span data-stu-id="0efdd-157">-   Getting the <xref:System.Windows.Forms.Form.ActiveForm%2A> or <xref:System.Windows.Forms.Form.MdiParent%2A> property.</span></span><br /><span data-ttu-id="0efdd-158">— Задание <xref:System.Windows.Forms.Form.ControlBox%2A>, <xref:System.Windows.Forms.Form.ShowInTaskbar%2A>, или <xref:System.Windows.Forms.Form.TopMost%2A> свойство.</span><span class="sxs-lookup"><span data-stu-id="0efdd-158">-   Setting the <xref:System.Windows.Forms.Form.ControlBox%2A>, <xref:System.Windows.Forms.Form.ShowInTaskbar%2A>, or <xref:System.Windows.Forms.Form.TopMost%2A> property.</span></span><br /><span data-ttu-id="0efdd-159">— Задание <xref:System.Windows.Forms.Form.Opacity%2A> свойство ниже 50%.</span><span class="sxs-lookup"><span data-stu-id="0efdd-159">-   Setting the <xref:System.Windows.Forms.Form.Opacity%2A> property below 50%.</span></span><br /><span data-ttu-id="0efdd-160">— Задание <xref:System.Windows.Forms.Form.WindowState%2A> свойства <xref:System.Windows.Forms.FormWindowState.Minimized> программным способом.</span><span class="sxs-lookup"><span data-stu-id="0efdd-160">-   Setting the <xref:System.Windows.Forms.Form.WindowState%2A> property to <xref:System.Windows.Forms.FormWindowState.Minimized> programmatically.</span></span><br /><span data-ttu-id="0efdd-161">— Вызов <xref:System.Windows.Forms.Form.Activate%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="0efdd-161">-   Calling the <xref:System.Windows.Forms.Form.Activate%2A> method.</span></span><br /><span data-ttu-id="0efdd-162">— Использование <xref:System.Windows.Forms.FormBorderStyle.None>, <xref:System.Windows.Forms.FormBorderStyle.FixedToolWindow>, и <xref:System.Windows.Forms.FormBorderStyle.SizableToolWindow> <xref:System.Windows.Forms.FormBorderStyle> значений перечисления.</span><span class="sxs-lookup"><span data-stu-id="0efdd-162">-   Using the <xref:System.Windows.Forms.FormBorderStyle.None>, <xref:System.Windows.Forms.FormBorderStyle.FixedToolWindow>, and <xref:System.Windows.Forms.FormBorderStyle.SizableToolWindow><xref:System.Windows.Forms.FormBorderStyle> enumeration values.</span></span>|  
|<xref:System.Windows.Forms.NotifyIcon>|<span data-ttu-id="0efdd-163">— Использование <xref:System.Windows.Forms.NotifyIcon> компонент полностью запрещено.</span><span class="sxs-lookup"><span data-stu-id="0efdd-163">-   Using the <xref:System.Windows.Forms.NotifyIcon> component is completely restricted.</span></span>|  
  
 <span data-ttu-id="0efdd-164"><xref:System.Security.Permissions.UIPermissionWindow.SafeSubWindows> Ограничивает действия, перечисленные в следующей таблице, кроме ограничений, налагаемых по <xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows> значение.</span><span class="sxs-lookup"><span data-stu-id="0efdd-164">The <xref:System.Security.Permissions.UIPermissionWindow.SafeSubWindows> value restricts the actions listed in the following table, in addition to the restrictions placed by the <xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows> value.</span></span>  
  
|<span data-ttu-id="0efdd-165">Компонент</span><span class="sxs-lookup"><span data-stu-id="0efdd-165">Component</span></span>|<span data-ttu-id="0efdd-166">Ограниченные действия</span><span class="sxs-lookup"><span data-stu-id="0efdd-166">Restricted actions</span></span>|  
|---------------|------------------------|  
|<xref:System.Windows.Forms.CommonDialog>|<span data-ttu-id="0efdd-167">-Отображение диалогового окна производным от <xref:System.Windows.Forms.CommonDialog> класса.</span><span class="sxs-lookup"><span data-stu-id="0efdd-167">-   Showing a dialog box derived from the <xref:System.Windows.Forms.CommonDialog> class.</span></span>|  
|<xref:System.Windows.Forms.Control>|<span data-ttu-id="0efdd-168">— Вызов <xref:System.Windows.Forms.Control.CreateGraphics%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="0efdd-168">-   Calling the <xref:System.Windows.Forms.Control.CreateGraphics%2A> method.</span></span><br /><span data-ttu-id="0efdd-169">— Задание значения для свойства <xref:System.Windows.Forms.Control.Cursor%2A>.</span><span class="sxs-lookup"><span data-stu-id="0efdd-169">-   Setting the <xref:System.Windows.Forms.Control.Cursor%2A> property.</span></span>|  
|<xref:System.Windows.Forms.Control.Cursor%2A>|<span data-ttu-id="0efdd-170">— Задание значения для свойства <xref:System.Windows.Forms.Cursor.Current%2A>.</span><span class="sxs-lookup"><span data-stu-id="0efdd-170">-   Setting the <xref:System.Windows.Forms.Cursor.Current%2A> property.</span></span>|  
|<xref:System.Windows.Forms.MessageBox>|<span data-ttu-id="0efdd-171">— Вызов <xref:System.Windows.Forms.Form.Show%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="0efdd-171">-   Calling the <xref:System.Windows.Forms.Form.Show%2A> method.</span></span>|  
  
### <a name="hosting-third-party-controls"></a><span data-ttu-id="0efdd-172">Размещение элементов управления сторонних производителей</span><span class="sxs-lookup"><span data-stu-id="0efdd-172">Hosting Third-Party Controls</span></span>  
 <span data-ttu-id="0efdd-173">Если ваши формы размещают элементы управления сторонних производителей, могут возникать другие операции управления окнами.</span><span class="sxs-lookup"><span data-stu-id="0efdd-173">Another kind of window manipulation can occur if your forms host third-party controls.</span></span> <span data-ttu-id="0efdd-174">Элемент управления стороннего производителя — любой пользовательский <xref:System.Windows.Forms.UserControl> наличие не разработан и скомпилирован, самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="0efdd-174">A third-party control is any custom <xref:System.Windows.Forms.UserControl> that you have not developed and compiled yourself.</span></span> <span data-ttu-id="0efdd-175">Несмотря на то, что вариантом размещения воспользоваться довольно сложно, теоретически элемент управления стороннего производителя может расширить свою поверхность отрисовки и полностью занять область вашей формы.</span><span class="sxs-lookup"><span data-stu-id="0efdd-175">Although the hosting scenario is hard to exploit, it is theoretically possible for a third-party control to expand its rendering surface to cover the entire area of your form.</span></span> <span data-ttu-id="0efdd-176">Затем такой элемент управления может сымитировать важное диалоговое окно и запросить у ваших пользователей такие сведения, как сочетание имени пользователя и пароля или номера банковских счетов.</span><span class="sxs-lookup"><span data-stu-id="0efdd-176">This control could then mimic a critical dialog box, and request information such as username/password combinations or bank account numbers from your users.</span></span>  
  
 <span data-ttu-id="0efdd-177">Чтобы ограничить такой потенциальный риск, используйте элементы управления только доверенных сторонних производителей.</span><span class="sxs-lookup"><span data-stu-id="0efdd-177">To limit this potential risk, use third-party controls only from vendors you can trust.</span></span> <span data-ttu-id="0efdd-178">Если вы используете элементы управления стороннего производителя, загруженные из непроверяемого источника, рекомендуем просмотреть исходный код на предмет наличия потенциальной уязвимости.</span><span class="sxs-lookup"><span data-stu-id="0efdd-178">If you use third-party controls you have downloaded from an unverifiable source, we recommend that you review the source code for potential exploits.</span></span> <span data-ttu-id="0efdd-179">Убедившись, что источник не является вредоносным, скомпилируйте сборку самостоятельно и проверьте, соответствует ли исходный код сборке.</span><span class="sxs-lookup"><span data-stu-id="0efdd-179">After you've verified that the source is non-malicious, you should compile the assembly yourself to ensure that the source matches the assembly.</span></span>  
  
## <a name="win32-api-calls"></a><span data-ttu-id="0efdd-180">Вызовы API Win32</span><span class="sxs-lookup"><span data-stu-id="0efdd-180">Win32 API Calls</span></span>  
 <span data-ttu-id="0efdd-181">Если при разработке приложения требуется вызов функции из интерфейса API Win32, осуществляется доступ к неуправляемому коду.</span><span class="sxs-lookup"><span data-stu-id="0efdd-181">If your application design requires calling a function from the Win32 API, you are accessing unmanaged code.</span></span> <span data-ttu-id="0efdd-182">В этом случае при работе с вызовами Win32 API или значениями действия кода с окном или операционной системой определить невозможно.</span><span class="sxs-lookup"><span data-stu-id="0efdd-182">In this case the code's actions to the window or operating system cannot be determined when you are working with Win32 API calls or values.</span></span> <span data-ttu-id="0efdd-183"><xref:System.Security.Permissions.SecurityPermission> Класс и <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> значение <xref:System.Security.Permissions.SecurityPermissionFlag> перечисления управления доступом к неуправляемому коду.</span><span class="sxs-lookup"><span data-stu-id="0efdd-183">The <xref:System.Security.Permissions.SecurityPermission> class and the <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> value of the <xref:System.Security.Permissions.SecurityPermissionFlag> enumeration control access to unmanaged code.</span></span> <span data-ttu-id="0efdd-184">Приложение можно получать доступ к неуправляемым кодом только в том случае, если ему предоставлено <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> разрешение.</span><span class="sxs-lookup"><span data-stu-id="0efdd-184">An application can access unmanaged code only when it is granted the <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> permission.</span></span> <span data-ttu-id="0efdd-185">По умолчанию вызывать неуправляемый код могут только приложения, которые выполняются локально.</span><span class="sxs-lookup"><span data-stu-id="0efdd-185">By default, only applications that are running locally can call unmanaged code.</span></span>  
  
 <span data-ttu-id="0efdd-186">Некоторые элементы Windows Forms предоставляют неуправляемый доступ, требующий <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> разрешение.</span><span class="sxs-lookup"><span data-stu-id="0efdd-186">Some Windows Forms members provide unmanaged access that requires the <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> permission.</span></span> <span data-ttu-id="0efdd-187">В следующей таблице перечислены элементы <xref:System.Windows.Forms> пространства имен, которым требуется это разрешение.</span><span class="sxs-lookup"><span data-stu-id="0efdd-187">The following table lists the members in the <xref:System.Windows.Forms> namespace that require the permission.</span></span> <span data-ttu-id="0efdd-188">Дополнительные сведения о разрешениях, требуемых для элемента, см. в разделе документации по библиотеке классов .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="0efdd-188">For more information about the permissions that are required for a member, see the .NET Framework class library documentation.</span></span>  
  
|<span data-ttu-id="0efdd-189">Компонент</span><span class="sxs-lookup"><span data-stu-id="0efdd-189">Component</span></span>|<span data-ttu-id="0efdd-190">Член</span><span class="sxs-lookup"><span data-stu-id="0efdd-190">Member</span></span>|  
|---------------|------------|  
|<xref:System.Windows.Forms.Application>|<span data-ttu-id="0efdd-191">Метод -   <xref:System.Windows.Forms.Application.AddMessageFilter%2A></span><span class="sxs-lookup"><span data-stu-id="0efdd-191">-   <xref:System.Windows.Forms.Application.AddMessageFilter%2A> method</span></span><br /><span data-ttu-id="0efdd-192">-   <xref:System.Windows.Forms.Application.CurrentInputLanguage%2A> Свойство</span><span class="sxs-lookup"><span data-stu-id="0efdd-192">-   <xref:System.Windows.Forms.Application.CurrentInputLanguage%2A> property</span></span><br /><span data-ttu-id="0efdd-193">Метод -   `Exit`</span><span class="sxs-lookup"><span data-stu-id="0efdd-193">-   `Exit` method</span></span><br /><span data-ttu-id="0efdd-194">Метод -   <xref:System.Windows.Forms.Application.ExitThread%2A></span><span class="sxs-lookup"><span data-stu-id="0efdd-194">-   <xref:System.Windows.Forms.Application.ExitThread%2A> method</span></span><br /><span data-ttu-id="0efdd-195">-   <xref:System.Windows.Forms.Application.ThreadException> Событие</span><span class="sxs-lookup"><span data-stu-id="0efdd-195">-   <xref:System.Windows.Forms.Application.ThreadException> event</span></span>|  
|<xref:System.Windows.Forms.CommonDialog>|<span data-ttu-id="0efdd-196">Метод -   <xref:System.Windows.Forms.CommonDialog.HookProc%2A></span><span class="sxs-lookup"><span data-stu-id="0efdd-196">-   <xref:System.Windows.Forms.CommonDialog.HookProc%2A> method</span></span><br /><span data-ttu-id="0efdd-197">-   <xref:System.Windows.Forms.CommonDialog.OwnerWndProc%2A>\ метод</span><span class="sxs-lookup"><span data-stu-id="0efdd-197">-   <xref:System.Windows.Forms.CommonDialog.OwnerWndProc%2A>\ method</span></span><br /><span data-ttu-id="0efdd-198">Метод -   <xref:System.Windows.Forms.CommonDialog.Reset%2A></span><span class="sxs-lookup"><span data-stu-id="0efdd-198">-   <xref:System.Windows.Forms.CommonDialog.Reset%2A> method</span></span><br /><span data-ttu-id="0efdd-199">Метод -   <xref:System.Windows.Forms.CommonDialog.RunDialog%2A></span><span class="sxs-lookup"><span data-stu-id="0efdd-199">-   <xref:System.Windows.Forms.CommonDialog.RunDialog%2A> method</span></span>|  
|<xref:System.Windows.Forms.Control>|<span data-ttu-id="0efdd-200">Метод -   <xref:System.Windows.Forms.Control.CreateParams%2A></span><span class="sxs-lookup"><span data-stu-id="0efdd-200">-   <xref:System.Windows.Forms.Control.CreateParams%2A> method</span></span><br /><span data-ttu-id="0efdd-201">Метод -   <xref:System.Windows.Forms.Control.DefWndProc%2A></span><span class="sxs-lookup"><span data-stu-id="0efdd-201">-   <xref:System.Windows.Forms.Control.DefWndProc%2A> method</span></span><br /><span data-ttu-id="0efdd-202">Метод -   <xref:System.Windows.Forms.Control.DestroyHandle%2A></span><span class="sxs-lookup"><span data-stu-id="0efdd-202">-   <xref:System.Windows.Forms.Control.DestroyHandle%2A> method</span></span><br /><span data-ttu-id="0efdd-203">Метод -   <xref:System.Windows.Forms.Control.WndProc%2A></span><span class="sxs-lookup"><span data-stu-id="0efdd-203">-   <xref:System.Windows.Forms.Control.WndProc%2A> method</span></span>|  
|<xref:System.Windows.Forms.Help>|<span data-ttu-id="0efdd-204">-   <xref:System.Windows.Forms.Help.ShowHelp%2A> Методы</span><span class="sxs-lookup"><span data-stu-id="0efdd-204">-   <xref:System.Windows.Forms.Help.ShowHelp%2A> methods</span></span><br /><span data-ttu-id="0efdd-205">Метод -   <xref:System.Windows.Forms.Help.ShowHelpIndex%2A></span><span class="sxs-lookup"><span data-stu-id="0efdd-205">-   <xref:System.Windows.Forms.Help.ShowHelpIndex%2A> method</span></span>|  
|<xref:System.Windows.Forms.NativeWindow>|<span data-ttu-id="0efdd-206">-   <xref:System.Windows.Forms.NativeWindow> Класс</span><span class="sxs-lookup"><span data-stu-id="0efdd-206">-   <xref:System.Windows.Forms.NativeWindow> class</span></span>|  
|<xref:System.Windows.Forms.Screen>|<span data-ttu-id="0efdd-207">Метод -   <xref:System.Windows.Forms.Screen.FromHandle%2A></span><span class="sxs-lookup"><span data-stu-id="0efdd-207">-   <xref:System.Windows.Forms.Screen.FromHandle%2A> method</span></span>|  
|<xref:System.Windows.Forms.SendKeys>|<span data-ttu-id="0efdd-208">Метод -   <xref:System.Windows.Forms.SendKeys.Send%2A></span><span class="sxs-lookup"><span data-stu-id="0efdd-208">-   <xref:System.Windows.Forms.SendKeys.Send%2A> method</span></span><br /><span data-ttu-id="0efdd-209">Метод -   <xref:System.Windows.Forms.SendKeys.SendWait%2A></span><span class="sxs-lookup"><span data-stu-id="0efdd-209">-   <xref:System.Windows.Forms.SendKeys.SendWait%2A> method</span></span>|  
  
 <span data-ttu-id="0efdd-210">Если приложение не имеет разрешения на вызов неуправляемого кода, приложение должно запросить <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> разрешение, или необходимо подумать о других способах реализации этих возможностей; во многих случаях Windows Forms предоставляет управляемую альтернативу Win32 API функции.</span><span class="sxs-lookup"><span data-stu-id="0efdd-210">If your application does not have permission to call unmanaged code, your application must request <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> permission, or you must consider alternative ways of implementing features; in many cases, Windows Forms provides a managed alternative to Win32 API functions.</span></span> <span data-ttu-id="0efdd-211">Если альтернативного способа нет, а приложению необходимо получать доступ к неуправляемому коду, повысьте уровень разрешений для такого приложения.</span><span class="sxs-lookup"><span data-stu-id="0efdd-211">If no alternative means exist and the application must access unmanaged code, you will have to elevate the permissions for the application.</span></span>  
  
 <span data-ttu-id="0efdd-212">Благодаря разрешению на вызов неуправляемого кода приложение может выполнять практически любые действия.</span><span class="sxs-lookup"><span data-stu-id="0efdd-212">Permission to call unmanaged code allows an application to perform most anything.</span></span> <span data-ttu-id="0efdd-213">Следовательно, разрешение на вызов неуправляемого кода должно предоставляться только приложениям из доверенного источника.</span><span class="sxs-lookup"><span data-stu-id="0efdd-213">Therefore, permission to call unmanaged code should only be granted for applications that come from a trusted source.</span></span> <span data-ttu-id="0efdd-214">Кроме того, в зависимости от приложения, часть функциональных возможностей приложения, вызывающих неуправляемый код, может быть необязательной или использоваться только в среде с полным доверием.</span><span class="sxs-lookup"><span data-stu-id="0efdd-214">Alternatively, depending on the application, the piece of application functionality that makes the call to unmanaged code could be optional, or enabled in the full trust environment only.</span></span> <span data-ttu-id="0efdd-215">Дополнительные сведения об опасных разрешениях см. в разделе [Опасные разрешения и администрирование политик](../../../docs/framework/misc/dangerous-permissions-and-policy-administration.md).</span><span class="sxs-lookup"><span data-stu-id="0efdd-215">For more information about dangerous permissions, see [Dangerous Permissions and Policy Administration](../../../docs/framework/misc/dangerous-permissions-and-policy-administration.md).</span></span> <span data-ttu-id="0efdd-216">Дополнительные сведения о повышении уровня разрешений см. в разделе [NIB. Общее администрирование политик безопасности](https://msdn.microsoft.com/library/5121fe35-f0e3-402c-94ab-4f35b0a87b4b).</span><span class="sxs-lookup"><span data-stu-id="0efdd-216">For more information about elevating permissions, see [NIB: General Security Policy Administration](https://msdn.microsoft.com/library/5121fe35-f0e3-402c-94ab-4f35b0a87b4b).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0efdd-217">См. также</span><span class="sxs-lookup"><span data-stu-id="0efdd-217">See Also</span></span>  
 [<span data-ttu-id="0efdd-218">Более безопасный доступ к файлам и данным в Windows Forms</span><span class="sxs-lookup"><span data-stu-id="0efdd-218">More Secure File and Data Access in Windows Forms</span></span>](../../../docs/framework/winforms/more-secure-file-and-data-access-in-windows-forms.md)  
 [<span data-ttu-id="0efdd-219">Более безопасная печать в Windows Forms</span><span class="sxs-lookup"><span data-stu-id="0efdd-219">More Secure Printing in Windows Forms</span></span>](../../../docs/framework/winforms/more-secure-printing-in-windows-forms.md)  
 [<span data-ttu-id="0efdd-220">Общие сведения о безопасности в Windows Forms</span><span class="sxs-lookup"><span data-stu-id="0efdd-220">Security in Windows Forms Overview</span></span>](../../../docs/framework/winforms/security-in-windows-forms-overview.md)  
 [<span data-ttu-id="0efdd-221">Безопасность Windows Forms</span><span class="sxs-lookup"><span data-stu-id="0efdd-221">Windows Forms Security</span></span>](../../../docs/framework/winforms/windows-forms-security.md)  
 [<span data-ttu-id="0efdd-222">Защита приложений ClickOnce</span><span class="sxs-lookup"><span data-stu-id="0efdd-222">Securing ClickOnce Applications</span></span>](/visualstudio/deployment/securing-clickonce-applications)
