---
title: Сценарии безопасности приложений в SQL Server
ms.date: 03/30/2017
ms.assetid: 0164f3a4-406e-4693-bec3-03c8e18b46d7
ms.openlocfilehash: 1239715678bda648bc962f9b23667b954b540e3f
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
ms.locfileid: "33363329"
---
# <a name="application-security-scenarios-in-sql-server"></a><span data-ttu-id="1a062-102">Сценарии безопасности приложений в SQL Server</span><span class="sxs-lookup"><span data-stu-id="1a062-102">Application Security Scenarios in SQL Server</span></span>
<span data-ttu-id="1a062-103">Не существует одного правильного способа создания безопасного клиентского приложения SQL Server.</span><span class="sxs-lookup"><span data-stu-id="1a062-103">There is no single correct way to create a secure SQL Server client application.</span></span> <span data-ttu-id="1a062-104">Каждое приложение уникально своими требованиями, средой развертывания и количеством пользователей.</span><span class="sxs-lookup"><span data-stu-id="1a062-104">Every application is unique in its requirements, deployment environment, and user population.</span></span> <span data-ttu-id="1a062-105">Приложение, довольно хорошо защищенное при начальном развертывании, с течением времени может стать менее защищенным.</span><span class="sxs-lookup"><span data-stu-id="1a062-105">An application that is reasonably secure when it is initially deployed can become less secure over time.</span></span> <span data-ttu-id="1a062-106">Невозможно точно предсказать, какие угрозы могут возникнуть в будущем.</span><span class="sxs-lookup"><span data-stu-id="1a062-106">It is impossible to predict with any accuracy what threats may emerge in the future.</span></span>  
  
 <span data-ttu-id="1a062-107">SQL Server как продукт имел много версий, включающих новейшие средства безопасности, которые позволяют разработчикам создавать безопасные приложения баз данных.</span><span class="sxs-lookup"><span data-stu-id="1a062-107">SQL Server, as a product, has evolved over many versions to incorporate the latest security features that enable developers to create secure database applications.</span></span> <span data-ttu-id="1a062-108">Однако безопасность не является встроенным элементом; для нее требуется постоянное наблюдение и постоянные обновления.</span><span class="sxs-lookup"><span data-stu-id="1a062-108">However, security doesn't come in the box; it requires continual monitoring and updating.</span></span>  
  
## <a name="common-threats"></a><span data-ttu-id="1a062-109">Наиболее распространенные угрозы</span><span class="sxs-lookup"><span data-stu-id="1a062-109">Common Threats</span></span>  
 <span data-ttu-id="1a062-110">Разработчикам надо понимать угрозы безопасности, средства, предоставляемые для отражения этих угроз, и методы предотвращения внутренних брешей в безопасности.</span><span class="sxs-lookup"><span data-stu-id="1a062-110">Developers need to understand security threats, the tools provided to counter them, and how to avoid self-inflicted security holes.</span></span> <span data-ttu-id="1a062-111">Безопасность можно рассматривать как цепь, в которой разрыв одного звена нарушает прочность всей цепи.</span><span class="sxs-lookup"><span data-stu-id="1a062-111">Security can best be thought of as a chain, where a break in any one link compromises the strength of the whole.</span></span> <span data-ttu-id="1a062-112">В следующем списке приводятся наиболее распространенные угрозы безопасности, более подробно рассматриваемые в соответствующих разделах этой темы.</span><span class="sxs-lookup"><span data-stu-id="1a062-112">The following list includes some common security threats that are discussed in more detail in the topics in this section.</span></span>  
  
### <a name="sql-injection"></a><span data-ttu-id="1a062-113">Атака путем внедрения кода SQL</span><span class="sxs-lookup"><span data-stu-id="1a062-113">SQL Injection</span></span>  
 <span data-ttu-id="1a062-114">Внедрение кода SQL - это процесс, посредством которого пользователь-злоумышленник вводит инструкции языка Transact-SQL вместо допустимых входных данных.</span><span class="sxs-lookup"><span data-stu-id="1a062-114">SQL Injection is the process by which a malicious user enters Transact-SQL statements instead of valid input.</span></span> <span data-ttu-id="1a062-115">Если входные данные передаются непосредственно на сервер без оценки и если приложение случайно выполнит инфицированный код, атака сможет повредить или уничтожить данные.</span><span class="sxs-lookup"><span data-stu-id="1a062-115">If the input is passed directly to the server without being validated and if the application inadvertently executes the injected code, then the attack has the potential to damage or destroy data.</span></span> <span data-ttu-id="1a062-116">Атака путем внедрения кода SQL Server можно предотвратить, используя хранимые процедуры и параметризованные команды, отказавшись от динамического SQL и ограничив разрешения для всех пользователей.</span><span class="sxs-lookup"><span data-stu-id="1a062-116">You can thwart SQL Server injection attacks by using stored procedures and parameterized commands, avoiding dynamic SQL, and restricting permissions on all users.</span></span>  
  
### <a name="elevation-of-privilege"></a><span data-ttu-id="1a062-117">Повышение привилегий</span><span class="sxs-lookup"><span data-stu-id="1a062-117">Elevation of Privilege</span></span>  
 <span data-ttu-id="1a062-118">Атаки повышения прав доступа возникают, если пользователь может принимать права доступа доверенной учетной записи, например учетной записи владельца или администратора.</span><span class="sxs-lookup"><span data-stu-id="1a062-118">Elevation of privilege attacks occur when a user is able to assume the privileges of a trusted account, such as an owner or administrator.</span></span> <span data-ttu-id="1a062-119">Всегда следует выполнять код под учетными записями с наименьшими правами доступа и назначать только необходимые разрешения.</span><span class="sxs-lookup"><span data-stu-id="1a062-119">Always run under least-privileged user accounts and assign only needed permissions.</span></span> <span data-ttu-id="1a062-120">Избегайте использования учетных записей администратора или владельца для выполнения кода.</span><span class="sxs-lookup"><span data-stu-id="1a062-120">Avoid using administrative or owner accounts for executing code.</span></span> <span data-ttu-id="1a062-121">Это ограничивает ущерб, который может быть нанесен при успешной атаке.</span><span class="sxs-lookup"><span data-stu-id="1a062-121">This limits the amount of damage that can occur if an attack succeeds.</span></span> <span data-ttu-id="1a062-122">При выполнении задач, для которых нужны дополнительные разрешения, используйте подписание процедуры или олицетворение только на время выполнения задачи.</span><span class="sxs-lookup"><span data-stu-id="1a062-122">When performing tasks that require additional permissions, use procedure signing or impersonation only for the duration of the task.</span></span> <span data-ttu-id="1a062-123">Можно подписывать хранимые процедуры при помощи сертификатов или использовать олицетворение для временного назначения разрешений.</span><span class="sxs-lookup"><span data-stu-id="1a062-123">You can sign stored procedures with certificates or use impersonation to temporarily assign permissions.</span></span>  
  
### <a name="probing-and-intelligent-observation"></a><span data-ttu-id="1a062-124">Зондирование и интеллектуальное наблюдение</span><span class="sxs-lookup"><span data-stu-id="1a062-124">Probing and Intelligent Observation</span></span>  
 <span data-ttu-id="1a062-125">Атака зондирования может использовать сообщения об ошибках, формируемые приложением, для поиска уязвимости системы безопасности.</span><span class="sxs-lookup"><span data-stu-id="1a062-125">A probing attack can use error messages generated by an application to search for security vulnerabilities.</span></span> <span data-ttu-id="1a062-126">Для предотвращения возврата конечному пользователю сведений об ошибках SQL Server следует реализовать обработку ошибок в любом процедурном коде.</span><span class="sxs-lookup"><span data-stu-id="1a062-126">Implement error handling in all procedural code to prevent SQL Server error information from being returned to the end user.</span></span>  
  
### <a name="authentication"></a><span data-ttu-id="1a062-127">Аутентификация</span><span class="sxs-lookup"><span data-stu-id="1a062-127">Authentication</span></span>  
 <span data-ttu-id="1a062-128">Если строка соединения, основанная на именах входа SQL Server, конструируется во время выполнения, может возникнуть атака путем внедрения кода в строку соединения.</span><span class="sxs-lookup"><span data-stu-id="1a062-128">A connection string injection attack can occur when using SQL Server logins if a connection string based on user input is constructed at run time.</span></span> <span data-ttu-id="1a062-129">Если строка соединения не проверяется на допустимые пары ключевых слов, атакующая сторона может вставить дополнительные символы и, возможно, получить доступ к конфиденциальным данным или другим ресурсам на сервере.</span><span class="sxs-lookup"><span data-stu-id="1a062-129">If the connection string is not checked for valid keyword pairs, an attacker can insert extra characters, potentially accessing sensitive data or other resources on the server.</span></span> <span data-ttu-id="1a062-130">По возможности используйте проверку подлинности Windows.</span><span class="sxs-lookup"><span data-stu-id="1a062-130">Use Windows authentication wherever possible.</span></span> <span data-ttu-id="1a062-131">Если необходимо использовать имена входа SQL Server, используйте <xref:System.Data.SqlClient.SqlConnectionStringBuilder> для создания и проверки строк соединения во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="1a062-131">If you must use SQL Server logins, use the <xref:System.Data.SqlClient.SqlConnectionStringBuilder> to create and validate connection strings at run time.</span></span>  
  
### <a name="passwords"></a><span data-ttu-id="1a062-132">Пароли</span><span class="sxs-lookup"><span data-stu-id="1a062-132">Passwords</span></span>  
 <span data-ttu-id="1a062-133">Многие атаки выполняются успешно из-за того, что лицо, не имеющее санкционированного доступа, смогло получить или угадать пароль для пользователя с правами доступа.</span><span class="sxs-lookup"><span data-stu-id="1a062-133">Many attacks succeed because an intruder was able to obtain or guess a password for a privileged user.</span></span> <span data-ttu-id="1a062-134">При попытке взлома пароли выступают в качестве первой линии обороны, поэтому убедитесь, что введены надежные пароли, так как это необходимо для защиты системы.</span><span class="sxs-lookup"><span data-stu-id="1a062-134">Passwords are your first line of defense against intruders, so setting strong passwords is essential to the security of your system.</span></span> <span data-ttu-id="1a062-135">Создание и требование использования политики паролей для смешанной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="1a062-135">Create and enforce password policies for mixed mode authentication.</span></span>  
  
 <span data-ttu-id="1a062-136">Всегда задавайте надежный пароль учетной записи `sa`, даже если используется проверка подлинности Windows.</span><span class="sxs-lookup"><span data-stu-id="1a062-136">Always assign a strong password to the `sa` account, even when using Windows Authentication.</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="1a062-137">В этом разделе</span><span class="sxs-lookup"><span data-stu-id="1a062-137">In This Section</span></span>  
 [<span data-ttu-id="1a062-138">Управление разрешениями с использованием хранимых процедур в SQL Server</span><span class="sxs-lookup"><span data-stu-id="1a062-138">Managing Permissions with Stored Procedures in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/managing-permissions-with-stored-procedures-in-sql-server.md)  
 <span data-ttu-id="1a062-139">Описывает, как использовать хранимые процедуры для управления разрешениями и контроля доступа к данным.</span><span class="sxs-lookup"><span data-stu-id="1a062-139">Describes how to use stored procedures to manage permissions and control data access.</span></span> <span data-ttu-id="1a062-140">Использование хранимых процедур является эффективным способом ответа на многие угрозы системе безопасности.</span><span class="sxs-lookup"><span data-stu-id="1a062-140">Using stored procedures is an effective way to respond to many security threats.</span></span>  
  
 [<span data-ttu-id="1a062-141">Написание безопасного динамического кода SQL в SQL Server</span><span class="sxs-lookup"><span data-stu-id="1a062-141">Writing Secure Dynamic SQL in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/writing-secure-dynamic-sql-in-sql-server.md)  
 <span data-ttu-id="1a062-142">Описывает технику написания защищенного динамического SQL-кода с использованием хранимых процедур.</span><span class="sxs-lookup"><span data-stu-id="1a062-142">Describes techniques for writing secure dynamic SQL using stored procedures.</span></span>  
  
 [<span data-ttu-id="1a062-143">Подписывание хранимых процедур в SQL Server</span><span class="sxs-lookup"><span data-stu-id="1a062-143">Signing Stored Procedures in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/signing-stored-procedures-in-sql-server.md)  
 <span data-ttu-id="1a062-144">Описывает, как подписать хранимую процедуру при помощи сертификата, чтобы дать возможность пользователям работать с данными, к которым у них нет непосредственного доступа.</span><span class="sxs-lookup"><span data-stu-id="1a062-144">Describes how to sign a stored procedure with a certificate to enable users to work with data they do not have direct access to.</span></span> <span data-ttu-id="1a062-145">Это позволяет хранимым процедурам выполнять операции, для непосредственного выполнения которых у вызывающей стороны нет разрешений.</span><span class="sxs-lookup"><span data-stu-id="1a062-145">This enables stored procedures to perform operations that the caller does not have permissions to perform directly.</span></span>  
  
 [<span data-ttu-id="1a062-146">Настройка разрешений с олицетворением в SQL Server</span><span class="sxs-lookup"><span data-stu-id="1a062-146">Customizing Permissions with Impersonation in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server.md)  
 <span data-ttu-id="1a062-147">Описывает, как использовать предложение EXECUTE AS для олицетворения другого пользователя.</span><span class="sxs-lookup"><span data-stu-id="1a062-147">Describes how to use the EXECUTE AS clause to impersonate another user.</span></span> <span data-ttu-id="1a062-148">Олицетворение переключает контекст выполнения с вызывающей стороны на указанного пользователя.</span><span class="sxs-lookup"><span data-stu-id="1a062-148">Impersonation switches the execution context from the caller to the specified user.</span></span>  
  
 [<span data-ttu-id="1a062-149">Предоставление разрешений уровня строки в SQL Server</span><span class="sxs-lookup"><span data-stu-id="1a062-149">Granting Row-Level Permissions in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/granting-row-level-permissions-in-sql-server.md)  
 <span data-ttu-id="1a062-150">Описывает, как реализовать разрешения уровня строки для ограничения доступа к данным.</span><span class="sxs-lookup"><span data-stu-id="1a062-150">Describes how to implement row-level permissions to restrict data access.</span></span>  
  
 [<span data-ttu-id="1a062-151">Создание ролей приложений в SQL Server</span><span class="sxs-lookup"><span data-stu-id="1a062-151">Creating Application Roles in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/creating-application-roles-in-sql-server.md)  
 <span data-ttu-id="1a062-152">Описывает возможности и возможности ролей приложения.</span><span class="sxs-lookup"><span data-stu-id="1a062-152">Describes features and functionality of application roles.</span></span>  
  
 [<span data-ttu-id="1a062-153">Организация межбазового доступа в SQL Server</span><span class="sxs-lookup"><span data-stu-id="1a062-153">Enabling Cross-Database Access in SQL Server</span></span>](../../../../../docs/framework/data/adonet/sql/enabling-cross-database-access-in-sql-server.md)  
 <span data-ttu-id="1a062-154">Описывает, как включить перекрестный доступ между базами данных, не ухудшая безопасность.</span><span class="sxs-lookup"><span data-stu-id="1a062-154">Describes how to enable cross-database access without jeopardizing security.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1a062-155">См. также</span><span class="sxs-lookup"><span data-stu-id="1a062-155">See Also</span></span>  
 [<span data-ttu-id="1a062-156">Безопасность SQL Server</span><span class="sxs-lookup"><span data-stu-id="1a062-156">SQL Server Security</span></span>](../../../../../docs/framework/data/adonet/sql/sql-server-security.md)  
 [<span data-ttu-id="1a062-157">Общие сведения о безопасности SQL Server</span><span class="sxs-lookup"><span data-stu-id="1a062-157">Overview of SQL Server Security</span></span>](../../../../../docs/framework/data/adonet/sql/overview-of-sql-server-security.md)  
 [<span data-ttu-id="1a062-158">Защита приложений ADO.NET</span><span class="sxs-lookup"><span data-stu-id="1a062-158">Securing ADO.NET Applications</span></span>](../../../../../docs/framework/data/adonet/securing-ado-net-applications.md)  
 [<span data-ttu-id="1a062-159">Центр разработчиков наборов данных и управляемых поставщиков ADO.NET</span><span class="sxs-lookup"><span data-stu-id="1a062-159">ADO.NET Managed Providers and DataSet Developer Center</span></span>](http://go.microsoft.com/fwlink/?LinkId=217917)
