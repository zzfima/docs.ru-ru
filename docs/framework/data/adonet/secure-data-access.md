---
title: Безопасный доступ к данным
ms.date: 03/30/2017
ms.assetid: 473ebd69-21a3-4627-b95e-4e04d035c56f
ms.openlocfilehash: 7083f68457aa8f87b01f523abc5742d24bafcbfd
ms.sourcegitcommit: 2eceb05f1a5bb261291a1f6a91c5153727ac1c19
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/04/2018
ms.locfileid: "43513791"
---
# <a name="secure-data-access"></a>Безопасный доступ к данным
Для записи безопасного кода ADO.NET необходимо понять механизмы безопасности, доступные в базовом хранилище данных или базе данных. Также необходимо рассмотреть влияние на безопасность остальных функций или компонентов, которые может содержать приложение.  
  
## <a name="authentication-authorization-and-permissions"></a>Проверка подлинности, авторизация и разрешения  
 При соединении с Microsoft SQL Server можно применить проверку подлинности Windows, также известную как встроенная безопасность, использующую идентификатор текущего активного пользователя Windows, а не передачу идентификатора пользователя и пароль. Настоятельно рекомендуется использовать проверку подлинности Windows, поскольку учетные данные пользователя не отображаются в строке соединения. Если при соединении с SQL Server нельзя использовать проверку подлинности Windows, следует рассмотреть создание строк соединений во время выполнения с помощью <xref:System.Data.SqlClient.SqlConnectionStringBuilder>.  
  
 Учетные данные, используемые для проверки подлинности, необходимо обрабатывать по-разному в зависимости от типа приложения. Например, в приложении Windows Forms пользователю могут предложить ввести сведения для проверки подлинности либо могут использоваться учетные данные пользователя Windows. Однако веб-приложение часто осуществляет доступ к данным, используя учетные данные, поставляемые самим приложением, а не пользователем.  
  
 После проверки подлинности пользователей возможная область их действий зависит от предоставленных им разрешений. Всегда следуйте принципу минимальных прав доступа и предоставляйте только абсолютно необходимые разрешения.  
  
 Дополнительные сведения см. в следующих ресурсах.  
  
|Ресурс|Описание|  
|--------------|-----------------|  
|[Защита сведений о подключении](../../../../docs/framework/data/adonet/protecting-connection-information.md)|Приводятся рекомендации по безопасности и методы защиты данных подключения, например использование для шифрования строк подключения защищенной конфигурации.|  
|[Рекомендации по стратегиям доступа к данным](https://msdn.microsoft.com/library/72411f32-d12a-4de8-b961-e54fca7faaf5)|Содержит рекомендации для доступа к данным и выполнения операций над базой данных.|  
|[Построители строк подключения](../../../../docs/framework/data/adonet/connection-string-builders.md)|Описывает способ построения строк соединения по данным, введенным пользователем во время выполнения.|  
|[Общие сведения о безопасности SQL Server](../../../../docs/framework/data/adonet/sql/overview-of-sql-server-security.md)|Описывает архитектуру безопасности SQL Server.|  
  
## <a name="parameterized-commands-and-sql-injection"></a>Параметризованные команды и внедрение кода SQL  
 Использование параметризованных команд помогает защищаться от атак путем внедрения кода SQL, в которых атакующий «внедряет» в инструкцию SQL команду, нарушающую безопасность сервера. Параметризованные команды обеспечивают защиту против атак путем внедрения кода SQL, гарантируя, что данные, полученные от внешнего источника, передаются только как значения, а не как часть инструкции Transact-SQL. В результате команды Transact-SQL, вставленные в значение, не выполняются в источнике данных. Вместо этого они оцениваются только как значение параметра. В дополнение к повышенной безопасности параметризованные команды предоставляют удобный метод организации значений, передаваемых с инструкцией Transact-SQL или в хранимую процедуру.  
  
 Дополнительные сведения об использовании параметризованных команд см. в одном из следующих источников.  
  
|Ресурс|Описание|  
|--------------|-----------------|  
|[Параметры DataAdapter](../../../../docs/framework/data/adonet/dataadapter-parameters.md)|Описывает способ использования параметров с `DataAdapter`.|  
|[Изменение данных с помощью хранимых процедур](../../../../docs/framework/data/adonet/modifying-data-with-stored-procedures.md)|Описывает способ задания параметров и получения возвращаемого значения.|  
|[Управление разрешениями с использованием хранимых процедур в SQL Server](../../../../docs/framework/data/adonet/sql/managing-permissions-with-stored-procedures-in-sql-server.md)|Описывает способ использования хранимых процедур SQL Server для инкапсуляции доступа к данным.|  
  
## <a name="script-exploits"></a>Эксплойты скриптов  
 Эксплойты скриптов представляют собой еще одну форму внедрения кода, в которой используются вредоносные символы, вставленные в веб-страницу. Браузер не проверяет вставленные символы и обрабатывает их как часть страницы.  
  
 Дополнительные сведения см. в следующих ресурсах.  
  
|Ресурс|Описание|  
|--------------|-----------------|  
|[Общие сведения об использовании скрипта](https://msdn.microsoft.com/library/772c7312-211a-4eb3-8d6e-eec0aa1dcc07)|Описывает, как защищаться от эксплойтов скриптов и инструкций SQL.|  
  
## <a name="probing-attacks"></a>Атаки зондированием  
 Для осуществления атаки на систему злоумышленники часто используют сведения из исключения, например имя сервера, базы данных или таблицы. Безусловно, исключения могут содержать конкретные сведения о приложении или источнике данных, поэтому можно сделать защиту приложения и источника данных более надежной, отображая для клиента только самые существенные сведения.  
  
 Дополнительные сведения см. в следующих ресурсах.  
  
|Ресурс|Описание|  
|--------------|-----------------|  
|[Основы обработки исключений](../../../../docs/standard/exceptions/exception-handling-fundamentals.md)|Описывает основные формы таких структурированных средств обработки исключений, как конструкции «try/catch/finally».|  
|[Рекомендации по обработке исключений](../../../../docs/standard/exceptions/best-practices-for-exceptions.md)|Описывает рекомендации по обработке исключений.|  
  
## <a name="protecting-microsoft-access-and-excel-data-sources"></a>Защита источников данных Microsoft Access и Excel  
 Если требования по безопасности являются минимальными или вообще отсутствуют, то Microsoft Access и Microsoft Excel вполне могут выступить в роли хранилища данных для приложения ADO.NET. Предусмотренные в них средства безопасности позволяют эффективно затруднить несанкционированный доступ, но если требуется добиться большего, чем просто воспрепятствовать вторжению со стороны неосведомленных пользователей, то на них не следует полагаться. Физические файлы данных для Access и Excel находятся в файловой системе и должны быть доступными для всех пользователей. В результате они становятся уязвимыми к атакам, что может привести к похищению или потере данных, поскольку эти файлы можно скопировать или изменить. Если требуется надежная система безопасности, следует использовать SQL Server или другую серверную базу данных, в которой физические файлы данных не считываются из файловой системы.  
  
 Дополнительные сведения о защите данных Access и Excel см. в одном из следующих источников.  
  
|Ресурс|Описание|  
|--------------|-----------------|  
|[Вопросы безопасности и руководство по Access 2007](https://go.microsoft.com/fwlink/?LinkId=98354)|Описывает методы обеспечения безопасности для Access 2007, такие как шифрование файлов, администрирование паролей, преобразование баз данных в новые форматы ACCDB и ACCDE, а также использование других параметров безопасности.|  
|[Защита базы данных Access с помощью безопасности уровня пользователя (MDB)](https://go.microsoft.com/fwlink/?LinkId=47697)|Применяется для Access 2003. Содержит инструкции по реализации средств безопасности на уровне пользователя для защиты данных в Access 2003.|  
|[Сведения о роли файлов сведений рабочей группы в управление доступом](https://support.microsoft.com/kb/305542)|Описывает роль и связи информационного файла рабочей группы в безопасности Access 2003.|  
|[Часто задаваемые вопросы по безопасности Microsoft Access для версий от 2.0 до 2000](https://go.microsoft.com/fwlink/?LinkId=47698)|Загружаемая версия часто задаваемых вопросов по безопасности Microsoft Access.|  
|[Диагностика проблем безопасности и защиты](https://go.microsoft.com/fwlink/?LinkId=47703)|Представляет решения известных проблем с безопасностью в Excel 2003.|  
  
## <a name="enterprise-services"></a>Корпоративные службы  
 COM+ содержит собственную модель безопасности, полагающуюся на учетные записи и олицетворение «процесс-поток» Windows NT. Пространство имен <xref:System.EnterpriseServices> предоставляет оболочки, позволяющие приложениям .NET встраивать управляемый код со службами безопасности COM+ с помощью класса <xref:System.EnterpriseServices.ServicedComponent>.  
  
 Дополнительные сведения см. в следующих ресурсах.  
  
|Ресурс|Описание|  
|--------------|-----------------|  
|[Безопасность на основе ролей COM + и .NET Framework](https://msdn.microsoft.com/library/02ab22ef-e5e2-4d29-b33a-6e03d94c4981)|Описывает способ встраивания управляемого кода со службами безопасности COM+.|  
  
## <a name="interoperating-with-unmanaged-code"></a>Взаимодействие с неуправляемым кодом  
 Инфраструктура .NET Framework обеспечивает взаимодействие с неуправляемым кодом, включая компоненты COM, службы COM+, внешние библиотеки типов и многие службы операционной системы. Работа с неуправляемым кодом связана с выходом за пределы периметра безопасности для управляемого кода. И пользовательский код, и любой другой вызывающий его код должен иметь разрешение для неуправляемого кода (<xref:System.Security.Permissions.SecurityPermission> с заданным флагом <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode>). Применение неуправляемого кода может привести к непреднамеренному созданию в приложении уязвимых мест системы безопасности. Таким образом, следует допускать возможность взаимодействия с неуправляемым кодом только в случае крайней необходимости.  
  
 Дополнительные сведения см. в следующих ресурсах.  
  
|Ресурс|Описание|  
|--------------|-----------------|  
|[Взаимодействие с неуправляемым кодом](../../../../docs/framework/interop/index.md)|Содержит подразделы, описывающие представление COM-компонентов платформе .NET Framework и представление компонентов .NET Framework объектам COM.|  
|[Расширенное COM-взаимодействие](https://msdn.microsoft.com/library/3ada36e5-2390-4d70-b490-6ad8de92f2fb)|Содержит расширенные подразделы, такие как основные сборки взаимодействия, организация поточной обработки и пользовательская упаковка и передача.|  
  
## <a name="see-also"></a>См. также  
 [Защита приложений ADO.NET](../../../../docs/framework/data/adonet/securing-ado-net-applications.md)  
 [Безопасность SQL Server](../../../../docs/framework/data/adonet/sql/sql-server-security.md)  
 [Рекомендации по стратегиям доступа к данным](https://msdn.microsoft.com/library/72411f32-d12a-4de8-b961-e54fca7faaf5)  
 [Защита сведений о подключении](../../../../docs/framework/data/adonet/protecting-connection-information.md)  
 [Построители строк подключения](../../../../docs/framework/data/adonet/connection-string-builders.md)  
 [Центр разработчиков наборов данных и управляемых поставщиков ADO.NET](https://go.microsoft.com/fwlink/?LinkId=217917)
