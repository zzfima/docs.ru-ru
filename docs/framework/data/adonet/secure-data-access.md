---
title: Безопасный доступ к данным
ms.date: 03/30/2017
ms.assetid: 473ebd69-21a3-4627-b95e-4e04d035c56f
ms.openlocfilehash: ede8b1a2e840b56d6e7f45e6d26e09fa5e8bcc25
ms.sourcegitcommit: 30a558d23e3ac5a52071121a52c305c85fe15726
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/25/2019
ms.locfileid: "75337525"
---
# <a name="secure-data-access"></a>Безопасный доступ к данным
Для записи безопасного кода ADO.NET необходимо понять механизмы безопасности, доступные в базовом хранилище данных или базе данных. Также необходимо рассмотреть влияние на безопасность остальных возможностей или компонентов, которые может содержать приложение.  
  
## <a name="authentication-authorization-and-permissions"></a>Проверка подлинности, авторизация и разрешения  
 При соединении с Microsoft SQL Server можно применить проверку подлинности Windows, также известную как встроенная безопасность, использующую идентификатор текущего активного пользователя Windows, а не передачу идентификатора пользователя и пароль. Настоятельно рекомендуется использовать проверку подлинности Windows, поскольку учетные данные пользователя не отображаются в строке соединения. Если при соединении с SQL Server нельзя использовать проверку подлинности Windows, следует рассмотреть создание строк соединений во время выполнения с помощью <xref:System.Data.SqlClient.SqlConnectionStringBuilder>.  
  
 Учетные данные, используемые для проверки подлинности, необходимо обрабатывать по-разному в зависимости от типа приложения. Например, в приложении Windows Forms пользователю могут предложить ввести сведения для проверки подлинности либо могут использоваться учетные данные пользователя Windows. Однако веб-приложение часто осуществляет доступ к данным, используя учетные данные, поставляемые самим приложением, а не пользователем.  
  
 После проверки подлинности пользователей возможная область их действий зависит от предоставленных им разрешений. Всегда следуйте принципу минимальных прав доступа и предоставляйте только абсолютно необходимые разрешения.  
  
 Дополнительные сведения см. в следующих ресурсах.  
  
|Resource|Описание|  
|--------------|-----------------|  
|[Защита сведений о подключении](protecting-connection-information.md)|Приводятся рекомендации по безопасности и методы защиты данных подключения, например использование для шифрования строк подключения защищенной конфигурации.|  
|[Рекомендации по стратегиям доступа к данным](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2008/8fxztkff(v=vs.90))|Содержит рекомендации для доступа к данным и выполнения операций над базой данных.|  
|[Построители строк подключения](connection-string-builders.md)|Описывает способ построения строк соединения по данным, введенным пользователем во время выполнения.|  
|[Общие сведения о безопасности SQL Server](./sql/overview-of-sql-server-security.md)|Описывает архитектуру безопасности SQL Server.|  
  
## <a name="parameterized-commands-and-sql-injection"></a>Параметризованные команды и внедрение кода SQL  
 Использование параметризованных команд помогает защищаться от атак путем внедрения кода SQL, в которых атакующий «внедряет» в инструкцию SQL команду, нарушающую безопасность сервера. Параметризованные команды обеспечивают защиту против атак путем внедрения кода SQL, гарантируя, что данные, полученные от внешнего источника, передаются только как значения, а не как часть инструкции Transact-SQL. В результате команды Transact-SQL, вставленные в значение, не выполняются в источнике данных. Вместо этого они оцениваются только как значение параметра. В дополнение к повышенной безопасности параметризованные команды предоставляют удобный метод организации значений, передаваемых с инструкцией Transact-SQL или в хранимую процедуру.  
  
 Дополнительные сведения об использовании параметризованных команд см. в одном из следующих источников.  
  
|Resource|Описание|  
|--------------|-----------------|  
|[Параметры DataAdapter](dataadapter-parameters.md)|Описывает способ использования параметров с `DataAdapter`.|  
|[Изменение данных с помощью хранимых процедур](modifying-data-with-stored-procedures.md)|Описывает способ задания параметров и получения возвращаемого значения.|  
|[Управление разрешениями с использованием хранимых процедур в SQL Server](./sql/managing-permissions-with-stored-procedures-in-sql-server.md)|Описывает способ использования хранимых процедур SQL Server для инкапсуляции доступа к данным.|  
  
## <a name="script-exploits"></a>Эксплойты скриптов  
 Эксплойты скриптов представляют собой еще одну форму внедрения кода, в которой используются вредоносные символы, вставленные в веб-страницу. Браузер не проверяет вставленные символы и обрабатывает их как часть страницы.  
  
 Дополнительные сведения см. в следующих ресурсах.  
  
|Resource|Описание|  
|--------------|-----------------|  
|[Общие сведения об эксплойтах сценариев](https://docs.microsoft.com/previous-versions/aspnet/w1sw53ds(v=vs.100))|Описывает, как защищаться от эксплойтов скриптов и инструкций SQL.|  
  
## <a name="probing-attacks"></a>Атаки зондированием  
 Для осуществления атаки на систему злоумышленники часто используют сведения из исключения, например имя сервера, базы данных или таблицы. Безусловно, исключения могут содержать конкретные сведения о приложении или источнике данных, поэтому можно сделать защиту приложения и источника данных более надежной, отображая для клиента только самые существенные сведения.  
  
 Дополнительные сведения см. в следующих ресурсах.  
  
|Resource|Описание|  
|--------------|-----------------|  
|[Обработка и создание исключений в .NET](../../../standard/exceptions/index.md)|Описывает основные формы таких структурированных средств обработки исключений, как конструкции «try/catch/finally».|  
|[Рекомендации по обработке исключений](../../../standard/exceptions/best-practices-for-exceptions.md)|Описывает рекомендации по обработке исключений.|  
  
## <a name="protecting-microsoft-access-and-excel-data-sources"></a>Защита источников данных Microsoft Access и Excel  
 Если требования по безопасности являются минимальными или вообще отсутствуют, то Microsoft Access и Microsoft Excel вполне могут выступить в роли хранилища данных для приложения ADO.NET. Предусмотренные в них средства безопасности позволяют эффективно затруднить несанкционированный доступ, но если требуется добиться большего, чем просто воспрепятствовать вторжению со стороны неосведомленных пользователей, то на них не следует полагаться. Физические файлы данных для Access и Excel находятся в файловой системе и должны быть доступными для всех пользователей. В результате они становятся уязвимыми к атакам, что может привести к похищению или потере данных, поскольку эти файлы можно скопировать или изменить. Если требуется надежная система безопасности, следует использовать SQL Server или другую серверную базу данных, в которой физические файлы данных не считываются из файловой системы.  
  
 Дополнительные сведения о защите данных Access и Excel см. в одном из следующих источников.  
  
|Resource|Описание|  
|--------------|-----------------|  
|[Рекомендации по безопасности и руководство по доступу 2007](https://docs.microsoft.com/previous-versions/office/developer/office-2007/bb421308(v=office.12))|Описывает методы обеспечения безопасности для Access 2007, такие как шифрование файлов, администрирование паролей, преобразование баз данных в новые форматы ACCDB и ACCDE, а также использование других параметров безопасности.|  
|[Общие сведения о безопасности Access 2010](https://support.office.com/article/Introduction-to-Access-2010-security-CAE6D764-0318-4622-955F-68D9F186D6CA)|Содержит общие сведения о функциях безопасности, предлагаемых Access 2010.|  
## <a name="enterprise-services"></a>Корпоративные службы  
 COM+ содержит собственную модель безопасности, полагающуюся на учетные записи и олицетворение «процесс-поток» Windows NT. Пространство имен <xref:System.EnterpriseServices> предоставляет оболочки, позволяющие приложениям .NET встраивать управляемый код со службами безопасности COM+ с помощью класса <xref:System.EnterpriseServices.ServicedComponent>.  
  
 Дополнительные сведения см. в следующих ресурсах.  
  
|Resource|Описание|  
|--------------|-----------------|  
|[Безопасность на основе ролей](https://docs.microsoft.com/previous-versions/dotnet/netframework-1.1/s6y8k15h(v=vs.71))|Описывает способ встраивания управляемого кода со службами безопасности COM+.|  
  
## <a name="interoperating-with-unmanaged-code"></a>Взаимодействие с неуправляемым кодом  
 Инфраструктура .NET Framework обеспечивает взаимодействие с неуправляемым кодом, включая компоненты COM, службы COM+, внешние библиотеки типов и многие службы операционной системы. Работа с неуправляемым кодом связана с выходом за пределы периметра безопасности для управляемого кода. И пользовательский код, и любой другой вызывающий его код должен иметь разрешение для неуправляемого кода (<xref:System.Security.Permissions.SecurityPermission> с заданным флагом <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode>). Применение неуправляемого кода может привести к непреднамеренному созданию в приложении уязвимых мест системы безопасности. Таким образом, следует допускать возможность взаимодействия с неуправляемым кодом только в случае крайней необходимости.  
  
 Дополнительные сведения см. в следующих ресурсах.  
  
|Resource|Описание|  
|--------------|-----------------|  
|[Взаимодействие с неуправляемым кодом](../../interop/index.md)|Содержит подразделы, описывающие представление COM-компонентов платформе .NET Framework и представление компонентов .NET Framework объектам COM.|
|[Расширенное COM-взаимодействие](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bd9cdfyx(v=vs.100))|Содержит расширенные подразделы, такие как основные сборки взаимодействия, организация поточной обработки и пользовательская упаковка и передача.|

## <a name="see-also"></a>См. также:

- [Защита приложений ADO.NET](securing-ado-net-applications.md)
- [Безопасность SQL Server](./sql/sql-server-security.md)
- [Рекомендации по стратегиям доступа к данным](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2008/8fxztkff(v=vs.90))
- [Защита сведений о подключении](protecting-connection-information.md)
- [Построители строк подключения](connection-string-builders.md)
- [Общие сведения об ADO.NET](ado-net-overview.md)
