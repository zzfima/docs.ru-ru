---
title: Защита сведений о подключении
ms.date: 03/30/2017
ms.assetid: 1471f580-bcd4-4046-bdaf-d2541ecda2f4
ms.openlocfilehash: 1039d3fd797a16391876b59aa018b30b7f397aeb
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2020
ms.locfileid: "79149223"
---
# <a name="protecting-connection-information"></a>Защита сведений о подключении
Защита доступа к источникам данным - одна из важнейших целей защиты приложения. Строка соединения представляет собой потенциальную уязвимость, если она не защищена. Сохранение сведений о соединении в виде простого текста или сохранение их в памяти представляет угрозу безопасности всей системы. Строки подключения, встроенные в исходный код, можно прочитать с помощью [Ildasm.exe (IL Disassembler)](../../tools/ildasm-exe-il-disassembler.md) для просмотра промежуточного языка Майкрософт (MSIL) в компилированной сборке.  
  
 Уязвимые места системы безопасности, связанные со строками соединения, могут возникать в зависимости от используемого типа проверки подлинности, способа сохранения строк соединения в памяти или на диске, и методов, используемых для их конструирования   
  
## <a name="use-windows-authentication"></a>Использовать проверку подлинности Windows  
 Чтобы ограничить доступ к источнику данных, необходимо защитить сведения о безопасном соединении, например, идентификатор пользователя, пароль и имя источника данных. Чтобы избежать раскрытия пользовательской информации, мы рекомендуем использовать проверку подлинности Windows (иногда называемую *интегрированной безопасностью),* где это возможно. Проверка подлинности Windows указывается в строке соединения с помощью ключевых слов `Integrated Security` или `Trusted_Connection`, что исключает необходимость указывать идентификатор пользователя и пароль. Когда используется проверка подлинности Windows, пользователей проверяет операционная система Windows, а доступ к ресурсам сервера и базы данных определяется предоставлением разрешений пользователям и группам Windows.  
  
 В ситуациях, когда невозможно использовать проверку подлинности Windows, необходимо проявлять дополнительную осторожность, так как учетные данные пользователя представлены в строке соединения. В приложении ASP.NET можно настроить учетную запись Windows как фиксированное удостоверение, которое используется для подключения к базам данных и другим сетевым ресурсам. Вы позволяете олицетворение в элементе идентификации в файле **web.config** и указать имя пользователя и пароль.  
  
```xml  
<identity impersonate="true"
        userName="MyDomain\UserAccount"
        password="*****" />  
```  
  
 Фиксированная учетная запись идентификации должна быть учетной записью с ограниченными правами, которой предоставлены только необходимые разрешения в базе данных. Кроме того, нужно зашифровать файл конфигурации, чтобы имя пользователя и пароль не были представлены в виде открытого текста.  
  
## <a name="do-not-use-universal-data-link-udl-files"></a>Не используйте файлы в формате UDL (Universal Data Link)  
 Не храните строки соединения для <xref:System.Data.OleDb.OleDbConnection> в UDL-файле. Универсальные связи данных хранятся в виде открытого текста и не могут быть зашифрованы. UDL-файл — внешний файловый ресурс для приложения, его нельзя защитить или зашифровать с помощью платформы .NET Framework.  
  
## <a name="avoid-injection-attacks-with-connection-string-builders"></a>Защититесь от атак путем внедрения кода SQL с помощью построителей строк подключения  
 Атака путем внедрения кода в строку соединения может произойти, когда для построения строк соединения на основе ввода пользователя используется динамическое объединение строк. Если входные данные пользователя не проверяются и опасный текст или символы не экранированы, то злоумышленник может получить доступ к конфиденциальным данным или другим ресурсам на сервере. Чтобы устранить эту проблему, в ADO.NET 2.0 добавлены новые классы построителя строк подключения, позволяющие проверить синтаксис строки подключения и убедиться, что в нее не внесены дополнительные параметры. Дополнительные сведения см. в статье [Connection String Builders](connection-string-builders.md) (Построители строк подключения).  
  
## <a name="use-persist-security-infofalse"></a>Используйте значение False параметра Persist Security Info  
 По умолчанию параметр `Persist Security Info` имеет значение false. Рекомендуется использовать это значение по умолчанию во всех строках соединения. Присвоение параметру `Persist Security Info` значения `true` или `yes` позволяет получить конфиденциальные сведения, в том числе идентификатор пользователя и пароль, из соединения после того, как оно будет открыто. Если параметру `Persist Security Info` присвоено значение `false` или `no`, то сведения безопасности отбрасываются после того, как они используются для открытия соединения. Таким образом, ненадежный источник не получает доступа к конфиденциальным данным.  
  
## <a name="encrypt-configuration-files"></a>Шифрование файлов конфигурации  
 Строки соединения можно сохранить в файлах конфигурации, что исключает необходимость внедрять их в код приложения. Файлы конфигурации представляют собой стандартные XML-файлы, для которых в платформе .NET Framework определен типовой набор элементов. Строки подключения в файлах конфигурации обычно хранятся внутри ** \<соединений,>** элемент в **app.config** для приложения Windows или файл **web.config** для ASP.NET приложения. Для получения дополнительной информации об основах хранения, извлечения и шифрования [Connection Strings and Configuration Files](connection-strings-and-configuration-files.md)строк соединения из файлов конфигурации см.  
  
## <a name="see-also"></a>См. также раздел

- [Защита приложений ADO.NET](securing-ado-net-applications.md)
- [Шифрование информации о конфигурации с использованием защищенной конфигурации](https://docs.microsoft.com/previous-versions/aspnet/53tyfkaw(v=vs.100))
- [Безопасность в .NET](../../../standard/security/index.md)
- [Общие сведения об ADO.NET](ado-net-overview.md)
