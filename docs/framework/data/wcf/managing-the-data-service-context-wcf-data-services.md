---
title: "Управление контекстом службы данных (службы WCF Data Services)"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework-oob
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 15b19d09-7de7-4638-9556-6ef396cc45ec
caps.latest.revision: "6"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: c993a4f09a7187b45331f6beb71a9637da87d20f
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2017
---
# <a name="managing-the-data-service-context-wcf-data-services"></a><span data-ttu-id="74c14-102">Управление контекстом службы данных (службы WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="74c14-102">Managing the Data Service Context (WCF Data Services)</span></span>
<span data-ttu-id="74c14-103">Класс <xref:System.Data.Services.Client.DataServiceContext> инкапсулирует операции, поддерживающие работу с конкретной службой данных.</span><span class="sxs-lookup"><span data-stu-id="74c14-103">The <xref:System.Data.Services.Client.DataServiceContext> class encapsulates operations that are supported against a specified data service.</span></span> <span data-ttu-id="74c14-104">Хотя службы [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] не сохраняют состояние, контекст его сохраняет.</span><span class="sxs-lookup"><span data-stu-id="74c14-104">Although [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] services are stateless, the context is not.</span></span> <span data-ttu-id="74c14-105">Таким образом, можно использовать <xref:System.Data.Services.Client.DataServiceContext> класс для поддержки состояния клиента между операциями со службой данных для поддержки таких функций, как управление изменениями.</span><span class="sxs-lookup"><span data-stu-id="74c14-105">Therefore, you can use the <xref:System.Data.Services.Client.DataServiceContext> class to maintain state on the client between interactions with the data service in order to support features such as change management.</span></span> <span data-ttu-id="74c14-106">Этот класс также управляет идентификаторами и отслеживает изменения.</span><span class="sxs-lookup"><span data-stu-id="74c14-106">This class also manages identities and tracks changes.</span></span>  
  
## <a name="merge-options-and-identity-resolution"></a><span data-ttu-id="74c14-107">Параметры слияния и разрешение идентификаторов</span><span class="sxs-lookup"><span data-stu-id="74c14-107">Merge Options and Identity Resolution</span></span>  
 <span data-ttu-id="74c14-108">При исполнении <xref:System.Data.Services.Client.DataServiceQuery%601> сущности в канале ответа материализуются в объекты.</span><span class="sxs-lookup"><span data-stu-id="74c14-108">When a <xref:System.Data.Services.Client.DataServiceQuery%601> is executed, the entities in the response feed are materialized into objects.</span></span> <span data-ttu-id="74c14-109">Дополнительные сведения см. в разделе [материализация объектов](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="74c14-109">For more information, see [Object Materialization](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md).</span></span> <span data-ttu-id="74c14-110">Способ материализации сущностей в ответном сообщении в объекты выбирается в зависимости от разрешения идентификаторов и параметра слияния, при котором был произведен запрос.</span><span class="sxs-lookup"><span data-stu-id="74c14-110">The way in which entries in a response message are materialized into objects is performed based on identity resolution and depends on the merge option under which the query was executed.</span></span> <span data-ttu-id="74c14-111">Когда несколько запросов или требований загрузки выполняются в области одного контекста <xref:System.Data.Services.Client.DataServiceContext>, клиент [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] отслеживает только один экземпляр объекта, имеющий определенное значение ключа.</span><span class="sxs-lookup"><span data-stu-id="74c14-111">When multiple queries or load requests are executed in the scope of a single <xref:System.Data.Services.Client.DataServiceContext>, the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client only tracks a single instance of an object that has a specific key value.</span></span> <span data-ttu-id="74c14-112">Этот ключ, который используется для разрешения идентификаторов, однозначно определяет сущность.</span><span class="sxs-lookup"><span data-stu-id="74c14-112">This key, which is used to perform identity resolution, uniquely identifies an entity.</span></span>  
  
 <span data-ttu-id="74c14-113">По умолчанию клиент материализует значение в канале ответа в объект только для сущностей, еще не отслеживаемых в контексте <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="74c14-113">By default, the client only materializes an entry in the response feed into an object for entities that are not already being tracked by the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="74c14-114">Это означает, что изменения в объектах, уже находящихся в кэше, не перезаписываются.</span><span class="sxs-lookup"><span data-stu-id="74c14-114">This means that changes to objects already in the cache are not overwritten.</span></span> <span data-ttu-id="74c14-115">Это поведение управляется указанием значения параметра <xref:System.Data.Services.Client.MergeOption> для запросов и операций загрузки.</span><span class="sxs-lookup"><span data-stu-id="74c14-115">This behavior is controlled by specifying a <xref:System.Data.Services.Client.MergeOption> value for queries and load operations.</span></span> <span data-ttu-id="74c14-116">Этот параметр указывается установкой свойства <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> в <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="74c14-116">This option is specified by setting the <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> property on the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="74c14-117">Значение параметра слияния по умолчанию равно <xref:System.Data.Services.Client.MergeOption.AppendOnly>.</span><span class="sxs-lookup"><span data-stu-id="74c14-117">The default merge option value is <xref:System.Data.Services.Client.MergeOption.AppendOnly>.</span></span> <span data-ttu-id="74c14-118">В этом случае материализуются только объекты для еще неотслеживаемых сущностей, то есть существующие объекты не перезаписываются.</span><span class="sxs-lookup"><span data-stu-id="74c14-118">This only materializes objects for entities that are not already being tracked, which means that existing objects are not overwritten.</span></span> <span data-ttu-id="74c14-119">Еще один способ предотвратить перезапись изменений объектов в клиенте при получении обновлений из службы данных состоит в указании параметра <xref:System.Data.Services.Client.MergeOption.PreserveChanges>.</span><span class="sxs-lookup"><span data-stu-id="74c14-119">Another way to prevent changes to objects on the client from being overwritten by updates from the data service is to specify <xref:System.Data.Services.Client.MergeOption.PreserveChanges>.</span></span> <span data-ttu-id="74c14-120">При указании параметра <xref:System.Data.Services.Client.MergeOption.OverwriteChanges> значения объектов в клиенте заменяются новейшими значениями из записей в канале ответа, даже если в эти объекты уже были внесены изменения.</span><span class="sxs-lookup"><span data-stu-id="74c14-120">When you specify <xref:System.Data.Services.Client.MergeOption.OverwriteChanges>, values of objects on the client are replaced by the latest values from the entries in the response feed, even if changes have already been made to these objects.</span></span> <span data-ttu-id="74c14-121">При использовании параметра слияния <xref:System.Data.Services.Client.MergeOption.NoTracking> <xref:System.Data.Services.Client.DataServiceContext> не может отправлять изменения, внесенные в объекты клиента, в службу данных.</span><span class="sxs-lookup"><span data-stu-id="74c14-121">When a <xref:System.Data.Services.Client.MergeOption.NoTracking> merge option is used, the <xref:System.Data.Services.Client.DataServiceContext> cannot send changes made on client objects to the data service.</span></span> <span data-ttu-id="74c14-122">При выборе этого параметра, изменения всегда перезаписываются значениями из службы данных.</span><span class="sxs-lookup"><span data-stu-id="74c14-122">With this option, changes are always overwritten with values from the data service.</span></span>  
  
## <a name="managing-concurrency"></a><span data-ttu-id="74c14-123">Управление параллелизмом</span><span class="sxs-lookup"><span data-stu-id="74c14-123">Managing Concurrency</span></span>  
 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]<span data-ttu-id="74c14-124">поддерживает оптимистичный параллелизм, позволяющий службе данных для обнаружения конфликтов обновления.</span><span class="sxs-lookup"><span data-stu-id="74c14-124"> supports optimistic concurrency that enables the data service to detect update conflicts.</span></span> <span data-ttu-id="74c14-125">Поставщик службы данных можно настроить таким образом, что служба данных будет проверять наличие изменений в сущностях с помощью маркера параллелизма.</span><span class="sxs-lookup"><span data-stu-id="74c14-125">The data service provider can be configured in such a way that the data service checks for changes to entities by using a concurrency token.</span></span> <span data-ttu-id="74c14-126">Этот маркер включает одно или несколько свойств типа сущности, проверяемых службой данных для определения, был ли ресурс изменен.</span><span class="sxs-lookup"><span data-stu-id="74c14-126">This token includes one or more properties of an entity type that are validated by the data service to determine whether a resource has changed.</span></span> <span data-ttu-id="74c14-127">Маркеры параллелизма, которые включены в заголовке eTag запросов и ответов службы данных, которые выполняют по [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] клиента.</span><span class="sxs-lookup"><span data-stu-id="74c14-127">Concurrency tokens, which are included in the eTag header of requests to and responses from the data service, are managed for you by the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client.</span></span> <span data-ttu-id="74c14-128">Дополнительные сведения см. в разделе [обновление службы данных](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="74c14-128">For more information, see [Updating the Data Service](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="74c14-129">Объект <xref:System.Data.Services.Client.DataServiceContext> отслеживает изменения, внесенные в объекты, указанные вручную с помощью методов <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> и <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> или с помощью объекта <xref:System.Data.Services.Client.DataServiceCollection%601>.</span><span class="sxs-lookup"><span data-stu-id="74c14-129">The <xref:System.Data.Services.Client.DataServiceContext> tracks changes made to objects that have been reported manually by using <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A>, and <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A>, or by a <xref:System.Data.Services.Client.DataServiceCollection%601>.</span></span> <span data-ttu-id="74c14-130">При вызове метода <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> клиент отправляет изменения назад службе данных.</span><span class="sxs-lookup"><span data-stu-id="74c14-130">When the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method is called, the client sends changes back to the data service.</span></span> <span data-ttu-id="74c14-131">Метод <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> может завершиться ошибкой, если изменения данных, произведенные клиентом, вступают в конфликт с изменениями, произведенными службой данных.</span><span class="sxs-lookup"><span data-stu-id="74c14-131"><xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> can fail when data changes in the client conflict with changes in the data service.</span></span> <span data-ttu-id="74c14-132">В этом случае необходимо запросить сущности повторно, чтобы получить обновленные данные.</span><span class="sxs-lookup"><span data-stu-id="74c14-132">When this occurs, you must query for the entity resource again to receive the update data.</span></span> <span data-ttu-id="74c14-133">Чтобы переписать изменения в службе данных, выполните запрос с использованием параметра слияния <xref:System.Data.Services.Client.MergeOption.PreserveChanges>.</span><span class="sxs-lookup"><span data-stu-id="74c14-133">To overwrite changes in the data service, execute the query using the <xref:System.Data.Services.Client.MergeOption.PreserveChanges> merge option.</span></span> <span data-ttu-id="74c14-134">При повторном вызове метода <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> изменения, произведенные в клиенте, будут внесены в службе данных, если в службе данных не производилось других изменений в ресурсах.</span><span class="sxs-lookup"><span data-stu-id="74c14-134">When you call <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> again, the changes preserved on the client are persisted to the data service, as long as other changes have not already been made to the resource in the data service.</span></span>  
  
## <a name="saving-changes"></a><span data-ttu-id="74c14-135">Сохранение изменений</span><span class="sxs-lookup"><span data-stu-id="74c14-135">Saving Changes</span></span>  
 <span data-ttu-id="74c14-136">Изменения отслеживаются в экземпляре <xref:System.Data.Services.Client.DataServiceContext>, но не отправляются на сервер немедленно.</span><span class="sxs-lookup"><span data-stu-id="74c14-136">Changes are tracked in the <xref:System.Data.Services.Client.DataServiceContext> instance but not sent to the server immediately.</span></span> <span data-ttu-id="74c14-137">После завершения изменений для указанного действия вызовите метод <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>, чтобы передать все изменения в службу данных.</span><span class="sxs-lookup"><span data-stu-id="74c14-137">After you are finished with the required changes for a specified activity, call <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> to submit all the changes to the data service.</span></span> <span data-ttu-id="74c14-138">По завершении операции <xref:System.Data.Services.Client.DataServiceResponse> возвращается объект <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="74c14-138">A <xref:System.Data.Services.Client.DataServiceResponse> object is returned after the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> operation is complete.</span></span> <span data-ttu-id="74c14-139">Объект <xref:System.Data.Services.Client.DataServiceResponse> включает последовательность объектов <xref:System.Data.Services.Client.OperationResponse>, которые в свою очередь содержат последовательность экземпляров <xref:System.Data.Services.Client.EntityDescriptor> или <xref:System.Data.Services.Client.LinkDescriptor>, представляющих сохраненные или ожидаемые изменения.</span><span class="sxs-lookup"><span data-stu-id="74c14-139">The <xref:System.Data.Services.Client.DataServiceResponse> object includes a sequence of <xref:System.Data.Services.Client.OperationResponse> objects that, in turn, contain a sequence of <xref:System.Data.Services.Client.EntityDescriptor> or <xref:System.Data.Services.Client.LinkDescriptor> instances that represent the changes persisted or attempted.</span></span> <span data-ttu-id="74c14-140">Когда сущность создается или изменяется в службе данных, объект <xref:System.Data.Services.Client.EntityDescriptor> включает ссылку на обновленную сущность, включая все значения свойств, сформированные сервером, такие как сформированное значение `ProductID` в предыдущем примере.</span><span class="sxs-lookup"><span data-stu-id="74c14-140">When an entity is created or modified in the data service, the <xref:System.Data.Services.Client.EntityDescriptor> includes a reference to the updated entity, including any server-generated property values, such as the generated `ProductID` value in the previous example.</span></span> <span data-ttu-id="74c14-141">Клиентская библиотека автоматически обновляет объект [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] с учетом этих новых значений.</span><span class="sxs-lookup"><span data-stu-id="74c14-141">The client library automatically updates the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] object to have these new values.</span></span>  
  
 <span data-ttu-id="74c14-142">Для успешного выполнения операций вставки и обновления свойству состояния объекта <xref:System.Data.Services.Client.EntityDescriptor> или <xref:System.Data.Services.Client.LinkDescriptor>, связанного с операцией, присваивается значение <xref:System.Data.Services.Client.EntityStates.Unchanged>, а новые значения добавляются с помощью <xref:System.Data.Services.Client.MergeOption.OverwriteChanges>.</span><span class="sxs-lookup"><span data-stu-id="74c14-142">For successful insert and update operations, the state property of the <xref:System.Data.Services.Client.EntityDescriptor> or <xref:System.Data.Services.Client.LinkDescriptor> object associated with the operation is set to <xref:System.Data.Services.Client.EntityStates.Unchanged> and the new values are merged by using <xref:System.Data.Services.Client.MergeOption.OverwriteChanges>.</span></span> <span data-ttu-id="74c14-143">Если операция вставки, обновления или удаления завершается с ошибкой, состояние сущности остается таким же, как до вызова метода <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>, а свойству <xref:System.Data.Services.Client.OperationResponse.Error%2A> объекта <xref:System.Data.Services.Client.OperationResponse> присваивается значение <xref:System.Data.Services.Client.DataServiceRequestException>, содержащее сведения об ошибке.</span><span class="sxs-lookup"><span data-stu-id="74c14-143">When an insert, update, or delete operation fails in the data service, the entity state remains the same as it was before <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> was called, and the <xref:System.Data.Services.Client.OperationResponse.Error%2A> property of the <xref:System.Data.Services.Client.OperationResponse> is set to an <xref:System.Data.Services.Client.DataServiceRequestException> that contains information about the error.</span></span> <span data-ttu-id="74c14-144">Дополнительные сведения см. в разделе [обновление службы данных](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="74c14-144">For more information, see [Updating the Data Service](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md).</span></span>  
  
### <a name="setting-the-http-method-for-updates"></a><span data-ttu-id="74c14-145">Задание метода HTTP для обновлений</span><span class="sxs-lookup"><span data-stu-id="74c14-145">Setting the HTTP Method for Updates</span></span>  
 <span data-ttu-id="74c14-146">По умолчанию клиентская библиотека платформы .NET Framework отправляет обновления созданным сущностям в качестве запросов MERGE.</span><span class="sxs-lookup"><span data-stu-id="74c14-146">By default, the .NET Framework client library sends updates to existing entities as MERGE requests.</span></span> <span data-ttu-id="74c14-147">Запрос MERGE обновляет выбранные свойства сущности. Однако клиент всегда включает все свойства в запрос MERGE, даже те свойства, которые не изменились.</span><span class="sxs-lookup"><span data-stu-id="74c14-147">A MERGE request updates selected properties of the entity; however the client always includes all properties in the MERGE request, even properties that have not changed.</span></span> <span data-ttu-id="74c14-148">Протокол [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] также поддерживает отправку запросов PUT для обновления сущностей.</span><span class="sxs-lookup"><span data-stu-id="74c14-148">The [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protocol also supports sending PUT requests to update entities.</span></span> <span data-ttu-id="74c14-149">В запросе PUT существующая сущность заменяется новым экземпляром сущности с клиентскими значениями свойств.</span><span class="sxs-lookup"><span data-stu-id="74c14-149">In a PUT request, an existing entity is essentially replaced with a new instance of the entity with property values from the client.</span></span> <span data-ttu-id="74c14-150">Чтобы использовать запрос PUT, установите флаг <xref:System.Data.Services.Client.SaveChangesOptions.ReplaceOnUpdate> напротив перечисления <xref:System.Data.Services.Client.SaveChangesOptions> при вызове метода <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="74c14-150">To use PUT requests, set the <xref:System.Data.Services.Client.SaveChangesOptions.ReplaceOnUpdate> flag on the <xref:System.Data.Services.Client.SaveChangesOptions> enumeration when calling <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="74c14-151">Логика запроса PUT отличается от логики запроса MERGE, если клиенту неизвестны все свойства сущности.</span><span class="sxs-lookup"><span data-stu-id="74c14-151">A PUT request will behave differently than a MERGE request when the client does not know about all properties of the entity.</span></span> <span data-ttu-id="74c14-152">Такое может иметь место во время проекции типа сущности в новый тип на клиенте.</span><span class="sxs-lookup"><span data-stu-id="74c14-152">This might occur when projecting an entity type into a new type on the client.</span></span> <span data-ttu-id="74c14-153">Это также может иметь место при добавлении новых свойств в сущность в модели сервисных данных, если свойство <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> в контексте <xref:System.Data.Services.Client.DataServiceContext> имеет значение `true`, то есть система будет пропускать такие клиентские ошибки сопоставления.</span><span class="sxs-lookup"><span data-stu-id="74c14-153">It might also occur when new properties have been added to the entity in the service data model and the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property on the <xref:System.Data.Services.Client.DataServiceContext> is set to `true` to ignore such client mapping errors.</span></span> <span data-ttu-id="74c14-154">В таких случаях запрос PUT сбросит значения всех неизвестных клиенту свойств по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="74c14-154">In these cases, a PUT request will reset any properties that are unknown to the client to their default values.</span></span>  
  
### <a name="post-tunneling"></a><span data-ttu-id="74c14-155">POST-туннелирование</span><span class="sxs-lookup"><span data-stu-id="74c14-155">POST Tunneling</span></span>  
 <span data-ttu-id="74c14-156">По умолчанию клиентская библиотека отправляет запросы create, read, update и delete в службу [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] с помощью соответствующих методов HTTP PUT/MERGE/PATCH и DELETE.</span><span class="sxs-lookup"><span data-stu-id="74c14-156">By default, the client library sends create, read, update, and delete requests to an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service by using the corresponding HTTP methods of POST, GET, PUT/MERGE/PATCH, and DELETE.</span></span> <span data-ttu-id="74c14-157">Поддерживаются основные принципы REST (передачи репрезентативных состояний).</span><span class="sxs-lookup"><span data-stu-id="74c14-157">This upholds the basic principles of Representational State Transfer (REST).</span></span> <span data-ttu-id="74c14-158">Однако не каждая реализация веб-сервера поддерживает полный набор методов HTTP.</span><span class="sxs-lookup"><span data-stu-id="74c14-158">However, not every Web server implementation supports the full set of HTTP methods.</span></span> <span data-ttu-id="74c14-159">В некоторых случаях поддерживаемые методы ограничиваются лишь GET и POST.</span><span class="sxs-lookup"><span data-stu-id="74c14-159">In some cases, the supported methods might be restricted to just GET and POST.</span></span> <span data-ttu-id="74c14-160">Это может произойти, когда посредник, например межсетевой экран, блокирует запросы с некоторыми методами.</span><span class="sxs-lookup"><span data-stu-id="74c14-160">This can happen when an intermediary, like a firewall, blocks requests with certain methods.</span></span> <span data-ttu-id="74c14-161">Поскольку методы GET и POST чаще всего поддерживаются, [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] обеспечивает возможность выполнения любых неподдерживаемых методов HTTP с помощью запроса POST.</span><span class="sxs-lookup"><span data-stu-id="74c14-161">Because the GET and POST methods are most often supported, [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] prescribes a way to execute any unsupported HTTP methods by using a POST request.</span></span> <span data-ttu-id="74c14-162">Известный как *метод туннелирования* или *POST-туннелирование*, это позволяет клиенту отправить запрос POST с фактическим методом, который задан в пользовательском `X-HTTP-Method` заголовок.</span><span class="sxs-lookup"><span data-stu-id="74c14-162">Known as *method tunneling* or *POST tunneling*, this enables a client to send a POST request with the actual method specified in the custom `X-HTTP-Method` header.</span></span> <span data-ttu-id="74c14-163">Чтобы включить POST-туннелирование для запросов, задайте для свойства <xref:System.Data.Services.Client.DataServiceContext.UsePostTunneling%2A> на экземпляре <xref:System.Data.Services.Client.DataServiceContext> значение `true`.</span><span class="sxs-lookup"><span data-stu-id="74c14-163">To enable POST tunneling for requests, set the <xref:System.Data.Services.Client.DataServiceContext.UsePostTunneling%2A> property on the <xref:System.Data.Services.Client.DataServiceContext> instance to `true`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="74c14-164">См. также</span><span class="sxs-lookup"><span data-stu-id="74c14-164">See Also</span></span>  
 [<span data-ttu-id="74c14-165">Библиотека клиентов служб данных WCF</span><span class="sxs-lookup"><span data-stu-id="74c14-165">WCF Data Services Client Library</span></span>](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)  
 [<span data-ttu-id="74c14-166">Обновление службы данных</span><span class="sxs-lookup"><span data-stu-id="74c14-166">Updating the Data Service</span></span>](../../../../docs/framework/data/wcf/updating-the-data-service-wcf-data-services.md)  
 [<span data-ttu-id="74c14-167">Асинхронные операции</span><span class="sxs-lookup"><span data-stu-id="74c14-167">Asynchronous Operations</span></span>](../../../../docs/framework/data/wcf/asynchronous-operations-wcf-data-services.md)  
 [<span data-ttu-id="74c14-168">Пакетные операции</span><span class="sxs-lookup"><span data-stu-id="74c14-168">Batching Operations</span></span>](../../../../docs/framework/data/wcf/batching-operations-wcf-data-services.md)
