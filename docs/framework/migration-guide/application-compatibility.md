---
title: Совместимость приложений в .NET Framework
ms.date: 05/19/2017
helpviewer_keywords:
- application compatibility
- .NET Framework application compatibility
- .NET Framework changes
ms.assetid: c4ba3ff2-fe59-4c5d-9e0b-86bba3cd865c
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 1939666b3dd271959c418e3d714b177e170fcd04
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/23/2019
ms.locfileid: "54595985"
---
# <a name="application-compatibility-in-the-net-framework"></a><span data-ttu-id="9ecdb-102">Совместимость приложений в .NET Framework</span><span class="sxs-lookup"><span data-stu-id="9ecdb-102">Application Compatibility in the .NET Framework</span></span>

## <a name="introduction"></a><span data-ttu-id="9ecdb-103">Вступление</span><span class="sxs-lookup"><span data-stu-id="9ecdb-103">Introduction</span></span>
<span data-ttu-id="9ecdb-104">Важной задачей каждого выпуска .NET является совместимость.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-104">Compatibility is a very important goal of each .NET release.</span></span> <span data-ttu-id="9ecdb-105">Совместимость гарантирует, что каждая версия дополняет предыдущие и позволяет им работать так же, как и раньше.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-105">Compatibility ensures that each version is additive, so previous versions will still work.</span></span> <span data-ttu-id="9ecdb-106">С другой стороны, изменения в функциях по сравнению с предыдущими версиями (для улучшения производительности, устранения проблем с безопасностью или исправления ошибок) могут привести к проблемам совместимости в существующем коде или приложениях, которые запускаются в более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-106">On the other hand, changes to previous functionality (to improve performance, address security issues, or fix bugs) can cause compatibility problems in existing code or existing applications that run under a later version.</span></span> <span data-ttu-id="9ecdb-107">Платформа .NET Framework учитывает изменения целевой платформы и среды выполнения.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-107">The .NET Framework recognizes retargeting changes and runtime changes.</span></span> <span data-ttu-id="9ecdb-108">Изменения целевой платформы влияют на приложения, разработанные для конкретной версии .NET Framework, но запускаемые на более поздней версии платформы.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-108">Retargeting changes affect applications that target a specific version of the .NET Framework but are running on a later version.</span></span> <span data-ttu-id="9ecdb-109">Изменения среды выполнения влияют на все приложения, запускаемые на конкретной версии платформы.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-109">Runtime changes affect all applications running on a particular version.</span></span>

<span data-ttu-id="9ecdb-110">Каждое приложение разрабатывается для конкретной версии платформы .NET Framework, которую можно указать следующими способами.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-110">Each app targets a specific version of the .NET Framework, which can be specified by:</span></span>

* <span data-ttu-id="9ecdb-111">Назначив требуемую версию .NET Framework в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-111">Defining a target framework in Visual Studio.</span></span>
* <span data-ttu-id="9ecdb-112">Указав требуемую версию .NET Framework в файле проекта.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-112">Specifying the target framework in a project file.</span></span>
* <span data-ttu-id="9ecdb-113">Применив <xref:System.Runtime.Versioning.TargetFrameworkAttribute> к исходному коду.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-113">Applying a <xref:System.Runtime.Versioning.TargetFrameworkAttribute> to the source code.</span></span>

<span data-ttu-id="9ecdb-114">При использовании более новой версии .NET Framework по сравнению с целевой, платформа будет имитировать поведение старой целевой версии.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-114">When running on a newer version than what was targeted, the .NET Framework will use quirked behavior to mimic the older targeted version.</span></span> <span data-ttu-id="9ecdb-115">Другими словами, приложение будет запущено на более новой версии платформы, но будет работать так, как если бы оно было запущено на более ранней версии.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-115">In other words, the app will run on the newer version of the Framework, but act as if it's running on the older version.</span></span> <span data-ttu-id="9ecdb-116">Такая имитация позволяет устранить многие проблемы совместимости между версиями .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-116">Many of the compatibility issues between versions of the .NET Framework are mitigated through this quirking model.</span></span> <span data-ttu-id="9ecdb-117">Версия платформы .NET Framework, для которой предназначено приложение, определяется целевой версией начальной сборки для домена приложения, где выполняется код.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-117">The version of the .NET Framework that an application targets is determined by the target version of the entry assembly for the application domain that the code is running in.</span></span> <span data-ttu-id="9ecdb-118">Все дополнительные сборки, загруженные в этот домен приложения, нацелены на эту версию .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-118">All additional assemblies loaded in that application domain target that .NET Framework version.</span></span> <span data-ttu-id="9ecdb-119">Например, в случае исполняемого файла платформа, на которую нацелен исполняемый файл, — это режим совместимости, в котором будут работать все сборки в этом домене приложения.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-119">For example, in the case of an executable, the framework the executable targets is the compatibility mode all assemblies in that AppDomain will run under.</span></span>

## <a name="runtime-changes"></a><span data-ttu-id="9ecdb-120">Изменения в среде выполнения</span><span class="sxs-lookup"><span data-stu-id="9ecdb-120">Runtime changes</span></span>

<span data-ttu-id="9ecdb-121">Проблемы среды выполнения возникают, когда на компьютере устанавливается новая среда выполнения и запускаются те же двоичные файлы, но наблюдается другое поведение.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-121">Runtime issues are those that arise when a new runtime is placed on a machine and the same binaries are run, but different behavior is seen.</span></span> <span data-ttu-id="9ecdb-122">Если двоичный файл был скомпилирован для платформы .NET Framework 4.0, он будет запускаться на платформе .NET Framework 4.5 и в более поздних версиях в режиме совместимости с .NET Framework 4.0.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-122">If a binary was compiled for .NET Framework 4.0 it will run in .NET Framework 4.0 compatibility mode on 4.5 or later versions.</span></span> <span data-ttu-id="9ecdb-123">Многие изменения, затрагивающие версию 4.5, не повлияют на двоичный файл, скомпилированный для версии 4.0.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-123">Many of the changes that affect 4.5 will not affect a binary compiled for 4.0.</span></span> <span data-ttu-id="9ecdb-124">Это относится к домену приложения и зависит от параметров начальной сборки.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-124">This is specific to the AppDomain and depends on the settings of the entry assembly.</span></span>

## <a name="retargeting-changes"></a><span data-ttu-id="9ecdb-125">Изменение целевой платформы</span><span class="sxs-lookup"><span data-stu-id="9ecdb-125">Retargeting changes</span></span>

<span data-ttu-id="9ecdb-126">Проблемы, связанные с изменением целевой платформы, возникают, когда для сборки с целевой платформой 4.0 устанавливается целевая платформа 4.5.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-126">Retargeting issues are those that arise when an assembly that was targeting 4.0 is now set to target 4.5.</span></span> <span data-ttu-id="9ecdb-127">Теперь в сборке доступны новые возможности, но могут возникнуть и проблемы совместимости со старыми функциями.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-127">Now the assembly opts into the new features as well as potential compatibility issues to old features.</span></span> <span data-ttu-id="9ecdb-128">Опять же, это зависит от начальной сборки и распространяется на консольное приложение, которое использует сборку, или веб-сайт, который ссылается на сборку.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-128">Again, this is dictated by the entry assembly, so the console app that uses the assembly, or the website that references the assembly.</span></span>

## <a name="net-compatibility-diagnostics"></a><span data-ttu-id="9ecdb-129">Диагностика совместимости .NET</span><span class="sxs-lookup"><span data-stu-id="9ecdb-129">.NET Compatibility Diagnostics</span></span>

<span data-ttu-id="9ecdb-130">Диагностика совместимости .NET выполняется с помощью анализаторов на базе Roslyn, которые помогают выявить проблемы совместимости приложений между версиями .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-130">The .NET Compatibility Diagnostics are Roslyn-powered analyzers that help identify application compatibility issues between versions of the .NET Framework.</span></span> <span data-ttu-id="9ecdb-131">Этот список содержит все доступные анализаторы, несмотря на то, что в рамках конкретной миграции будут действовать только некоторые из них.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-131">This list contains all of the analyzers available, although only a subset will apply to any specific migration.</span></span> <span data-ttu-id="9ecdb-132">Анализаторы определят, какие проблемы применимы для запланированного переноса и будут исследовать только их.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-132">The analyzers will determine which issues are applicable for the planned migration and will only surface those.</span></span>

<span data-ttu-id="9ecdb-133">Каждая проблема содержит следующую информацию.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-133">Each issue includes the following information:</span></span>

-   <span data-ttu-id="9ecdb-134">Описание того, что изменилось по сравнению с предыдущей версией.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-134">The description of what has changed from a previous version.</span></span>

-   <span data-ttu-id="9ecdb-135">Сведения о влиянии изменения на клиентов, а также о наличии обходных путей для сохранения совместимости между версиями.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-135">How the change affects customers and whether any workarounds are available to preserve compatibility across versions.</span></span>

-   <span data-ttu-id="9ecdb-136">Оценка степени важности изменения.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-136">An assessment of how important the change is.</span></span> <span data-ttu-id="9ecdb-137">Проблемы совместимости приложений делятся на следующие категории.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-137">Application compatibility issue are categorized as follows:</span></span>

    |   |   |
    |---|---|
    |<span data-ttu-id="9ecdb-138">Значительно</span><span class="sxs-lookup"><span data-stu-id="9ecdb-138">Major</span></span>|<span data-ttu-id="9ecdb-139">Значительное изменение, влияющее на большое количество приложений или требующее существенного изменения кода.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-139">A significant change that affects a large number of apps or requires substantial modification of code.</span></span>|
    |<span data-ttu-id="9ecdb-140">Дополнительный номер</span><span class="sxs-lookup"><span data-stu-id="9ecdb-140">Minor</span></span>|<span data-ttu-id="9ecdb-141">Изменение, влияющее на небольшое количество приложений или требующее незначительного изменения кода.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-141">A change that affects a small number of apps or that requires minor modification of code.</span></span>|
    |<span data-ttu-id="9ecdb-142">Пограничный случай</span><span class="sxs-lookup"><span data-stu-id="9ecdb-142">Edge case</span></span>|<span data-ttu-id="9ecdb-143">Изменение, влияющее на приложения в исключительных ситуациях.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-143">A change that affects apps under very specific, uncommon scenarios.</span></span>|
    |<span data-ttu-id="9ecdb-144">Прозрачный</span><span class="sxs-lookup"><span data-stu-id="9ecdb-144">Transparent</span></span>|<span data-ttu-id="9ecdb-145">Изменение без заметного влияния на разработчика или пользователя приложения.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-145">A change with no noticeable effect on the application's developer or user.</span></span>|

-   <span data-ttu-id="9ecdb-146">Версия указывает, когда изменение впервые появилось на платформе.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-146">Version indicates when the change first appears in the framework.</span></span> <span data-ttu-id="9ecdb-147">Некоторые изменения появляются в конкретной версии и отменяются в более поздней версии; это также указывается.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-147">Some of the changes are introduced in a particular version and reverted in a later version; that is indicated as well.</span></span>

-   <span data-ttu-id="9ecdb-148">Тип изменения:</span><span class="sxs-lookup"><span data-stu-id="9ecdb-148">The type of change:</span></span>

    |   |   |
    |---|---|
    |<span data-ttu-id="9ecdb-149">Изменение целевой платформы</span><span class="sxs-lookup"><span data-stu-id="9ecdb-149">Retargeting</span></span>|<span data-ttu-id="9ecdb-150">Изменение влияет на приложения, которые перекомпилированы для использования в новой версии платформы .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-150">The change affects apps that are recompiled to target a new version of the .NET Framework.</span></span>|
    |<span data-ttu-id="9ecdb-151">Среда выполнения</span><span class="sxs-lookup"><span data-stu-id="9ecdb-151">Runtime</span></span>|<span data-ttu-id="9ecdb-152">Изменение влияет на существующие приложения, предназначенные для предыдущей версии платформы .NET Framework, но работающие в более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-152">The change affects an existing app that targets a previous version of the .NET Framework but runs on a later version.</span></span>|

-   <span data-ttu-id="9ecdb-153">Затронутые API, если таковые имеются.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-153">The affected APIS, if any.</span></span>

-   <span data-ttu-id="9ecdb-154">Идентификаторы доступных средств диагностики</span><span class="sxs-lookup"><span data-stu-id="9ecdb-154">The IDs of the available diagnostics</span></span>

## <a name="usage"></a><span data-ttu-id="9ecdb-155">Использование</span><span class="sxs-lookup"><span data-stu-id="9ecdb-155">Usage</span></span>
<span data-ttu-id="9ecdb-156">Для начала выберите тип изменения совместимости ниже.</span><span class="sxs-lookup"><span data-stu-id="9ecdb-156">To begin, select the type of compatibility change below:</span></span>

* [<span data-ttu-id="9ecdb-157">Изменение целевой платформы</span><span class="sxs-lookup"><span data-stu-id="9ecdb-157">Retargeting Changes</span></span>](./retargeting/index.md)
* [<span data-ttu-id="9ecdb-158">Изменения среды выполнения</span><span class="sxs-lookup"><span data-stu-id="9ecdb-158">Runtime Changes</span></span>](./runtime/index.md)


## <a name="see-also"></a><span data-ttu-id="9ecdb-159">См. также</span><span class="sxs-lookup"><span data-stu-id="9ecdb-159">See also</span></span>

- [<span data-ttu-id="9ecdb-160">Версии и зависимости</span><span class="sxs-lookup"><span data-stu-id="9ecdb-160">Versions and Dependencies</span></span>](../../../docs/framework/migration-guide/versions-and-dependencies.md)
- [<span data-ttu-id="9ecdb-161">Новые возможности</span><span class="sxs-lookup"><span data-stu-id="9ecdb-161">What's New</span></span>](../../../docs/framework/whats-new/index.md)
- [<span data-ttu-id="9ecdb-162">Устаревшие классы библиотеки классов</span><span class="sxs-lookup"><span data-stu-id="9ecdb-162">What's Obsolete in the Class Library</span></span>](../../../docs/framework/whats-new/whats-obsolete.md)
