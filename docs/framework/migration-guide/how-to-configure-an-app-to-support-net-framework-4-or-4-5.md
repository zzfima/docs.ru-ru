---
title: Практическое руководство. Настройка приложения для включения поддержки .NET Framework версии 4 и выше
ms.date: 03/30/2017
helpviewer_keywords:
- configuring apps to support .NET Framework
- .NET Framework, configuring apps
ms.assetid: 63c6b9a8-0088-4077-9aa3-521ab7290f79
ms.openlocfilehash: 586f39fc9b50dcd45bb959ebd0063e3c38d9c3ed
ms.sourcegitcommit: 5f236cd78cf09593c8945a7d753e0850e96a0b80
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2020
ms.locfileid: "75716251"
---
# <a name="how-to-configure-an-app-to-support-net-framework-4-or-later-versions"></a>Практическое руководство. Настройка приложения для включения поддержки .NET Framework версии 4 и выше

Все приложения, которые размещают в себе среду CLR, должны запускать или *активировать* среду CLR для выполнения управляемого кода. Как правило, приложение .NET Framework запускается в той версии среды CLR, в которой оно было собрано, однако для приложений для настольных систем это поведение можно изменить с помощью файла конфигурации приложения (иногда называемого файлом app.config). Однако, для приложений Магазина Windows или приложений Windows Phone, изменить предусмотренное по умолчанию поведение активации с помощью файла конфигурации приложения невозможно. В этой статье поясняется, как разрешить приложению для настольных систем запускаться в другой версии .NET Framework, а также приводятся примеры нацеливания на версию 4 или более позднюю.

 Версия .NET Framework, в которой запускается приложение, определяется в следующем порядке:

- Файл конфигурации.

     Если файл конфигурации приложения содержит записи [\<supportedRuntime>](../configure-apps/file-schema/startup/supportedruntime-element.md), в которых указана одна или несколько версий платформы .NET Framework, и одна из этих версий присутствует на компьютере пользователя, приложение запускается в этой версии. Записи [\<supportedRuntime>](../configure-apps/file-schema/startup/supportedruntime-element.md) в файле конфигурации считываются в порядке следования, и используется первая указанная версия платформы .NET Framework, которая есть на компьютере пользователя. (Для версии 1.0 используется [элемент \<requiredRuntime>](../configure-apps/file-schema/startup/requiredruntime-element.md)).

- Скомпилированная версия.

     Если файла конфигурации нет, но версия .NET Framework, в которой было собрано приложение, присутствует на компьютере пользователя, приложение запускается в этой версии.

- Последняя установленная версия.

     Если версия .NET Framework, для которой было собрано приложение, отсутствует, и в файле конфигурации не указана версия в [элементе \<supportedRuntime>](../configure-apps/file-schema/startup/supportedruntime-element.md), приложение пытается запуститься в последней версии .NET Framework, присутствующей на компьютере пользователя.

     Однако приложения .NET Framework 1.0, 1.1, 2.0, 3.0 и 3.5 не запускаются автоматически в .NET Framework 4 или более поздних версиях, и в некоторых случаях пользователь может получить сообщение об ошибке, и ему будет предложено установить .NET Framework 3.5. Поведение активации может также зависеть от операционной системы пользователя, потому что в состав разных версий Windows входят разные версии .NET Framework. Если приложение поддерживает и .NET Framework 3.5, и .NET Framework 4 или более поздние версии, рекомендуется указывать это путем включения в файл конфигурации нескольких записей во избежание ошибок инициализации .NET Framework. Дополнительные сведения см. в статье [Версии и зависимости платформы .NET Framework](versions-and-dependencies.md).

 Также можно настроить приложения .NET Framework 3.5 для запуска на платформе .NET Framework 4 или более поздней даже на компьютерах, на которых установлена .NET Framework 3.5, чтобы воспользоваться направленными на повышение производительности преимуществами версий 4 и более поздних.

> [!IMPORTANT]
> Рекомендуется всегда тестировать приложение в каждой из поддерживаемых им версий .NET Framework. Сведения об обновлении приложения для поддержки более поздних версий платформы .NET Framework см. в статье [Совместимость версий в .NET Framework](version-compatibility.md).

 Сведения о том, как внести в приложения .NET Framework 1.0 и 1.1 изменения для поддержки Windows 7 и Windows 8, см. в статье [Миграция из .NET Framework 1.1](migrating-from-the-net-framework-1-1.md).

## <a name="to-configure-your-app-to-run-on-the-net-framework-4-or-later-versions"></a>Настройка приложения для запуска в .NET Framework 4 или более поздних версиях

1. Добавьте или найдите файл конфигурации проекта .NET Framework. Файл конфигурации приложения находится в том же каталоге, что и приложение, и имеет то же имя, однако с расширением .config. Например, для приложения с именем MyExecutable.exe файл конфигурации приложения называется MyExecutable.exe.config.

     Чтобы добавить файл конфигурации, в строке меню Visual Studio выберите **Проект**, **Добавить новый элемент**. Выберите **Общие** в области слева, а затем выберите **Файл конфигурации**. Назовите файл конфигурации *appName*.exe.config. Для проектов приложений Магазина Windows или Windows Phone эти элементы меню недоступны, поскольку изменить политику активации на этих платформах невозможно.

2. Добавьте в файл конфигурации приложения элемент [\<supportedRuntime>](../configure-apps/file-schema/startup/supportedruntime-element.md) следующим образом:

    ```xml
    <configuration>
      <startup>
        <supportedRuntime version="<version>"/>
      </startup>
    </configuration>
    ```

     где *\<version>* указывает версию среды CLR, соответствующей версии платформы .NET Framework, которую поддерживает приложение. Можно использовать следующие строки:

    - .NET Framework 1.0: "v1.0.3705"

    - .NET Framework 1.1: "v1.1.4322"

    - .NET Framework 2.0, 3.0 и 3.5: "v2.0.50727"

    - .NET Framework 4 и более поздние версии: "v4.0"

     Можно добавить несколько элементов [\<supportedRuntime>](../configure-apps/file-schema/startup/supportedruntime-element.md), перечислив их в порядке предпочтения, чтобы задать поддержку нескольких версий .NET Framework.

 В следующей таблице показано, как параметры файла конфигурации приложения и версии платформы .NET Framework, установленные на компьютере, определяют версию, в которой запускается приложение .NET Framework 3.5. Примеры относятся к приложению .NET Framework 3.5, однако аналогичную логику можно использовать для нацеливания приложений, собранных с использованием более ранних версий .NET Framework. Обратите внимание, что для указания .NET Framework 3.5 в файле конфигурации приложения используется номер версии .NET Framework 2.0 (v2.0.50727).

|Параметр файла app.config|На компьютере с установленной версией 3.5|На компьютере с версиями 3.5 и 4 или более поздними|На компьютере с версией 4 или более поздними|
|-|-|-|-|
|Отсутствуют|Запускается в 3.5|Запускается в 3.5|Выводит сообщение об ошибке, предлагая пользователю установить нужную версию *|
|`<supportedRuntime version="v2.0.50727"/>`|Запускается в 3.5|Запускается в 3.5|Выводит сообщение об ошибке, предлагая пользователю установить нужную версию *|
|`<supportedRuntime version="v2.0.50727"/>` <br /> `<supportedRuntime version="v4.0"/>`|Запускается в 3.5|Запускается в 3.5|Запускается в 4 или более поздней версии|
|`<supportedRuntime version="v4.0"/>` <br /> `<supportedRuntime version="v2.0.50727"/>`|Запускается в 3.5|Запускается в 4 или более поздней версии|Запускается в 4 или более поздней версии|
|`<supportedRuntime version="v4.0"/>`|Выводит сообщение об ошибке, предлагая пользователю установить нужную версию *|Запускается в 4 или более поздней версии|Запускается в 4 или более поздней версии|

 \*Дополнительные сведения об этом сообщении об ошибке и о том, как избежать этой ошибки, см. в статье [Ошибки инициализации платформы .NET Framework: управление пользовательской средой](../deployment/initialization-errors-managing-the-user-experience.md).

## <a name="see-also"></a>См. также

- [Миграция из .NET Framework 1.1](migrating-from-the-net-framework-1-1.md)
- [Руководство по миграции](index.md)
