---
title: Коллекции и типы коллекций для XAML
ms.date: 03/30/2017
ms.assetid: 58f8e7c6-9a41-4f25-8551-c042f1315baa
ms.openlocfilehash: 4123b64545f7c47a96c4cae496046a89b7e576b0
ms.sourcegitcommit: 5137208fa414d9ca3c58cdfd2155ac81bc89e917
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/06/2019
ms.locfileid: "57494628"
---
# <a name="collections-and-collection-types-for-xaml"></a>Коллекции и типы коллекций для XAML

В этом разделе описывается определение свойства типов, которые предназначены для поддержки коллекции и для поддержки синтаксиса XAML для создания экземпляров элементов коллекции как дочерние элементы родительского объекта элемента или элемента свойства.

## <a name="xaml-collection-concepts"></a>Основные понятия коллекции XAML

По сути все связи в XAML, где есть несколько дочерних элементов в пределах области элемента объекта XAML или элемента свойства XAML должен быть реализован в виде коллекции. Этой коллекции необходимо связать с определенным свойством XAML типа XAML, которая является родительской в связи. Свойства должен быть коллекцией, так как обработчик XAML ожидает назначение каждого элемента в разметку, чтобы быть вновь добавленный элемент свойства коллекции резервного.

На уровне языка XAML точные требования поддержки коллекции не определен полностью. Концепции, что коллекция может быть либо списка или словаря (но не оба) определяется на уровне языка XAML, но какие типы резервного представлять либо списков или словарей не определен в языке XAML.

В службах XAML .NET Framework концепция поддержка коллекций XAML более четко определяется в терминах резервных типов .NET Framework. В частности поддержка коллекций XAML основан на несколько понятий платформы .NET Framework и API, которые используются для списков и словари в общие вопросы программирования в .NET Framework.

1. <xref:System.Collections.IList> Интерфейс указывает коллекции-списка.

2. <xref:System.Collections.IDictionary> Интерфейс указывает коллекцию словарей.

3. <xref:System.Array> представляет массив и массив поддерживает <xref:System.Collections.IList> методы.

В каждом из этих концепций коллекции, обработчик XAML служб XAML платформы .NET ожидает, что для вызова `Add` метод в определенном экземпляре типа свойства коллекции. Или, в случае сериализации процессор XAML создает дискретных экземпляров типа XAML для каждого элемента в списке, словаря или массива в зависимости от конкретных понятие «Элементы» для каждой коллекции. Ниже приведены: <xref:System.Collections.IList.Item%2A>; <xref:System.Collections.IDictionary.Item%2A>; явный <xref:System.Array.System%23Collections%23IList%23Item%2A> для <xref:System.Array>.

## <a name="generic-collections"></a>Универсальные коллекции

Универсальные коллекции может быть полезно для общего программирования платформы .NET Framework и может также использоваться для свойств коллекции XAML. Тем не менее, универсальные интерфейсы <xref:System.Collections.Generic.IList%601> и <xref:System.Collections.Generic.IDictionary%602> не распознаются процессоров .NET Framework XAML служб XAML как эквивалент неуниверсального <xref:System.Collections.IList> или <xref:System.Collections.IDictionary>. Вместо того чтобы реализовывать интерфейсы, рекомендуемый подход для типов свойств в универсальной коллекции является наследование от классов <xref:System.Collections.Generic.List%601> или <xref:System.Collections.Generic.Dictionary%602>. Эти классы реализации неуниверсальных интерфейсов и таким образом указать ожидаемый поддержку для коллекции XAML в базовой реализации.

## <a name="read-only-collections-and-initialization-logic"></a>Коллекции только для чтения и логику инициализации

В программирования платформы .NET Framework это распространенный конструктивный шаблон, чтобы сделать любое свойство, которое содержит значение свойства коллекции в виде коллекции только для чтения. Этот шаблон позволяет использовать экземпляр, которому принадлежит свойство коллекции для более эффективного управления, что происходит с коллекции... В частности шаблон предотвращает случайное замены всей существующей коллекции, задав свойство. В этом случае доступ к коллекции вызывающими вместо должна быть выполнена с вызов методов или свойств, который поддерживается в тип коллекции и/или интерфейсы соответствующих коллекций, такие как <xref:System.Collections.IList>.

При использовании этого шаблона подразумевает, что любой класс, предоставляющий свойство только для чтения коллекцию необходимо вначале инициализировать это свойство для хранения пустую коллекцию. Обычно инициализация выполняется как часть поведение конструктора для класса. Чтобы быть полезным для XAML, очень важно, такую логику всегда ссылается конструктор по умолчанию, так как XAML обычно вызывает конструктор по умолчанию до обработки свойств (свойства коллекции или иным способом).

## <a name="xaml-type-system-support-and-collections"></a>Поддержка системы типов XAML и коллекций

Помимо основной механизм синтаксического анализа XAML и заполнение или сериализации коллекции свойств системы типов XAML, реализованное в службах XAML .NET Framework включает в себя несколько функций конструктора, которые относятся к коллекциям в XAML.

1. <xref:System.Xaml.XamlType.IsCollection%2A> Возвращает значение true, если тип XAML, поддерживаемый типом, который обеспечивает поддержку коллекции XAML.

2. <xref:System.Xaml.XamlType.IsDictionary%2A> и <xref:System.Xaml.XamlType.IsArray%2A> можно затем определить, какой режим сбора, XAML поддерживает тип. Для пользовательского XAML процессоров, которые основаны на службах XAML .NET Framework и XAML, система типов, но не на основе существующего <xref:System.Xaml.XamlWriter> реализаций, знать, какой режим сбора используется могут быть необходимы, чтобы знать, какой метод следует вызывать для Обработка коллекций.

3. Каждый из предыдущих значений свойств потенциально влияют переопределения <xref:System.Xaml.XamlType.LookupCollectionKind%2A> для типа XAML.
