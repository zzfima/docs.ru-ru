---
title: "Варианты размещения рабочего процесса"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 37bcd668-9c5c-4e7c-81da-a1f1b3a16514
caps.latest.revision: "3"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 06d39fc37d40747eef323d83f65426e015099913
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/18/2017
---
# <a name="workflow-hosting-options"></a>Варианты размещения рабочего процесса
Большинство образцов [!INCLUDE[wf](../../../includes/wf-md.md)] используют рабочие процессы, размещенные в консольном приложении, но это не является реалистичным сценарием для реальных рабочих процессов. Рабочие процессы в реальных бизнес-приложениях будут задействованы в постоянных процессах: службе Windows, созданной разработчиком, или серверном приложении, например [!INCLUDE[iisver](../../../includes/iisver-md.md)] или AppFabric. Между этими подходами имеются следующие различия.  
  
## <a name="hosting-workflows-in-iis-with-windows-appfabric"></a>Размещение рабочих процессов в службах IIS с Windows AppFabric  
 IIS с AppFabric является предпочитаемым расположением для рабочих процессов. Ведущее приложение для рабочих процессов с помощью AppFabric - служба активации Windows, которая устраняет зависимость от HTTP только по IIS.  
  
## <a name="hosting-workflows-in-iis-alone"></a>Размещение рабочих процессов только в службах IIS  
 Использование одного [!INCLUDE[iisver](../../../includes/iisver-md.md)] не рекомендуется, поскольку в AppFabric имеются средства управления и наблюдения, которые облегчают обслуживание выполняющихся приложений. Рабочие процессы должны размещаться только лишь в [!INCLUDE[iisver](../../../includes/iisver-md.md)] при наличии проблем инфраструктуры, связанных с перемещением в AppFabric.  
  
> [!WARNING]
>  [!INCLUDE[iisver](../../../includes/iisver-md.md)] периодически перезапускает пулы приложений по различным причинам. При перезапуске пула приложений IIS прекращает прием сообщений старым пулом и создает новый пул приложений, чтобы принимать новые запросы. Если рабочий процесс продолжает работу после отправки ответа, [!INCLUDE[iisver](../../../includes/iisver-md.md)] не будет знать о выполняемой работе и может перезапустить размещение пула приложений. Если это происходит, рабочий процесс будет прерван и отслеживание служб будет записывать [1004 — WorkflowInstanceAborted](../../../docs/framework/windows-workflow-foundation/1004-workflowinstanceaborted.md) сообщение с пустым полем причины.  
>   
>  Если используется сохраняемость, узел должен явно перезапустить прерванные экземпляры с последней точки сохраняемости.  
>   
>  Если используется AppFabric и сохраняемость, служба управления рабочими процессами в конечном счете возобновит рабочий процесс с последней успешной точки сохраняемости. Если сохраняемость не используется и рабочий процесс выполняет операции вне шаблона «запрос-ответ», то данные будут потеряны при отмене рабочего процесса.  
  
## <a name="hosting-a-workflow-in-a-custom-windows-service"></a>Размещение рабочего процесса в пользовательской службе Windows  
 Создание пользовательской службы рабочего процесса для его размещения потребует от разработчика дублирования многих функциональных возможностей, предоставляемых готовым AppFabric, однако обеспечит большую гибкость за счет дополнительных функций. Этот вариант следует рассматривать, только если AppFabric не является дополнительным средством.
