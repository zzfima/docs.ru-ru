---
title: 'Оптимизация производительности: двумерная графика и обработка изображений'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- graphics [WPF], performance
- drawing [WPF], optimizing performance
- imaging [WPF], optimizing performance
- shapes [WPF], optimizing performance
- 2D graphics [WPF]
- images [WPF], optimizing performance
ms.assetid: e335601e-28c8-4d64-ba27-778fffd55f72
ms.openlocfilehash: 59ac7a5aa8b0591c51cdb6ee0d6435649e22fade
ms.sourcegitcommit: 267d092663aba36b6b2ea853034470aea493bfae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/21/2020
ms.locfileid: "80111222"
---
# <a name="optimizing-performance-2d-graphics-and-imaging"></a><span data-ttu-id="9b2f8-102">Оптимизация производительности: двумерная графика и обработка изображений</span><span class="sxs-lookup"><span data-stu-id="9b2f8-102">Optimizing Performance: 2D Graphics and Imaging</span></span>
[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="9b2f8-103">предоставляет широкий спектр функциональных возможностей двумерной графики и изображений, которые можно оптимизировать для требований приложения.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-103">provides a wide range of 2D graphics and imaging functionality that can be optimized for your application requirements.</span></span> <span data-ttu-id="9b2f8-104">Этот раздел содержит сведения об оптимизации производительности в этих областях.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-104">This topic provides information about performance optimization in those areas.</span></span>  

<a name="Drawing_and_Shapes"></a>
## <a name="drawing-and-shapes"></a><span data-ttu-id="9b2f8-105">Рисование и фигуры</span><span class="sxs-lookup"><span data-stu-id="9b2f8-105">Drawing and Shapes</span></span>  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="9b2f8-106">предоставляет <xref:System.Windows.Media.Drawing> как <xref:System.Windows.Shapes.Shape> объекты, так и объекты для представления графического содержания рисунка.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-106">provides both <xref:System.Windows.Media.Drawing> and <xref:System.Windows.Shapes.Shape> objects to represent graphical drawing content.</span></span> <span data-ttu-id="9b2f8-107">Однако <xref:System.Windows.Media.Drawing> объекты являются <xref:System.Windows.Shapes.Shape> более простыми конструкциями, чем объекты, и обеспечивают более высокую производительность.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-107">However, <xref:System.Windows.Media.Drawing> objects are simpler constructs than <xref:System.Windows.Shapes.Shape> objects and provide better performance characteristics.</span></span>  
  
 <span data-ttu-id="9b2f8-108">A <xref:System.Windows.Shapes.Shape> позволяет нарисовать графическую форму на экране.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-108">A <xref:System.Windows.Shapes.Shape> allows you to draw a graphical shape to the screen.</span></span> <span data-ttu-id="9b2f8-109">Поскольку они являются <xref:System.Windows.FrameworkElement> производными от класса, <xref:System.Windows.Shapes.Shape> объекты могут быть использованы внутри панелей и большинства элементов управления.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-109">Because they are derived from the <xref:System.Windows.FrameworkElement> class, <xref:System.Windows.Shapes.Shape> objects can be used inside panels and most controls.</span></span>  
  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="9b2f8-110">предоставляет несколько уровней доступа к службам для работы с графикой и службам рендеринга.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-110">offers several layers of access to graphics and rendering services.</span></span> <span data-ttu-id="9b2f8-111">В верхнем <xref:System.Windows.Shapes.Shape> слое объекты просты в использовании и предоставляют множество полезных функций, таких как макет и обработка событий.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-111">At the top layer, <xref:System.Windows.Shapes.Shape> objects are easy to use and provide many useful features, such as layout and event handling.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="9b2f8-112">предоставляет ряд готовых к использованию объектов Shape.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-112">provides a number of ready-to-use shape objects.</span></span> <span data-ttu-id="9b2f8-113">Все объекты <xref:System.Windows.Shapes.Shape> формы наследуют сяизм от класса.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-113">All shape objects inherit from the <xref:System.Windows.Shapes.Shape> class.</span></span> <span data-ttu-id="9b2f8-114">Доступные объекты <xref:System.Windows.Shapes.Path>формы <xref:System.Windows.Shapes.Polygon> <xref:System.Windows.Shapes.Polyline>включают, <xref:System.Windows.Shapes.Rectangle> <xref:System.Windows.Shapes.Ellipse> <xref:System.Windows.Shapes.Line>, , , и .</span><span class="sxs-lookup"><span data-stu-id="9b2f8-114">Available shape objects include <xref:System.Windows.Shapes.Ellipse>, <xref:System.Windows.Shapes.Line>, <xref:System.Windows.Shapes.Path>, <xref:System.Windows.Shapes.Polygon>, <xref:System.Windows.Shapes.Polyline>, and <xref:System.Windows.Shapes.Rectangle>.</span></span>  
  
 <span data-ttu-id="9b2f8-115"><xref:System.Windows.Media.Drawing>объекты, с другой стороны, <xref:System.Windows.FrameworkElement> не вытекают из класса и обеспечивают более легкую реализацию для визуализации форм, изображений и текста.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-115"><xref:System.Windows.Media.Drawing> objects, on the other hand, do not derive from the <xref:System.Windows.FrameworkElement> class and provide a lighter-weight implementation for rendering shapes, images, and text.</span></span>  
  
 <span data-ttu-id="9b2f8-116">Существует четыре типа <xref:System.Windows.Media.Drawing> объектов:</span><span class="sxs-lookup"><span data-stu-id="9b2f8-116">There are four types of <xref:System.Windows.Media.Drawing> objects:</span></span>  
  
- <span data-ttu-id="9b2f8-117"><xref:System.Windows.Media.GeometryDrawing>Рисует фигуру.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-117"><xref:System.Windows.Media.GeometryDrawing> Draws a shape.</span></span>  
  
- <span data-ttu-id="9b2f8-118"><xref:System.Windows.Media.ImageDrawing>Рисует изображение.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-118"><xref:System.Windows.Media.ImageDrawing> Draws an image.</span></span>  
  
- <span data-ttu-id="9b2f8-119"><xref:System.Windows.Media.GlyphRunDrawing>Рисует текст.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-119"><xref:System.Windows.Media.GlyphRunDrawing> Draws text.</span></span>  
  
- <span data-ttu-id="9b2f8-120"><xref:System.Windows.Media.DrawingGroup>Рисует другие рисунки.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-120"><xref:System.Windows.Media.DrawingGroup> Draws other drawings.</span></span> <span data-ttu-id="9b2f8-121">Для объединения рисунков в один составной рисунок используйте группирование рисунков.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-121">Use a drawing group to combine other drawings into a single composite drawing.</span></span>  
  
 <span data-ttu-id="9b2f8-122">Объект <xref:System.Windows.Media.GeometryDrawing> используется для визуализации содержимого геометрии.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-122">The <xref:System.Windows.Media.GeometryDrawing> object is used to render geometry content.</span></span> <span data-ttu-id="9b2f8-123">Класс <xref:System.Windows.Media.Geometry> и конкретные классы, которые <xref:System.Windows.Media.CombinedGeometry>вытекают из него, такие как , <xref:System.Windows.Media.EllipseGeometry>и <xref:System.Windows.Media.PathGeometry>, обеспечивают средства для рендеринга 2D графики, а также предоставление хит-тестирования и отсечения поддержки.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-123">The <xref:System.Windows.Media.Geometry> class and the concrete classes which derive from it, such as <xref:System.Windows.Media.CombinedGeometry>, <xref:System.Windows.Media.EllipseGeometry>, and <xref:System.Windows.Media.PathGeometry>, provide a means for rendering 2D graphics, as well as providing hit-testing and clipping support.</span></span> <span data-ttu-id="9b2f8-124">Геометрические объекты можно использовать, например, для определения области элемента управления или для определения области усечения, применяемой к изображению.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-124">Geometry objects can be used to define the region of a control, for example, or to define the clip region to apply to an image.</span></span> <span data-ttu-id="9b2f8-125">Геометрические объекты могут быть простыми, такими как прямоугольники и круги, или сложными, созданными из двух или более геометрических объектов.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-125">Geometry objects can be simple regions, such as rectangles and circles, or composite regions created from two or more geometry objects.</span></span> <span data-ttu-id="9b2f8-126">Более сложные геометрические области могут <xref:System.Windows.Media.PathSegment>быть созданы путем <xref:System.Windows.Media.BezierSegment>объединения <xref:System.Windows.Media.QuadraticBezierSegment>производных объектов, таких как <xref:System.Windows.Media.ArcSegment>, и .</span><span class="sxs-lookup"><span data-stu-id="9b2f8-126">More complex geometric regions can be created by combining <xref:System.Windows.Media.PathSegment>-derived objects, such as <xref:System.Windows.Media.ArcSegment>, <xref:System.Windows.Media.BezierSegment>, and <xref:System.Windows.Media.QuadraticBezierSegment>.</span></span>  
  
 <span data-ttu-id="9b2f8-127">На первый <xref:System.Windows.Media.Geometry> взгляд класс <xref:System.Windows.Shapes.Shape> и класс очень похожи.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-127">On the surface, the <xref:System.Windows.Media.Geometry> class and the <xref:System.Windows.Shapes.Shape> class are quite similar.</span></span> <span data-ttu-id="9b2f8-128">Оба используются в визуализации 2D графики и оба имеют аналогичные <xref:System.Windows.Media.EllipseGeometry> конкретные классы, которые вытекают из них, например, и <xref:System.Windows.Shapes.Ellipse>.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-128">Both are used in the rendering of 2D graphics and both have similar concrete classes which derive from them, for example, <xref:System.Windows.Media.EllipseGeometry> and <xref:System.Windows.Shapes.Ellipse>.</span></span> <span data-ttu-id="9b2f8-129">Однако существуют важные различия между этими двумя наборами классов.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-129">However, there are important differences between these two sets of classes.</span></span> <span data-ttu-id="9b2f8-130">С одной <xref:System.Windows.Media.Geometry> из них классу не хватает <xref:System.Windows.Shapes.Shape> некоторых функциональных возможностей класса, таких как способность рисовать сам.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-130">For one, the <xref:System.Windows.Media.Geometry> class lacks some of the functionality of the <xref:System.Windows.Shapes.Shape> class, such as the ability to draw itself.</span></span> <span data-ttu-id="9b2f8-131">Чтобы нарисовать геометрический объект, для выполнения операции рисования должен использоваться другой класс, например DrawingContext, Drawing или Path (стоит отметить, что Path является Shape).</span><span class="sxs-lookup"><span data-stu-id="9b2f8-131">To draw a geometry object, another class such as DrawingContext, Drawing, or a Path (it is worth noting that a Path is a Shape) must be used to perform the drawing operation.</span></span> <span data-ttu-id="9b2f8-132">Свойства рендеринга, такие как заливка (fill), штрих (stroke) и толщина штриха (stroke thickness), находятся в классе, который рисует этот геометрический объект, в то время как объект Shape содержит эти свойства.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-132">Rendering properties such as fill, stroke, and the stroke thickness are on the class which draws the geometry object, while a shape object contains these properties.</span></span> <span data-ttu-id="9b2f8-133">Чтобы понять это различие, представьте, что геометрический объект определяет область, например круг, а объект Shape определяет область, определяет, как эта область заполняется и обводится, а также участвует в системе макета.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-133">One way to think of this difference is that a geometry object defines a region, a circle for example, while a shape object defines a region, defines how that region is filled and outlined, and participates in the layout system.</span></span>  
  
 <span data-ttu-id="9b2f8-134">Поскольку <xref:System.Windows.Shapes.Shape> объекты <xref:System.Windows.FrameworkElement> вытекают из класса, их использование может значительно повысить потребление памяти в приложении.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-134">Since <xref:System.Windows.Shapes.Shape> objects derive from the <xref:System.Windows.FrameworkElement> class, using them can add significantly more memory consumption in your application.</span></span> <span data-ttu-id="9b2f8-135">Если вам действительно не <xref:System.Windows.FrameworkElement> нужны функции для графического контента, рассмотрите возможность использования объектов с легким весом. <xref:System.Windows.Media.Drawing></span><span class="sxs-lookup"><span data-stu-id="9b2f8-135">If you really do not need the <xref:System.Windows.FrameworkElement> features for your graphical content, consider using the lighter-weight <xref:System.Windows.Media.Drawing> objects.</span></span>  
  
 <span data-ttu-id="9b2f8-136">Для получения <xref:System.Windows.Media.Drawing> дополнительной информации об объектах [см.](../graphics-multimedia/drawing-objects-overview.md)</span><span class="sxs-lookup"><span data-stu-id="9b2f8-136">For more information on <xref:System.Windows.Media.Drawing> objects, see [Drawing Objects Overview](../graphics-multimedia/drawing-objects-overview.md).</span></span>  
  
<a name="StreamGeometry_Objects"></a>
## <a name="streamgeometry-objects"></a><span data-ttu-id="9b2f8-137">Объекты StreamGeometry</span><span class="sxs-lookup"><span data-stu-id="9b2f8-137">StreamGeometry Objects</span></span>  
 <span data-ttu-id="9b2f8-138">Объект <xref:System.Windows.Media.StreamGeometry> является легкой <xref:System.Windows.Media.PathGeometry> альтернативой для создания геометрических фигур.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-138">The <xref:System.Windows.Media.StreamGeometry> object is a lightweight alternative to <xref:System.Windows.Media.PathGeometry> for creating geometric shapes.</span></span> <span data-ttu-id="9b2f8-139">Используйте, <xref:System.Windows.Media.StreamGeometry> когда вам нужно описать сложную геометрию.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-139">Use a <xref:System.Windows.Media.StreamGeometry> when you need to describe a complex geometry.</span></span> <span data-ttu-id="9b2f8-140"><xref:System.Windows.Media.StreamGeometry>оптимизирован для <xref:System.Windows.Media.PathGeometry> обработки многих объектов и работает <xref:System.Windows.Media.PathGeometry> лучше по сравнению с использованием многих отдельных объектов.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-140"><xref:System.Windows.Media.StreamGeometry> is optimized for handling many <xref:System.Windows.Media.PathGeometry> objects and performs better when compared to using many individual <xref:System.Windows.Media.PathGeometry> objects.</span></span>  
  
 <span data-ttu-id="9b2f8-141">В следующем примере используется синтаксис <xref:System.Windows.Media.StreamGeometry> [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]атрибутов для создания треугольного дюйма .</span><span class="sxs-lookup"><span data-stu-id="9b2f8-141">The following example uses attribute syntax to create a triangular <xref:System.Windows.Media.StreamGeometry> in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span>  
  
 [!code-xaml[GeometriesMiscSnippets_snip#StreamGeometryTriangleExampleWholePage](~/samples/snippets/xaml/VS_Snippets_Wpf/GeometriesMiscSnippets_snip/XAML/StreamGeometryExample.xaml#streamgeometrytriangleexamplewholepage)]  
  
 <span data-ttu-id="9b2f8-142">Для получения <xref:System.Windows.Media.StreamGeometry> дополнительной информации об объектах см. [Create a Shape Using a StreamGeometry](../graphics-multimedia/how-to-create-a-shape-using-a-streamgeometry.md)</span><span class="sxs-lookup"><span data-stu-id="9b2f8-142">For more information on <xref:System.Windows.Media.StreamGeometry> objects, see [Create a Shape Using a StreamGeometry](../graphics-multimedia/how-to-create-a-shape-using-a-streamgeometry.md).</span></span>  
  
<a name="DrawingVisual_Objects"></a>
## <a name="drawingvisual-objects"></a><span data-ttu-id="9b2f8-143">объекты DrawingVisual</span><span class="sxs-lookup"><span data-stu-id="9b2f8-143">DrawingVisual Objects</span></span>  
 <span data-ttu-id="9b2f8-144">Объект <xref:System.Windows.Media.DrawingVisual> представляет собой легкий класс рисования, который используется для визуализации форм, изображений или текста.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-144">The <xref:System.Windows.Media.DrawingVisual> object is a lightweight drawing class that is used to render shapes, images, or text.</span></span> <span data-ttu-id="9b2f8-145">Этот класс считается упрощенным, так как не предоставляет средств для работы с разметкой и обработку событий, что повышает его производительность.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-145">This class is considered lightweight because it does not provide layout or event handling, which improves its performance.</span></span> <span data-ttu-id="9b2f8-146">Поэтому этот класс идеально подходит для фоновых рисунков или клипов.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-146">For this reason, drawings are ideal for backgrounds and clip art.</span></span> <span data-ttu-id="9b2f8-147">Дополнительные сведения см. в разделе [Использование объектов DrawingVisual](../graphics-multimedia/using-drawingvisual-objects.md).</span><span class="sxs-lookup"><span data-stu-id="9b2f8-147">For more information, see [Using DrawingVisual Objects](../graphics-multimedia/using-drawingvisual-objects.md).</span></span>  
  
<a name="Images"></a>
## <a name="images"></a><span data-ttu-id="9b2f8-148">Изображения</span><span class="sxs-lookup"><span data-stu-id="9b2f8-148">Images</span></span>  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="9b2f8-149">изображение обеспечивает значительное улучшение по сравнению с возможностями визуализации в предыдущих версиях Windows.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-149">imaging provides a significant improvement over the imaging capabilities in previous versions of Windows.</span></span> <span data-ttu-id="9b2f8-150">Возможности обработки изображений, например вывод растрового изображения или использование изображения в общем элементе управления, в основном управлялись интерфейсом графических устройств (GDI) Microsoft Windows или Microsoft Windows GDI и программным интерфейсом (API).</span><span class="sxs-lookup"><span data-stu-id="9b2f8-150">Imaging capabilities, such as displaying a bitmap or using an image on a common control were primarily handled by the Microsoft Windows Graphics Device Interface (GDI) or Microsoft Windows GDI+ application programming interface (API).</span></span> <span data-ttu-id="9b2f8-151">Эти API обеспечивали базовые функции обработки изображений, но в них отсутствовали такие возможности, как поддержка расширяемости кодеков и изображений высокого качества.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-151">These API provided baseline imaging functionality, but lacked features such as support for codec extensibility and high fidelity image support.</span></span> <span data-ttu-id="9b2f8-152">API обработки изображений WPF был переработан для преодоления недостатков GDI и GDI+ и теперь предоставляет новый набор API для отображения и использования изображений в приложениях.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-152">WPF Imaging API have been redesigned to overcome the shortcomings of GDI and GDI+ and provide a new set of API to display and use images within your applications.</span></span>  
  
 <span data-ttu-id="9b2f8-153">При использовании изображений учитывайте следующие рекомендации, позволяющие повысить производительность.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-153">When using images, consider the following recommendations for gaining better performance:</span></span>  
  
- <span data-ttu-id="9b2f8-154">Если в приложении требуется отображение эскизов, рассмотрите возможность создания версий изображений уменьшенного размера.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-154">If your application requires you to display thumbnail images, consider creating a reduced-sized version of the image.</span></span> <span data-ttu-id="9b2f8-155">По умолчанию [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] загружает изображение и преобразует его до полного размера.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-155">By default, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] loads your image and decodes it to its full size.</span></span> <span data-ttu-id="9b2f8-156">Если требуется только эскиз изображения, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] напрасно преобразует изображение до полного размера, а затем масштабирует его до размера эскиза.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-156">If you only want a thumbnail version of the image, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] unnecessary decodes the image to its full-size and then scales it down to a thumbnail size.</span></span> <span data-ttu-id="9b2f8-157">Чтобы избежать этой лишней нагрузки, можно либо запросить в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] преобразование изображения в размер эскиза, либо настроить [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] для загрузки изображения размера эскиза.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-157">To avoid this unnecessary overhead, you can either request [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] to decode the image to a thumbnail size, or request [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] to load a thumbnail size image.</span></span>  
  
- <span data-ttu-id="9b2f8-158">Всегда преобразуйте изображение в нужный размер, а не размер по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-158">Always decode the image to desired size and not to the default size.</span></span> <span data-ttu-id="9b2f8-159">Как упоминалось выше, запросите в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] преобразование изображения в нужный размер, а не в полный размер по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-159">As mentioned above, request [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] to decode your image to a desired size and not the default full size.</span></span> <span data-ttu-id="9b2f8-160">Вы уменьшите не только рабочий набор приложения, но также и время ожидания выполнения.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-160">You will reduce not only your application's working set, but execution speed as well.</span></span>  
  
- <span data-ttu-id="9b2f8-161">Если это возможно, объединяйте изображения в одно изображение, например диафильм, состоящий из нескольких изображений.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-161">If possible, combine the images into a single image, such as a film strip composed of multiple images.</span></span>  
  
- <span data-ttu-id="9b2f8-162">Для получения дополнительной информации смотрите [обзор изображений](../graphics-multimedia/imaging-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9b2f8-162">For more information, see [Imaging Overview](../graphics-multimedia/imaging-overview.md).</span></span>  
  
### <a name="bitmapscalingmode"></a><span data-ttu-id="9b2f8-163">BitmapScalingMode</span><span class="sxs-lookup"><span data-stu-id="9b2f8-163">BitmapScalingMode</span></span>  
 <span data-ttu-id="9b2f8-164">При анимации масштабирования любого растрового изображения алгоритм повторной дискретизации изображения высокого качества по умолчанию иногда может использовать столько системных ресурсов, чтобы привести к снижению частоты кадров анимации и задержкам.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-164">When animating the scale of any bitmap, the default high-quality image re-sampling algorithm can sometimes consume sufficient system resources to cause frame rate degradation, effectively causing animations to stutter.</span></span> <span data-ttu-id="9b2f8-165">Установив свойство <xref:System.Windows.Media.RenderOptions.BitmapScalingMode%2A> <xref:System.Windows.Media.RenderOptions> объекта, <xref:System.Windows.Media.BitmapScalingMode.LowQuality> можно создать более плавную анимацию при масштабировании битовой карты.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-165">By setting the <xref:System.Windows.Media.RenderOptions.BitmapScalingMode%2A> property of the <xref:System.Windows.Media.RenderOptions> object to <xref:System.Windows.Media.BitmapScalingMode.LowQuality> you can create a smoother animation when scaling a bitmap.</span></span> <span data-ttu-id="9b2f8-166"><xref:System.Windows.Media.BitmapScalingMode.LowQuality>режим уседает движку [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] рендеринга перейти от оптимизированного с точки контроля алгоритма к оптимизированного для скорости алгоритма при обработке изображений.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-166"><xref:System.Windows.Media.BitmapScalingMode.LowQuality> mode tells the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] rendering engine to switch from a quality-optimized algorithm to a speed-optimized algorithm when processing images.</span></span>  
  
 <span data-ttu-id="9b2f8-167">В следующем примере показано, как установить <xref:System.Windows.Media.BitmapScalingMode> объект изображения.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-167">The following example shows how to set the <xref:System.Windows.Media.BitmapScalingMode> for an image object.</span></span>  
  
 [!code-csharp[RenderOptions#RenderOptionsSnippet2](~/samples/snippets/csharp/VS_Snippets_Wpf/RenderOptions/CSharp/Window1.xaml.cs#renderoptionssnippet2)]
 [!code-vb[RenderOptions#RenderOptionsSnippet2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/RenderOptions/visualbasic/window1.xaml.vb#renderoptionssnippet2)]  
  
### <a name="cachinghint"></a><span data-ttu-id="9b2f8-168">CachingHint</span><span class="sxs-lookup"><span data-stu-id="9b2f8-168">CachingHint</span></span>  
 <span data-ttu-id="9b2f8-169">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] По умолчанию не кэширует отображеносодержимое содержимое <xref:System.Windows.Media.TileBrush> объектов, таких как <xref:System.Windows.Media.DrawingBrush> и <xref:System.Windows.Media.VisualBrush>.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-169">By default, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] does not cache the rendered contents of <xref:System.Windows.Media.TileBrush> objects, such as <xref:System.Windows.Media.DrawingBrush> and <xref:System.Windows.Media.VisualBrush>.</span></span> <span data-ttu-id="9b2f8-170">В статических сценариях, где <xref:System.Windows.Media.TileBrush> ни содержание, ни использование в сцене не меняется, это имеет смысл, так как он сохраняет видеопамять.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-170">In static scenarios where neither the contents nor use of the <xref:System.Windows.Media.TileBrush> in the scene is changing, this makes sense, since it conserves video memory.</span></span> <span data-ttu-id="9b2f8-171">Это не имеет большого <xref:System.Windows.Media.TileBrush> смысла, когда статическое содержимое используется нестатическим способом, например, когда статическое <xref:System.Windows.Media.DrawingBrush> или <xref:System.Windows.Media.VisualBrush> отображено на поверхности вращающегося 3D-объекта.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-171">It does not make as much sense when a <xref:System.Windows.Media.TileBrush> with static content is used in a non-static way—for example, when a static <xref:System.Windows.Media.DrawingBrush> or <xref:System.Windows.Media.VisualBrush> is mapped to the surface of a rotating 3D object.</span></span> <span data-ttu-id="9b2f8-172">Поведение по [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] умолчанию заключается в том, <xref:System.Windows.Media.DrawingBrush> <xref:System.Windows.Media.VisualBrush> чтобы повторно передать все содержимое или для каждого кадра, даже если содержимое неменяется.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-172">The default behavior of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is to re-render the entire content of the <xref:System.Windows.Media.DrawingBrush> or <xref:System.Windows.Media.VisualBrush> for every frame, even though the content is unchanging.</span></span>  
  
 <span data-ttu-id="9b2f8-173">Установив свойство <xref:System.Windows.Media.RenderOptions.CachingHint%2A> <xref:System.Windows.Media.RenderOptions> объекта, <xref:System.Windows.Media.CachingHint.Cache> можно повысить производительность, используя кэшированные версии объектов кисти.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-173">By setting the <xref:System.Windows.Media.RenderOptions.CachingHint%2A> property of the <xref:System.Windows.Media.RenderOptions> object to <xref:System.Windows.Media.CachingHint.Cache> you can increase performance by using cached versions of the tiled brush objects.</span></span>  
  
 <span data-ttu-id="9b2f8-174">Значения <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A> <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A> свойств представляют значения относительного размера, <xref:System.Windows.Media.TileBrush> определяющие, когда объект должен быть регенерирован из-за изменений в масштабе.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-174">The <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A> and <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A> property values are relative size values that determine when the <xref:System.Windows.Media.TileBrush> object should be regenerated due to changes in scale.</span></span> <span data-ttu-id="9b2f8-175">Например, установив <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A> свойство до 2.0, кэш для единственного <xref:System.Windows.Media.TileBrush> должен быть регенерирован, когда его размер превышает в два раза больше текущего кэша.</span><span class="sxs-lookup"><span data-stu-id="9b2f8-175">For example, by setting the <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A> property to 2.0, the cache for the <xref:System.Windows.Media.TileBrush> only needs to be regenerated when its size exceeds twice the size of the current cache.</span></span>  
  
 <span data-ttu-id="9b2f8-176">Ниже приведен о том, как использовать опцию подсказки кэширования для . <xref:System.Windows.Media.DrawingBrush></span><span class="sxs-lookup"><span data-stu-id="9b2f8-176">The following example shows how to use the caching hint option for a <xref:System.Windows.Media.DrawingBrush>.</span></span>  
  
 [!code-csharp[RenderOptions#RenderOptionsSnippet3](~/samples/snippets/csharp/VS_Snippets_Wpf/RenderOptions/CSharp/Window1.xaml.cs#renderoptionssnippet3)]
 [!code-vb[RenderOptions#RenderOptionsSnippet3](~/samples/snippets/visualbasic/VS_Snippets_Wpf/RenderOptions/visualbasic/window1.xaml.vb#renderoptionssnippet3)]  
  
## <a name="see-also"></a><span data-ttu-id="9b2f8-177">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="9b2f8-177">See also</span></span>

- [<span data-ttu-id="9b2f8-178">Улучшение производительности приложений WPF</span><span class="sxs-lookup"><span data-stu-id="9b2f8-178">Optimizing WPF Application Performance</span></span>](optimizing-wpf-application-performance.md)
- [<span data-ttu-id="9b2f8-179">Планирование производительности приложения</span><span class="sxs-lookup"><span data-stu-id="9b2f8-179">Planning for Application Performance</span></span>](planning-for-application-performance.md)
- [<span data-ttu-id="9b2f8-180">Использование преимуществ оборудования</span><span class="sxs-lookup"><span data-stu-id="9b2f8-180">Taking Advantage of Hardware</span></span>](optimizing-performance-taking-advantage-of-hardware.md)
- [<span data-ttu-id="9b2f8-181">Разметка и разработка</span><span class="sxs-lookup"><span data-stu-id="9b2f8-181">Layout and Design</span></span>](optimizing-performance-layout-and-design.md)
- [<span data-ttu-id="9b2f8-182">Поведение объекта</span><span class="sxs-lookup"><span data-stu-id="9b2f8-182">Object Behavior</span></span>](optimizing-performance-object-behavior.md)
- [<span data-ttu-id="9b2f8-183">Ресурсы приложения</span><span class="sxs-lookup"><span data-stu-id="9b2f8-183">Application Resources</span></span>](optimizing-performance-application-resources.md)
- [<span data-ttu-id="9b2f8-184">Текст</span><span class="sxs-lookup"><span data-stu-id="9b2f8-184">Text</span></span>](optimizing-performance-text.md)
- [<span data-ttu-id="9b2f8-185">Связывание данных</span><span class="sxs-lookup"><span data-stu-id="9b2f8-185">Data Binding</span></span>](optimizing-performance-data-binding.md)
- [<span data-ttu-id="9b2f8-186">Дополнительные рекомендации по повышению производительности</span><span class="sxs-lookup"><span data-stu-id="9b2f8-186">Other Performance Recommendations</span></span>](optimizing-performance-other-recommendations.md)
- [<span data-ttu-id="9b2f8-187">Советы и рекомендации по анимации</span><span class="sxs-lookup"><span data-stu-id="9b2f8-187">Animation Tips and Tricks</span></span>](../graphics-multimedia/animation-tips-and-tricks.md)
