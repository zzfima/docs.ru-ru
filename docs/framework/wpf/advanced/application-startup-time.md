---
title: Время запуска приложения
ms.date: 03/30/2017
helpviewer_keywords:
- splash screen [WPF], startup time
- WPF [WPF], startup time
- startup time [WPF]
- application startup [WPF]
- performance [WPF], startup time
ms.assetid: f0ec58d8-626f-4d8a-9873-c20f95e08b96
ms.openlocfilehash: 0fae3ac1769163101dcdb183f4c5c2135354b1fc
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2020
ms.locfileid: "79145427"
---
# <a name="application-startup-time"></a><span data-ttu-id="66495-102">Время запуска приложения</span><span class="sxs-lookup"><span data-stu-id="66495-102">Application Startup Time</span></span>
<span data-ttu-id="66495-103">Время, необходимое для запуска WPF-приложения, может сильно варьироваться.</span><span class="sxs-lookup"><span data-stu-id="66495-103">The amount of time that is required for a WPF application to start can vary greatly.</span></span> <span data-ttu-id="66495-104">В этом разделе описаны различные способы, позволяющие сократить воспринимаемое и фактическое время запуска приложений Windows Presentation Foundation (WPF).</span><span class="sxs-lookup"><span data-stu-id="66495-104">This topic describes various techniques for reducing the perceived and actual startup time for a Windows Presentation Foundation (WPF) application.</span></span>  
  
## <a name="understanding-cold-startup-and-warm-startup"></a><span data-ttu-id="66495-105">Общее представление о холодном и горячем запуске</span><span class="sxs-lookup"><span data-stu-id="66495-105">Understanding Cold Startup and Warm Startup</span></span>  
 <span data-ttu-id="66495-106">Холодный запуск происходит, когда вы запускаете приложение в первый раз после перезагрузки системы либо когда вы запускаете приложение, закрываете его и запускаете снова после длительного периода времени.</span><span class="sxs-lookup"><span data-stu-id="66495-106">Cold startup occurs when your application starts for the first time after a system reboot, or when you start your application, close it, and then start it again after a long period of time.</span></span> <span data-ttu-id="66495-107">Если при запуске приложения в списке ожидания диспетчера памяти WIndows не окажется необходимых страниц (кода, статических данных, реестра и т. д.), возникнет ошибка страницы.</span><span class="sxs-lookup"><span data-stu-id="66495-107">When an application starts, if the required pages (code, static data, registry, etc) are not present in the Windows memory manager's standby list, page faults occur.</span></span> <span data-ttu-id="66495-108">Для загрузки таких страниц в память требуется доступ к диску.</span><span class="sxs-lookup"><span data-stu-id="66495-108">Disk access is required to bring the pages into memory.</span></span>  
  
 <span data-ttu-id="66495-109">Горячий запуск происходит, когда большинство страниц для основных компонентов среды CLR уже загружены в память, что экономит дорогостоящее время доступа к диску.</span><span class="sxs-lookup"><span data-stu-id="66495-109">Warm startup occurs when most of the pages for the main common language runtime (CLR) components are already loaded in memory, which saves expensive disk access time.</span></span> <span data-ttu-id="66495-110">Вот почему при повторном запуске управляемое приложение запускается быстрее.</span><span class="sxs-lookup"><span data-stu-id="66495-110">That is why a managed application starts faster when it runs a second time.</span></span>  
  
## <a name="implement-a-splash-screen"></a><span data-ttu-id="66495-111">Реализация экрана-заставки</span><span class="sxs-lookup"><span data-stu-id="66495-111">Implement a Splash Screen</span></span>  
 <span data-ttu-id="66495-112">В случаях когда между запуском приложения и отображением первого графического интерфейса происходит значительная неизбежная задержка, можно оптимизировать воспринимаемое время запуска с помощью *экрана-заставки*.</span><span class="sxs-lookup"><span data-stu-id="66495-112">In cases where there is a significant, unavoidable delay between starting an application and displaying the first UI, optimize the perceived startup time by using a *splash screen*.</span></span> <span data-ttu-id="66495-113">В этом случае изображение появляется практически сразу после того, как пользователь запустит приложение.</span><span class="sxs-lookup"><span data-stu-id="66495-113">This approach displays an image almost immediately after the user starts the application.</span></span> <span data-ttu-id="66495-114">Когда приложение будет готово к отображению первого пользовательского интерфейса, экран-заставка исчезнет.</span><span class="sxs-lookup"><span data-stu-id="66495-114">When the application is ready to display its first UI, the splash screen fades.</span></span> <span data-ttu-id="66495-115">Начиная с .NET Framework 3.5 SP1, <xref:System.Windows.SplashScreen> вы можете использовать класс для реализации экрана всплеска.</span><span class="sxs-lookup"><span data-stu-id="66495-115">Starting in the .NET Framework 3.5 SP1, you can use the <xref:System.Windows.SplashScreen> class to implement a splash screen.</span></span> <span data-ttu-id="66495-116">Дополнительные сведения см. в разделе [Практическое руководство. Добавление в WPF-приложение экрана-заставки](../app-development/how-to-add-a-splash-screen-to-a-wpf-application.md).</span><span class="sxs-lookup"><span data-stu-id="66495-116">For more information, see [Add a Splash Screen to a WPF Application](../app-development/how-to-add-a-splash-screen-to-a-wpf-application.md).</span></span>  
  
 <span data-ttu-id="66495-117">Кроме того, используя собственные графические средства Win32, вы можете реализовать свой собственный экран заставки.</span><span class="sxs-lookup"><span data-stu-id="66495-117">You can also implement your own splash screen by using native Win32 graphics.</span></span> <span data-ttu-id="66495-118">Отобразить <xref:System.Windows.Application.Run%2A> реализацию до вызова метода.</span><span class="sxs-lookup"><span data-stu-id="66495-118">Display your implementation before the <xref:System.Windows.Application.Run%2A> method is called.</span></span>  
  
## <a name="analyze-the-startup-code"></a><span data-ttu-id="66495-119">Анализ кода запуска</span><span class="sxs-lookup"><span data-stu-id="66495-119">Analyze the Startup Code</span></span>  
 <span data-ttu-id="66495-120">Определите причину задержки холодного запуска.</span><span class="sxs-lookup"><span data-stu-id="66495-120">Determine the reason for a slow cold startup.</span></span> <span data-ttu-id="66495-121">Она может быть связана с дисковым вводом-выводом, но необязательно.</span><span class="sxs-lookup"><span data-stu-id="66495-121">Disk I/O may be responsible, but this is not always the case.</span></span> <span data-ttu-id="66495-122">В целом использование внешних ресурсов, таких как сеть, веб-службы или диск, следует минимизировать.</span><span class="sxs-lookup"><span data-stu-id="66495-122">In general, you should minimize the use of external resources, such as network, Web services, or disk.</span></span>  
  
 <span data-ttu-id="66495-123">Перед проверкой убедитесь, что управляемый или WPF-код не используют другие выполняемые приложения.</span><span class="sxs-lookup"><span data-stu-id="66495-123">Before you test, verify that no other running applications or services use managed code or WPF code.</span></span>  
  
 <span data-ttu-id="66495-124">Сразу после перезагрузки перезапустите WPF-приложение и определите, сколько времени занимает его отображение.</span><span class="sxs-lookup"><span data-stu-id="66495-124">Start your WPF application immediately after a reboot, and determine how long it takes to display.</span></span> <span data-ttu-id="66495-125">Если последующие запуски приложения (горячий запуск) будут происходить быстрее, то проблема холодного запуска, скорее всего, была связана с вводом-выводом.</span><span class="sxs-lookup"><span data-stu-id="66495-125">If all subsequent launches of your application (warm startup) are much faster, your cold startup issue is most likely caused by I/O.</span></span>  
  
 <span data-ttu-id="66495-126">Если проблема холодного запуска не связана с вводом-выводом, возможно, ваше приложение выполняет какую-либо длительную инициализацию или вычисление, ожидает завершения какого-либо события или требует существенной JIT-компиляции при запуске.</span><span class="sxs-lookup"><span data-stu-id="66495-126">If your application's cold startup issue is not related to I/O, it is likely that your application performs some lengthy initialization or computation, waits for some event to complete, or requires a lot of JIT compilation at startup.</span></span> <span data-ttu-id="66495-127">В следующих разделах эти ситуации описываются более подробно.</span><span class="sxs-lookup"><span data-stu-id="66495-127">The following sections describe some of these situations in more detail.</span></span>  
  
## <a name="optimize-module-loading"></a><span data-ttu-id="66495-128">Оптимизация загрузки модулей</span><span class="sxs-lookup"><span data-stu-id="66495-128">Optimize Module Loading</span></span>  
 <span data-ttu-id="66495-129">Чтобы определить, какие модули загружает ваше приложение, воспользуйтесь такими средствами, как обозреватель процессов (Procexp.exe) и Tlist.exe.</span><span class="sxs-lookup"><span data-stu-id="66495-129">Use tools such as Process Explorer (Procexp.exe) and Tlist.exe to determine which modules your application loads.</span></span> <span data-ttu-id="66495-130">Команда `Tlist <pid>` показывает все модули, загруженные процессом.</span><span class="sxs-lookup"><span data-stu-id="66495-130">The command `Tlist <pid>` shows all the modules that are loaded by a process.</span></span>  
  
 <span data-ttu-id="66495-131">Например, если вы не подключаетесь к Интернету, но видите, что загружается процесс System.Web.dll, значит, в приложение есть модуль, который ссылается на эту сборку.</span><span class="sxs-lookup"><span data-stu-id="66495-131">For example, if you are not connecting to the Web and you see that System.Web.dll is loaded, then there is a module in your application that references this assembly.</span></span> <span data-ttu-id="66495-132">Убедитесь, что эта ссылка действительно необходима.</span><span class="sxs-lookup"><span data-stu-id="66495-132">Check to make sure that the reference is necessary.</span></span>  
  
 <span data-ttu-id="66495-133">Если в приложении несколько модулей, объедините их в один.</span><span class="sxs-lookup"><span data-stu-id="66495-133">If your application has multiple modules, merge them into a single module.</span></span> <span data-ttu-id="66495-134">В этом случае загрузка сборок CLR займет меньше времени.</span><span class="sxs-lookup"><span data-stu-id="66495-134">This approach requires less CLR assembly-loading overhead.</span></span> <span data-ttu-id="66495-135">Меньшее количество сборок также означает, что в CLR хранится меньше состояний.</span><span class="sxs-lookup"><span data-stu-id="66495-135">Fewer assemblies also mean that the CLR maintains less state.</span></span>  
  
## <a name="defer-initialization-operations"></a><span data-ttu-id="66495-136">Приостановка операций инициализации</span><span class="sxs-lookup"><span data-stu-id="66495-136">Defer Initialization Operations</span></span>  
 <span data-ttu-id="66495-137">Код инициализации можно отложить до тех пор, пока обработка основного окна приложения не будет завершена.</span><span class="sxs-lookup"><span data-stu-id="66495-137">Consider postponing initialization code until after the main application window is rendered.</span></span>  
  
 <span data-ttu-id="66495-138">Помните, что инициализация может выполняться в конструкторе классов, а в случае если код инициализации ссылается на другие классы, это может привести к каскадному выполнению многих конструкторов классов.</span><span class="sxs-lookup"><span data-stu-id="66495-138">Be aware that initialization may be performed inside a class constructor, and if the initialization code references other classes, it can cause a cascading effect in which many class constructors are executed.</span></span>  
  
## <a name="avoid-application-configuration"></a><span data-ttu-id="66495-139">Предотвращение конфигурации приложения</span><span class="sxs-lookup"><span data-stu-id="66495-139">Avoid Application Configuration</span></span>  
 <span data-ttu-id="66495-140">Конфигурации приложения можно избежать.</span><span class="sxs-lookup"><span data-stu-id="66495-140">Consider avoiding application configuration.</span></span> <span data-ttu-id="66495-141">Например, если приложение имеет простые требования к конфигурации и строгое плановое время запуска, для запуска лучше использовать записи реестров или простой INI-файл.</span><span class="sxs-lookup"><span data-stu-id="66495-141">For example, if an application has simple configuration requirements and has strict startup time goals, registry entries or a simple INI file may be a faster startup alternative.</span></span>  
  
## <a name="utilize-the-gac"></a><span data-ttu-id="66495-142">Использование GAC</span><span class="sxs-lookup"><span data-stu-id="66495-142">Utilize the GAC</span></span>  
 <span data-ttu-id="66495-143">Если сборка не установлена в глобальном кэше сборок (GAC), возникают задержки, связанные с проверкой хэша сборок со строгими именами, а также с проверкой образа Ngen (если на компьютере доступен машинный образ для этой сборки).</span><span class="sxs-lookup"><span data-stu-id="66495-143">If an assembly is not installed in the Global Assembly Cache (GAC), there are delays caused by hash verification of strong-named assemblies and by Ngen image validation if a native image for that assembly is available on the computer.</span></span> <span data-ttu-id="66495-144">Для всех сборок, установленных в GAC, проверка строгих имен пропускается.</span><span class="sxs-lookup"><span data-stu-id="66495-144">Strong-name verification is skipped for all assemblies installed in the GAC.</span></span> <span data-ttu-id="66495-145">Дополнительные сведения см. в разделе [Gacutil.exe (средство глобального кэша сборок)](../../tools/gacutil-exe-gac-tool.md).</span><span class="sxs-lookup"><span data-stu-id="66495-145">For more information, see [Gacutil.exe (Global Assembly Cache Tool)](../../tools/gacutil-exe-gac-tool.md).</span></span>  
  
## <a name="use-ngenexe"></a><span data-ttu-id="66495-146">Применение Ngen.exe</span><span class="sxs-lookup"><span data-stu-id="66495-146">Use Ngen.exe</span></span>  
 <span data-ttu-id="66495-147">В приложении можно использовать генератор образов в машинном коде (Ngen.exe).</span><span class="sxs-lookup"><span data-stu-id="66495-147">Consider using the Native Image Generator (Ngen.exe) on your application.</span></span> <span data-ttu-id="66495-148">При использовании Ngen.exe вы меняете потребление ресурсов ЦП на улучшение доступа к диску, поскольку машинный образ, созданный Ngen.exe, скорее всего, будет больше, чем образ MSIL.</span><span class="sxs-lookup"><span data-stu-id="66495-148">Using Ngen.exe means trading CPU consumption for more disk access because the native image generated by Ngen.exe is likely to be larger than the MSIL image.</span></span>  
  
 <span data-ttu-id="66495-149">Чтобы сократить время горячего запуска, всегда используйте Ngen.exe в своем приложении, поскольку при этом JIT-компиляция кода приложения не влияет на потребление ресурсов ЦП.</span><span class="sxs-lookup"><span data-stu-id="66495-149">To improve the warm startup time, you should always use Ngen.exe on your application, because this avoids the CPU cost of JIT compilation of the application code.</span></span>  
  
 <span data-ttu-id="66495-150">Ngen.exe может также пригодиться в некоторых сценариях холодного запуска,</span><span class="sxs-lookup"><span data-stu-id="66495-150">In some cold startup scenarios, using Ngen.exe can also be helpful.</span></span> <span data-ttu-id="66495-151">поскольку в этом случае загрузка JIT-компилятора (mscorjit.dll) не требуется.</span><span class="sxs-lookup"><span data-stu-id="66495-151">This is because the JIT compiler (mscorjit.dll) does not have to be loaded.</span></span>  
  
 <span data-ttu-id="66495-152">Одновременное присутствие модулей Ngen и JIT может вызвать противоположный эффект.</span><span class="sxs-lookup"><span data-stu-id="66495-152">Having both Ngen and JIT modules can have the worst effect.</span></span> <span data-ttu-id="66495-153">Это связано с тем, что при этом требуется загрузка mscorjit.dll, а когда JIT-компилятор работает с вашим кодом и считывает метаданные сборок, происходит обращение к многим страницам в образах Ngen.</span><span class="sxs-lookup"><span data-stu-id="66495-153">This is because mscorjit.dll must be loaded, and when the JIT compiler works on your code, many pages in the Ngen images must be accessed when the JIT compiler reads the assemblies' metadata.</span></span>  
  
### <a name="ngen-and-clickonce"></a><span data-ttu-id="66495-154">NGen и ClickOnce</span><span class="sxs-lookup"><span data-stu-id="66495-154">Ngen and ClickOnce</span></span>  
 <span data-ttu-id="66495-155">Время загрузки вашего приложения может также зависеть от выбранного способа его развертывания.</span><span class="sxs-lookup"><span data-stu-id="66495-155">The way you plan to deploy your application can also make a difference in load time.</span></span> <span data-ttu-id="66495-156">Развертывание приложения ClickOnce не поддерживает Ngen.</span><span class="sxs-lookup"><span data-stu-id="66495-156">ClickOnce application deployment does not support Ngen.</span></span> <span data-ttu-id="66495-157">Если вы решите использовать Ngen.exe для своего приложения, выберите другой механизм развертывания, например установщик Windows.</span><span class="sxs-lookup"><span data-stu-id="66495-157">If you decide to use Ngen.exe for your application, you will have to use another deployment mechanism, such as Windows Installer.</span></span>  
  
 <span data-ttu-id="66495-158">См. дополнительные сведения о [файле Ngen.exe (генераторе образов в машинном коде)](../../tools/ngen-exe-native-image-generator.md).</span><span class="sxs-lookup"><span data-stu-id="66495-158">For more information, see [Ngen.exe (Native Image Generator)](../../tools/ngen-exe-native-image-generator.md).</span></span>  
  
### <a name="rebasing-and-dll-address-collisions"></a><span data-ttu-id="66495-159">Изменение базового адреса и конфликты DLL-адресов</span><span class="sxs-lookup"><span data-stu-id="66495-159">Rebasing and DLL Address Collisions</span></span>  
 <span data-ttu-id="66495-160">При использовании Ngen.exe следует учитывать, что при загрузке машинных образов в память может измениться базовый адрес.</span><span class="sxs-lookup"><span data-stu-id="66495-160">If you use Ngen.exe, be aware that rebasing can occur when the native images are loaded in memory.</span></span> <span data-ttu-id="66495-161">Если DLL не загружается по предпочтительному базовому адресу, поскольку этот диапазон адресов уже распределен, загрузчик Windows загрузит файл по другому адресу, что может потребовать много времени.</span><span class="sxs-lookup"><span data-stu-id="66495-161">If a DLL is not loaded at its preferred base address because that address range is already allocated, the Windows loader will load it at another address, which can be a time-consuming operation.</span></span>  
  
 <span data-ttu-id="66495-162">Проверить наличие модулей, в которых все страницы являются закрытыми, можно с помощью средства Virtual Address Dump (Vadump.exe).</span><span class="sxs-lookup"><span data-stu-id="66495-162">You can use the Virtual Address Dump (Vadump.exe) tool to check if there are modules in which all the pages are private.</span></span> <span data-ttu-id="66495-163">Если такой модуль имеется, его адрес может измениться.</span><span class="sxs-lookup"><span data-stu-id="66495-163">If this is the case, the module may have been rebased to a different address.</span></span> <span data-ttu-id="66495-164">После этого его страницы станут недоступны.</span><span class="sxs-lookup"><span data-stu-id="66495-164">Therefore, its pages cannot be shared.</span></span>  
  
 <span data-ttu-id="66495-165">Дополнительные сведения о настройке базового адреса см. в разделе [Ngen.exe (генератор образов в машинном коде)](../../tools/ngen-exe-native-image-generator.md).</span><span class="sxs-lookup"><span data-stu-id="66495-165">For more information about how to set the base address, see [Ngen.exe (Native Image Generator)](../../tools/ngen-exe-native-image-generator.md).</span></span>  
  
## <a name="optimize-authenticode"></a><span data-ttu-id="66495-166">Оптимизация Authenticode</span><span class="sxs-lookup"><span data-stu-id="66495-166">Optimize Authenticode</span></span>  
 <span data-ttu-id="66495-167">Проверка Authenticode увеличивает время запуска.</span><span class="sxs-lookup"><span data-stu-id="66495-167">Authenticode verification adds to the startup time.</span></span> <span data-ttu-id="66495-168">Сборки, подписанные с помощью Authenticode, должны проверяться центром сертификации (ЦС).</span><span class="sxs-lookup"><span data-stu-id="66495-168">Authenticode-signed assemblies have to be verified with the certification authority (CA).</span></span> <span data-ttu-id="66495-169">Такая проверка может занять много времени, поскольку требует многократного подключения к сети для загрузки текущих списков отзыва сертификатов.</span><span class="sxs-lookup"><span data-stu-id="66495-169">This verification can be time consuming, because it can require connecting to the network several times to download current certificate revocation lists.</span></span> <span data-ttu-id="66495-170">Она также обеспечивает всю цепочку действительных сертификатов на пути к доверенному корневому центру.</span><span class="sxs-lookup"><span data-stu-id="66495-170">It also makes sure that there is a full chain of valid certificates on the path to a trusted root.</span></span> <span data-ttu-id="66495-171">В результате загрузка сборки может задержаться на несколько секунд.</span><span class="sxs-lookup"><span data-stu-id="66495-171">This can translate to several seconds of delay while the assembly is being loaded.</span></span>  
  
 <span data-ttu-id="66495-172">Вы можете установить сертификат CA на клиентский компьютер или не использовать Authenticode, когда это возможно.</span><span class="sxs-lookup"><span data-stu-id="66495-172">Consider installing the CA certificate on the client computer, or avoid using Authenticode when it is possible.</span></span> <span data-ttu-id="66495-173">Если вашему приложению не требуется свидетельство издателя, платить за проверку подписи вам не нужно.</span><span class="sxs-lookup"><span data-stu-id="66495-173">If you know that your application does not need the publisher evidence, you do not have to pay the cost of signature verification.</span></span>  
  
 <span data-ttu-id="66495-174">Начиная с .NET Framework 3.5, есть опция конфигурации, которая позволяет обойти проверку Authenticode.</span><span class="sxs-lookup"><span data-stu-id="66495-174">Starting in .NET Framework 3.5, there is a configuration option that allows the Authenticode verification to be bypassed.</span></span> <span data-ttu-id="66495-175">Для этого добавьте в файл конфигурации app.exe следующий параметр.</span><span class="sxs-lookup"><span data-stu-id="66495-175">To do this, add the following setting to the app.exe.config file:</span></span>  
  
```xml  
<configuration>  
    <runtime>  
        <generatePublisherEvidence enabled="false"/>
    </runtime>  
</configuration>  
```  
  
 <span data-ttu-id="66495-176">Для получения дополнительной информации см [ \<>.](../../configure-apps/file-schema/runtime/generatepublisherevidence-element.md)</span><span class="sxs-lookup"><span data-stu-id="66495-176">For more information, see [\<generatePublisherEvidence> Element](../../configure-apps/file-schema/runtime/generatepublisherevidence-element.md).</span></span>  
  
## <a name="compare-performance-on-windows-vista"></a><span data-ttu-id="66495-177">Сравнение производительности в Windows Vista</span><span class="sxs-lookup"><span data-stu-id="66495-177">Compare Performance on Windows Vista</span></span>  
 <span data-ttu-id="66495-178">Диспетчер памяти в Windows Vista включает технологию, которая называется SuperFetch.</span><span class="sxs-lookup"><span data-stu-id="66495-178">The memory manager in Windows Vista has a technology called SuperFetch.</span></span> <span data-ttu-id="66495-179">SuperFetch анализирует шаблоны использования памяти с течением времени, определяя оптимальное содержимое памяти для конкретного пользователя.</span><span class="sxs-lookup"><span data-stu-id="66495-179">SuperFetch analyzes memory usage patterns over time to determine the optimal memory content for a specific user.</span></span> <span data-ttu-id="66495-180">Она работает постоянно, поддерживая содержимое памяти в любой момент времени.</span><span class="sxs-lookup"><span data-stu-id="66495-180">It works continuously to maintain that content at all times.</span></span>  
  
 <span data-ttu-id="66495-181">Этот подход отличается от технологии Windows XP, которая выполняет предварительную загрузку данных в память без анализа шаблонов использования.</span><span class="sxs-lookup"><span data-stu-id="66495-181">This approach differs from the pre-fetch technique used in Windows XP, which preloads data into memory without analyzing usage patterns.</span></span> <span data-ttu-id="66495-182">Если пользователь часто работает с вашим приложением WPF в Windows Vista, время холодного запуска вашего приложения может сократиться.</span><span class="sxs-lookup"><span data-stu-id="66495-182">Over time, if the user uses your WPF application frequently on Windows Vista, the cold startup time of your application may improve.</span></span>  
  
## <a name="use-appdomains-efficiently"></a><span data-ttu-id="66495-183">Эффективное использование доменов приложения</span><span class="sxs-lookup"><span data-stu-id="66495-183">Use AppDomains Efficiently</span></span>  
 <span data-ttu-id="66495-184">По возможности загружайте сборки в область кода с нейтральным доменом, чтобы машинный образ, если таковой существует, использовался во всех созданных в приложении доменах.</span><span class="sxs-lookup"><span data-stu-id="66495-184">If possible, load assemblies into a domain-neutral code area to make sure that the native image, if one exists, is used in all AppDomains created in the application.</span></span>  
  
 <span data-ttu-id="66495-185">Чтобы повысить производительность, необходимо обеспечить взаимодействие между доменами, сократив число междоменных вызовов.</span><span class="sxs-lookup"><span data-stu-id="66495-185">For the best performance, enforce efficient cross-domain communication by reducing cross-domain calls.</span></span> <span data-ttu-id="66495-186">По возможности используйте вызовы без аргументов или с аргументами примитивного типа.</span><span class="sxs-lookup"><span data-stu-id="66495-186">When possible, use calls without arguments or with primitive type arguments.</span></span>  
  
## <a name="use-the-neutralresourceslanguage-attribute"></a><span data-ttu-id="66495-187">Использование атрибута NeutralResourcesLanguage</span><span class="sxs-lookup"><span data-stu-id="66495-187">Use the NeutralResourcesLanguage Attribute</span></span>  
 <span data-ttu-id="66495-188">Используйте <xref:System.Resources.NeutralResourcesLanguageAttribute> для указания нейтральной <xref:System.Resources.ResourceManager>культуры для .</span><span class="sxs-lookup"><span data-stu-id="66495-188">Use the <xref:System.Resources.NeutralResourcesLanguageAttribute> to specify the neutral culture for the <xref:System.Resources.ResourceManager>.</span></span> <span data-ttu-id="66495-189">Этот подход позволяет избежать неудачного поиска сборок.</span><span class="sxs-lookup"><span data-stu-id="66495-189">This approach avoids unsuccessful assembly lookups.</span></span>  
  
## <a name="use-the-binaryformatter-class-for-serialization"></a><span data-ttu-id="66495-190">Использование класса BinaryFormatter для сериализации</span><span class="sxs-lookup"><span data-stu-id="66495-190">Use the BinaryFormatter Class for Serialization</span></span>  
 <span data-ttu-id="66495-191">Если необходимо использовать сериализацию, <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> используйте <xref:System.Xml.Serialization.XmlSerializer> класс вместо класса.</span><span class="sxs-lookup"><span data-stu-id="66495-191">If you must use serialization, use the <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> class instead of the <xref:System.Xml.Serialization.XmlSerializer> class.</span></span> <span data-ttu-id="66495-192">Класс <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> реализован в библиотеке базового класса (BCL) в сборке mscorlib.dll.</span><span class="sxs-lookup"><span data-stu-id="66495-192">The <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> class is implemented in the Base Class Library (BCL) in the mscorlib.dll assembly.</span></span> <span data-ttu-id="66495-193">Реализованв <xref:System.Xml.Serialization.XmlSerializer> сборка System.Xml.dll, которая может стать дополнительной DLL для загрузки.</span><span class="sxs-lookup"><span data-stu-id="66495-193">The <xref:System.Xml.Serialization.XmlSerializer> is implemented in the System.Xml.dll assembly, which might be an additional DLL to load.</span></span>  
  
 <span data-ttu-id="66495-194">Если вы должны <xref:System.Xml.Serialization.XmlSerializer> использовать класс, вы можете достичь более высокой производительности, если вы предварительно создать сборку сериализации.</span><span class="sxs-lookup"><span data-stu-id="66495-194">If you must use the <xref:System.Xml.Serialization.XmlSerializer> class, you can achieve better performance if you pre-generate the serialization assembly.</span></span>  
  
## <a name="configure-clickonce-to-check-for-updates-after-startup"></a><span data-ttu-id="66495-195">Настройка технологии ClickOnce на проверку обновлений после запуска</span><span class="sxs-lookup"><span data-stu-id="66495-195">Configure ClickOnce to Check for Updates After Startup</span></span>  
 <span data-ttu-id="66495-196">Если приложение использует ClickOnce, избегайте доступа к сети при запуске, настраивая ClickOnce для проверки места развертывания на наличие обновлений после запуска приложения.</span><span class="sxs-lookup"><span data-stu-id="66495-196">If your application uses ClickOnce, avoid network access on startup by configuring ClickOnce to check the deployment site for updates after the application starts.</span></span>  
  
 <span data-ttu-id="66495-197">Если вы используете модель браузерного приложения XAML (XBAP), имейте в виду, что ClickOnce проверяет сайт развертывания на наличие обновлений, даже если XBAP уже находится в кэше ClickOnce.</span><span class="sxs-lookup"><span data-stu-id="66495-197">If you use the XAML browser application (XBAP) model, keep in mind that ClickOnce checks the deployment site for updates even if the XBAP is already in the ClickOnce cache.</span></span> <span data-ttu-id="66495-198">Для получения дополнительной информации см. [ClickOnce Security and Deployment](/visualstudio/deployment/clickonce-security-and-deployment).</span><span class="sxs-lookup"><span data-stu-id="66495-198">For more information, see [ClickOnce Security and Deployment](/visualstudio/deployment/clickonce-security-and-deployment).</span></span>  
  
## <a name="configure-the-presentationfontcache-service-to-start-automatically"></a><span data-ttu-id="66495-199">Настройка автоматического запуска службы PresentationFontCache</span><span class="sxs-lookup"><span data-stu-id="66495-199">Configure the PresentationFontCache Service to Start Automatically</span></span>  
 <span data-ttu-id="66495-200">Первым WPF-приложением, которое загружается после перезагрузки, является служба PresentationFontCache.</span><span class="sxs-lookup"><span data-stu-id="66495-200">The first WPF application to run after a reboot is the PresentationFontCache service.</span></span> <span data-ttu-id="66495-201">Служба кэширует системные шрифты, делает их более доступными и повышает общую производительность.</span><span class="sxs-lookup"><span data-stu-id="66495-201">The service caches the system fonts, improves font access, and improves overall performance.</span></span> <span data-ttu-id="66495-202">Поскольку с запуском службы, а также с некоторыми управляемыми средами связаны временные задержки, службу можно настроить на автоматический запуск при перезагрузке системы.</span><span class="sxs-lookup"><span data-stu-id="66495-202">There is an overhead in starting the service, and in some controlled environments, consider configuring the service to start automatically when the system reboots.</span></span>  
  
## <a name="set-data-binding-programmatically"></a><span data-ttu-id="66495-203">Настройка программной привязки данных</span><span class="sxs-lookup"><span data-stu-id="66495-203">Set Data Binding Programmatically</span></span>  
 <span data-ttu-id="66495-204">Вместо того, чтобы использовать <xref:System.Windows.FrameworkElement.DataContext%2A> XAML для декларативного набора для основного окна, рассмотрите возможность программного установки в методе. <xref:System.Windows.Application.OnActivated%2A></span><span class="sxs-lookup"><span data-stu-id="66495-204">Instead of using XAML to set the <xref:System.Windows.FrameworkElement.DataContext%2A> declaratively for the main window, consider setting it programmatically in the <xref:System.Windows.Application.OnActivated%2A> method.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="66495-205">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="66495-205">See also</span></span>

- <xref:System.Windows.SplashScreen>
- <xref:System.AppDomain>
- <xref:System.Resources.NeutralResourcesLanguageAttribute>
- <xref:System.Resources.ResourceManager>
- [<span data-ttu-id="66495-206">Добавление в WPF-приложение экрана-заставки</span><span class="sxs-lookup"><span data-stu-id="66495-206">Add a Splash Screen to a WPF Application</span></span>](../app-development/how-to-add-a-splash-screen-to-a-wpf-application.md)
- [<span data-ttu-id="66495-207">Ngen.exe (генератор образов в машинном коде)</span><span class="sxs-lookup"><span data-stu-id="66495-207">Ngen.exe (Native Image Generator)</span></span>](../../tools/ngen-exe-native-image-generator.md)
- [<span data-ttu-id="66495-208">\<генерироватьPublisherEvidence> элемент</span><span class="sxs-lookup"><span data-stu-id="66495-208">\<generatePublisherEvidence> Element</span></span>](../../configure-apps/file-schema/runtime/generatepublisherevidence-element.md)
