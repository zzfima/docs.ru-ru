---
title: Настройка внешнего вида существующего элемента управления путем создания объекта ControlTemplate
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- control contract [WPF]
- controls [WPF], visual structure changes
- ControlTemplate [WPF], customizing for existing controls
- skinning controls [WPF]
- controls [WPF], appearance specified by state
- templates [WPF], custom for existing controls
ms.assetid: 678dd116-43a2-4b8c-82b5-6b826f126e31
ms.openlocfilehash: bbdc79fabf8dbe344baae66d718d79ac6375db7e
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
---
# <a name="customizing-the-appearance-of-an-existing-control-by-creating-a-controltemplate"></a><span data-ttu-id="62801-102">Настройка внешнего вида существующего элемента управления путем создания объекта ControlTemplate</span><span class="sxs-lookup"><span data-stu-id="62801-102">Customizing the Appearance of an Existing Control by Creating a ControlTemplate</span></span>
<a name="introduction"></a> <span data-ttu-id="62801-103">Объект <xref:System.Windows.Controls.ControlTemplate> указывает визуальную структуру и визуальное поведение элемента управления.</span><span class="sxs-lookup"><span data-stu-id="62801-103">A <xref:System.Windows.Controls.ControlTemplate> specifies the visual structure and visual behavior of a control.</span></span> <span data-ttu-id="62801-104">Можно настроить внешний вид элемента управления, предоставляя ему новый <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="62801-104">You can customize the appearance of a control by giving it a new <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="62801-105">При создании <xref:System.Windows.Controls.ControlTemplate>, замените внешний вид существующего элемента управления без изменения его функциональность.</span><span class="sxs-lookup"><span data-stu-id="62801-105">When you create a <xref:System.Windows.Controls.ControlTemplate>, you replace the appearance of an existing control without changing its functionality.</span></span> <span data-ttu-id="62801-106">Например, можно сделать кнопки в приложении round, а не по умолчанию квадратных, но будет по-прежнему вызывать кнопки <xref:System.Windows.Controls.Primitives.ButtonBase.Click> событий.</span><span class="sxs-lookup"><span data-stu-id="62801-106">For example, you can make the buttons in your application round instead of the default square shape, but the button will still raise the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event.</span></span>  
  
 <span data-ttu-id="62801-107">В этом разделе объясняется различные части <xref:System.Windows.Controls.ControlTemplate>, показано, как создать простой <xref:System.Windows.Controls.ControlTemplate> для <xref:System.Windows.Controls.Button>и объясняется, как понимать контракт элемента управления, чтобы можно было настроить его внешний вид.</span><span class="sxs-lookup"><span data-stu-id="62801-107">This topic explains the various parts of a <xref:System.Windows.Controls.ControlTemplate>, demonstrates creating a simple <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button>, and explains how to understand the control contract of a control so that you can customize its appearance.</span></span> <span data-ttu-id="62801-108">Поскольку вы создаете <xref:System.Windows.Controls.ControlTemplate> в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], можно изменить внешний вид элемента управления без написания кода.</span><span class="sxs-lookup"><span data-stu-id="62801-108">Because you create a <xref:System.Windows.Controls.ControlTemplate> in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], you can change a control's appearance without writing any code.</span></span> <span data-ttu-id="62801-109">Можно также использовать конструктор, например Microsoft Expression Blend, чтобы создать шаблоны пользовательского элемента управления.</span><span class="sxs-lookup"><span data-stu-id="62801-109">You can also use a designer, such as Microsoft Expression Blend, to create custom control templates.</span></span> <span data-ttu-id="62801-110">В этом разделе приведены примеры [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] , настроить внешний вид <xref:System.Windows.Controls.Button> и перечислены в полном примере в конце этого раздела.</span><span class="sxs-lookup"><span data-stu-id="62801-110">This topic shows examples in the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] that customize the appearance of a <xref:System.Windows.Controls.Button> and lists the complete example at the end of the topic.</span></span> <span data-ttu-id="62801-111">Дополнительные сведения об использовании Expression Blend см. в статье [Настройка стиля элемента управления, поддерживающего шаблон](http://go.microsoft.com/fwlink/?LinkId=161153).</span><span class="sxs-lookup"><span data-stu-id="62801-111">For more information about using Expression Blend, see [Styling a control that supports templates](http://go.microsoft.com/fwlink/?LinkId=161153).</span></span>  
  
 <span data-ttu-id="62801-112">На следующих рисунках <xref:System.Windows.Controls.Button> , использующий <xref:System.Windows.Controls.ControlTemplate> , созданного в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="62801-112">The following illustrations show a <xref:System.Windows.Controls.Button> that uses the <xref:System.Windows.Controls.ControlTemplate> that is created in this topic.</span></span>  
  
 <span data-ttu-id="62801-113">![Кнопка с пользовательским шаблоном элемента управления. ] (../../../../docs/framework/wpf/controls/media/ndp-buttonnormal.png "NDP_ButtonNormal")</span><span class="sxs-lookup"><span data-stu-id="62801-113">![A button with a custom control template.](../../../../docs/framework/wpf/controls/media/ndp-buttonnormal.png "NDP_ButtonNormal")</span></span>  
<span data-ttu-id="62801-114">Кнопка, использующая пользовательский шаблон элемента управления</span><span class="sxs-lookup"><span data-stu-id="62801-114">A button that uses a custom control template</span></span>  
  
 <span data-ttu-id="62801-115">![Кнопка с красной границей. ] (../../../../docs/framework/wpf/controls/media/ndp-buttonmouseover.png "NDP_ButtonMouseOver")</span><span class="sxs-lookup"><span data-stu-id="62801-115">![A button with a red border.](../../../../docs/framework/wpf/controls/media/ndp-buttonmouseover.png "NDP_ButtonMouseOver")</span></span>  
<span data-ttu-id="62801-116">Кнопка, использующая пользовательский шаблон элемента управления, когда на ней находится указатель мыши</span><span class="sxs-lookup"><span data-stu-id="62801-116">A button that uses a custom control template and has the mouse pointer over it</span></span>  
  
  
<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="62801-117">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="62801-117">Prerequisites</span></span>  
 <span data-ttu-id="62801-118">В этом разделе предполагается, что пользователь понимает процесс создания и использования элементов управления и стилей, который рассматривался в разделе [Элементы управления](../../../../docs/framework/wpf/controls/index.md).</span><span class="sxs-lookup"><span data-stu-id="62801-118">This topic assumes that you understand how to create and use controls and styles as discussed in [Controls](../../../../docs/framework/wpf/controls/index.md).</span></span> <span data-ttu-id="62801-119">Концепции, описанные в этом разделе применяются к элементам, которые наследуют от <xref:System.Windows.Controls.Control> класса, за исключением <xref:System.Windows.Controls.UserControl>.</span><span class="sxs-lookup"><span data-stu-id="62801-119">The concepts discussed in this topic apply to elements that inherit from the <xref:System.Windows.Controls.Control> class, except for the <xref:System.Windows.Controls.UserControl>.</span></span> <span data-ttu-id="62801-120">Не удается применить <xref:System.Windows.Controls.ControlTemplate> для <xref:System.Windows.Controls.UserControl>.</span><span class="sxs-lookup"><span data-stu-id="62801-120">You cannot apply a <xref:System.Windows.Controls.ControlTemplate> to a <xref:System.Windows.Controls.UserControl>.</span></span>  
  
<a name="when_you_should_create_a_controltemplate"></a>   
## <a name="when-you-should-create-a-controltemplate"></a><span data-ttu-id="62801-121">Когда следует создавать объект ControlTemplate</span><span class="sxs-lookup"><span data-stu-id="62801-121">When You Should Create a ControlTemplate</span></span>  
 <span data-ttu-id="62801-122">Элементы управления обладают множеством свойств, таких как <xref:System.Windows.Controls.Border.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>, и <xref:System.Windows.Controls.Control.FontFamily%2A>, можно задать для указания различных аспектов внешнего вида элемента управления, но изменения, сделанные при установке этих свойств ограничены.</span><span class="sxs-lookup"><span data-stu-id="62801-122">Controls have many properties, such as <xref:System.Windows.Controls.Border.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>, and <xref:System.Windows.Controls.Control.FontFamily%2A>, that you can set to specify different aspects of the control's appearance, but the changes that you can make by setting these properties are limited.</span></span> <span data-ttu-id="62801-123">Например, можно задать <xref:System.Windows.Controls.Control.Foreground%2A> свойство на синий и <xref:System.Windows.Controls.Control.FontStyle%2A> к тексту курсивного на <xref:System.Windows.Controls.CheckBox>.</span><span class="sxs-lookup"><span data-stu-id="62801-123">For example, you can set the <xref:System.Windows.Controls.Control.Foreground%2A> property to blue and <xref:System.Windows.Controls.Control.FontStyle%2A> to italic on a <xref:System.Windows.Controls.CheckBox>.</span></span>  
  
 <span data-ttu-id="62801-124">Без возможности для создания нового <xref:System.Windows.Controls.ControlTemplate> для элементов управления, все элементы управления в каждом [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-приложения будет иметь общие одинаково, что ограничивает возможность создания приложения с помощью пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="62801-124">Without the ability to create a new <xref:System.Windows.Controls.ControlTemplate> for controls, all controls in every [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]-based application would have the same general appearance, which would limit the ability to create an application with a custom look and feel.</span></span> <span data-ttu-id="62801-125">По умолчанию каждый <xref:System.Windows.Controls.CheckBox> имеет одинаковые характеристики.</span><span class="sxs-lookup"><span data-stu-id="62801-125">By default, every <xref:System.Windows.Controls.CheckBox> has similar characteristics.</span></span> <span data-ttu-id="62801-126">Например, содержимое <xref:System.Windows.Controls.CheckBox> всегда находится справа от индикатора выделения, а флажок всегда используется для указания того, что <xref:System.Windows.Controls.CheckBox> выбран.</span><span class="sxs-lookup"><span data-stu-id="62801-126">For example, the content of the <xref:System.Windows.Controls.CheckBox> is always to the right of the selection indicator, and the check mark is always used to indicate that the <xref:System.Windows.Controls.CheckBox> is selected.</span></span>  
  
 <span data-ttu-id="62801-127">Вы создаете <xref:System.Windows.Controls.ControlTemplate> используется для настройки внешнего вида элемента управления за пределами какие задавать другие свойства элемента управления будет выполнять.</span><span class="sxs-lookup"><span data-stu-id="62801-127">You create a <xref:System.Windows.Controls.ControlTemplate> when you want to customize the control's appearance beyond what setting the other properties on the control will do.</span></span> <span data-ttu-id="62801-128">В качестве примера <xref:System.Windows.Controls.CheckBox>, предположим, что вы хотите содержимое флажок, чтобы быть над индикатором выделения и знак x, чтобы указать, что <xref:System.Windows.Controls.CheckBox> выбран.</span><span class="sxs-lookup"><span data-stu-id="62801-128">In the example of the <xref:System.Windows.Controls.CheckBox>, suppose that you want the content of the check box to be above the selection indicator and you want an X to indicate that the <xref:System.Windows.Controls.CheckBox> is selected.</span></span> <span data-ttu-id="62801-129">Укажите эти изменения в <xref:System.Windows.Controls.ControlTemplate> из <xref:System.Windows.Controls.CheckBox>.</span><span class="sxs-lookup"><span data-stu-id="62801-129">You specify these changes in the <xref:System.Windows.Controls.ControlTemplate> of the <xref:System.Windows.Controls.CheckBox>.</span></span>  
  
 <span data-ttu-id="62801-130">На следующем рисунке показана <xref:System.Windows.Controls.CheckBox> , используется значение по умолчанию <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="62801-130">The following illustration shows a <xref:System.Windows.Controls.CheckBox> that uses a default <xref:System.Windows.Controls.ControlTemplate>.</span></span>  
  
 <span data-ttu-id="62801-131">![Флажок с шаблоном элемента управления по умолчанию. ] (../../../../docs/framework/wpf/controls/media/ndp-checkboxdefault.png "NDP_CheckBoxDefault")</span><span class="sxs-lookup"><span data-stu-id="62801-131">![A checkbox with the default control template.](../../../../docs/framework/wpf/controls/media/ndp-checkboxdefault.png "NDP_CheckBoxDefault")</span></span>  
<span data-ttu-id="62801-132">Элемент управления CheckBox, использующий шаблон элемента управления по умолчанию</span><span class="sxs-lookup"><span data-stu-id="62801-132">A CheckBox that uses the default control template</span></span>  
  
 <span data-ttu-id="62801-133">На следующем рисунке показана <xref:System.Windows.Controls.CheckBox> , использующий пользовательский <xref:System.Windows.Controls.ControlTemplate> для размещения содержимого <xref:System.Windows.Controls.CheckBox> над индикатором выделения и отображения знака X при <xref:System.Windows.Controls.CheckBox> выбран.</span><span class="sxs-lookup"><span data-stu-id="62801-133">The following illustration shows a <xref:System.Windows.Controls.CheckBox> that uses a custom <xref:System.Windows.Controls.ControlTemplate> to place the content of the <xref:System.Windows.Controls.CheckBox> above the selection indicator and displays an X when the <xref:System.Windows.Controls.CheckBox> is selected.</span></span>  
  
 <span data-ttu-id="62801-134">![Флажок с пользовательским шаблоном элемента управления. ] (../../../../docs/framework/wpf/controls/media/ndp-checkboxcustom.png "NDP_CheckBoxCustom")</span><span class="sxs-lookup"><span data-stu-id="62801-134">![A checkbox with a custom control template.](../../../../docs/framework/wpf/controls/media/ndp-checkboxcustom.png "NDP_CheckBoxCustom")</span></span>  
<span data-ttu-id="62801-135">Элемент управления CheckBox, использующий пользовательский шаблон элемента управления</span><span class="sxs-lookup"><span data-stu-id="62801-135">A CheckBox that uses a custom control template</span></span>  
  
 <span data-ttu-id="62801-136"><xref:System.Windows.Controls.ControlTemplate> Для <xref:System.Windows.Controls.CheckBox> в этом примере — сравнительно сложная, поэтому в этом разделе используется простой пример создания <xref:System.Windows.Controls.ControlTemplate> для <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="62801-136">The <xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.CheckBox> in this sample is relatively complex, so this topic uses a simpler example of creating a <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button>.</span></span>  
  
<a name="changing_the_visual_structure_of_a_control"></a>   
## <a name="changing-the-visual-structure-of-a-control"></a><span data-ttu-id="62801-137">Изменение визуальной структуры элемента управления</span><span class="sxs-lookup"><span data-stu-id="62801-137">Changing the Visual Structure of a Control</span></span>  
 <span data-ttu-id="62801-138">В [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], чаще всего элемента управления составного <xref:System.Windows.FrameworkElement> объектов.</span><span class="sxs-lookup"><span data-stu-id="62801-138">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], a control is often a composite <xref:System.Windows.FrameworkElement> objects.</span></span> <span data-ttu-id="62801-139">При создании <xref:System.Windows.Controls.ControlTemplate>, можно объединить <xref:System.Windows.FrameworkElement> объектов для построения одного элемента управления.</span><span class="sxs-lookup"><span data-stu-id="62801-139">When you create a <xref:System.Windows.Controls.ControlTemplate>, you combine <xref:System.Windows.FrameworkElement> objects to build a single control.</span></span> <span data-ttu-id="62801-140">Объект <xref:System.Windows.Controls.ControlTemplate> должен иметь только один <xref:System.Windows.FrameworkElement> качестве корневого элемента.</span><span class="sxs-lookup"><span data-stu-id="62801-140">A <xref:System.Windows.Controls.ControlTemplate> must have only one <xref:System.Windows.FrameworkElement> as its root element.</span></span> <span data-ttu-id="62801-141">Корневой элемент обычно содержит другие <xref:System.Windows.FrameworkElement> объекты.</span><span class="sxs-lookup"><span data-stu-id="62801-141">The root element usually contains other <xref:System.Windows.FrameworkElement> objects.</span></span> <span data-ttu-id="62801-142">Комбинация объектов составляет визуальную структуру элемента управления.</span><span class="sxs-lookup"><span data-stu-id="62801-142">The combination of objects makes up the control's visual structure.</span></span>  
  
 <span data-ttu-id="62801-143">В следующем примере создается настраиваемый <xref:System.Windows.Controls.ControlTemplate> для <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="62801-143">The following example creates a custom <xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="62801-144"><xref:System.Windows.Controls.ControlTemplate> Создается структура visual <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="62801-144">The <xref:System.Windows.Controls.ControlTemplate> creates the visual structure of the <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="62801-145">В этом примере не меняется внешний вид кнопки при перемещении на нее указателя мыши или при ее нажатии.</span><span class="sxs-lookup"><span data-stu-id="62801-145">This example does not change the button's appearance when you move the mouse pointer over it or click it.</span></span> <span data-ttu-id="62801-146">Изменение внешнего вида кнопки при ее переходе в другое состояние рассматривается далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="62801-146">Changing the button's appearance when it is in a different state is discussed later in this topic.</span></span>  
  
 <span data-ttu-id="62801-147">В данном примере визуальная структура состоит из следующих частей:</span><span class="sxs-lookup"><span data-stu-id="62801-147">In this example, the visual structure consists of the following parts:</span></span>  
  
-   <span data-ttu-id="62801-148">Объект <xref:System.Windows.Controls.Border> с именем `RootElement` , служит в качестве корневого шаблона <xref:System.Windows.FrameworkElement>.</span><span class="sxs-lookup"><span data-stu-id="62801-148">A <xref:System.Windows.Controls.Border> named `RootElement` that serves as the template's root <xref:System.Windows.FrameworkElement>.</span></span>  
  
-   <span data-ttu-id="62801-149">Объект <xref:System.Windows.Controls.Grid> , являющийся потомком `RootElement`.</span><span class="sxs-lookup"><span data-stu-id="62801-149">A <xref:System.Windows.Controls.Grid> that is a child of `RootElement`.</span></span>  
  
-   <span data-ttu-id="62801-150">Объект <xref:System.Windows.Controls.ContentPresenter> , отображающий содержимое кнопки.</span><span class="sxs-lookup"><span data-stu-id="62801-150">A <xref:System.Windows.Controls.ContentPresenter> that displays the button's content.</span></span> <span data-ttu-id="62801-151"><xref:System.Windows.Controls.ContentPresenter> Позволяет любой тип объекта для отображения.</span><span class="sxs-lookup"><span data-stu-id="62801-151">The <xref:System.Windows.Controls.ContentPresenter> enables any type of object to be displayed.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#BasicTemplate](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#basictemplate)]  
  
### <a name="preserving-the-functionality-of-a-controls-properties-by-using-templatebinding"></a><span data-ttu-id="62801-152">Сохранение функциональности свойств элемента управления с помощью TemplateBinding</span><span class="sxs-lookup"><span data-stu-id="62801-152">Preserving the Functionality of a Control's Properties by Using TemplateBinding</span></span>  
 <span data-ttu-id="62801-153">При создании нового <xref:System.Windows.Controls.ControlTemplate>, по-прежнему может потребоваться использовать общие свойства для изменения внешнего вида элемента управления.</span><span class="sxs-lookup"><span data-stu-id="62801-153">When you create a new <xref:System.Windows.Controls.ControlTemplate>, you still might want to use the public properties to change the control's appearance.</span></span> <span data-ttu-id="62801-154">[TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md) расширение разметки привязывает свойство элемента, который находится в <xref:System.Windows.Controls.ControlTemplate> к открытым свойством, которое определяется элементом управления.</span><span class="sxs-lookup"><span data-stu-id="62801-154">The [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md) markup extension binds a property of an element that is in the <xref:System.Windows.Controls.ControlTemplate> to a public property that is defined by the control.</span></span> <span data-ttu-id="62801-155">Использование расширения [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md) позволяет свойствам элемента управления действовать в качестве параметров шаблона.</span><span class="sxs-lookup"><span data-stu-id="62801-155">When you use [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md), you enable properties on the control to act as parameters to the template.</span></span> <span data-ttu-id="62801-156">Это означает, что при задании свойства элемента управления соответствующее значение передается в элемент, который содержит [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="62801-156">That is, when a property on a control is set, that value is passed on to the element that has the [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md) on it.</span></span>  
  
 <span data-ttu-id="62801-157">В следующем примере повторяется часть предыдущего примера, который использует [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md) расширение разметки, чтобы привязать свойства элементов, которые находятся в <xref:System.Windows.Controls.ControlTemplate> к общим свойствам, которые определены на кнопке.</span><span class="sxs-lookup"><span data-stu-id="62801-157">The following example repeats the part of the preceding example that uses the [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md) markup extension to bind properties of elements that are in the <xref:System.Windows.Controls.ControlTemplate> to public properties that are defined by the button.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#TemplateBinding](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#templatebinding)]  
  
 <span data-ttu-id="62801-158">В этом примере <xref:System.Windows.Controls.Grid> имеет его <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=nameWithType> шаблон свойство привязан к <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="62801-158">In this example, the <xref:System.Windows.Controls.Grid> has its <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=nameWithType> property template bound to <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="62801-159">Поскольку <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=nameWithType> будет привязано к шаблону, можно создать несколько кнопок, использующих один <xref:System.Windows.Controls.ControlTemplate> и задайте <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> в разные значения для каждой кнопки.</span><span class="sxs-lookup"><span data-stu-id="62801-159">Because <xref:System.Windows.Controls.Panel.Background%2A?displayProperty=nameWithType> is template bound, you can create multiple buttons that use the same <xref:System.Windows.Controls.ControlTemplate> and set the <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> to different values on each button.</span></span> <span data-ttu-id="62801-160">Если <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> шаблон не был привязан к свойству элемента в <xref:System.Windows.Controls.ControlTemplate>, параметр <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> кнопки окажет никакого воздействия на внешний вид кнопки.</span><span class="sxs-lookup"><span data-stu-id="62801-160">If <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> was not template bound to a property of an element in the <xref:System.Windows.Controls.ControlTemplate>, setting the <xref:System.Windows.Controls.Control.Background%2A?displayProperty=nameWithType> of a button would have no impact on the button's appearance.</span></span>  
  
 <span data-ttu-id="62801-161">Следует отметить, что не требуется, чтобы имена этих двух свойств совпадали.</span><span class="sxs-lookup"><span data-stu-id="62801-161">Note that the names of the two properties do not need to be identical.</span></span> <span data-ttu-id="62801-162">В приведенном выше примере <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=nameWithType> свойство <xref:System.Windows.Controls.Button> привязано к шаблону <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=nameWithType> свойство <xref:System.Windows.Controls.ContentPresenter>.</span><span class="sxs-lookup"><span data-stu-id="62801-162">In the preceding example, the <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=nameWithType> property of the <xref:System.Windows.Controls.Button> is template bound to the <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=nameWithType> property of the <xref:System.Windows.Controls.ContentPresenter>.</span></span> <span data-ttu-id="62801-163">Это позволяет располагать содержимое кнопки горизонтально.</span><span class="sxs-lookup"><span data-stu-id="62801-163">This enables the content of the button to be positioned horizontally.</span></span> <span data-ttu-id="62801-164"><xref:System.Windows.Controls.ContentPresenter> имеет свойство с именем `HorizontalContentAlignment`, но <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=nameWithType> могут быть привязаны к <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="62801-164"><xref:System.Windows.Controls.ContentPresenter> does not have a property named `HorizontalContentAlignment`, but <xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A?displayProperty=nameWithType> can be bound to <xref:System.Windows.FrameworkElement.HorizontalAlignment%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="62801-165">Перед привязкой свойства к шаблону следует убедиться, что целевое и исходное свойства имеют один и тот же тип.</span><span class="sxs-lookup"><span data-stu-id="62801-165">When you template bind a property, be sure that the target and source properties are the same type.</span></span>  
  
 <span data-ttu-id="62801-166"><xref:System.Windows.Controls.Control> Класс определяет несколько свойств, которые необходимо использовать шаблон элемента управления для оказывать влияние на элемент управления, если они заданы.</span><span class="sxs-lookup"><span data-stu-id="62801-166">The <xref:System.Windows.Controls.Control> class defines several properties that must be used by the control template to have an effect on the control when they are set.</span></span> <span data-ttu-id="62801-167">Как <xref:System.Windows.Controls.ControlTemplate> использует свойство зависит от свойства.</span><span class="sxs-lookup"><span data-stu-id="62801-167">How the <xref:System.Windows.Controls.ControlTemplate> uses the property depends on the property.</span></span> <span data-ttu-id="62801-168"><xref:System.Windows.Controls.ControlTemplate> Необходимо использовать свойство одним из следующих способов:</span><span class="sxs-lookup"><span data-stu-id="62801-168">The <xref:System.Windows.Controls.ControlTemplate> must use the property in one of the following ways:</span></span>  
  
-   <span data-ttu-id="62801-169">На элемент <xref:System.Windows.Controls.ControlTemplate> шаблона привязывается к свойству.</span><span class="sxs-lookup"><span data-stu-id="62801-169">An element in the <xref:System.Windows.Controls.ControlTemplate> template binds to the property.</span></span>  
  
-   <span data-ttu-id="62801-170">Элемент в <xref:System.Windows.Controls.ControlTemplate> наследует свойство от родительского объекта <xref:System.Windows.FrameworkElement>.</span><span class="sxs-lookup"><span data-stu-id="62801-170">An element in the <xref:System.Windows.Controls.ControlTemplate> inherits the property from a parent <xref:System.Windows.FrameworkElement>.</span></span>  
  
 <span data-ttu-id="62801-171">В следующей таблице перечислены визуальные свойства, наследуемые элементом управления от <xref:System.Windows.Controls.Control> класса.</span><span class="sxs-lookup"><span data-stu-id="62801-171">The following table lists the visual properties inherited by a control from the <xref:System.Windows.Controls.Control> class.</span></span> <span data-ttu-id="62801-172">В таблице также указывается, использует ли шаблон элемента управления по умолчанию значение наследуемого свойства или оно должно быть привязано к шаблону.</span><span class="sxs-lookup"><span data-stu-id="62801-172">It also indicates whether the default control template of a control uses the inherited property value or if it must be template bound.</span></span>  
  
|<span data-ttu-id="62801-173">Свойство.</span><span class="sxs-lookup"><span data-stu-id="62801-173">Property</span></span>|<span data-ttu-id="62801-174">Способ использования</span><span class="sxs-lookup"><span data-stu-id="62801-174">Usage method</span></span>|  
|--------------|------------------|  
|<xref:System.Windows.Controls.Control.Background%2A>|<span data-ttu-id="62801-175">Привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="62801-175">Template binding</span></span>|  
|<xref:System.Windows.Controls.Control.BorderThickness%2A>|<span data-ttu-id="62801-176">Привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="62801-176">Template binding</span></span>|  
|<xref:System.Windows.Controls.Control.BorderBrush%2A>|<span data-ttu-id="62801-177">Привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="62801-177">Template binding</span></span>|  
|<xref:System.Windows.Controls.Control.FontFamily%2A>|<span data-ttu-id="62801-178">Наследование свойства или привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="62801-178">Property inheritance or template binding</span></span>|  
|<xref:System.Windows.Controls.Control.FontSize%2A>|<span data-ttu-id="62801-179">Наследование свойства или привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="62801-179">Property inheritance or template binding</span></span>|  
|<xref:System.Windows.Controls.Control.FontStretch%2A>|<span data-ttu-id="62801-180">Наследование свойства или привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="62801-180">Property inheritance or template binding</span></span>|  
|<xref:System.Windows.Controls.Control.FontWeight%2A>|<span data-ttu-id="62801-181">Наследование свойства или привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="62801-181">Property inheritance or template binding</span></span>|  
|<xref:System.Windows.Controls.Control.Foreground%2A>|<span data-ttu-id="62801-182">Наследование свойства или привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="62801-182">Property inheritance or template binding</span></span>|  
|<xref:System.Windows.Controls.Control.HorizontalContentAlignment%2A>|<span data-ttu-id="62801-183">Привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="62801-183">Template binding</span></span>|  
|<xref:System.Windows.Controls.Control.Padding%2A>|<span data-ttu-id="62801-184">Привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="62801-184">Template binding</span></span>|  
|<xref:System.Windows.Controls.Control.VerticalContentAlignment%2A>|<span data-ttu-id="62801-185">Привязка к шаблону</span><span class="sxs-lookup"><span data-stu-id="62801-185">Template binding</span></span>|  
  
 <span data-ttu-id="62801-186">В таблице перечислены только визуальные свойства, наследуемые от <xref:System.Windows.Controls.Control> класса.</span><span class="sxs-lookup"><span data-stu-id="62801-186">The table lists only the visual properties inherited from the <xref:System.Windows.Controls.Control> class.</span></span> <span data-ttu-id="62801-187">Помимо свойств, перечисленных в таблице, также может наследовать элемент управления <xref:System.Windows.FrameworkElement.DataContext%2A>, <xref:System.Windows.FrameworkElement.Language%2A>, и <xref:System.Windows.Controls.TextBlock.TextDecorations%2A> свойства из родительского элемента структуры.</span><span class="sxs-lookup"><span data-stu-id="62801-187">Apart from the properties listed in the table, a control may also inherit the <xref:System.Windows.FrameworkElement.DataContext%2A>, <xref:System.Windows.FrameworkElement.Language%2A>, and <xref:System.Windows.Controls.TextBlock.TextDecorations%2A> properties from the parent framework element.</span></span>  
  
 <span data-ttu-id="62801-188">Кроме того Если <xref:System.Windows.Controls.ContentPresenter> в <xref:System.Windows.Controls.ControlTemplate> из <xref:System.Windows.Controls.ContentControl>, <xref:System.Windows.Controls.ContentPresenter> будет автоматически привязан к <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A> и <xref:System.Windows.Controls.ContentControl.Content%2A> свойства.</span><span class="sxs-lookup"><span data-stu-id="62801-188">Also, if the <xref:System.Windows.Controls.ContentPresenter> is in the <xref:System.Windows.Controls.ControlTemplate> of a <xref:System.Windows.Controls.ContentControl>, the <xref:System.Windows.Controls.ContentPresenter> will automatically bind to the <xref:System.Windows.Controls.ContentControl.ContentTemplate%2A> and <xref:System.Windows.Controls.ContentControl.Content%2A> properties.</span></span> <span data-ttu-id="62801-189">Аналогичным образом <xref:System.Windows.Controls.ItemsPresenter> , находящийся в <xref:System.Windows.Controls.ControlTemplate> из <xref:System.Windows.Controls.ItemsControl> будет автоматически привязан к <xref:System.Windows.Controls.ItemsControl.Items%2A> и <xref:System.Windows.Controls.ItemsPresenter> свойства.</span><span class="sxs-lookup"><span data-stu-id="62801-189">Likewise, an <xref:System.Windows.Controls.ItemsPresenter> that is in the <xref:System.Windows.Controls.ControlTemplate> of an <xref:System.Windows.Controls.ItemsControl> will automatically bind to the <xref:System.Windows.Controls.ItemsControl.Items%2A> and <xref:System.Windows.Controls.ItemsPresenter> properties.</span></span>  
  
 <span data-ttu-id="62801-190">В следующем примере создается две кнопки, которые используют <xref:System.Windows.Controls.ControlTemplate> определенный в предыдущем примере.</span><span class="sxs-lookup"><span data-stu-id="62801-190">The following example creates two buttons that use the <xref:System.Windows.Controls.ControlTemplate> defined in the preceding example.</span></span> <span data-ttu-id="62801-191">В примере устанавливается <xref:System.Windows.Controls.Control.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>, и <xref:System.Windows.Controls.Control.FontSize%2A> свойства на каждой кнопке.</span><span class="sxs-lookup"><span data-stu-id="62801-191">The example sets the <xref:System.Windows.Controls.Control.Background%2A>, <xref:System.Windows.Controls.Control.Foreground%2A>, and <xref:System.Windows.Controls.Control.FontSize%2A> properties on each button.</span></span> <span data-ttu-id="62801-192">Установка <xref:System.Windows.Controls.Control.Background%2A> свойство имеет значение, поскольку это шаблон, привязанных к <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="62801-192">Setting the <xref:System.Windows.Controls.Control.Background%2A> property has an effect because it is template bound in the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="62801-193">Несмотря на то что <xref:System.Windows.Controls.Control.Foreground%2A> и <xref:System.Windows.Controls.Control.FontSize%2A> свойства не привязаны к шаблону, настраивать их действует так, как их значения будут наследоваться.</span><span class="sxs-lookup"><span data-stu-id="62801-193">Even though the <xref:System.Windows.Controls.Control.Foreground%2A> and <xref:System.Windows.Controls.Control.FontSize%2A> properties are not template bound, setting them has an effect because their values are inherited.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#ButtonDeclaration](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#buttondeclaration)]  
  
 <span data-ttu-id="62801-194">В предыдущем примере получался результат, аналогичный показанному на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="62801-194">The preceding example produces output that is similar to the following illustration.</span></span>  
  
 <span data-ttu-id="62801-195">![Две кнопки, одна синяя и другая — фиолетовая. ] (../../../../docs/framework/wpf/controls/media/ndp-buttontwo.png "NDP_ButtonTwo")</span><span class="sxs-lookup"><span data-stu-id="62801-195">![Two buttons, one blue and one purple.](../../../../docs/framework/wpf/controls/media/ndp-buttontwo.png "NDP_ButtonTwo")</span></span>  
<span data-ttu-id="62801-196">Две кнопки с различными цветами фона</span><span class="sxs-lookup"><span data-stu-id="62801-196">Two buttons with different background colors</span></span>  
  
<a name="changing_the_appearance_of_a_control_depending_on_its_state"></a>   
## <a name="changing-the-appearance-of-a-control-depending-on-its-state"></a><span data-ttu-id="62801-197">Изменение внешнего вида элемента управления в зависимости от его состояния</span><span class="sxs-lookup"><span data-stu-id="62801-197">Changing the Appearance of a Control Depending on Its State</span></span>  
 <span data-ttu-id="62801-198">Разница между кнопкой с внешним видом по умолчанию и кнопкой из предыдущего примера состоит в том, что кнопка по умолчанию слегка изменяется при переходе в другое состояние.</span><span class="sxs-lookup"><span data-stu-id="62801-198">The difference between a button with its default appearance and the button in the preceding example is that the default button subtly changes when it is in different states.</span></span> <span data-ttu-id="62801-199">Например, внешний вид кнопки по умолчанию изменяется при нажатии этой кнопки или при наведении на нее указателя мыши.</span><span class="sxs-lookup"><span data-stu-id="62801-199">For example, the default button's appearance changes when the button is pressed, or when the mouse pointer is over the button.</span></span> <span data-ttu-id="62801-200">Несмотря на то что <xref:System.Windows.Controls.ControlTemplate> не изменяет функциональные возможности элемента управления, это приводит к изменению поведения визуального элемента управления.</span><span class="sxs-lookup"><span data-stu-id="62801-200">Although the <xref:System.Windows.Controls.ControlTemplate> does not change the functionality of a control, it does change the control's visual behavior.</span></span> <span data-ttu-id="62801-201">Визуальное поведение описывает внешний вид элемента управления в определенных состояниях.</span><span class="sxs-lookup"><span data-stu-id="62801-201">A visual behavior describes the control appearance when it is in a certain state.</span></span> <span data-ttu-id="62801-202">Чтобы лучше понять разницу между функциональностью и визуальным поведением элемента управления, рассмотрим пример с кнопкой.</span><span class="sxs-lookup"><span data-stu-id="62801-202">To understand the difference between the functionality and visual behavior of a control, consider the button example.</span></span> <span data-ttu-id="62801-203">Представляет собой вызов функции кнопок <xref:System.Windows.Controls.Primitives.ButtonBase.Click> событие при щелчке, однако поведение visual кнопки при нажатии и указывает, изменить его внешний вид.</span><span class="sxs-lookup"><span data-stu-id="62801-203">The button's functionality is to raise the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event when it is clicked, but the button's visual behavior is to change its appearance when it is pointed to or pressed.</span></span>  
  
 <span data-ttu-id="62801-204">Вы используете <xref:System.Windows.VisualState> объекты для указания вида элемента управления, когда он находится в определенном состоянии.</span><span class="sxs-lookup"><span data-stu-id="62801-204">You use <xref:System.Windows.VisualState> objects to specify the appearance of a control when it is in a certain state.</span></span> <span data-ttu-id="62801-205">Объект <xref:System.Windows.VisualState> содержит <xref:System.Windows.Media.Animation.Storyboard> , изменяется внешний вид элементов, которые находятся в <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="62801-205">A <xref:System.Windows.VisualState> contains a <xref:System.Windows.Media.Animation.Storyboard> that changes the appearance of the elements that are in the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="62801-206">Не нужно писать код, чтобы это происходило, поскольку логика элемента управления изменяет состояние с помощью <xref:System.Windows.VisualStateManager>.</span><span class="sxs-lookup"><span data-stu-id="62801-206">You do not have to write any code to make this occur because the control's logic changes state by using the <xref:System.Windows.VisualStateManager>.</span></span> <span data-ttu-id="62801-207">Когда элемент управления переходит в состояние, который задается параметром <xref:System.Windows.VisualState.Name%2A?displayProperty=nameWithType> свойства <xref:System.Windows.Media.Animation.Storyboard> начинается.</span><span class="sxs-lookup"><span data-stu-id="62801-207">When the control enters the state that is specified by the <xref:System.Windows.VisualState.Name%2A?displayProperty=nameWithType> property, the <xref:System.Windows.Media.Animation.Storyboard> begins.</span></span> <span data-ttu-id="62801-208">Если элемент управления выходит из состояния <xref:System.Windows.Media.Animation.Storyboard> останавливается.</span><span class="sxs-lookup"><span data-stu-id="62801-208">When the control exits the state, the <xref:System.Windows.Media.Animation.Storyboard> stops.</span></span>  
  
 <span data-ttu-id="62801-209">В следующем примере показан <xref:System.Windows.VisualState> , изменяется внешний вид <xref:System.Windows.Controls.Button> когда указатель мыши находится над ним.</span><span class="sxs-lookup"><span data-stu-id="62801-209">The following example shows the <xref:System.Windows.VisualState> that changes the appearance of a <xref:System.Windows.Controls.Button> when the mouse pointer is over it.</span></span> <span data-ttu-id="62801-210"><xref:System.Windows.Media.Animation.Storyboard> Изменяет цвет границы кнопки путем изменения цвета `BorderBrush`.</span><span class="sxs-lookup"><span data-stu-id="62801-210">The <xref:System.Windows.Media.Animation.Storyboard> changes the button's border color by changing the color of the `BorderBrush`.</span></span> <span data-ttu-id="62801-211">Если вы ссылаетесь на <xref:System.Windows.Controls.ControlTemplate> примере в начале этого раздела, можно увидеть, что `BorderBrush` имя <xref:System.Windows.Media.SolidColorBrush> , которые назначены <xref:System.Windows.Controls.Border.Background%2A> из <xref:System.Windows.Controls.Border>.</span><span class="sxs-lookup"><span data-stu-id="62801-211">If you refer to the <xref:System.Windows.Controls.ControlTemplate> example at the beginning of this topic, you will recall that `BorderBrush` is the name of the <xref:System.Windows.Media.SolidColorBrush> that is assigned to the <xref:System.Windows.Controls.Border.Background%2A> of the <xref:System.Windows.Controls.Border>.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#4](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#4)]  
  
 <span data-ttu-id="62801-212">Элемент управления отвечает за определение состояний как часть своего контракта, что подробно рассматривается в подразделе [Настройка других элементов управления через понимание контракта элемента управления](#customizing_other_controls_by_understanding_the_control_contract) далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="62801-212">The control is responsible for defining the states as part of its control contract, which is discussed in detail in [Customizing Other Controls by Understanding the Control Contract](#customizing_other_controls_by_understanding_the_control_contract) later in this topic.</span></span> <span data-ttu-id="62801-213">В следующей таблице перечислены состояния, которые указаны для <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="62801-213">The following table lists the states that are specified for the <xref:System.Windows.Controls.Button>.</span></span>  
  
|<span data-ttu-id="62801-214">Имя VisualState</span><span class="sxs-lookup"><span data-stu-id="62801-214">VisualState Name</span></span>|<span data-ttu-id="62801-215">Имя VisualStateGroup</span><span class="sxs-lookup"><span data-stu-id="62801-215">VisualStateGroup Name</span></span>|<span data-ttu-id="62801-216">Описание</span><span class="sxs-lookup"><span data-stu-id="62801-216">Description</span></span>|  
|----------------------|---------------------------|-----------------|  
|<span data-ttu-id="62801-217">Норм.</span><span class="sxs-lookup"><span data-stu-id="62801-217">Normal</span></span>|<span data-ttu-id="62801-218">CommonStates</span><span class="sxs-lookup"><span data-stu-id="62801-218">CommonStates</span></span>|<span data-ttu-id="62801-219">Состояние по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="62801-219">The default state.</span></span>|  
|<span data-ttu-id="62801-220">MouseOver</span><span class="sxs-lookup"><span data-stu-id="62801-220">MouseOver</span></span>|<span data-ttu-id="62801-221">CommonStates</span><span class="sxs-lookup"><span data-stu-id="62801-221">CommonStates</span></span>|<span data-ttu-id="62801-222">Указатель мыши расположен в элементе управления.</span><span class="sxs-lookup"><span data-stu-id="62801-222">The mouse pointer is positioned over the control.</span></span>|  
|<span data-ttu-id="62801-223">Нажато</span><span class="sxs-lookup"><span data-stu-id="62801-223">Pressed</span></span>|<span data-ttu-id="62801-224">CommonStates</span><span class="sxs-lookup"><span data-stu-id="62801-224">CommonStates</span></span>|<span data-ttu-id="62801-225">Элемент управления нажат.</span><span class="sxs-lookup"><span data-stu-id="62801-225">The control is pressed.</span></span>|  
|<span data-ttu-id="62801-226">Отключено</span><span class="sxs-lookup"><span data-stu-id="62801-226">Disabled</span></span>|<span data-ttu-id="62801-227">CommonStates</span><span class="sxs-lookup"><span data-stu-id="62801-227">CommonStates</span></span>|<span data-ttu-id="62801-228">Элемент управления отключен.</span><span class="sxs-lookup"><span data-stu-id="62801-228">The control is disabled.</span></span>|  
|<span data-ttu-id="62801-229">Focused</span><span class="sxs-lookup"><span data-stu-id="62801-229">Focused</span></span>|<span data-ttu-id="62801-230">FocusStates</span><span class="sxs-lookup"><span data-stu-id="62801-230">FocusStates</span></span>|<span data-ttu-id="62801-231">Элемент управления имеет фокус.</span><span class="sxs-lookup"><span data-stu-id="62801-231">The control has focus.</span></span>|  
|<span data-ttu-id="62801-232">Без фокуса ввода</span><span class="sxs-lookup"><span data-stu-id="62801-232">Unfocused</span></span>|<span data-ttu-id="62801-233">FocusStates</span><span class="sxs-lookup"><span data-stu-id="62801-233">FocusStates</span></span>|<span data-ttu-id="62801-234">Элемент управления не имеет фокуса.</span><span class="sxs-lookup"><span data-stu-id="62801-234">The control does not have focus.</span></span>|  
  
 <span data-ttu-id="62801-235"><xref:System.Windows.Controls.Button> Определяет две группы: `CommonStates` группа содержит `Normal`, `MouseOver`, `Pressed`, и `Disabled` состояния.</span><span class="sxs-lookup"><span data-stu-id="62801-235">The <xref:System.Windows.Controls.Button> defines two state groups: the `CommonStates` group contains the `Normal`, `MouseOver`, `Pressed`, and `Disabled` states.</span></span> <span data-ttu-id="62801-236">Группа `FocusStates` содержит состояния `Focused` и `Unfocused`.</span><span class="sxs-lookup"><span data-stu-id="62801-236">The `FocusStates` group contains the `Focused` and `Unfocused` states.</span></span> <span data-ttu-id="62801-237">Состояния, входящие в одну группу, являются взаимоисключающими.</span><span class="sxs-lookup"><span data-stu-id="62801-237">States in the same state group are mutually exclusive.</span></span> <span data-ttu-id="62801-238">Элемент управления всегда находится строго в одном состоянии из каждой группы.</span><span class="sxs-lookup"><span data-stu-id="62801-238">The control is always in exactly one state per group.</span></span> <span data-ttu-id="62801-239">Например <xref:System.Windows.Controls.Button> может иметь фокус, даже в том случае, если указатель мыши наведен не, поэтому <xref:System.Windows.Controls.Button> в `Focused` состояние может быть в `MouseOver`, `Pressed`, или `Normal` состояния.</span><span class="sxs-lookup"><span data-stu-id="62801-239">For example, a <xref:System.Windows.Controls.Button> can have focus even when the mouse pointer is not over it, so a <xref:System.Windows.Controls.Button> in the `Focused` state can be in the `MouseOver`, `Pressed`, or `Normal` state.</span></span>  
  
 <span data-ttu-id="62801-240">Добавить <xref:System.Windows.VisualState> объектов <xref:System.Windows.VisualStateGroup> объектов.</span><span class="sxs-lookup"><span data-stu-id="62801-240">You add <xref:System.Windows.VisualState> objects to <xref:System.Windows.VisualStateGroup> objects.</span></span> <span data-ttu-id="62801-241">Добавить <xref:System.Windows.VisualStateGroup> объектов <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=nameWithType> вложенное свойство.</span><span class="sxs-lookup"><span data-stu-id="62801-241">You add <xref:System.Windows.VisualStateGroup> objects to the <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=nameWithType> attached property.</span></span> <span data-ttu-id="62801-242">В следующем примере определяется <xref:System.Windows.VisualState> объектов для `Normal`, `MouseOver`, и `Pressed` состояний, которые находятся в `CommonStates` группы.</span><span class="sxs-lookup"><span data-stu-id="62801-242">The following example defines the <xref:System.Windows.VisualState> objects for the `Normal`, `MouseOver`, and `Pressed` states, which are all in the `CommonStates` group.</span></span> <span data-ttu-id="62801-243"><xref:System.Windows.VisualState.Name%2A> Каждого <xref:System.Windows.VisualState> совпадает с именем в предыдущей таблице.</span><span class="sxs-lookup"><span data-stu-id="62801-243">The <xref:System.Windows.VisualState.Name%2A> of each <xref:System.Windows.VisualState> matches the name in the preceding table.</span></span> <span data-ttu-id="62801-244">Состояние `Disabled` и состояния из группы `FocusStates` опущены для сохранения краткости примера, но они включены в полный пример, приведенный в конце этого раздела.</span><span class="sxs-lookup"><span data-stu-id="62801-244">The `Disabled` state and the states in the `FocusStates` group are omitted to keep the example short, but they are included in the entire example at the end of this topic.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="62801-245">Не забудьте задать <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=nameWithType> вложенное свойство в корне <xref:System.Windows.FrameworkElement> из <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="62801-245">Be sure to set the <xref:System.Windows.VisualStateManager.VisualStateGroups%2A?displayProperty=nameWithType> attached property on the root <xref:System.Windows.FrameworkElement> of the <xref:System.Windows.Controls.ControlTemplate>.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#VisualStates](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#visualstates)]  
  
 <span data-ttu-id="62801-246">В предыдущем примере получался результат, аналогичный показанному на следующих рисунках.</span><span class="sxs-lookup"><span data-stu-id="62801-246">The preceding example produces output that is similar to the following illustrations.</span></span>  
  
 <span data-ttu-id="62801-247">![Кнопка с пользовательским шаблоном элемента управления. ] (../../../../docs/framework/wpf/controls/media/ndp-buttonnormal.png "NDP_ButtonNormal")</span><span class="sxs-lookup"><span data-stu-id="62801-247">![A button with a custom control template.](../../../../docs/framework/wpf/controls/media/ndp-buttonnormal.png "NDP_ButtonNormal")</span></span>  
<span data-ttu-id="62801-248">Кнопка, использующая пользовательский шаблон элемента управления в нормальном состоянии</span><span class="sxs-lookup"><span data-stu-id="62801-248">A button that uses a custom control template in the normal state</span></span>  
  
 <span data-ttu-id="62801-249">![Кнопка с красной границей. ] (../../../../docs/framework/wpf/controls/media/ndp-buttonmouseover.png "NDP_ButtonMouseOver")</span><span class="sxs-lookup"><span data-stu-id="62801-249">![A button with a red border.](../../../../docs/framework/wpf/controls/media/ndp-buttonmouseover.png "NDP_ButtonMouseOver")</span></span>  
<span data-ttu-id="62801-250">Кнопка, использующая пользовательский шаблон элемента управления в состоянии, когда указатель мыши находится над кнопкой</span><span class="sxs-lookup"><span data-stu-id="62801-250">A button that uses a custom control template in the mouse over state</span></span>  
  
 <span data-ttu-id="62801-251">![Граница прозрачна на нажатой кнопке. ] (../../../../docs/framework/wpf/controls/media/ndp-buttonpressed.png "NDP_ButtonPressed")</span><span class="sxs-lookup"><span data-stu-id="62801-251">![The border is transparent on a pressed button.](../../../../docs/framework/wpf/controls/media/ndp-buttonpressed.png "NDP_ButtonPressed")</span></span>  
<span data-ttu-id="62801-252">Кнопка, использующая пользовательский шаблон элемента управления в состоянии, когда она нажата</span><span class="sxs-lookup"><span data-stu-id="62801-252">A button that uses a custom control template in the pressed state</span></span>  
  
 <span data-ttu-id="62801-253">Визуальные состояния элементов управления, включенных в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], см. в разделе [Стили и шаблоны элемента Control](../../../../docs/framework/wpf/controls/control-styles-and-templates.md).</span><span class="sxs-lookup"><span data-stu-id="62801-253">To find the visual states for controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Control Styles and Templates](../../../../docs/framework/wpf/controls/control-styles-and-templates.md).</span></span>  
  
<a name="specifying_the_behavior_of_a_control_when_it_transitions_between_states"></a>   
## <a name="specifying-the-behavior-of-a-control-when-it-transitions-between-states"></a><span data-ttu-id="62801-254">Задание поведения элемента управления, когда он переходит между состояниями</span><span class="sxs-lookup"><span data-stu-id="62801-254">Specifying the Behavior of a Control When It Transitions Between States</span></span>  
 <span data-ttu-id="62801-255">В предыдущем примере внешний вид кнопки изменяется, когда пользователь нажимает ее, но если кнопка остается нажатой менее полной секунды, то пользователь не видит эффекта нажатия.</span><span class="sxs-lookup"><span data-stu-id="62801-255">In the preceding example, the appearance of the button also changes when the user clicks it, but unless the button is pressed for a full second, the user does not see the effect.</span></span> <span data-ttu-id="62801-256">По умолчанию для запуска анимации требуется одна секунда.</span><span class="sxs-lookup"><span data-stu-id="62801-256">By default, the animation takes one second to occur.</span></span> <span data-ttu-id="62801-257">Поскольку пользователи, скорее всего, нажмите и отпустите кнопку гораздо меньше времени, визуальную обратную связь не будет действовать в том случае, если оставить <xref:System.Windows.Controls.ControlTemplate> в состоянии по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="62801-257">Because users are likely to click and release a button in much less time, the visual feedback will not be effective if you leave the <xref:System.Windows.Controls.ControlTemplate> in its default state.</span></span>  
  
 <span data-ttu-id="62801-258">Можно указать время, затрачиваемое анимации плавно переходил элемент управления из одного состояния в другое, добавив <xref:System.Windows.VisualTransition> объектов <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="62801-258">You can specify the amount of time that it takes an animation to occur to smoothly transition a control from one state to another by adding <xref:System.Windows.VisualTransition> objects to the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="62801-259">При создании <xref:System.Windows.VisualTransition>, вы указываете одну или несколько из следующих:</span><span class="sxs-lookup"><span data-stu-id="62801-259">When you create a <xref:System.Windows.VisualTransition>, you specify one or more of the following:</span></span>  
  
-   <span data-ttu-id="62801-260">время, которое занимает переход между состояниями;</span><span class="sxs-lookup"><span data-stu-id="62801-260">The time it takes for a transition between states to occur.</span></span>  
  
-   <span data-ttu-id="62801-261">дополнительные изменения внешнего вида элемента управления, возникающие во время перехода;</span><span class="sxs-lookup"><span data-stu-id="62801-261">Additional changes in the control's appearance that occur at the time of the transition.</span></span>  
  
-   <span data-ttu-id="62801-262">Какие состояния <xref:System.Windows.VisualTransition> применяется.</span><span class="sxs-lookup"><span data-stu-id="62801-262">Which states the <xref:System.Windows.VisualTransition> is applied to.</span></span>  
  
### <a name="specifying-the-duration-of-a-transition"></a><span data-ttu-id="62801-263">Задание продолжительности перехода</span><span class="sxs-lookup"><span data-stu-id="62801-263">Specifying the Duration of a Transition</span></span>  
 <span data-ttu-id="62801-264">Можно указать, как долго выполняет переход, задав <xref:System.Windows.VisualTransition.GeneratedDuration%2A> свойство.</span><span class="sxs-lookup"><span data-stu-id="62801-264">You can specify how long a transition takes by setting the <xref:System.Windows.VisualTransition.GeneratedDuration%2A> property.</span></span> <span data-ttu-id="62801-265">В предыдущем примере имеется <xref:System.Windows.VisualState> , указывающий, что граница кнопки становится прозрачной при нажатии кнопки, но анимация продолжается слишком долго будет заметно, если быстро нажата и отпущена кнопка.</span><span class="sxs-lookup"><span data-stu-id="62801-265">The preceding example has a <xref:System.Windows.VisualState> that specifies that the button's border becomes transparent when the button is pressed, but the animation takes too long to be noticeable if the button is quickly pressed and released.</span></span> <span data-ttu-id="62801-266">Можно использовать <xref:System.Windows.VisualTransition> чтобы указать количество времени, необходимое элемента управления для перехода в нажатом состоянии.</span><span class="sxs-lookup"><span data-stu-id="62801-266">You can use a <xref:System.Windows.VisualTransition> to specify the amount of time it takes the control to transition into the pressed state.</span></span> <span data-ttu-id="62801-267">В следующем примере задается, что переход элемента управления в нажатое состояние занимает одну сотую секунды.</span><span class="sxs-lookup"><span data-stu-id="62801-267">The following example specifies that the control takes one hundredth of a second to go into the pressed state.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#PressedTransition](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#pressedtransition)]  
  
### <a name="specifying-changes-to-the-controls-appearance-during-a-transition"></a><span data-ttu-id="62801-268">Задание изменений внешнего вида элемента управления во время перехода</span><span class="sxs-lookup"><span data-stu-id="62801-268">Specifying Changes to the Control's Appearance During a Transition</span></span>  
 <span data-ttu-id="62801-269"><xref:System.Windows.VisualTransition> Содержит <xref:System.Windows.Media.Animation.Storyboard> , начинается при переходе элемента управления между состояниями.</span><span class="sxs-lookup"><span data-stu-id="62801-269">The <xref:System.Windows.VisualTransition> contains a <xref:System.Windows.Media.Animation.Storyboard> that begins when the control transitions between states.</span></span> <span data-ttu-id="62801-270">Например, можно указать, что определенная анимация происходит при переходе элемента управления из состояния `MouseOver` в состояние `Normal`.</span><span class="sxs-lookup"><span data-stu-id="62801-270">For example, you can specify that a certain animation occurs when the control transitions from the `MouseOver` state to the `Normal` State.</span></span> <span data-ttu-id="62801-271">В следующем примере создается <xref:System.Windows.VisualTransition> , определяет, что когда пользователь перемещает указатель мыши за пределы кнопки, граница кнопки изменяет цвет на синий, затем становится желтым, а затем в черный цвет в 1,5 секунд.</span><span class="sxs-lookup"><span data-stu-id="62801-271">The following example creates a <xref:System.Windows.VisualTransition> that specifies that when the user moves the mouse pointer away from the button, the button's border changes to blue, then to yellow, then to black in 1.5 seconds.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#8](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#8)]  
  
### <a name="specifying-when-a-visualtransition-is-applied"></a><span data-ttu-id="62801-272">Указание места применения VisualTransition</span><span class="sxs-lookup"><span data-stu-id="62801-272">Specifying When a VisualTransition Is Applied</span></span>  
 <span data-ttu-id="62801-273">Объект <xref:System.Windows.VisualTransition> можно ограничить только определенными состояниями, или оно может применяться каждый раз управления переходы между состояниями.</span><span class="sxs-lookup"><span data-stu-id="62801-273">A <xref:System.Windows.VisualTransition> can be restricted to apply to only certain states, or it can be applied any time the control transitions between states.</span></span> <span data-ttu-id="62801-274">В приведенном выше примере <xref:System.Windows.VisualTransition> применяется, когда элемент управления переходит от `MouseOver` состояние `Normal` состояние; в примере перед <xref:System.Windows.VisualTransition> применяется, когда элемент управления переходит в `Pressed` состояние.</span><span class="sxs-lookup"><span data-stu-id="62801-274">In the preceding example, the <xref:System.Windows.VisualTransition> is applied when the control goes from the `MouseOver` state to the `Normal` state; in the example before that, the <xref:System.Windows.VisualTransition> is applied when the control goes into the `Pressed` state.</span></span> <span data-ttu-id="62801-275">Ограничивается <xref:System.Windows.VisualTransition> применяется, задав <xref:System.Windows.VisualTransition.To%2A> и <xref:System.Windows.VisualTransition.From%2A> свойства.</span><span class="sxs-lookup"><span data-stu-id="62801-275">You restrict when a <xref:System.Windows.VisualTransition> is applied by setting the <xref:System.Windows.VisualTransition.To%2A> and <xref:System.Windows.VisualTransition.From%2A> properties.</span></span> <span data-ttu-id="62801-276">В таблице ниже приведено описание уровней ограничений от наибольшего до наименьшего.</span><span class="sxs-lookup"><span data-stu-id="62801-276">The following table describes the levels of restriction from most restrictive to least restrictive.</span></span>  
  
|<span data-ttu-id="62801-277">Тип ограничения</span><span class="sxs-lookup"><span data-stu-id="62801-277">Type of restriction</span></span>|<span data-ttu-id="62801-278">Состояние, из которого выполняется переход</span><span class="sxs-lookup"><span data-stu-id="62801-278">Value of From</span></span>|<span data-ttu-id="62801-279">Состояние, в которое выполняется переход</span><span class="sxs-lookup"><span data-stu-id="62801-279">Value of To</span></span>|  
|-------------------------|-------------------|-----------------|  
|<span data-ttu-id="62801-280">Из указанного состояния в другое указанное состояние</span><span class="sxs-lookup"><span data-stu-id="62801-280">From a specified state to another specified state</span></span>|<span data-ttu-id="62801-281">Имя <xref:System.Windows.VisualState></span><span class="sxs-lookup"><span data-stu-id="62801-281">The name of a <xref:System.Windows.VisualState></span></span>|<span data-ttu-id="62801-282">Имя <xref:System.Windows.VisualState></span><span class="sxs-lookup"><span data-stu-id="62801-282">The name of a <xref:System.Windows.VisualState></span></span>|  
|<span data-ttu-id="62801-283">Из любого состояния в указанное состояние</span><span class="sxs-lookup"><span data-stu-id="62801-283">From any state to a specified state</span></span>|<span data-ttu-id="62801-284">Не задано</span><span class="sxs-lookup"><span data-stu-id="62801-284">Not set</span></span>|<span data-ttu-id="62801-285">Имя <xref:System.Windows.VisualState></span><span class="sxs-lookup"><span data-stu-id="62801-285">The name of a <xref:System.Windows.VisualState></span></span>|  
|<span data-ttu-id="62801-286">Из указанного состояния в любое состояние</span><span class="sxs-lookup"><span data-stu-id="62801-286">From a specified state to any state</span></span>|<span data-ttu-id="62801-287">Имя <xref:System.Windows.VisualState></span><span class="sxs-lookup"><span data-stu-id="62801-287">The name of a <xref:System.Windows.VisualState></span></span>|<span data-ttu-id="62801-288">Не задано</span><span class="sxs-lookup"><span data-stu-id="62801-288">Not set</span></span>|  
|<span data-ttu-id="62801-289">Из любого состояния в любое другое состояние</span><span class="sxs-lookup"><span data-stu-id="62801-289">From any state to any other state</span></span>|<span data-ttu-id="62801-290">Не задано</span><span class="sxs-lookup"><span data-stu-id="62801-290">Not set</span></span>|<span data-ttu-id="62801-291">Не задано</span><span class="sxs-lookup"><span data-stu-id="62801-291">Not set</span></span>|  
  
 <span data-ttu-id="62801-292">Может иметь несколько <xref:System.Windows.VisualTransition> объекты в <xref:System.Windows.VisualStateGroup> , которые ссылаются на том же состоянии, но они будут использоваться в том порядке, в предыдущей таблице.</span><span class="sxs-lookup"><span data-stu-id="62801-292">You can have multiple <xref:System.Windows.VisualTransition> objects in a <xref:System.Windows.VisualStateGroup> that refer to the same state, but they will be used in the order that the previous table specifies.</span></span> <span data-ttu-id="62801-293">В следующем примере есть два <xref:System.Windows.VisualTransition> объектов.</span><span class="sxs-lookup"><span data-stu-id="62801-293">In the following example, there are two <xref:System.Windows.VisualTransition> objects.</span></span> <span data-ttu-id="62801-294">Когда элемент управления переходит из `Pressed` состояние `MouseOver` состояние, <xref:System.Windows.VisualTransition> , имеет оба <xref:System.Windows.VisualTransition.From%2A> и <xref:System.Windows.VisualTransition.To%2A> набор используется.</span><span class="sxs-lookup"><span data-stu-id="62801-294">When the control transitions from the `Pressed` state to the `MouseOver` state, the <xref:System.Windows.VisualTransition> that has both <xref:System.Windows.VisualTransition.From%2A> and <xref:System.Windows.VisualTransition.To%2A> set is used.</span></span> <span data-ttu-id="62801-295">Когда элемент управления переходит из состояния, отличного от `Pressed`, в состояние `MouseOver`, используется другой объект.</span><span class="sxs-lookup"><span data-stu-id="62801-295">When the control transitions from a state that is not `Pressed` to the `MouseOver` state, the other state is used.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#7](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#7)]  
  
 <span data-ttu-id="62801-296"><xref:System.Windows.VisualStateGroup> Имеет <xref:System.Windows.VisualStateGroup.Transitions%2A> свойство, содержащее <xref:System.Windows.VisualTransition> объектов, которые применяются к <xref:System.Windows.VisualState> объекты в <xref:System.Windows.VisualStateGroup>.</span><span class="sxs-lookup"><span data-stu-id="62801-296">The <xref:System.Windows.VisualStateGroup> has a <xref:System.Windows.VisualStateGroup.Transitions%2A> property that contains the <xref:System.Windows.VisualTransition> objects that apply to the <xref:System.Windows.VisualState> objects in the <xref:System.Windows.VisualStateGroup>.</span></span> <span data-ttu-id="62801-297">Как <xref:System.Windows.Controls.ControlTemplate> автор, вы может включать любые <xref:System.Windows.VisualTransition> требуется.</span><span class="sxs-lookup"><span data-stu-id="62801-297">As the <xref:System.Windows.Controls.ControlTemplate> author, you are free to include any <xref:System.Windows.VisualTransition> you want.</span></span> <span data-ttu-id="62801-298">Однако если <xref:System.Windows.VisualTransition.To%2A> и <xref:System.Windows.VisualTransition.From%2A> свойствам присваиваются названия штатов, которые не находятся в <xref:System.Windows.VisualStateGroup>, <xref:System.Windows.VisualTransition> учитывается.</span><span class="sxs-lookup"><span data-stu-id="62801-298">However, if the <xref:System.Windows.VisualTransition.To%2A> and <xref:System.Windows.VisualTransition.From%2A> properties are set to state names that are not in the <xref:System.Windows.VisualStateGroup>, the <xref:System.Windows.VisualTransition> is ignored.</span></span>  
  
 <span data-ttu-id="62801-299">В следующем примере показан <xref:System.Windows.VisualStateGroup> для `CommonStates`.</span><span class="sxs-lookup"><span data-stu-id="62801-299">The following example shows the <xref:System.Windows.VisualStateGroup> for the `CommonStates`.</span></span> <span data-ttu-id="62801-300">В примере определяется <xref:System.Windows.VisualTransition> для каждого из следующих кнопки перехода.</span><span class="sxs-lookup"><span data-stu-id="62801-300">The example defines a <xref:System.Windows.VisualTransition> for each of the button's following transitions.</span></span>  
  
-   <span data-ttu-id="62801-301">в состояние `Pressed`;</span><span class="sxs-lookup"><span data-stu-id="62801-301">To the `Pressed` state.</span></span>  
  
-   <span data-ttu-id="62801-302">в состояние `MouseOver`;</span><span class="sxs-lookup"><span data-stu-id="62801-302">To the `MouseOver` state.</span></span>  
  
-   <span data-ttu-id="62801-303">из состояния `Pressed` в состояние `MouseOver`;</span><span class="sxs-lookup"><span data-stu-id="62801-303">From the `Pressed` state to the `MouseOver` state.</span></span>  
  
-   <span data-ttu-id="62801-304">из состояния `MouseOver` в состояние `Normal`.</span><span class="sxs-lookup"><span data-stu-id="62801-304">From the `MouseOver` state to the `Normal` state.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#VisualTransitions](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/buttonstages.xaml#visualtransitions)]  
  
<a name="customizing_other_controls_by_understanding_the_control_contract"></a>   
## <a name="customizing-other-controls-by-understanding-the-control-contract"></a><span data-ttu-id="62801-305">Настройка других элементов управления через понимание контракта элемента управления</span><span class="sxs-lookup"><span data-stu-id="62801-305">Customizing Other Controls by Understanding the Control Contract</span></span>  
 <span data-ttu-id="62801-306">Элемент управления, использующий <xref:System.Windows.Controls.ControlTemplate> для задания визуальной структуры (с помощью <xref:System.Windows.FrameworkElement> объектов) и поведение (с помощью <xref:System.Windows.VisualState> объекты) использует модель частей элемента управления.</span><span class="sxs-lookup"><span data-stu-id="62801-306">A control that uses a <xref:System.Windows.Controls.ControlTemplate> to specify its visual structure (by using <xref:System.Windows.FrameworkElement> objects) and visual behavior (by using <xref:System.Windows.VisualState> objects) uses the parts control model.</span></span> <span data-ttu-id="62801-307">Множество элементов управления, имеющихся в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 4, используют эту модель.</span><span class="sxs-lookup"><span data-stu-id="62801-307">Many of the controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 4 use this model.</span></span> <span data-ttu-id="62801-308">Компоненты, <xref:System.Windows.Controls.ControlTemplate> автор необходимо иметь в виду, взаимодействуют с помощью контракта элемента управления.</span><span class="sxs-lookup"><span data-stu-id="62801-308">The parts that a <xref:System.Windows.Controls.ControlTemplate> author needs to be aware of are communicated through the control contract.</span></span> <span data-ttu-id="62801-309">Поняв части контракта элемента управления, можно настроить внешний вид любого элемента управления, использующего модель частей элемента управления.</span><span class="sxs-lookup"><span data-stu-id="62801-309">When you understand the parts of a control contract, you can customize the appearance of any control that uses the parts control model.</span></span>  
  
 <span data-ttu-id="62801-310">Контракт элемента управления имеет три элемента:</span><span class="sxs-lookup"><span data-stu-id="62801-310">A control contract has three elements:</span></span>  
  
-   <span data-ttu-id="62801-311">визуальный элемент, используемый логикой элемента управления;</span><span class="sxs-lookup"><span data-stu-id="62801-311">The visual elements that the control's logic uses.</span></span>  
  
-   <span data-ttu-id="62801-312">состояния элемента управления и группа, к которой принадлежит каждое состояние;</span><span class="sxs-lookup"><span data-stu-id="62801-312">The states of the control and the group each state belongs to.</span></span>  
  
-   <span data-ttu-id="62801-313">общие свойства, визуально воздействующие на элемент управления.</span><span class="sxs-lookup"><span data-stu-id="62801-313">The public properties that visually affect the control.</span></span>  
  
### <a name="visual-elements-in-the-control-contract"></a><span data-ttu-id="62801-314">Визуальные элементы в контракте элемента управления</span><span class="sxs-lookup"><span data-stu-id="62801-314">Visual Elements in the Control Contract</span></span>  
 <span data-ttu-id="62801-315">Иногда логика элемента управления взаимодействует с <xref:System.Windows.FrameworkElement> , находящийся в <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="62801-315">Sometimes a control's logic interacts with a <xref:System.Windows.FrameworkElement> that is in the <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="62801-316">Например, элемент управления может обрабатывать событие одного из своих элементов.</span><span class="sxs-lookup"><span data-stu-id="62801-316">For example, the control might handle an event of one of its elements.</span></span> <span data-ttu-id="62801-317">Если элемент управления ожидает найти определенный <xref:System.Windows.FrameworkElement> в <xref:System.Windows.Controls.ControlTemplate>, он должен предоставить эти данные для <xref:System.Windows.Controls.ControlTemplate> автора.</span><span class="sxs-lookup"><span data-stu-id="62801-317">When a control expects to find a particular <xref:System.Windows.FrameworkElement> in the <xref:System.Windows.Controls.ControlTemplate>, it must convey that information to the <xref:System.Windows.Controls.ControlTemplate> author.</span></span> <span data-ttu-id="62801-318">Элемент управления использует <xref:System.Windows.TemplatePartAttribute> для передачи типа элемента, которая ожидается и имя элемента, которое должно быть.</span><span class="sxs-lookup"><span data-stu-id="62801-318">The control uses the <xref:System.Windows.TemplatePartAttribute> to convey the type of element that is expected, and what the name of the element should be.</span></span> <span data-ttu-id="62801-319"><xref:System.Windows.Controls.Button> Не имеет <xref:System.Windows.FrameworkElement> частей в контракте элемента управления, но другие элементы управления, такие как <xref:System.Windows.Controls.ComboBox>, сделать.</span><span class="sxs-lookup"><span data-stu-id="62801-319">The <xref:System.Windows.Controls.Button> does not have <xref:System.Windows.FrameworkElement> parts in its control contract, but other controls, such as the <xref:System.Windows.Controls.ComboBox>, do.</span></span>  
  
 <span data-ttu-id="62801-320">В следующем примере показан <xref:System.Windows.TemplatePartAttribute> объекты, указанные на <xref:System.Windows.Controls.ComboBox> класса.</span><span class="sxs-lookup"><span data-stu-id="62801-320">The following example shows the <xref:System.Windows.TemplatePartAttribute> objects that are specified on the <xref:System.Windows.Controls.ComboBox> class.</span></span> <span data-ttu-id="62801-321">Логика <xref:System.Windows.Controls.ComboBox> ожидает найти <xref:System.Windows.Controls.TextBox> с именем `PART_EditableTextBox` и <xref:System.Windows.Controls.Primitives.Popup> с именем `PART_Popup` в его <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="62801-321">The logic of <xref:System.Windows.Controls.ComboBox> expects to find a <xref:System.Windows.Controls.TextBox> named `PART_EditableTextBox` and a <xref:System.Windows.Controls.Primitives.Popup> named `PART_Popup` in its <xref:System.Windows.Controls.ControlTemplate>.</span></span>  
  
 [!code-csharp[VSMButtonTemplate#ComboBoxContract](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/controlcontracts.cs#comboboxcontract)]
 [!code-vb[VSMButtonTemplate#ComboBoxContract](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/vsmbuttontemplate/visualbasic/window1.xaml.vb#comboboxcontract)]  
  
 <span data-ttu-id="62801-322">В следующем примере показан упрощенный <xref:System.Windows.Controls.ControlTemplate> для <xref:System.Windows.Controls.ComboBox> , включающий элементы, которые определяются <xref:System.Windows.TemplatePartAttribute> объектов на <xref:System.Windows.Controls.ComboBox> класса.</span><span class="sxs-lookup"><span data-stu-id="62801-322">The following example shows a simplified <xref:System.Windows.Controls.ControlTemplate> for the <xref:System.Windows.Controls.ComboBox> that includes the elements that are specified by the <xref:System.Windows.TemplatePartAttribute> objects on the <xref:System.Windows.Controls.ComboBox> class.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#ComboBoxTemplate](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/window1.xaml#comboboxtemplate)]  
  
### <a name="states-in-the-control-contract"></a><span data-ttu-id="62801-323">Состояния в контракте элемента управления</span><span class="sxs-lookup"><span data-stu-id="62801-323">States in the Control Contract</span></span>  
 <span data-ttu-id="62801-324">Состояния элемента управления также являются частью контракта элемента управления.</span><span class="sxs-lookup"><span data-stu-id="62801-324">The states of a control are also a part of the control contract.</span></span> <span data-ttu-id="62801-325">Пример создания <xref:System.Windows.Controls.ControlTemplate> для <xref:System.Windows.Controls.Button> показано, как задавать внешний вид <xref:System.Windows.Controls.Button> в зависимости от его состояния.</span><span class="sxs-lookup"><span data-stu-id="62801-325">The example of creating a <xref:System.Windows.Controls.ControlTemplate> for a <xref:System.Windows.Controls.Button> shows how to specify the appearance of a <xref:System.Windows.Controls.Button> depending on its states.</span></span> <span data-ttu-id="62801-326">Вы создаете <xref:System.Windows.VisualState> для каждого указанного состояния и переведите все <xref:System.Windows.VisualState> объекты, совместно использующие <xref:System.Windows.TemplateVisualStateAttribute.GroupName%2A> в <xref:System.Windows.VisualStateGroup>, как описано в [изменение внешнего вида элемента управления в зависимости от его состояния](#changing_the_appearance_of_a_control_depending_on_its_state) ранее в этом раздел.</span><span class="sxs-lookup"><span data-stu-id="62801-326">You create a <xref:System.Windows.VisualState> for each specified state and put all <xref:System.Windows.VisualState> objects that share a <xref:System.Windows.TemplateVisualStateAttribute.GroupName%2A> in a <xref:System.Windows.VisualStateGroup>, as described in [Changing the Appearance of a Control Depending on Its State](#changing_the_appearance_of_a_control_depending_on_its_state) earlier in this topic.</span></span> <span data-ttu-id="62801-327">Элементы управления сторонних поставщиков должны указывать состояния с помощью <xref:System.Windows.TemplateVisualStateAttribute>, который позволяет средствам разработки, таких как Expression Blend, для предоставления состояния элемента управления для создания шаблонов элементов управления.</span><span class="sxs-lookup"><span data-stu-id="62801-327">Third-party controls should specify states by using the <xref:System.Windows.TemplateVisualStateAttribute>, which enables designer tools, such as Expression Blend, to expose the control's states for authoring control templates.</span></span>  
  
 <span data-ttu-id="62801-328">Контракты элементов управления, включенных в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], в разделе [Стили и шаблоны элемента Control](../../../../docs/framework/wpf/controls/control-styles-and-templates.md).</span><span class="sxs-lookup"><span data-stu-id="62801-328">To find the control contract for controls that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Control Styles and Templates](../../../../docs/framework/wpf/controls/control-styles-and-templates.md).</span></span>  
  
### <a name="properties-in-the-control-contract"></a><span data-ttu-id="62801-329">Свойства в контракте элемента управления</span><span class="sxs-lookup"><span data-stu-id="62801-329">Properties in the Control Contract</span></span>  
 <span data-ttu-id="62801-330">Общие свойства, визуально влияющие на элемент управления, также включаются в контракт элемента управления.</span><span class="sxs-lookup"><span data-stu-id="62801-330">The public properties that visually affect the control are also included in the control contract.</span></span> <span data-ttu-id="62801-331">Можно задать эти свойства для изменения внешнего вида элемента управления без создания нового <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="62801-331">You can set these properties to change the appearance of the control without creating a new <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="62801-332">Можно также использовать [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md) расширение разметки, чтобы привязать свойства элементов, которые находятся в <xref:System.Windows.Controls.ControlTemplate> к общим свойствам, которые определены в <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="62801-332">You can also use the [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md) markup extension to bind properties of elements that are in the <xref:System.Windows.Controls.ControlTemplate> to public properties that are defined by the <xref:System.Windows.Controls.Button>.</span></span>  
  
 <span data-ttu-id="62801-333">В следующем примере показан контракт элемента управления "Кнопка".</span><span class="sxs-lookup"><span data-stu-id="62801-333">The following example shows the control contract for the button.</span></span>  
  
 [!code-csharp[VSMButtonTemplate#ButtonContract](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/controlcontracts.cs#buttoncontract)]
 [!code-vb[VSMButtonTemplate#ButtonContract](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/vsmbuttontemplate/visualbasic/window1.xaml.vb#buttoncontract)]  
  
 <span data-ttu-id="62801-334">При создании <xref:System.Windows.Controls.ControlTemplate>, часто бывает проще всего начать с существующего <xref:System.Windows.Controls.ControlTemplate> и вносить в него изменения.</span><span class="sxs-lookup"><span data-stu-id="62801-334">When creating a <xref:System.Windows.Controls.ControlTemplate>, it is often easiest to begin with an existing <xref:System.Windows.Controls.ControlTemplate> and make changes to it.</span></span> <span data-ttu-id="62801-335">Можно выполнить одно из следующих действий, чтобы изменить существующий <xref:System.Windows.Controls.ControlTemplate>:</span><span class="sxs-lookup"><span data-stu-id="62801-335">You can do one of the following to change an existing <xref:System.Windows.Controls.ControlTemplate>:</span></span>  
  
-   <span data-ttu-id="62801-336">Воспользоваться конструктором, таким как Expression Blend, который предоставляет графический пользовательский интерфейс для создания шаблонов элементов управления.</span><span class="sxs-lookup"><span data-stu-id="62801-336">Use a designer, such as Expression Blend, which provides a graphical user interface for creating control templates.</span></span> <span data-ttu-id="62801-337">Дополнительные сведения см. в статье [Настройка стиля элемента управления, поддерживающего шаблон](http://go.microsoft.com/fwlink/?LinkId=161153).</span><span class="sxs-lookup"><span data-stu-id="62801-337">For more information, see [Styling a control that supports templates](http://go.microsoft.com/fwlink/?LinkId=161153).</span></span>  
  
-   <span data-ttu-id="62801-338">Получить значение по умолчанию <xref:System.Windows.Controls.ControlTemplate> и изменить его.</span><span class="sxs-lookup"><span data-stu-id="62801-338">Get the default <xref:System.Windows.Controls.ControlTemplate> and edit it.</span></span> <span data-ttu-id="62801-339">Шаблоны элементов управления по умолчанию, включенных в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], см. в документе [Default WPF Themes](http://go.microsoft.com/fwlink/?LinkID=158252).</span><span class="sxs-lookup"><span data-stu-id="62801-339">To find the default control templates that are included with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Default WPF Themes](http://go.microsoft.com/fwlink/?LinkID=158252).</span></span>  
  
<a name="complete_example"></a>   
## <a name="complete-example"></a><span data-ttu-id="62801-340">Полный пример</span><span class="sxs-lookup"><span data-stu-id="62801-340">Complete Example</span></span>  
 <span data-ttu-id="62801-341">В следующем примере показано полное <xref:System.Windows.Controls.Button> <xref:System.Windows.Controls.ControlTemplate> , обсуждаются в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="62801-341">The following example shows the complete <xref:System.Windows.Controls.Button><xref:System.Windows.Controls.ControlTemplate> that is discussed in this topic.</span></span>  
  
 [!code-xaml[VSMButtonTemplate#3](../../../../samples/snippets/csharp/VS_Snippets_Wpf/vsmbuttontemplate/csharp/skinnedbutton.xaml#3)]  
  
## <a name="see-also"></a><span data-ttu-id="62801-342">См. также</span><span class="sxs-lookup"><span data-stu-id="62801-342">See Also</span></span>  
 [<span data-ttu-id="62801-343">Стилизация и использование шаблонов</span><span class="sxs-lookup"><span data-stu-id="62801-343">Styling and Templating</span></span>](../../../../docs/framework/wpf/controls/styling-and-templating.md)
