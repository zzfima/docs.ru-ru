---
title: Рекомендации по разработке элементов управления с возможностью использования стилей
ms.date: 03/30/2017
helpviewer_keywords:
- style design for controls [WPF]
- controls [WPF], style design
ms.assetid: c52dde45-a311-4531-af4c-853371c4d5f4
ms.openlocfilehash: 0fbb515afbeac05168ced6f0a99f50eb29a5c848
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/03/2019
ms.locfileid: "73459660"
---
# <a name="guidelines-for-designing-stylable-controls"></a><span data-ttu-id="1b4ab-102">Рекомендации по разработке элементов управления с возможностью использования стилей</span><span class="sxs-lookup"><span data-stu-id="1b4ab-102">Guidelines for Designing Stylable Controls</span></span>

<span data-ttu-id="1b4ab-103">В этом документе содержатся рекомендации по разработке элементов управления, стили и шаблоны которых можно с легкостью изменять.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-103">This document summarizes a set of best practices to consider when designing a control which you intend to be easily stylable and templatable.</span></span> <span data-ttu-id="1b4ab-104">Эти рекомендации являются результатом продолжительного периода проб и ошибок при работе над стилями тем оформления для встроенного набора элементов управления [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1b4ab-104">We came to this set of best practices through a lot of trial and error while working on the theme control styles for the built-in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] control set.</span></span> <span data-ttu-id="1b4ab-105">Было выяснено, что успешное изменение стилей зависит как от хорошо спроектированной объектной модели, так и самого стиля.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-105">We learned that successful styling is as much a function of a well-designed object model as it is of the style itself.</span></span> <span data-ttu-id="1b4ab-106">Данный документ предназначен именно для разработчиков элементов управления, а не для разработчиков стилей.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-106">The intended audience for this document is the control author, not the style author.</span></span>

<a name="Terminology"></a>

## <a name="terminology"></a><span data-ttu-id="1b4ab-107">Терминология</span><span class="sxs-lookup"><span data-stu-id="1b4ab-107">Terminology</span></span>

<span data-ttu-id="1b4ab-108">Термин "использование стилей и шаблонов" относится к набору технологий, позволяющих разработчику элементов управления отложить разработку визуальных характеристик элемента управления на этап разработки стилей и шаблонов элемента управления.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-108">"Styling and templating" refer to the suite of technologies that enable a control author to defer the visual aspects of the control to the style and template of the control.</span></span> <span data-ttu-id="1b4ab-109">Такой набор технологий включает следующее:</span><span class="sxs-lookup"><span data-stu-id="1b4ab-109">This suite of technologies includes:</span></span>

- <span data-ttu-id="1b4ab-110">стили (включая методы задания свойств, триггеры и раскадровки);</span><span class="sxs-lookup"><span data-stu-id="1b4ab-110">Styles (including property setters, triggers, and storyboards).</span></span>

- <span data-ttu-id="1b4ab-111">ресурсы;</span><span class="sxs-lookup"><span data-stu-id="1b4ab-111">Resources.</span></span>

- <span data-ttu-id="1b4ab-112">шаблоны элементов управления;</span><span class="sxs-lookup"><span data-stu-id="1b4ab-112">Control templates.</span></span>

- <span data-ttu-id="1b4ab-113">шаблоны данных.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-113">Data templates.</span></span>

<span data-ttu-id="1b4ab-114">Вводная информация, касающаяся стилей и шаблонов, представлена в разделе [Стилизация и использование шаблонов](../../../desktop-wpf/fundamentals/styles-templates-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1b4ab-114">For an introduction to styling and templating, see [Styling and Templating](../../../desktop-wpf/fundamentals/styles-templates-overview.md).</span></span>

<a name="Before_You_Start__Understanding_Your_Control"></a>

## <a name="before-you-start-understanding-your-control"></a><span data-ttu-id="1b4ab-115">Перед началом работы: общие сведения об элементе управления</span><span class="sxs-lookup"><span data-stu-id="1b4ab-115">Before You Start: Understanding Your Control</span></span>

<span data-ttu-id="1b4ab-116">Прежде чем перейти к рекомендациям, важно понять и определить типичные способы использования элементов управления.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-116">Before you jump into these guidelines, it is important to understand and have defined the common usage of your control.</span></span> <span data-ttu-id="1b4ab-117">Зачастую стили предоставляют неуправляемый набор возможностей.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-117">Styling exposes an often unruly set of possibilities.</span></span> <span data-ttu-id="1b4ab-118">Проблема элементов управления, написанных для широкого применения (многими разработчиками, во многих приложениях), состоит в том, что стили можно использовать для масштабных изменений внешнего вида элементов управления.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-118">Controls that are written to be used broadly (in many applications, by many developers) face the challenge that styling can be used to make far-reaching changes to the visual appearance of the control.</span></span> <span data-ttu-id="1b4ab-119">На самом же деле элемент управления, к которому применен стиль, может не соответствовать замыслу разработчика.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-119">In fact, the styled control may not even resemble the control author's intentions.</span></span> <span data-ttu-id="1b4ab-120">Поскольку стили по сути представляют безграничную гибкость, можно использовать подход, подразумевающий типичные способы их использования, чтобы ограничить область их применения.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-120">Since the flexibility offered by styling is essentially boundless, you can use the idea of common usage to help you scope your decisions.</span></span>

<span data-ttu-id="1b4ab-121">Чтобы понять, какие существуют типичные способы использования элементов управления, можно рассмотреть область значений, предоставляемых элементом управления.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-121">To understand your control's common usage, it's good to think about the value proposition of the control.</span></span> <span data-ttu-id="1b4ab-122">Какие специфические свойства отличают конкретный элемент управления от всех остальных?</span><span class="sxs-lookup"><span data-stu-id="1b4ab-122">What does your control bring to the table that no other control can offer?</span></span> <span data-ttu-id="1b4ab-123">Типичные способы использования не подразумевают какой-либо определенный внешний вид, они подразумевают концепцию элемента управления и соответствующий набор ожидаемых функций.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-123">Common usage does not imply any specific visual appearance, but rather the philosophy of the control and a reasonable set of expectations about its usage.</span></span> <span data-ttu-id="1b4ab-124">В этом свете можно сделать некоторые предположения о структурной модели и поведении элемента управления в соответствии с примененным стилем в общем случае.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-124">This understanding allows you to make some assumptions about the composition model and the style-defined behaviors of the control in the common case.</span></span> <span data-ttu-id="1b4ab-125">В случае <xref:System.Windows.Controls.ComboBox>, например, понимание общего использования не даст вам никакого представления о том, есть ли в конкретном <xref:System.Windows.Controls.ComboBox> скругленные углы, но это даст вам представление о том, что <xref:System.Windows.Controls.ComboBox>, возможно, потребуется всплывающее окно, а также какой-либо способ Переключение того, открыт ли он.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-125">In the case of <xref:System.Windows.Controls.ComboBox>, for example, understanding the common usage won't give you any insight about whether a particular <xref:System.Windows.Controls.ComboBox> has rounded corners, but it will give you insight into the fact that the <xref:System.Windows.Controls.ComboBox> probably needs a pop-up window and some way of toggling whether it is open.</span></span>

<a name="General_Guidelines"></a>

## <a name="general-guidelines"></a><span data-ttu-id="1b4ab-126">Общие рекомендации</span><span class="sxs-lookup"><span data-stu-id="1b4ab-126">General Guidelines</span></span>

- <span data-ttu-id="1b4ab-127">**Не вводите строгие контракты шаблонов.**</span><span class="sxs-lookup"><span data-stu-id="1b4ab-127">**Do not strictly enforce template contracts.**</span></span> <span data-ttu-id="1b4ab-128">Контракт шаблона элемента управления может состоять из элементов, команд, привязок, триггеров или даже параметров свойств, которые требуются или ожидаются для правильного функционирования элемента управления.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-128">The template contract of a control might consist of elements, commands, bindings, triggers, or even property settings that are required or expected for a control to function properly.</span></span>

  - <span data-ttu-id="1b4ab-129">Минимизируйте контракты, насколько возможно.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-129">Minimize contracts as much as possible.</span></span>

  - <span data-ttu-id="1b4ab-130">При разработке основывайтесь на факте, что во время разработки (то есть при использовании средства разработки) для шаблона элемента управления естественным является состояние незавершенности.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-130">Design around the expectation that during design time (that is, when using a design tool) it is common for a control template to be in an incomplete state.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="1b4ab-131">не поддерживает инфраструктуру состояния составления, поэтому элементы управления нужно создавать, предполагая, что такое состояние может допускаться.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-131">does not offer a "composing" state infrastructure, so controls have to be built with the expectation that such a state might be valid.</span></span>

  - <span data-ttu-id="1b4ab-132">Не следует генерировать исключения, если не выполняется какой-либо аспект контракта шаблона.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-132">Do not throw exceptions when any aspect of a template contract is not followed.</span></span> <span data-ttu-id="1b4ab-133">Согласно этому, панели не должны вызывать исключения, если у них слишком много или слишком мало дочерних элементов.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-133">Along these lines, panels should not throw exceptions if they have too many or too few children.</span></span>

- <span data-ttu-id="1b4ab-134">**Периферийная функциональность в шаблонных вспомогательных элементах по категориям.**</span><span class="sxs-lookup"><span data-stu-id="1b4ab-134">**Factor peripheral functionality into template helper elements.**</span></span> <span data-ttu-id="1b4ab-135">Каждый элемент управления должен концентрироваться на функциональных возможностях его ядра и на верном представлении ценности и определяться общим использованием элемента управления.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-135">Each control should be focused on its core functionality and true value proposition and defined by the control's common usage.</span></span> <span data-ttu-id="1b4ab-136">Для этого используйте в шаблоне композицию и вспомогательные элементы, чтобы предоставить периферийные проявления и визуализации, т. е. модели поведения и визуализации, которые не относятся к основной функциональности элемента управления.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-136">To that end, use composition and helper elements within the template to enable peripheral behaviors and visualizations, that is, those behaviors and visualizations that do not contribute to the core functionality of the control.</span></span> <span data-ttu-id="1b4ab-137">Вспомогательные элементы делятся на три категории.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-137">Helper elements fall into three categories:</span></span>

  - <span data-ttu-id="1b4ab-138">**Изолированные** вспомогательные элементы — это повторно используемые общедоступные элементы управления или примитивы, используемые в шаблоне "анонимно", в том смысле что ни вспомогательный элемент, ни элемент управления с примененным стилем не знают друг о друге.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-138">**Standalone** helper types are public and reusable controls or primitives that are used "anonymously" in a template, meaning that neither the helper element nor the styled control is aware of the other.</span></span> <span data-ttu-id="1b4ab-139">С технической точки зрения любой элемент может быть анонимного типа, но в данном контексте этот термин описывает типы, которые инкапсулируют специализированные функции для выполнения целевых сценариев.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-139">Technically, any element can be an anonymous type, but in this context the term describes those types that encapsulate specialized functionality to enable targeted scenarios.</span></span>

  - <span data-ttu-id="1b4ab-140">**Основанные на типах** вспомогательные элементы — это новые типы, инкапсулирующие специализированные функции.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-140">**Type-based** helper elements are new types that encapsulate specialized functionality.</span></span> <span data-ttu-id="1b4ab-141">Эти элементы обычно разрабатываются с более узким диапазоном функциональных возможностей, чем стандартные элементы управления и примитивы.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-141">These elements are typically designed with a narrower range of functionality than common controls or primitives.</span></span> <span data-ttu-id="1b4ab-142">В отличие от изолированных вспомогательных элементов основанные на типах вспомогательные элементы имеют сведения о контексте, в котором используются, и обычно должны использовать общие данные с элементом управления, к шаблону которого они относятся.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-142">Unlike standalone helper elements, type-based helper elements are aware of the context in which they are used and typically must share data with the control to whose template they belong.</span></span>

  - <span data-ttu-id="1b4ab-143">**Именованные вспомогательные элементы** являются общими элементами управления или примитивами, которые элемент управления ожидает найти в своем шаблоне по имени.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-143">**Named** helper elements are common controls or primitives that a control expects to find within its template by name.</span></span> <span data-ttu-id="1b4ab-144">Таким элементам присваиваются известные имена в шаблоне, что дает элементу управления возможность найти элемент и взаимодействовать с ним программным способом.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-144">These elements are given a well-known name within the template, making it possible for a control to find the element and interact with it programmatically.</span></span> <span data-ttu-id="1b4ab-145">Имена всех элементов в шаблоне уникальные.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-145">There can only be one element with a given name in any template.</span></span>

  <span data-ttu-id="1b4ab-146">В таблице ниже иллюстрируется современное использование вспомогательных элементов в стилях элементов управления (данный список не является полным).</span><span class="sxs-lookup"><span data-stu-id="1b4ab-146">The following table shows helper elements employed by control styles today (this list is not exhaustive):</span></span>

  |<span data-ttu-id="1b4ab-147">Элемент</span><span class="sxs-lookup"><span data-stu-id="1b4ab-147">Element</span></span>|<span data-ttu-id="1b4ab-148">Type</span><span class="sxs-lookup"><span data-stu-id="1b4ab-148">Type</span></span>|<span data-ttu-id="1b4ab-149">Где используется</span><span class="sxs-lookup"><span data-stu-id="1b4ab-149">Used by</span></span>|
  |-------------|----------|-------------|
  |<xref:System.Windows.Controls.ContentPresenter>|<span data-ttu-id="1b4ab-150">Основанные на типе</span><span class="sxs-lookup"><span data-stu-id="1b4ab-150">Type-based</span></span>|<span data-ttu-id="1b4ab-151"><xref:System.Windows.Controls.Button>, <xref:System.Windows.Controls.CheckBox>, <xref:System.Windows.Controls.RadioButton>, <xref:System.Windows.Controls.Frame>и т. д. (все типы <xref:System.Windows.Controls.ContentControl>)</span><span class="sxs-lookup"><span data-stu-id="1b4ab-151"><xref:System.Windows.Controls.Button>, <xref:System.Windows.Controls.CheckBox>, <xref:System.Windows.Controls.RadioButton>, <xref:System.Windows.Controls.Frame>, and so on (all <xref:System.Windows.Controls.ContentControl> types)</span></span>|
  |<xref:System.Windows.Controls.ItemsPresenter>|<span data-ttu-id="1b4ab-152">Основанные на типе</span><span class="sxs-lookup"><span data-stu-id="1b4ab-152">Type-based</span></span>|<span data-ttu-id="1b4ab-153"><xref:System.Windows.Controls.ListBox>, <xref:System.Windows.Controls.ComboBox>, <xref:System.Windows.Controls.Menu>и т. д. (все типы <xref:System.Windows.Controls.ItemsControl>)</span><span class="sxs-lookup"><span data-stu-id="1b4ab-153"><xref:System.Windows.Controls.ListBox>, <xref:System.Windows.Controls.ComboBox>, <xref:System.Windows.Controls.Menu>, and so on (all <xref:System.Windows.Controls.ItemsControl> types)</span></span>|
  |<xref:System.Windows.Controls.Primitives.ToolBarOverflowPanel>|<span data-ttu-id="1b4ab-154">Именованные</span><span class="sxs-lookup"><span data-stu-id="1b4ab-154">Named</span></span>|<xref:System.Windows.Controls.ToolBar>|
  |<xref:System.Windows.Controls.Primitives.Popup>|<span data-ttu-id="1b4ab-155">Автономные</span><span class="sxs-lookup"><span data-stu-id="1b4ab-155">Standalone</span></span>|<span data-ttu-id="1b4ab-156"><xref:System.Windows.Controls.ComboBox>, <xref:System.Windows.Controls.ToolBar>, <xref:System.Windows.Controls.Menu>, <xref:System.Windows.Controls.ToolTip>и т. д.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-156"><xref:System.Windows.Controls.ComboBox>, <xref:System.Windows.Controls.ToolBar>, <xref:System.Windows.Controls.Menu>, <xref:System.Windows.Controls.ToolTip>, and so on</span></span>|
  |<xref:System.Windows.Controls.Primitives.RepeatButton>|<span data-ttu-id="1b4ab-157">Именованные</span><span class="sxs-lookup"><span data-stu-id="1b4ab-157">Named</span></span>|<span data-ttu-id="1b4ab-158"><xref:System.Windows.Controls.Slider>, <xref:System.Windows.Controls.Primitives.ScrollBar>и т. д.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-158"><xref:System.Windows.Controls.Slider>, <xref:System.Windows.Controls.Primitives.ScrollBar>, and so on</span></span>|
  |<xref:System.Windows.Controls.Primitives.ScrollBar>|<span data-ttu-id="1b4ab-159">Именованные</span><span class="sxs-lookup"><span data-stu-id="1b4ab-159">Named</span></span>|<xref:System.Windows.Controls.ScrollViewer>|
  |<xref:System.Windows.Controls.ScrollViewer>|<span data-ttu-id="1b4ab-160">Автономные</span><span class="sxs-lookup"><span data-stu-id="1b4ab-160">Standalone</span></span>|<span data-ttu-id="1b4ab-161"><xref:System.Windows.Controls.ListBox>, <xref:System.Windows.Controls.ComboBox>, <xref:System.Windows.Controls.Menu>, <xref:System.Windows.Controls.Frame>и т. д.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-161"><xref:System.Windows.Controls.ListBox>, <xref:System.Windows.Controls.ComboBox>, <xref:System.Windows.Controls.Menu>, <xref:System.Windows.Controls.Frame>, and so on</span></span>|
  |<xref:System.Windows.Controls.Primitives.TabPanel>|<span data-ttu-id="1b4ab-162">Автономные</span><span class="sxs-lookup"><span data-stu-id="1b4ab-162">Standalone</span></span>|<xref:System.Windows.Controls.TabControl>|
  |<xref:System.Windows.Controls.TextBox>|<span data-ttu-id="1b4ab-163">Именованные</span><span class="sxs-lookup"><span data-stu-id="1b4ab-163">Named</span></span>|<xref:System.Windows.Controls.ComboBox>|
  |<xref:System.Windows.Controls.Primitives.TickBar>|<span data-ttu-id="1b4ab-164">Основанные на типе</span><span class="sxs-lookup"><span data-stu-id="1b4ab-164">Type-based</span></span>|<xref:System.Windows.Controls.Slider>|

- <span data-ttu-id="1b4ab-165">**Минимизируйте необходимые во вспомогательных элементах определяемые пользователем привязки или параметры свойств**.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-165">**Minimize required user-specified bindings or property settings on helper elements**.</span></span> <span data-ttu-id="1b4ab-166">Обычно для вспомогательного элемента необходимы некоторые привязки или параметры свойств, гарантирующие его правильную работу в шаблоне элемента управления.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-166">It is common for a helper element to require certain bindings or property settings in order to function properly within the control template.</span></span> <span data-ttu-id="1b4ab-167">Вспомогательный элемент и элемент управления шаблон должны устанавливать эти параметры, насколько это возможно.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-167">The helper element and templated control should, as much as possible, establish these settings.</span></span> <span data-ttu-id="1b4ab-168">При задании свойств или установке привязок следует соблюдать осторожность, чтобы не переопределить значения, установленные пользователем.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-168">When setting properties or establishing bindings, care should be taken to not override values set by the user.</span></span> <span data-ttu-id="1b4ab-169">Ниже приведены конкретные рекомендации.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-169">Specific best practices are as follows:</span></span>

  - <span data-ttu-id="1b4ab-170">Именованные вспомогательные элементы должны идентифицироваться по родительскому элементу, который должен устанавливать все необходимые параметры вспомогательного элемента.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-170">Named helper elements should be identified by the parent and the parent should establish any required settings on the helper element.</span></span>

  - <span data-ttu-id="1b4ab-171">Основанные на типах вспомогательные элементы должны непосредственно устанавливать себе все необходимые параметры.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-171">Type-based helper elements should establish any required settings directly on themselves.</span></span> <span data-ttu-id="1b4ab-172">Это может потребовать запроса вспомогательным элементом информационного контекста, в котором он используется, включая его `TemplatedParent` (тип элемента управления для шаблона, в котором он используется).</span><span class="sxs-lookup"><span data-stu-id="1b4ab-172">Doing this may require the helper element to query for information context in which it is being used, including its `TemplatedParent` (the control type of the template in which it is being used).</span></span> <span data-ttu-id="1b4ab-173">Например, <xref:System.Windows.Controls.ContentPresenter> автоматически привязывает `Content` свойство его `TemplatedParent` к свойству <xref:System.Windows.Controls.ContentPresenter.Content%2A> при использовании в производном типе <xref:System.Windows.Controls.ContentControl>.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-173">For example, <xref:System.Windows.Controls.ContentPresenter> automatically binds the `Content` property of its `TemplatedParent` to its <xref:System.Windows.Controls.ContentPresenter.Content%2A> property when used in a <xref:System.Windows.Controls.ContentControl> derived type.</span></span>

  - <span data-ttu-id="1b4ab-174">Изолированные вспомогательные элементы не могут быть оптимизированы таким образом, так как по определению ни вспомогательный элемент, ни родительский элемент не знают друг о друге.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-174">Standalone helper elements cannot be optimized in this way because, by definition, neither the helper element nor the parent knows about the other.</span></span>

- <span data-ttu-id="1b4ab-175">**Используйте свойство Name, чтобы пометить элементы внутри шаблона**.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-175">**Use the Name property to flag elements within a template**.</span></span> <span data-ttu-id="1b4ab-176">Элемент управления, которому необходимо найти элемент в его стиле для программного доступа к нему, должен для этого использовать свойство `Name` и парадигму `FindName`.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-176">A control that needs to find an element in its style in order to access it programmatically should do so using the `Name` property and the `FindName` paradigm.</span></span> <span data-ttu-id="1b4ab-177">Элемент управления не должен вызывать исключение, когда элемент не найден, он должен без вмешательства пользователя корректно отключить функциональные возможности, которым требуется этот элемент.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-177">A control should not throw an exception when an element is not found, but silently and gracefully disable the functionality which required that element.</span></span>

- <span data-ttu-id="1b4ab-178">**Используйте советы и рекомендации для задания состояния элемента управления и поведения в стиле**.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-178">**Use best practices for expressing control state and behavior in a style.**</span></span> <span data-ttu-id="1b4ab-179">Ниже приведен упорядоченный список советов и рекомендаций по заданию изменений состояния элемента управления и поведения в стиле.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-179">The following is an ordered list of best practices for expressing control state changes and behavior in a style.</span></span> <span data-ttu-id="1b4ab-180">Следует использовать первый элемент в списке, который разрешает сценарий.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-180">You should use the first item on the list that enables your scenario.</span></span>

  1. <span data-ttu-id="1b4ab-181">Привязка свойства.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-181">Property binding.</span></span> <span data-ttu-id="1b4ab-182">Пример. привязка между <xref:System.Windows.Controls.ComboBox.IsDropDownOpen%2A?displayProperty=nameWithType> и <xref:System.Windows.Controls.Primitives.ToggleButton.IsChecked%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-182">Example: binding between <xref:System.Windows.Controls.ComboBox.IsDropDownOpen%2A?displayProperty=nameWithType> and <xref:System.Windows.Controls.Primitives.ToggleButton.IsChecked%2A?displayProperty=nameWithType>.</span></span>

  2. <span data-ttu-id="1b4ab-183">Вызванные изменения свойств или анимация свойств.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-183">Triggered property changes or property animations.</span></span> <span data-ttu-id="1b4ab-184">Пример. состояние наведения <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-184">Example: the hover state of a <xref:System.Windows.Controls.Button>.</span></span>

  3. <span data-ttu-id="1b4ab-185">Команда.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-185">Command.</span></span> <span data-ttu-id="1b4ab-186">Пример: <xref:System.Windows.Controls.Primitives.ScrollBar.LineUpCommand> / <xref:System.Windows.Controls.Primitives.ScrollBar.LineDownCommand> в <xref:System.Windows.Controls.Primitives.ScrollBar>.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-186">Example: <xref:System.Windows.Controls.Primitives.ScrollBar.LineUpCommand> / <xref:System.Windows.Controls.Primitives.ScrollBar.LineDownCommand> in <xref:System.Windows.Controls.Primitives.ScrollBar>.</span></span>

  4. <span data-ttu-id="1b4ab-187">Изолированные вспомогательные элементы.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-187">Standalone helper elements.</span></span> <span data-ttu-id="1b4ab-188">Пример: <xref:System.Windows.Controls.Primitives.TabPanel> в <xref:System.Windows.Controls.TabControl>.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-188">Example: <xref:System.Windows.Controls.Primitives.TabPanel> in <xref:System.Windows.Controls.TabControl>.</span></span>

  5. <span data-ttu-id="1b4ab-189">Вспомогательные типы, основанные на типах.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-189">Type-based helper types.</span></span> <span data-ttu-id="1b4ab-190">Пример: <xref:System.Windows.Controls.ContentPresenter> в <xref:System.Windows.Controls.Button><xref:System.Windows.Controls.Primitives.TickBar> в <xref:System.Windows.Controls.Slider>.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-190">Example: <xref:System.Windows.Controls.ContentPresenter> in <xref:System.Windows.Controls.Button>, <xref:System.Windows.Controls.Primitives.TickBar> in <xref:System.Windows.Controls.Slider>.</span></span>

  6. <span data-ttu-id="1b4ab-191">Именованные вспомогательные элементы.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-191">Named helper elements.</span></span> <span data-ttu-id="1b4ab-192">Пример: <xref:System.Windows.Controls.TextBox> в <xref:System.Windows.Controls.ComboBox>.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-192">Example: <xref:System.Windows.Controls.TextBox> in <xref:System.Windows.Controls.ComboBox>.</span></span>

  7. <span data-ttu-id="1b4ab-193">Передающиеся вверх события именованных вспомогательных типов.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-193">Bubbled events from named helper types.</span></span> <span data-ttu-id="1b4ab-194">Если ожидать от элемента стиля передающихся вверх событий, следует потребовать, чтобы элемент, вызывающий событие, мог быть идентифицирован уникальным образом.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-194">If you listen for bubbled events from a style element, you should require that the element generating the event can be uniquely identified.</span></span> <span data-ttu-id="1b4ab-195">Пример: <xref:System.Windows.Controls.Primitives.Thumb> в <xref:System.Windows.Controls.ToolBar>.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-195">Example: <xref:System.Windows.Controls.Primitives.Thumb> in <xref:System.Windows.Controls.ToolBar>.</span></span>

  8. <span data-ttu-id="1b4ab-196">Настраиваемое поведение `OnRender`.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-196">Custom `OnRender` behavior.</span></span> <span data-ttu-id="1b4ab-197">Пример: <xref:Microsoft.Windows.Themes.ButtonChrome> в <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-197">Example: <xref:Microsoft.Windows.Themes.ButtonChrome> in <xref:System.Windows.Controls.Button>.</span></span>

- <span data-ttu-id="1b4ab-198">**Как можно реже используйте триггеры стиля (в отличие от триггеров шаблона)** .</span><span class="sxs-lookup"><span data-stu-id="1b4ab-198">**Use style triggers (as opposed to template triggers) sparingly**.</span></span> <span data-ttu-id="1b4ab-199">Триггеры, которые влияют на свойства элементов в шаблоне, должны быть объявлены в шаблоне.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-199">Triggers that affect properties on elements in the template must be declared in the template.</span></span> <span data-ttu-id="1b4ab-200">Триггеры, которые влияют на свойства элемента управления (не `TargetName`), могут быть объявлены в стиле, если только не известно, что при изменении шаблона триггер уничтожится.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-200">Triggers that affect properties on the control (no `TargetName`) may be declared in the style unless you know that changing the template should also destroy the trigger.</span></span>

- <span data-ttu-id="1b4ab-201">**Поддерживайте согласованность с существующими шаблонами стилей**.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-201">**Be consistent with existing styling patterns.**</span></span> <span data-ttu-id="1b4ab-202">Зачастую существуют различные способы решения проблемы.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-202">Many times there are multiple ways to solve a problem.</span></span> <span data-ttu-id="1b4ab-203">Следите за шаблонами стилей элементов управления и, если возможно, обеспечивайте согласованность с существующими шаблонами стилей элементов управления.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-203">Be aware of and, when possible, consistent with existing control styling patterns.</span></span> <span data-ttu-id="1b4ab-204">Это особенно важно для элементов управления, которые являются производными от того же базового типа (например, <xref:System.Windows.Controls.ContentControl>, <xref:System.Windows.Controls.ItemsControl>, <xref:System.Windows.Controls.Primitives.RangeBase>и т. д.).</span><span class="sxs-lookup"><span data-stu-id="1b4ab-204">This is especially important for controls that derive from the same base type (for example, <xref:System.Windows.Controls.ContentControl>, <xref:System.Windows.Controls.ItemsControl>, <xref:System.Windows.Controls.Primitives.RangeBase>, and so on).</span></span>

- <span data-ttu-id="1b4ab-205">**Предоставляйте свойства, чтобы разрешить выполнение общих сценариев настройки без создания новых шаблонов**.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-205">**Expose properties to enable common customization scenarios without retemplating**.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="1b4ab-206">не поддерживает подключаемые/настраиваемые части, поэтому пользователю элемента управления доступны только два метода настройки: непосредственная установка свойств или установка свойств с использованием стилей.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-206">does not support pluggable/customizable parts, so a control user is left with only two methods of customization: setting properties directly or setting properties using styles.</span></span> <span data-ttu-id="1b4ab-207">Исходя из этого, удобно предоставлять ограниченное количество свойств, нацеленных на очень общие, высокоприоритетные сценарии настройки, которые в противном случае потребуют создания новых шаблонов.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-207">With that in mind, it is appropriate to surface a limited number of properties targeted at very common, high-priority customization scenarios which would otherwise require the retemplating.</span></span> <span data-ttu-id="1b4ab-208">Ниже приведены советы и рекомендации по тому, когда и как разрешать сценарии настройки.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-208">Here are best practices for when and how to enable customization scenarios:</span></span>

  - <span data-ttu-id="1b4ab-209">Самые общие настройки должны быть предоставлены как свойства элемента управления и использоваться шаблоном.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-209">Very common customizations should be exposed as properties on the control and consumed by the template.</span></span>

  - <span data-ttu-id="1b4ab-210">Менее общие (хотя нередкие) настройки должны быть предоставлены как вложенные свойства зависимостей и использоваться шаблоном.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-210">Less common (though not rare) customizations should be exposed as attached properties and consumed by the template.</span></span>

  - <span data-ttu-id="1b4ab-211">Для известных, но редких настроек допустимо создание новых шаблонов.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-211">It is acceptable for known but rare customizations to require retemplating.</span></span>

<a name="Theme_Considerations"></a>

## <a name="theme-considerations"></a><span data-ttu-id="1b4ab-212">Рекомендации касательно тем</span><span class="sxs-lookup"><span data-stu-id="1b4ab-212">Theme Considerations</span></span>

- <span data-ttu-id="1b4ab-213">**Стили тем должны стремиться к согласованной семантике свойств во всех темах, но ничего не гарантировать**.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-213">**Theme styles should attempt to have consistent property semantics across all themes, but make no guarantee**.</span></span> <span data-ttu-id="1b4ab-214">Элемент управления должен содержать в своей документации документ, описывающий семантику свойства элемента управления, то есть "значение" свойства для элемента управления.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-214">As part of its documentation, your control should have a document describing the control's property semantics, that is, the "meaning" of a property for a control.</span></span> <span data-ttu-id="1b4ab-215">Например, элемент управления <xref:System.Windows.Controls.ComboBox> должен определять значение свойства <xref:System.Windows.Controls.Control.Background%2A> в <xref:System.Windows.Controls.ComboBox>.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-215">For example, the <xref:System.Windows.Controls.ComboBox> control should define the meaning of the <xref:System.Windows.Controls.Control.Background%2A> property within <xref:System.Windows.Controls.ComboBox>.</span></span> <span data-ttu-id="1b4ab-216">Во всех темах стили по умолчанию для элемента управления должны стремиться следовать семантике, определенной в этом документе.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-216">The default styles for your control should attempt to follow the semantics defined in that document across all themes.</span></span> <span data-ttu-id="1b4ab-217">С другой стороны, пользователи элемента управления должны знать, что семантика свойств может меняться от темы к теме.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-217">Control users, on the other hand, should be aware that property semantics can change from theme to theme.</span></span> <span data-ttu-id="1b4ab-218">В некоторых случаях заданное свойство может оказаться неэффективным с учетом визуальных ограничений, накладываемых конкретной темой.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-218">In certain cases, a given property may not be expressible under the visual constraints required by a particular theme.</span></span> <span data-ttu-id="1b4ab-219">(Например, для многих элементов управления в классической теме нет одинарной границы, к которой можно применить `Thickness`.)</span><span class="sxs-lookup"><span data-stu-id="1b4ab-219">(The Classic theme, for example, does not have a single border to which `Thickness` can be applied for many controls.)</span></span>

- <span data-ttu-id="1b4ab-220">**Для стилей тем не требуется согласованная для всех тем триггерная семантика**.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-220">**Theme styles do not need to have consistent trigger semantics across all themes**.</span></span> <span data-ttu-id="1b4ab-221">Поведение, предоставляемое стилем элемента управления с помощью триггеров или анимации, может меняться от темы к теме.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-221">The behavior exposed by a control style through triggers or animations may vary from theme to theme.</span></span> <span data-ttu-id="1b4ab-222">Пользователям элемента управления следует помнить, что элемент управления не обязательно будет использовать во всех темах один и тот же механизм для достижения определенного поведения.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-222">Control users should be aware that a control will not necessarily employ the same mechanism to achieve a particular behavior across all themes.</span></span> <span data-ttu-id="1b4ab-223">Например, для выражения поведения при наведении указателя мыши одна тема может использовать анимацию, а другая может использовать триггер.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-223">One theme, for example, may use an animation to express hover behavior where another theme uses a trigger.</span></span> <span data-ttu-id="1b4ab-224">Это может привести к несогласованности в сохранении поведения настроенных элементов управления.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-224">This can result in inconsistencies in behavior preservation on customized controls.</span></span> <span data-ttu-id="1b4ab-225">(Например, изменение свойства фона может не повлиять на состояние нахождения элемента управления под наведенным указателем мыши, если это состояние обеспечивается с помощью триггера.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-225">(Changing the background property, for example, might not affect the hover state of the control if that state is expressed using a trigger.</span></span> <span data-ttu-id="1b4ab-226">Однако если такое состояние реализовано с использованием анимации, изменение фона может привести к неисправимым ошибкам анимации и, следовательно, к смене состояния.)</span><span class="sxs-lookup"><span data-stu-id="1b4ab-226">However, if the hover state is implemented using an animation, changing to background could irreparably break the animation and therefore the state transition.)</span></span>

- <span data-ttu-id="1b4ab-227">**Для стилей тем не требуется согласованной для всех тем семантики "макета"** .</span><span class="sxs-lookup"><span data-stu-id="1b4ab-227">**Theme styles do not need to have consistent "layout" semantics across all themes**.</span></span> <span data-ttu-id="1b4ab-228">Например, стиль по умолчанию не должен гарантировать, что элемент управления будет иметь тот же размер во всех темах или что у него во всех темах будут те же границы/поля содержимого.</span><span class="sxs-lookup"><span data-stu-id="1b4ab-228">For example, the default style does not need to guarantee that a control will occupy the same amount of size in all themes or guarantee that a control will have the same content margins / padding across all themes.</span></span>

## <a name="see-also"></a><span data-ttu-id="1b4ab-229">См. также</span><span class="sxs-lookup"><span data-stu-id="1b4ab-229">See also</span></span>

- [<span data-ttu-id="1b4ab-230">Стилизация и использование шаблонов</span><span class="sxs-lookup"><span data-stu-id="1b4ab-230">Styling and Templating</span></span>](../../../desktop-wpf/fundamentals/styles-templates-overview.md)
- [<span data-ttu-id="1b4ab-231">Общие сведения о разработке элементов управления</span><span class="sxs-lookup"><span data-stu-id="1b4ab-231">Control Authoring Overview</span></span>](control-authoring-overview.md)
