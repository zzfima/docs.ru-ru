---
title: Служебное средство ServiceModel Metadata Utility Tool (Svcutil.exe)
ms.date: 03/30/2017
helpviewer_keywords:
- clients [WCF], building
- endpoints [WCF]
- Svcutil.exe
- clients [WCF], consuming services
ms.assetid: 1abf3d9f-b420-46f1-b628-df238751f308
ms.openlocfilehash: 1d466f18c730762b6989f95448bd2331c655b317
ms.sourcegitcommit: 17ee6605e01ef32506f8fdc686954244ba6911de
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2019
ms.locfileid: "74281613"
---
# <a name="servicemodel-metadata-utility-tool-svcutilexe"></a>Служебное средство ServiceModel Metadata Utility Tool (Svcutil.exe)

Средство служебной программы метаданных ServiceModel используется для создания кода модели службы из документов метаданных и документов метаданных из кода модели службы.

## <a name="svcutilexe"></a>SvcUtil.exe

Средство служебной программы метаданных ServiceModel можно найти в расположении установки Windows SDK, в частности *%ProgramFiles%\Microsoft sdks\windows\v6.0\Bin.* .

### <a name="functionalities"></a>Функциональные возможности

В следующей таблице перечислены различные функциональные возможности, предоставляемые этим средством, и соответствующие разделы, в которых обсуждается их использование.

|Задача|Раздел|
|----------|-----------|
|Создает код из работающих служб или документов статических метаданных.|[Создание клиента WCF из метаданных службы](./feature-details/generating-a-wcf-client-from-service-metadata.md)|
|Экспортирует документы метаданных из скомпилированного кода.|[Практическое руководство. Использование программы Svcutil.exe для экспорта метаданных из скомпилированного кода службы](./feature-details/how-to-use-svcutil-exe-to-export-metadata-from-compiled-service-code.md)|
|Проверяет скомпилированный код службы.|[Практическое руководство. Использование программы Svcutil.exe для проверки скомпилированного кода службы](./feature-details/how-to-use-svcutil-exe-to-validate-compiled-service-code.md)|
|Загружает документы метаданных из работающих служб.|[Практическое руководство. Использование Svcutil.exe для загрузки документов метаданных](./feature-details/how-to-use-svcutil-exe-to-download-metadata-documents.md)|
|Создает код сериализации.|[Практическое руководство. Сокращение времени запуска клиентских приложений WCF с использованием XmlSerializer](./feature-details/startup-time-of-wcf-client-applications-using-the-xmlserializer.md)|

> [!CAUTION]
> Программа Svcutil перезаписывает существующие файлы на диске, если имена, указанные в качестве параметров, идентичны. Это могут быть файлы кода, конфигурация или файлы метаданных. Чтобы избежать этого при создании файлов кода и конфигурации, используйте параметр `/mergeConfig`.
>
> Кроме того, параметры `/r` и `/ct` для ссылающихся типов предназначены для создания контрактов данных. Эти переключатели не работают при использовании XmlSerializer.

### <a name="timeout"></a>Время ожидания

При извлечении метаданных средство имеет время ожидания в пять минут. Это значение времени ожидания действительно только при извлечении метаданных по сети. Указанное время ожидания не применимо к обработке этих метаданных.

### <a name="multi-targeting"></a>Настройка для различных версий

Программа не поддерживает настройку для различных версий. Если вы хотите создать артефакт .NET 4 из *Svcutil. exe*, используйте *файл Svcutil. exe* из пакета SDK для .NET 4. Чтобы создать артефакт .NET 3.5, используйте исполняемый файл из пакета SDK платформы .NET 3.5.

### <a name="accessing-wsdl-documents"></a>Доступ к документам WSDL

При использовании Svcutil для получения доступа к документу WSDL, который содержит ссылку на службу маркеров безопасности (STS), Svcutil осуществляет вызов службы маркеров безопасности по протоколу WS-MetadataExchange. Однако служба может предоставлять документы WSDL с помощью WS-MetadataExchange или запроса HTTP GET. Таким образом, если STS раскрывают только документ WSDL с использованием HTTP GET, клиент, написанный на WinFX, завершится ошибкой. Для клиентов, написанных на .NET Framework 3,5, программа Svcutil пытается использовать как WS-MetadataExchange, так и HTTP GET для получения WSDL-языка STS.

## <a name="using-svcutilexe"></a>Использование программы SvcUtil.exe

### <a name="common-usages"></a>Типичные способы использования

В следующей таблице показаны некоторые распространенные параметры для этого инструмента:

|Параметр|Описание|
|------------|-----------------|
|/Directory:\<Directory >|Каталог, в котором создаются файлы.<br /><br /> По умолчанию: текущий каталог.<br /><br /> Краткая форма: `/d`|
|/help|Отображает синтаксис команд и параметров для средства.<br /><br /> Краткая форма: `/?`|
|/nologo|Подавляет вывод логотипа и сообщения об авторском праве.|
|/svcutilConfig:\<configFile>|Задает пользовательский файл конфигурации, который следует использовать вместо файла App.config. С его помощью можно регистрировать расширения system.serviceModel, не изменяя файл конфигурации средства.|
|/target:\<тип выходных данных >|Задает выходные объекты, которые должны быть созданы с помощью средства.<br /><br /> Допустимыми значениями являются код, метаданные или xmlSerializer.<br /><br /> Краткая форма: `/t`|

### <a name="code-generation"></a>Создание кода

Svcutil.exe может создавать код для контрактов службы, клиентов и типы данных из документов метаданных. Документы метаданных могут находиться в устойчивом хранилище или извлекаться в оперативном режиме. Извлечение в оперативном режиме происходит либо по протоколу WS-Metadata Exchange, либо по протоколу DISCO (дополнительные сведения см. в разделе "Загрузка метаданных").

Для создания контрактов служб и данных на основе предопределенного документа WSDL можно использовать средство *Svcutil. exe* . Укажите переключатель/erviceContract и URL-адрес, откуда можно загрузить документ WSDL, или расположение файла, где его можно найти. Это создает контракты служб и данных, определенные в документе WSDL, которые затем можно использовать для реализации службы жалоб. Дополнительные сведения см. [в разделе как получить метаданные и реализовать соответствующую службу](./feature-details/how-to-retrieve-metadata-and-implement-a-compliant-service.md).

Для службы с конечной точкой BasicHttpContextBinding *Svcutil. exe* создает BasicHttpBinding с атрибутом `allowCookies`, для которого задано значение `true`. Файлы cookie используются для создания контекста на сервере. Если необходимо управлять контекстом в клиенте при использовании службой файлов cookie, можно вручную изменить настройки для использования контекстной привязки.

> [!CAUTION]
> Svcutil.exe создает клиент на основе файла WSDL или файла политики, полученного от службы. Имя участника-пользователя (UPN) создается путем сцепления имени пользователя, "\@" и полного доменного имени (FQDN). Однако для пользователей, зарегистрированных в Active Directory, этот формат не является допустимым, и созданное средством имя участника-пользователя вызывает сбой проверки подлинности Kerberos с выдачей сообщения об ошибке "Сбой попытки входа в систему". Чтобы устранить эту проблему, необходимо вручную исправить файл клиента, созданный средством.

`svcutil.exe [/t:code]  <metadataDocumentPath>* | <url>* | <epr>`

|Аргумент|Описание|
|--------------|-----------------|
|`epr`|Путь к файлу XML, который содержит ссылку на конечную точку службы WS-Addressing EndpointReference, которая поддерживает WS-Metadata Exchange. Дополнительные сведения см. в разделе "Загрузка метаданных".|
|`metadataDocumentPath`|Путь к документу метаданных (*WSDL* или *XSD*), содержащему контракт для импорта в код (. WSDL,. xsd,. всполици или. всмекс).<br /><br /> Svcutil следит за ходом импортирования и включает удаленный URL-адрес для метаданных, когда указано пользователем. Однако если файлы метаданных необходимо обработать в локальной файловой системе, все файлы следует задавать в этом аргументе. Таким образом, Svcutil можно использовать в среде построения, где отсутствуют сетевые зависимости. Для этого аргумента можно использовать подстановочные знаки (*. xsd, \*. WSDL).|
|`url`|URL-адрес конечной точки службы, предоставляющей метаданные, или документа метаданных, размещенного в сети. Дополнительные сведения об извлечении этих документов см. в разделе "Загрузка метаданных".|

|Параметр|Описание|
|------------|-----------------|
|/async|Создает сигнатуры как синхронных, так и асинхронных методов.<br /><br /> По умолчанию: создает только сигнатуры синхронных методов.<br /><br /> Сокращенная форма: `/a`|
|/Коллектионтипе: тип\<>|Указывает тип коллекции списка для клиента WCF.<br/><br /> По умолчанию: тип коллекции — System. Array. <br /><br /> Сокращенная форма: `/ct`|
|/config:\<configFile >|Задает имя файла для создаваемого файла конфигурации.<br /><br /> По умолчанию: output.config|
|/dataContractOnly|Создает код только для типов контрактов данных. Типы контрактов службы не созданы.<br /><br /> Для этого параметра следует задавать только локальные файлы метаданных.<br /><br /> Сокращенная форма: `/dconly`|
|/enableDataBinding|Реализует интерфейс <xref:System.ComponentModel.INotifyPropertyChanged> для всех типов контрактов данных для обеспечения привязки данных.<br /><br /> Сокращенная форма: `/edb`|
|/Ексклудетипе: тип\<>|Задает полное имя типа или имя типа с указанием на сборку, который необходимо исключить из ссылочных типов контракта.<br /><br /> При использовании этого переключателя вместе с `/r` из отдельных библиотек DLL создается ссылка на полное имя класса XSD.<br /><br /> Сокращенная форма: `/et`|
|/importXmlTypes|Служит для настройки сериализатора контракта данных для импортирования типов, отличных от типов контракта данных, в качестве типов IXmlSerializable.|
|/internal|Создает классы, помеченные как внутренние. По умолчанию: создает только открытые классы.<br /><br /> Сокращенная форма: `/i`|
|/Language:\<язык >|Задает язык программирования, используемый для создания кода. Необходимо указать либо имя языка, зарегистрированное в файле Machine. config, либо полное имя класса, наследуемого от <xref:System.CodeDom.Compiler.CodeDomProvider>.<br /><br /> Значения: c#, cs, csharp, vb, visualbasic, c++, cpp<br /><br /> По умолчанию: csharp<br /><br /> Краткая форма: `/l`|
|/mergeConfig|Объединяет созданную конфигурацию с существующим файлом (вместо его перезаписи).|
|/messageContract|Создает типы контрактов сообщений.<br /><br /> Сокращенная форма: `/mc`|
|/namespace:\<строка, строка >|Задает сопоставление атрибута targetNamespace WSDL или схемы XML пространству имен среды CLR. Использование "\*" для targetNamespace сопоставляет все targetNamespace без явного сопоставления с этим пространством имен CLR.<br /><br /> Чтобы убедиться, что имя контракта сообщения не конфликтует с именем операции, необходимо дополнить ссылку на тип двойными двоеточиями (`::`) или задать уникальные имена.<br /><br /> По умолчанию: для контрактов данных выводится из целевого пространства имен документа схемы. Для всех остальных создаваемых типов используется пространство имен по умолчанию.<br /><br /> Краткая форма: `/n` **Примечание** . при создании типов для использования с XmlSerializer поддерживается только одно сопоставление пространства имен. Все созданные типы будут находиться либо в пространстве имен по умолчанию, либо в пространстве имен, указанном параметром "*".|
|/noConfig|Запрещает создавать файлы конфигурации.|
|/noStdLib|Запрещает ссылаться на стандартные библиотеки.<br /><br /> По умолчанию: создаются ссылки на файлы Mscorlib.dll и System.servicemodel.dll.|
|/out:\<файл >|Задает имя файла созданного кода.<br /><br /> По умолчанию: наследуется от имени определения WSDL, имени службы WSDL или целевого пространства имен одной из схем.<br /><br /> Краткая форма: `/o`|
|/Reference:\<путь к файлу >|Ссылается на типы в заданной сборке. При создании клиентов необходимо использовать этот параметр для задания сборок, которые могут содержать типы, представляющие импортируемые метаданные.<br /><br /> С помощью этого переключателя невозможно задать контракты сообщений и типы <xref:System.Xml.Serialization.XmlSerializer>.<br /><br /> При ссылке на <xref:System.DateTimeOffset> вместо создания нового типа используется этот тип. Если приложение написано с помощью .NET Framework 3,5, SvcUtil. exe автоматически ссылается на <xref:System.DateTimeOffset>.<br /><br /> Сокращенная форма: `/r`|
|/serializable|Создает классы, помеченные сериализуемым атрибутом.<br /><br /> Сокращенная форма: `/s`|
|/serviceContract|Сформировать код только для контрактов службы. Клиентский класс и конфигурация создаваться не будут<br /><br /> Сокращенная форма: `/sc`|
|/serializer:Auto|Автоматически выбрать сериализатор. Это пытается использовать сериализатор контрактов данных и использует XmlSerializer в случае сбоя.<br /><br /> Сокращенная форма: `/ser`|
|/serializer:DataContractSerializer|Создает типы данных, использующие сериализатор контракта данных для сериализации и десериализации.<br /><br /> Сокращенная форма: `/ser:DataContractSerializer`|
|/serializer:XmlSerializer|Формирует типы данных, использующих для сериализации и десериализации сериализатор <xref:System.Xml.Serialization.XmlSerializer>.<br /><br /> Сокращенная форма: `/ser:XmlSerializer`|
|/targetClientVersion|Укажите версию .NET Framework, для которой предназначено приложение. Допустимые значения: `Version30` и `Version35`. Значение по умолчанию — `Version30`.<br /><br /> Сокращенная форма: `/tcv`<br /><br /> `Version30`: используйте `/tcv:Version30` при создании кода для клиентов, использующих WinFX.<br /><br /> `Version35`: используйте `/tcv:Version35` при создании кода для клиентов, использующих .NET Framework 3,5. При использовании `/tcv:Version35` с переключателем `/async` создаются асинхронные методы как на основе событий, так и на основе обратных вызовов/делегатов. Кроме того, включена поддержка наборов данных с поддержкой LINQ и <xref:System.DateTimeOffset>.|
|/wrapped|Определяет, используется ли особый подход для документов со стилем document-literal с параметрами в оболочке. Используйте параметр **/враппед** со средством [служебной программы метаданных модели службы (Svcutil. exe)](servicemodel-metadata-utility-tool-svcutil-exe.md) для указания обычного регистра.|

> [!NOTE]
> Если привязка службы является одной из предоставляемых системой привязок (см. раздел [привязки, предоставляемые системой](system-provided-bindings.md)), а свойство <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> имеет значение `None` или `Sign`, то программа Svcutil создает файл конфигурации с помощью элемента [\<CustomBinding >](../configure-apps/file-schema/wcf/custombinding.md) , а не ожидаемого системного элемента. Например, если служба использует элемент `<wsHttpBinding>`, свойству `ProtectionLevel` которого задано значение `Sign`, раздел привязок создаваемой конфигурации будет содержать `<customBinding>` вместо `<wsHttpBinding>`. Дополнительные сведения об уровне защиты см. в разделе [Основные сведения о уровне защиты](understanding-protection-level.md).

### <a name="metadata-export"></a>Экспорт метаданных

При помощи Svcutil.exe можно экспортировать метаданные для служб, контрактов и типов данных в скомпилированных сборках. Чтобы экспортировать метаданные для службы, необходимо использовать параметр `/serviceName` для задания службы, которую следует экспортировать. Для экспорта всех типов контрактов данных внутри сборки используется параметр `/dataContractOnly`. По умолчанию метаданные экспортируются для всех контрактов служб во входных сборках.

`svcutil.exe [/t:metadata] [/serviceName:<serviceConfigName>] [/dataContractOnly] <assemblyPath>*`

|Аргумент|Описание|
|--------------|-----------------|
|`assemblyPath`|Задает путь к сборке, которая содержит службы, контракты или типы контрактов данных для экспорта. Для предоставления нескольких файлов в качестве входных данных можно использовать стандартные подстановочные знаки командной строки.|

|Параметр|Описание|
|------------|-----------------|
|/serviceName:\<serviceConfigName>|Задает имя конфигурации службы для экспорта. При использовании этого параметра в качестве входных данных необходимо передать исполняемую сборку со связанным файлом конфигурации. Svcutil.exe осуществляет поиск всех связанных файлов конфигурации для конфигурации службы. Если файлы конфигурации содержат какие-либо типы расширения, сборки, в состав которых входят эти типы, должны находиться в глобальном кэше сборок или явно предоставляться с использованием параметра `/reference`.|
|/Reference:\<путь к файлу >|Добавляет заданную сборку в набор сборок, используемых для разрешения ссылок на типы. При экспорте или проверке службы, использующей сторонние расширения (поведения, привязки и элементы привязок), которые зарегистрированы в конфигурации, этот параметр необходимо использовать для определения местоположения сборок расширения, которые находятся не в глобальном кэше сборок.<br /><br /> Сокращенная форма: `/r`|
|/dataContractOnly|Работает только с типами контрактов данных. Контракты служб не обрабатываются.<br /><br /> Для этого параметра следует задавать только локальные файлы метаданных.<br /><br /> Сокращенная форма: `/dconly`|
|/Ексклудетипе: тип\<>|Задает полное имя типа или имя типа с указанием на сборку, который необходимо исключить из экспорта. Этот параметр можно использовать при экспорте метаданных для службы или набора контрактов службы для запрещения экспорта этих типов. Данный параметр не может использоваться одновременно с параметром `/dconly`.<br /><br /> Если в одной сборке содержится несколько служб, каждая из которых использует отдельные классы с одним и тем же именем XSD, для данного переключателя необходимо задать имя службы вместо имени класса XSD.<br /><br /> XSD или типы контрактов данных не поддерживаются.<br /><br /> Сокращенная форма: `/et`|

### <a name="service-validation"></a>Проверка службы

Проверка проводится для выявления ошибок в реализациях службы без размещения службы. Для указания службы для проверки используется параметр `/serviceName`.

`svcutil.exe /validate /serviceName:<serviceConfigName>  <assemblyPath>*`

|Аргумент|Описание|
|--------------|-----------------|
|`assemblyPath`|Задает путь к сборке, содержащей типы службы для проверки. Сборка должна содержать связанный файл конфигурации для предоставления конфигурации службы. Для предоставления нескольких сборок можно использовать стандартные подстановочные знаки командной строки.|

|Параметр|Описание|
|------------|-----------------|
|/validate|Проверяет реализацию службы, заданную параметром `/serviceName`. При использовании этого параметра в качестве входных данных необходимо передать исполняемую сборку со связанным файлом конфигурации.<br /><br /> Сокращенная форма: `/v`|
|/serviceName:\<serviceConfigName>|Задает имя конфигурации службы для проверки. Svcutil.exe осуществляет поиск всех связанных файлов конфигурации всех входных сборок для конфигурации службы. Если файлы конфигурации содержат какие-либо типы расширения, сборки, в состав которых входят эти типы, должны находиться в глобальном кэше сборок или явно предоставляться с использованием параметра `/reference`.|
|/Reference:\<путь к файлу >|Добавляет заданную сборку в набор сборок, используемых для разрешения ссылок на типы. При экспорте или проверке службы, использующей сторонние расширения (поведения, привязки и элементы привязок), которые зарегистрированы в конфигурации, этот параметр необходимо использовать для определения местоположения сборок расширения, которые находятся не в глобальном кэше сборок.<br /><br /> Сокращенная форма: `/r`|
|/dataContractOnly|Работает только с типами контрактов данных. Контракты служб не обрабатываются.<br /><br /> Для этого параметра следует задавать только локальные файлы метаданных.<br /><br /> Сокращенная форма: `/dconly`|
|/Ексклудетипе: тип\<>|Задает полное имя типа или имя типа с указанием на сборку, который необходимо исключить из проверки.<br /><br /> Сокращенная форма: `/et`|

### <a name="metadata-download"></a>Загрузка метаданных

Средство Svcutil.exe можно использовать для загрузки метаданных из работающих служб и сохранения этих метаданных в локальных файлах. Для загрузки метаданных необходимо задать параметр `/t:metadata`. В противном случае создается код клиента. Для URL-схем HTTP и HTTPS средство Svcutil.exe предпринимает попытку извлечь метаданные с помощью WS-Metadata Exchange и DISCO. Для всех остальных URL-схем Svcutil.exe использует только WS-Metadata Exchange.

Svcutil одновременно направляет следующие запросы метаданных для извлечения метаданных.

- Запрос MEX (WS-Transfer) на предоставленный адрес

- Запрос MEX на предоставленный адрес с присоединенным /mex

- Запрос DISCO (с использованием протокола DiscoveryClientProtocol из ASMX) на предоставленный адрес.

По умолчанию для осуществления запросов MEX Svcutil.exe использует привязки, определенные в классе <xref:System.ServiceModel.Description.MetadataExchangeBindings>. Для настройки привязки, используемой для WS-Metadata Exchange, необходимо определить в конфигурации, использующей контракт IMetadataExchange, конечную точку клиента. Ее можно определить в файле конфигурации средства Svcutil.exe или в другом файле конфигурации, заданном с помощью параметра `/svcutilConfig`.

`svcutil.exe /t:metadata  <url>* | <epr>`

|Аргумент|Описание|
|--------------|-----------------|
|`url`|URL-адрес конечной точки службы, предоставляющей метаданные, или документа метаданных, размещенного в сети.|
|`epr`|Путь к файлу XML, который содержит ссылку на конечную точку службы WS-Addressing EndpointReference, которая поддерживает WS-Metadata Exchange.|

### <a name="xmlserializer-type-generation"></a>Создание типа XmlSerializer

Службы и клиентские приложения, использующие типы данных, сериализуемые с помощью сериализатора <xref:System.Xml.Serialization.XmlSerializer>, создают и компилируют код сериализации для этих типов данных во время выполнения, что может привести к снижению производительности при запуске.

> [!NOTE]
> Предварительно созданный код сериализации может использоваться только в клиентских приложениях, но не в службах.

Svcutil.exe может улучшить производительность при запуске этих приложений путем создания необходимого кода сериализации C# из компилированных сборок для приложения. Дополнительные сведения см. в разделе [как улучшить время запуска клиентских приложений WCF с помощью XmlSerializer](./feature-details/startup-time-of-wcf-client-applications-using-the-xmlserializer.md).

> [!NOTE]
> Svcutil.exe создает код только для типов, которые используются контрактами служб, найденными во входных сборках.

`svcutil.exe /t:xmlSerializer  <assemblyPath>*`

|Аргумент|Описание|
|--------------|-----------------|
|`assemblyPath`|Задает путь к сборке, содержащей типы контрактов служб. Типы сериализации создаются для всех сериализуемых в формат Xml типов в каждом контракте.|

|Параметр|Описание|
|------------|-----------------|
|/Reference:\<путь к файлу >|Добавляет заданную сборку в набор сборок, используемых для разрешения ссылок на типы.<br /><br /> Сокращенная форма: `/r`|
|/Ексклудетипе: тип\<>|Задает полное имя типа или имя типа с указанием на сборку, который необходимо исключить из экспорта или проверки.<br /><br /> Сокращенная форма: `/et`|
|/out:\<файл >|Задает имя файла созданного кода. При передаче в средство нескольких сборок в качестве входных данных этот параметр игнорируется.<br /><br /> По умолчанию: наследуется от имени сборки.<br /><br /> Сокращенная форма: `/o`|
|/UseSerializerForFaults|Указывает, что вместо сериализатора по умолчанию <xref:System.Xml.Serialization.XmlSerializer> для чтения и записи ошибок следует использовать сериализатор <xref:System.Runtime.Serialization.DataContractSerializer>.|

## <a name="examples"></a>Примеры

Следующая команда используется для создания кода клиента из работающей службы или документов метаданных в сети.

`svcutil http://service/metadataEndpoint`

Следующая команда используется для создания кода клиента из локальных документов метаданных.

`svcutil *.wsdl *.xsd /language:C#`

Следующая команда используется для создания типов контрактов данных в Visual Basic из локальных документов схемы.

`svcutil /dconly *.xsd /language:VB`

Следующая команда используется для загрузки документов метаданных из работающих служб.

`svcutil /t:metadata http://service/metadataEndpoint`

Следующая команда используется для создания документов метаданных для контрактов служб и связанных типов в сборке.

`svcutil myAssembly.dll`

Следующая команда используется для создания документов метаданных для службы и всех связанных контрактов службы и типов данных в сборке.

`svcutil myServiceHost.exe /serviceName:myServiceName`

Следующая команда используется для создания документов метаданных для типов данных в сборке.

`svcutil myServiceHost.exe /dconly`

С помощью следующей команды проверяется размещение службы.

`svcutil /validate /serviceName:myServiceName myServiceHost.exe`

Следующая команда создает типы сериализации для типов <xref:System.Xml.Serialization.XmlSerializer>, используемых любыми контрактами служб в сборке.

`svcutil /t:xmlserializer myContractLibrary.exe`

## <a name="maximum-nametable-character-count-quota"></a>Максимальная квота на количество символов в таблице имен.

Когда программа svcutil используется для создания метаданных для службы, может выводиться следующее сообщение:

Ошибка: не удается получить метаданные из `http://localhost:8000/somesservice/mex` превышена квота на число символов NameTable (16384) при чтении XML-данных. Таблица имен является структурой данных, в которой хранятся строки, обнаруженные при обработке данных XML. Триггером этой квоты могут служить длинные XML-документы с неповторяющимися именами элементов, именами атрибутов и значениями атрибутов. Эту квоту можно увеличить, изменив свойство MaxNameTableCharCount объекта XmlDictionaryReaderQuotas, используемого при создании средства чтения XML.

Эта ошибка может вызываться службой, которая возвращает крупный WSDL-файл на запрос метаданных службы. Проблема состоит в превышении квоты символов для программы svcutil.exe. Это значение задается, чтобы предотвратить атаки типа «отказ в обслуживании». Можно увеличить квоту, указав следующий файл конфигурации для svcutil.

В следующем файле конфигурации показано, как задать квоты модуля чтения для svcutil.

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.serviceModel>
        <bindings>
            <customBinding>
                <binding name="MyBinding">
                    <textMessageEncoding>
                        <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
                            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                    </textMessageEncoding>
                    <httpTransport maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" />
                </binding>
            </customBinding>
        </bindings>
        <client>
            <endpoint binding="customBinding" bindingConfiguration="MyBinding"
                contract="IMetadataExchange"
                name="http" />
        </client>
    </system.serviceModel>
</configuration>
```

Создайте новый файл с именем svcutil.exe.config и скопируйте в него пример XML-кода. Затем поместите файл в один каталог с файлом svcutil.exe. При следующем запуске программа svcutil.exe будет использовать новые параметры.

## <a name="security-concerns"></a>Проблемы безопасности

Для защиты папки установки Svcutil.exe, файла конфигурации Svcutil.config и файлов, на которые указывает `/svcutilConfig`, необходимо использовать соответствующий список управления доступом (ACL). Это позволит предотвратить регистрацию и выполнение вредоносных расширений.

Кроме того, чтобы снизить вероятность компрометации безопасности, не следует добавлять ненадежные расширения в часть системы или использовать недоверенные поставщики кода с Svcutil. exe.

Наконец, не стоит использовать это средство на промежуточном уровне приложения, так как это может стать причиной отказа в обслуживании текущего процесса.

## <a name="see-also"></a>См. также

- <xref:System.Runtime.Serialization.DataContractAttribute>
- <xref:System.Runtime.Serialization.DataMemberAttribute>
- [Практическое руководство. Создание клиента](how-to-create-a-wcf-client.md)
