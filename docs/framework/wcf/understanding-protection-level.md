---
title: "Основные сведения об уровне защиты"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF, security
- ProtectionLevel property
ms.assetid: 0c034608-a1ac-4007-8287-b1382eaa8bf2
caps.latest.revision: "22"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 21820333cf9b07ea9ac6883f6aa7b16ebc2d807e
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2017
---
# <a name="understanding-protection-level"></a><span data-ttu-id="f883d-102">Основные сведения об уровне защиты</span><span class="sxs-lookup"><span data-stu-id="f883d-102">Understanding Protection Level</span></span>
<span data-ttu-id="f883d-103">Свойство `ProtectionLevel` обнаруживается во многих классах, например в классах <xref:System.ServiceModel.ServiceContractAttribute> и <xref:System.ServiceModel.OperationContractAttribute>.</span><span class="sxs-lookup"><span data-stu-id="f883d-103">The `ProtectionLevel` property is found on many different classes, such as the <xref:System.ServiceModel.ServiceContractAttribute> and the <xref:System.ServiceModel.OperationContractAttribute> classes.</span></span> <span data-ttu-id="f883d-104">Это свойство определяет, как защищается часть сообщения (или все сообщение).</span><span class="sxs-lookup"><span data-stu-id="f883d-104">The property controls how a part (or whole) of a message is protected.</span></span> <span data-ttu-id="f883d-105">В данном разделе рассматривается эта функция [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] и принцип ее работы.</span><span class="sxs-lookup"><span data-stu-id="f883d-105">This topic explains the [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] feature and how it works.</span></span>  
  
 <span data-ttu-id="f883d-106">Инструкции для установки уровня защиты см. в разделе [как: Установка свойства ProtectionLevel](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md).</span><span class="sxs-lookup"><span data-stu-id="f883d-106">For instructions on setting the protection level, see [How to: Set the ProtectionLevel Property](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f883d-107">Уровни защиты можно задавать только в коде, а не в конфигурации.</span><span class="sxs-lookup"><span data-stu-id="f883d-107">Protection levels can be set only in code, not in configuration.</span></span>  
  
## <a name="basics"></a><span data-ttu-id="f883d-108">Основные сведения</span><span class="sxs-lookup"><span data-stu-id="f883d-108">Basics</span></span>  
 <span data-ttu-id="f883d-109">Ниже приведены основные сведения о функции уровня защиты.</span><span class="sxs-lookup"><span data-stu-id="f883d-109">To understand the protection level feature, the following basic statements apply:</span></span>  
  
-   <span data-ttu-id="f883d-110">Для любой части сообщения существуют три базовых уровня защиты.</span><span class="sxs-lookup"><span data-stu-id="f883d-110">Three basic levels of protection exist for any part of a message.</span></span> <span data-ttu-id="f883d-111">Для свойства (где бы оно ни появлялось) задается одно из значений перечисления <xref:System.Net.Security.ProtectionLevel>.</span><span class="sxs-lookup"><span data-stu-id="f883d-111">The property (wherever it occurs) is set to one of the <xref:System.Net.Security.ProtectionLevel> enumeration values.</span></span> <span data-ttu-id="f883d-112">Эти значения указаны ниже в порядке возрастания уровня защиты.</span><span class="sxs-lookup"><span data-stu-id="f883d-112">In ascending order of protection, they include:</span></span>  
  
    -   <span data-ttu-id="f883d-113">`None`.</span><span class="sxs-lookup"><span data-stu-id="f883d-113">`None`.</span></span>  
  
    -   <span data-ttu-id="f883d-114">`Sign`.</span><span class="sxs-lookup"><span data-stu-id="f883d-114">`Sign`.</span></span> <span data-ttu-id="f883d-115">Защищенная часть подписывается цифровой подписью.</span><span class="sxs-lookup"><span data-stu-id="f883d-115">The protected part is digitally signed.</span></span> <span data-ttu-id="f883d-116">Это гарантирует защиту защищенной части сообщения от любой подделки.</span><span class="sxs-lookup"><span data-stu-id="f883d-116">This ensures detection of any tampering with the protected message part.</span></span>  
  
    -   <span data-ttu-id="f883d-117">`EncryptAndSign`.</span><span class="sxs-lookup"><span data-stu-id="f883d-117">`EncryptAndSign`.</span></span> <span data-ttu-id="f883d-118">Для обеспечения конфиденциальности часть сообщения перед подписанием шифруется.</span><span class="sxs-lookup"><span data-stu-id="f883d-118">The message part is encrypted to ensure confidentiality before it is signed.</span></span>  
  
-   <span data-ttu-id="f883d-119">Можно задать требования к защите только для *данные приложения* с помощью этой функции.</span><span class="sxs-lookup"><span data-stu-id="f883d-119">You can set protection requirements only for *application data* with this feature.</span></span> <span data-ttu-id="f883d-120">Например, заголовки WS-Addressing являются данными инфраструктуры и, следовательно, `ProtectionLevel` их не затрагивает.</span><span class="sxs-lookup"><span data-stu-id="f883d-120">For example, WS-Addressing headers are infrastructure data and, therefore, are not affected by the `ProtectionLevel`.</span></span>  
  
-   <span data-ttu-id="f883d-121">Когда для режима безопасности задано значение `Transport`, все сообщение защищается механизмом транспорта.</span><span class="sxs-lookup"><span data-stu-id="f883d-121">When the security mode is set to `Transport`, the entire message is protected by the transport mechanism.</span></span> <span data-ttu-id="f883d-122">Поэтому установка отдельного уровня защиты для разных частей сообщения не имеет эффекта.</span><span class="sxs-lookup"><span data-stu-id="f883d-122">Therefore, setting a separate protection level for different parts of a message has no effect.</span></span>  
  
-   <span data-ttu-id="f883d-123">`ProtectionLevel` Дает разработчику задать *минимальный уровень* , которому должна соответствовать привязка.</span><span class="sxs-lookup"><span data-stu-id="f883d-123">The `ProtectionLevel` is a way for the developer to set the *minimum level* that a binding must comply with.</span></span> <span data-ttu-id="f883d-124">Когда служба развернута, фактическая привязка, заданная в конфигурации, может поддерживать или не поддерживать этот минимальный уровень.</span><span class="sxs-lookup"><span data-stu-id="f883d-124">When a service is deployed, the actual binding specified in configuration may or may not support the minimum level.</span></span> <span data-ttu-id="f883d-125">Например, по умолчанию класс <xref:System.ServiceModel.BasicHttpBinding> не обеспечивает безопасность (хотя обеспечение безопасности может быть включено).</span><span class="sxs-lookup"><span data-stu-id="f883d-125">For example, by default, the <xref:System.ServiceModel.BasicHttpBinding> class does not supply security (although it can be enabled).</span></span> <span data-ttu-id="f883d-126">Поэтому использование этого класса с контрактом, параметр которого отличен от `None`, будет приводить к вызову исключения.</span><span class="sxs-lookup"><span data-stu-id="f883d-126">Therefore, using it with a contract that has any setting other than `None` will cause an exception to be thrown.</span></span>  
  
-   <span data-ttu-id="f883d-127">Если служба требует, чтобы минимальный уровень `ProtectionLevel` для всех сообщений был `Sign`, клиент (возможно, созданный не технологией [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]) может шифровать и подписывать все сообщения (что превышает требуемый минимум).</span><span class="sxs-lookup"><span data-stu-id="f883d-127">If the service requires that the minimum `ProtectionLevel` for all messages is `Sign`, a client (perhaps created by a non-[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] technology) can encrypt and sign all messages (which is more than the minimum required).</span></span> <span data-ttu-id="f883d-128">В этом случае [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] не будет вызывать исключение, поскольку действия клиента превышают минимальное требование.</span><span class="sxs-lookup"><span data-stu-id="f883d-128">In this case, [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] will not throw an exception because the client has done more than the minimum.</span></span> <span data-ttu-id="f883d-129">Однако следует иметь в виду, что приложения [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] (службы или клиенты) по возможности не будут чрезмерно защищать часть сообщения, а будут обеспечивать соответствие минимальному уровню.</span><span class="sxs-lookup"><span data-stu-id="f883d-129">Note, however, that [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] applications (services or clients) will not over-secure a message part if possible but will comply with the minimum level.</span></span> <span data-ttu-id="f883d-130">Обратите также внимание, что при использовании режима `Transport` в качестве режима безопасности транспорт может чрезмерно защищать поток сообщений, поскольку он не способен обеспечить защиту на более детальном уровне.</span><span class="sxs-lookup"><span data-stu-id="f883d-130">Also note that when using `Transport` as the security mode, the transport may over-secure the message stream because it is inherently unable to secure at a more granular level.</span></span>  
  
-   <span data-ttu-id="f883d-131">Если для `ProtectionLevel` явно задается значение `Sign` или `EncryptAndSign`, необходимо использовать привязку с разрешенным обеспечением безопасности. В противном случае будет вызвано исключение.</span><span class="sxs-lookup"><span data-stu-id="f883d-131">If you set the `ProtectionLevel` explicitly to either `Sign` or `EncryptAndSign`, then you must use a binding with security enabled or an exception will be thrown.</span></span>  
  
-   <span data-ttu-id="f883d-132">Если выбирается привязка, разрешающая обеспечение безопасности, а свойство `ProtectionLevel` нигде в контракте не задается, все данные приложений будут шифроваться и подписываться.</span><span class="sxs-lookup"><span data-stu-id="f883d-132">If you select a binding that enables security and you do not set the `ProtectionLevel` property anywhere on the contract, all application data will be encrypted and signed.</span></span>  
  
-   <span data-ttu-id="f883d-133">Если выбирается привязка, в которой не разрешено обеспечение безопасности (например, в классе `BasicHttpBinding` обеспечение безопасности запрещено по умолчанию), и уровень `ProtectionLevel` явно не задан, данные приложений защищаться не будут.</span><span class="sxs-lookup"><span data-stu-id="f883d-133">If you select a binding that does not have security enabled (for example, the `BasicHttpBinding` class has security disabled by default), and the `ProtectionLevel` is not explicitly set, then none of the application data will be protected.</span></span>  
  
-   <span data-ttu-id="f883d-134">Если используется привязка, которая обеспечивает безопасность на транспортном уровне, все данные приложений будут защищаться в соответствии с возможностями транспорта.</span><span class="sxs-lookup"><span data-stu-id="f883d-134">If you are using a binding that applies security at the transport level, all application data will be secured according to the capabilities of the transport.</span></span>  
  
-   <span data-ttu-id="f883d-135">Если используется привязка, которая обеспечивает безопасность на уровне сообщений, данные приложений будут защищаться в соответствии с уровнями защиты, заданными в контракте.</span><span class="sxs-lookup"><span data-stu-id="f883d-135">If you use a binding that applies security at the message level, then application data will be secured according to the protection levels set on the contract.</span></span> <span data-ttu-id="f883d-136">Если уровень защиты не задается, все данные приложений в сообщениях будут шифроваться и подписываться.</span><span class="sxs-lookup"><span data-stu-id="f883d-136">If you do not specify a protection level, then all application data in the messages will be encrypted and signed.</span></span>  
  
-   <span data-ttu-id="f883d-137">`ProtectionLevel` можно задать на разных уровнях области действия.</span><span class="sxs-lookup"><span data-stu-id="f883d-137">The `ProtectionLevel` can be set at different scoping levels.</span></span> <span data-ttu-id="f883d-138">Существует иерархия, связанная с областью действия, которая рассматривается в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="f883d-138">There is a hierarchy associated with scoping, which is explained in the next section.</span></span>  
  
## <a name="scoping"></a><span data-ttu-id="f883d-139">Область действия</span><span class="sxs-lookup"><span data-stu-id="f883d-139">Scoping</span></span>  
 <span data-ttu-id="f883d-140">При задании `ProtectionLevel` на самом верхнем API задается уровень для всех уровней ниже данного.</span><span class="sxs-lookup"><span data-stu-id="f883d-140">Setting the `ProtectionLevel` on the topmost API sets the level for all levels below it.</span></span> <span data-ttu-id="f883d-141">Если для `ProtectionLevel` задается другое значение на более низком уровне, все интерфейсы API, расположенные ниже этого уровня в иерархии, сбрасываются на этот новый уровень (однако интерфейсы API, расположенные выше этого уровня, остаются под влиянием самого верхнего уровня).</span><span class="sxs-lookup"><span data-stu-id="f883d-141">If the `ProtectionLevel` is set to a different value at a lower level, all APIs below that level in the hierarchy will now be reset to the new level (APIs above it, however, will still be affected by the topmost level).</span></span> <span data-ttu-id="f883d-142">Иерархия имеет представленный ниже вид.</span><span class="sxs-lookup"><span data-stu-id="f883d-142">The hierarchy is as follows.</span></span> <span data-ttu-id="f883d-143">Атрибуты на одном и том же уровне являются одноранговыми.</span><span class="sxs-lookup"><span data-stu-id="f883d-143">Attributes at the same level are peers.</span></span>  
  
 <xref:System.ServiceModel.ServiceContractAttribute>  
  
 <xref:System.ServiceModel.OperationContractAttribute>  
  
 <xref:System.ServiceModel.FaultContractAttribute>  
  
 <xref:System.ServiceModel.MessageContractAttribute>  
  
 <xref:System.ServiceModel.MessageHeaderAttribute>  
  
 <xref:System.ServiceModel.MessageBodyMemberAttribute>  
  
## <a name="programming-protectionlevel"></a><span data-ttu-id="f883d-144">Программирование ProtectionLevel</span><span class="sxs-lookup"><span data-stu-id="f883d-144">Programming ProtectionLevel</span></span>  
 <span data-ttu-id="f883d-145">Чтобы запрограммировать `ProtectionLevel` в любом месте иерархии, задайте для этого свойства соответствующее значение при применении атрибута.</span><span class="sxs-lookup"><span data-stu-id="f883d-145">To program the `ProtectionLevel` at any point in the hierarchy, simply set the property to an appropriate value when applying the attribute.</span></span> <span data-ttu-id="f883d-146">Примеры см. в разделе [как: Установка свойства ProtectionLevel](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md).</span><span class="sxs-lookup"><span data-stu-id="f883d-146">For examples, see [How to: Set the ProtectionLevel Property](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f883d-147">Чтобы задать данное свойство в контрактах сбоев и сообщений, необходимо понимать работу этих возможностей.</span><span class="sxs-lookup"><span data-stu-id="f883d-147">Setting the property on faults and message contracts requires understanding how those features work.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="f883d-148">[Как: Установка свойства ProtectionLevel](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md) и [использование контрактов сообщений](../../../docs/framework/wcf/feature-details/using-message-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="f883d-148"> [How to: Set the ProtectionLevel Property](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md) and [Using Message Contracts](../../../docs/framework/wcf/feature-details/using-message-contracts.md).</span></span>  
  
## <a name="ws-addressing-dependency"></a><span data-ttu-id="f883d-149">Зависимость от WS-Addressing</span><span class="sxs-lookup"><span data-stu-id="f883d-149">WS-Addressing Dependency</span></span>  
 <span data-ttu-id="f883d-150">В большинстве случаев с помощью [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) для создания клиента гарантирует, что клиент и служба контракты идентичны.</span><span class="sxs-lookup"><span data-stu-id="f883d-150">In most cases, using the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to generate a client ensures that the client and service contracts are identical.</span></span> <span data-ttu-id="f883d-151">Однако одинаковые на первый взгляд контракты могут приводить к вызову клиентом исключения.</span><span class="sxs-lookup"><span data-stu-id="f883d-151">However, seemingly identical contracts can cause the client to throw an exception.</span></span> <span data-ttu-id="f883d-152">Это происходит всякий раз, когда привязка не поддерживает спецификацию WS-Addressing и в контракте определено несколько уровней защиты.</span><span class="sxs-lookup"><span data-stu-id="f883d-152">This occurs whenever a binding does not support the WS-Addressing specification and multiple levels of protection are specified on the contract.</span></span> <span data-ttu-id="f883d-153">Например, это происходит при использовании класса <xref:System.ServiceModel.BasicHttpBinding>, не поддерживающего данную спецификацию, или при создании пользовательской привязки, которая не поддерживает WS-Addressing.</span><span class="sxs-lookup"><span data-stu-id="f883d-153">For example, the <xref:System.ServiceModel.BasicHttpBinding> class does not support the specification, or if you create a custom binding that does not support WS-Addressing.</span></span> <span data-ttu-id="f883d-154">Чтобы в одном контракте разрешить разные уровни защиты, функция `ProtectionLevel` полагается на спецификацию WS-Addressing.</span><span class="sxs-lookup"><span data-stu-id="f883d-154">The `ProtectionLevel` feature relies on the WS-Addressing specification to enable different protection levels on a single contract.</span></span> <span data-ttu-id="f883d-155">Если привязка не поддерживает спецификацию WS-Addressing, для всех уровней задается один и тот же уровень защиты.</span><span class="sxs-lookup"><span data-stu-id="f883d-155">If the binding does not support the WS-Addressing specification, all levels will be set to the same protection level.</span></span> <span data-ttu-id="f883d-156">В качестве фактического уровня защиты для всех областей в контракте задается уровень самой мощной защиты, используемый в контракте.</span><span class="sxs-lookup"><span data-stu-id="f883d-156">The effective protection level for all scopes on the contract will be set to the strongest protection level used on the contract.</span></span>  
  
 <span data-ttu-id="f883d-157">Это может привести к проблеме, которую на первый взгляд сложно устранить.</span><span class="sxs-lookup"><span data-stu-id="f883d-157">This may cause a problem that is hard to debug at first glance.</span></span> <span data-ttu-id="f883d-158">Можно создать контракт клиента (интерфейс), который содержит методы для нескольких служб.</span><span class="sxs-lookup"><span data-stu-id="f883d-158">It is possible to create a client contract (an interface) that includes methods for more than one service.</span></span> <span data-ttu-id="f883d-159">То есть для создания клиента, взаимодействующего с несколькими службами, используется один и тот же интерфейс, и этот единственный интерфейс содержит методы для всех служб.</span><span class="sxs-lookup"><span data-stu-id="f883d-159">That is, the same interface is used to create a client that communicates with many services, and the single interface contains methods for all services.</span></span> <span data-ttu-id="f883d-160">Разработчику следует быть внимательным в этом редком сценарии, чтобы обеспечить вызов только тех методов, которые подходят для каждой конкретной службы.</span><span class="sxs-lookup"><span data-stu-id="f883d-160">The developer must take care in this rare scenario to invoke only those methods that are applicable for each particular service.</span></span> <span data-ttu-id="f883d-161">Если привязкой является класс <xref:System.ServiceModel.BasicHttpBinding>, поддержка нескольких уровней защиты невозможна.</span><span class="sxs-lookup"><span data-stu-id="f883d-161">If the binding is the <xref:System.ServiceModel.BasicHttpBinding> class, multiple protection levels cannot be supported.</span></span> <span data-ttu-id="f883d-162">Однако служба, отвечающая клиенту, может ответить и клиенту с более низким уровнем защиты, чем требуется.</span><span class="sxs-lookup"><span data-stu-id="f883d-162">However, a service replying to the client might respond to a client with a lower protection level than required.</span></span> <span data-ttu-id="f883d-163">В этом случае клиент вызовет исключение, поскольку он ожидает более высокий уровень защиты.</span><span class="sxs-lookup"><span data-stu-id="f883d-163">In this case, the client will throw an exception because it expects a higher protection level.</span></span>  
  
 <span data-ttu-id="f883d-164">В примере кода иллюстрируется эта проблема.</span><span class="sxs-lookup"><span data-stu-id="f883d-164">An example of the code illustrates this problem.</span></span> <span data-ttu-id="f883d-165">В представленном ниже примере показаны контракты службы и клиента.</span><span class="sxs-lookup"><span data-stu-id="f883d-165">The following example shows a service and a client contract.</span></span> <span data-ttu-id="f883d-166">Предположим, что привязка используется [ \<basicHttpBinding >](../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md) элемента.</span><span class="sxs-lookup"><span data-stu-id="f883d-166">Assume that the binding is the [\<basicHttpBinding>](../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md) element.</span></span> <span data-ttu-id="f883d-167">Следовательно, все операции в контракте имеют один и тот же уровень защиты.</span><span class="sxs-lookup"><span data-stu-id="f883d-167">Therefore, all operations on a contract have the same protection level.</span></span> <span data-ttu-id="f883d-168">Этот одинаковый уровень защиты определяется как максимальный уровень защиты для всех операций.</span><span class="sxs-lookup"><span data-stu-id="f883d-168">This uniform protection level is determined as the maximum protection level across all operations.</span></span>  
  
 <span data-ttu-id="f883d-169">Ниже приведен контракт службы:</span><span class="sxs-lookup"><span data-stu-id="f883d-169">The service contract is:</span></span>  
  
 [!code-csharp[c_ProtectionLevel#7](../../../samples/snippets/csharp/VS_Snippets_CFX/c_protectionlevel/cs/source.cs#7)]
 [!code-vb[c_ProtectionLevel#7](../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_protectionlevel/vb/source.vb#7)]  
  
 <span data-ttu-id="f883d-170">В следующем коде показан интерфейс контракта клиента.</span><span class="sxs-lookup"><span data-stu-id="f883d-170">The following code shows the client contract interface.</span></span> <span data-ttu-id="f883d-171">Обратите внимание, что он содержит метод `Tax`, предназначенный для использования с другой службой:</span><span class="sxs-lookup"><span data-stu-id="f883d-171">Note that it includes a `Tax` method that is intended to be used with a different service:</span></span>  
  
 [!code-csharp[c_ProtectionLevel#8](../../../samples/snippets/csharp/VS_Snippets_CFX/c_protectionlevel/cs/source.cs#8)]
 [!code-vb[c_ProtectionLevel#8](../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_protectionlevel/vb/source.vb#8)]  
  
 <span data-ttu-id="f883d-172">Когда клиент вызывает метод `Price`, при получении ответа от службы он вызывает исключение.</span><span class="sxs-lookup"><span data-stu-id="f883d-172">When the client calls the `Price` method, it throws an exception when it receives a reply from the service.</span></span> <span data-ttu-id="f883d-173">Причина этого в том, что клиент не задает `ProtectionLevel` в `ServiceContractAttribute` и, следовательно, использует значение по умолчанию (<xref:System.Net.Security.ProtectionLevel.EncryptAndSign>) для всех методов, включая метод `Price`.</span><span class="sxs-lookup"><span data-stu-id="f883d-173">This occurs because the client does not specify a `ProtectionLevel` on the `ServiceContractAttribute`, and therefore the client uses the default (<xref:System.Net.Security.ProtectionLevel.EncryptAndSign>) for all methods, including the `Price` method.</span></span> <span data-ttu-id="f883d-174">Однако служба возвращает значение, используя уровень <xref:System.Net.Security.ProtectionLevel.Sign>, поскольку контракт службы определяет единственный метод, в качестве уровня защиты которого задано значение <xref:System.Net.Security.ProtectionLevel.Sign>.</span><span class="sxs-lookup"><span data-stu-id="f883d-174">However, the service returns the value using the <xref:System.Net.Security.ProtectionLevel.Sign> level because the service contract defines a single method that has its protection level set to <xref:System.Net.Security.ProtectionLevel.Sign>.</span></span> <span data-ttu-id="f883d-175">В этом случае при проверке ответа от службы клиент вызовет ошибку.</span><span class="sxs-lookup"><span data-stu-id="f883d-175">In this case, the client will throw an error when validating the response from the service.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f883d-176">См. также</span><span class="sxs-lookup"><span data-stu-id="f883d-176">See Also</span></span>  
 <xref:System.ServiceModel.ServiceContractAttribute>  
 <xref:System.ServiceModel.OperationContractAttribute>  
 <xref:System.ServiceModel.FaultContractAttribute>  
 <xref:System.ServiceModel.MessageContractAttribute>  
 <xref:System.ServiceModel.MessageHeaderAttribute>  
 <xref:System.ServiceModel.MessageBodyMemberAttribute>  
 <xref:System.Net.Security.ProtectionLevel>  
 [<span data-ttu-id="f883d-177">Защита служб</span><span class="sxs-lookup"><span data-stu-id="f883d-177">Securing Services</span></span>](../../../docs/framework/wcf/securing-services.md)  
 [<span data-ttu-id="f883d-178">Практическое руководство. Установка свойства ProtectionLevel</span><span class="sxs-lookup"><span data-stu-id="f883d-178">How to: Set the ProtectionLevel Property</span></span>](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md)  
 [<span data-ttu-id="f883d-179">Указание и обработка сбоев в контрактах и службах</span><span class="sxs-lookup"><span data-stu-id="f883d-179">Specifying and Handling Faults in Contracts and Services</span></span>](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md)  
 [<span data-ttu-id="f883d-180">Использование контрактов сообщений</span><span class="sxs-lookup"><span data-stu-id="f883d-180">Using Message Contracts</span></span>](../../../docs/framework/wcf/feature-details/using-message-contracts.md)
