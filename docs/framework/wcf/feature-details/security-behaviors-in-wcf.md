---
title: Поведения безопасности в WCF
ms.date: 03/30/2017
ms.assetid: 513232c0-39fd-4409-bda6-5ebd5e0ea7b0
ms.openlocfilehash: 12ae9bb90752fe3ee76404948693c501fc42efe6
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2020
ms.locfileid: "76730952"
---
# <a name="security-behaviors-in-wcf"></a><span data-ttu-id="d0395-102">Поведения безопасности в WCF</span><span class="sxs-lookup"><span data-stu-id="d0395-102">Security Behaviors in WCF</span></span>
<span data-ttu-id="d0395-103">В Windows Communication Foundation (WCF) поведение изменяют поведение во время выполнения на уровне службы или на уровне конечной точки.</span><span class="sxs-lookup"><span data-stu-id="d0395-103">In Windows Communication Foundation (WCF), behaviors modify run-time behavior at the service level or at the endpoint level.</span></span> <span data-ttu-id="d0395-104">(Дополнительные сведения о поведении в целом см. в разделе [Определение поведения службы во время выполнения](../../../../docs/framework/wcf/specifying-service-run-time-behavior.md).) *Поведения безопасности* позволяют управлять учетными данными, проверкой подлинности, авторизацией и журналами аудита.</span><span class="sxs-lookup"><span data-stu-id="d0395-104">(For more information about behaviors in general, see [Specifying Service Run-Time Behavior](../../../../docs/framework/wcf/specifying-service-run-time-behavior.md).) *Security behaviors* allow control over credentials, authentication, authorization, and auditing logs.</span></span> <span data-ttu-id="d0395-105">Поведения можно использовать путем программирования или через конфигурацию.</span><span class="sxs-lookup"><span data-stu-id="d0395-105">You can use behaviors either by programming or through configuration.</span></span> <span data-ttu-id="d0395-106">В этом разделе основное внимание уделяется настройке следующих поведений, связанных с функциями безопасности:</span><span class="sxs-lookup"><span data-stu-id="d0395-106">This topic focuses on configuring the following behaviors related to security functions:</span></span>  
  
- <span data-ttu-id="d0395-107">[\<serviceCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md).</span><span class="sxs-lookup"><span data-stu-id="d0395-107">[\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md).</span></span>  
  
- <span data-ttu-id="d0395-108">[>\<ClientCredentials](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md).</span><span class="sxs-lookup"><span data-stu-id="d0395-108">[\<clientCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md).</span></span>  
  
- <span data-ttu-id="d0395-109">[\<serviceAuthorization >](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md).</span><span class="sxs-lookup"><span data-stu-id="d0395-109">[\<serviceAuthorization>](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md).</span></span>  
  
- <span data-ttu-id="d0395-110">[\<сервицесекуритяудит >](../../../../docs/framework/configure-apps/file-schema/wcf/servicesecurityaudit.md).</span><span class="sxs-lookup"><span data-stu-id="d0395-110">[\<serviceSecurityAudit>](../../../../docs/framework/configure-apps/file-schema/wcf/servicesecurityaudit.md).</span></span>  
  
- <span data-ttu-id="d0395-111">[\<serviceMetadata >](../../../../docs/framework/configure-apps/file-schema/wcf/servicemetadata.md), который также позволяет указать безопасную конечную точку, к которой клиенты могут обращаться для получения метаданных.</span><span class="sxs-lookup"><span data-stu-id="d0395-111">[\<serviceMetadata>](../../../../docs/framework/configure-apps/file-schema/wcf/servicemetadata.md), which also enables you to specify a secure endpoint that clients can access for metadata.</span></span>  
  
## <a name="setting-credentials-with-behaviors"></a><span data-ttu-id="d0395-112">Задание учетных данных с помощью поведений</span><span class="sxs-lookup"><span data-stu-id="d0395-112">Setting Credentials with Behaviors</span></span>  
 <span data-ttu-id="d0395-113">Чтобы задать значения учетных данных для службы или клиента, используйте > [\<serviceCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) и [\<ClientCredentials](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md) .</span><span class="sxs-lookup"><span data-stu-id="d0395-113">Use the [\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) and [\<clientCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md) to set credential values for a service or client.</span></span> <span data-ttu-id="d0395-114">Необходимость задания учетных данных определяется конфигурацией используемой привязки.</span><span class="sxs-lookup"><span data-stu-id="d0395-114">The underlying binding configuration determines whether a credential has to be set.</span></span> <span data-ttu-id="d0395-115">Например, если задан режим безопасности `None`, ни клиенты, ни службы не проверяют подлинность друг друга и не требуют учетных данных какого-либо типа.</span><span class="sxs-lookup"><span data-stu-id="d0395-115">For example, if the security mode is set to `None`, both clients and services do not authenticate each other and require no credentials of any type.</span></span>  
  
 <span data-ttu-id="d0395-116">С другой стороны, привязка службы может требовать тип учетных данных клиента.</span><span class="sxs-lookup"><span data-stu-id="d0395-116">On the other hand, the service binding can require a client credential type.</span></span> <span data-ttu-id="d0395-117">В этом случае может потребоваться задать значение учетных данных с помощью поведения.</span><span class="sxs-lookup"><span data-stu-id="d0395-117">In that case, you may have to set a credential value using a behavior.</span></span> <span data-ttu-id="d0395-118">(Дополнительные сведения о возможных типах учетных данных см. [в разделе Выбор типа учетных данных](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md).) В некоторых случаях, например при использовании учетных данных Windows для проверки подлинности, среда автоматически устанавливает фактическое значение учетных данных, и вам не нужно явно задавать значение учетных данных (если не требуется указывать другой набор учетных данных).</span><span class="sxs-lookup"><span data-stu-id="d0395-118">(For more information about the possible types of credentials, see [Selecting a Credential Type](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md).) In some cases, such as when Windows credentials are used to authenticate, the environment automatically establishes the actual credential value and you do not need to explicitly set the credential value (unless you want to specify a different set of credentials).</span></span>  
  
 <span data-ttu-id="d0395-119">Все учетные данные службы обнаруживаются как дочерние элементы [\<serviceBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md).</span><span class="sxs-lookup"><span data-stu-id="d0395-119">All service credentials are found as child elements of the [\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md).</span></span> <span data-ttu-id="d0395-120">В следующем примере показан сертификат, используемый в качестве учетных данных службы.</span><span class="sxs-lookup"><span data-stu-id="d0395-120">The following example shows a certificate used as a service credential.</span></span>  
  
```xml  
<configuration>  
 <system.serviceModel>  
  <behaviors>  
   <serviceBehaviors>  
    <behavior name="ServiceBehavior1">  
     <serviceCredentials>  
      <serviceCertificate findValue="000000000000000000000000000"   
                          storeLocation="CurrentUser"  
      storeName="Root" x509FindType="FindByThumbprint" />  
     </serviceCredentials>  
    </behavior>  
   </serviceBehaviors>  
  </behaviors>  
 </system.serviceModel>  
</configuration>  
```  
  
## <a name="service-credentials"></a><span data-ttu-id="d0395-121">Учетные данные службы</span><span class="sxs-lookup"><span data-stu-id="d0395-121">Service Credentials</span></span>  
 <span data-ttu-id="d0395-122">[\<serviceCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) содержит четыре дочерних элемента.</span><span class="sxs-lookup"><span data-stu-id="d0395-122">The [\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) contains four child elements.</span></span> <span data-ttu-id="d0395-123">Эти элементы и их применение рассматриваются в следующих подразделах.</span><span class="sxs-lookup"><span data-stu-id="d0395-123">The elements and their usages are discussed in the following sections.</span></span>  
  
### <a name="servicecertificate-element"></a><span data-ttu-id="d0395-124">\<serviceCertificate > элемент</span><span class="sxs-lookup"><span data-stu-id="d0395-124">\<serviceCertificate> Element</span></span>  
 <span data-ttu-id="d0395-125">Этот элемент используется для задания сертификата X.509, который используется для проверки подлинности службы при подключении к клиентам в режиме безопасности сообщений.</span><span class="sxs-lookup"><span data-stu-id="d0395-125">Use this element to specify an X.509 certificate that is used to authenticate the service to clients using Message security mode.</span></span> <span data-ttu-id="d0395-126">Если используется сертификат, который периодически обновляется, то его отпечаток изменяется.</span><span class="sxs-lookup"><span data-stu-id="d0395-126">If you are using a certificate that is periodically renewed, then its thumbprint changes.</span></span> <span data-ttu-id="d0395-127">В этом случае следует использовать имя субъекта в виде `X509FindType`, поскольку сертификат может быть выдан повторно с тем же именем субъекта.</span><span class="sxs-lookup"><span data-stu-id="d0395-127">In that case, use the subject name as the `X509FindType` because the certificate can be reissued with the same subject name.</span></span>  
  
 <span data-ttu-id="d0395-128">Дополнительные сведения об использовании элемента см. в разделе [инструкции. Указание значений учетных данных клиента](../../../../docs/framework/wcf/how-to-specify-client-credential-values.md).</span><span class="sxs-lookup"><span data-stu-id="d0395-128">For more information about using the element, see [How to: Specify Client Credential Values](../../../../docs/framework/wcf/how-to-specify-client-credential-values.md).</span></span>  
  
### <a name="certificate-of-clientcertificate-element"></a><span data-ttu-id="d0395-129">\<> сертификата \<элемента > clientCertificate</span><span class="sxs-lookup"><span data-stu-id="d0395-129">\<certificate> of \<clientCertificate> Element</span></span>  
 <span data-ttu-id="d0395-130">Используйте элемент [> сертификата\<](../../../../docs/framework/configure-apps/file-schema/wcf/certificate-of-clientcertificate-element.md) , если служба должна заранее получить сертификат клиента, чтобы обеспечить безопасное взаимодействие с клиентом.</span><span class="sxs-lookup"><span data-stu-id="d0395-130">Use the [\<certificate>](../../../../docs/framework/configure-apps/file-schema/wcf/certificate-of-clientcertificate-element.md) element when the service must have the client's certificate in advance to communicate securely with the client.</span></span> <span data-ttu-id="d0395-131">Это характерно для дуплексного обмена данными.</span><span class="sxs-lookup"><span data-stu-id="d0395-131">This occurs when using the duplex communication pattern.</span></span> <span data-ttu-id="d0395-132">В более распространенном варианте "запрос/ответ" клиент включает сертификат в запрос, который используется службой для обеспечения безопасности отклика, направляемого назад клиенту.</span><span class="sxs-lookup"><span data-stu-id="d0395-132">In the more typical request-reply pattern, the client includes its certificate in the request, which the service uses to secure its response back to the client.</span></span> <span data-ttu-id="d0395-133">Однако при дуплексном обмене данными запросы и ответы не используются.</span><span class="sxs-lookup"><span data-stu-id="d0395-133">The duplex communication pattern, however, has no requests and replies.</span></span> <span data-ttu-id="d0395-134">Служба не может логически вывести сертификат клиента из передаваемых данных, поэтому служба должна заранее получить сертификат клиента, чтобы обеспечить безопасность сообщений для клиента.</span><span class="sxs-lookup"><span data-stu-id="d0395-134">The service cannot infer the client's certificate from the communication and therefore the service requires the client's certificate in advance to secure the messages to the client.</span></span> <span data-ttu-id="d0395-135">Необходимо получить сертификат клиента при согласовании вне диапазона и указать сертификат с помощью этого элемента.</span><span class="sxs-lookup"><span data-stu-id="d0395-135">You must obtain the client's certificate in an out-of-band manner and specify the certificate using this element.</span></span> <span data-ttu-id="d0395-136">Дополнительные сведения о дуплексных службах см. [в разделе инструкции. Создание дуплексного контракта](../../../../docs/framework/wcf/feature-details/how-to-create-a-duplex-contract.md).</span><span class="sxs-lookup"><span data-stu-id="d0395-136">For more information about duplex services, see [How to: Create a Duplex Contract](../../../../docs/framework/wcf/feature-details/how-to-create-a-duplex-contract.md).</span></span>  
  
### <a name="authentication-of-clientcertificate-element"></a><span data-ttu-id="d0395-137">\<> проверки подлинности \<элемента > clientCertificate</span><span class="sxs-lookup"><span data-stu-id="d0395-137">\<authentication> of \<clientCertificate> Element</span></span>  
 <span data-ttu-id="d0395-138">Элемент [> проверки подлинности\<](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) позволяет настроить проверку подлинности клиентов.</span><span class="sxs-lookup"><span data-stu-id="d0395-138">The [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) element enables you to customize how clients are authenticated.</span></span> <span data-ttu-id="d0395-139">Для атрибута `CertificateValidationMode` можно задать значение `None`, `ChainTrust`, `PeerOrChainTrust`, `PeerTrust` или `Custom`.</span><span class="sxs-lookup"><span data-stu-id="d0395-139">You can set the `CertificateValidationMode` attribute to `None`, `ChainTrust`, `PeerOrChainTrust`, `PeerTrust`, or `Custom`.</span></span> <span data-ttu-id="d0395-140">По умолчанию уровень имеет значение `ChainTrust`, которое указывает, что каждый сертификат должен быть найден в иерархии сертификатов, которые заканчиваются *корневым центром* в верхней части цепочки.</span><span class="sxs-lookup"><span data-stu-id="d0395-140">By default, the level is set to `ChainTrust`, which specifies that each certificate must be found in a hierarchy of certificates ending in a *root authority* at the top of the chain.</span></span> <span data-ttu-id="d0395-141">Это наиболее безопасный режим.</span><span class="sxs-lookup"><span data-stu-id="d0395-141">This is the most secure mode.</span></span> <span data-ttu-id="d0395-142">Также можно установить значение `PeerOrChainTrust`, в этом случае будут приниматься как самостоятельно выдаваемые сертификаты (доверие одноранговой группы), так и сертификаты, которые находятся в цепи доверия.</span><span class="sxs-lookup"><span data-stu-id="d0395-142">You can also set the value to `PeerOrChainTrust`, which specifies that self-issued certificates (peer trust) are accepted as well as certificates that are in a trusted chain.</span></span> <span data-ttu-id="d0395-143">Данное значение используется при разработке и отладке клиентов и служб, так как самостоятельно выданные сертификаты не нужно приобретать у доверенного центра сертификации.</span><span class="sxs-lookup"><span data-stu-id="d0395-143">This value is used when developing and debugging clients and services because self-issued certificates need not be purchased from a trusted authority.</span></span> <span data-ttu-id="d0395-144">При развертывании клиента вместо этого значения следует использовать значение `ChainTrust`.</span><span class="sxs-lookup"><span data-stu-id="d0395-144">When deploying a client, use the `ChainTrust` value instead.</span></span> <span data-ttu-id="d0395-145">Также можно установить значение `Custom`.</span><span class="sxs-lookup"><span data-stu-id="d0395-145">You can also set the value to `Custom`.</span></span> <span data-ttu-id="d0395-146">При установке значения `Custom` необходимо также задать атрибут `CustomCertificateValidatorType` для сборки и тип, который используется при проверке сертификата.</span><span class="sxs-lookup"><span data-stu-id="d0395-146">When set to the `Custom` value, you must also set the `CustomCertificateValidatorType` attribute to an assembly and type used to validate the certificate.</span></span> <span data-ttu-id="d0395-147">Для создания собственного пользовательского модуля проверки необходимо наследование от абстрактного класса <xref:System.IdentityModel.Selectors.X509CertificateValidator>.</span><span class="sxs-lookup"><span data-stu-id="d0395-147">To create your own custom validator, you must inherit from the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator> class.</span></span>  
  
### <a name="issuedtokenauthentication-element"></a><span data-ttu-id="d0395-148">\<Иссуедтокенаусентикатион > элемент</span><span class="sxs-lookup"><span data-stu-id="d0395-148">\<issuedTokenAuthentication> Element</span></span>  
 <span data-ttu-id="d0395-149">В сценарии с выданным маркером имеется три этапа.</span><span class="sxs-lookup"><span data-stu-id="d0395-149">The issued token scenario has three stages.</span></span> <span data-ttu-id="d0395-150">На первом этапе клиент, пытающийся получить доступ к службе, ссылается на *службу токенов безопасности* (STS).</span><span class="sxs-lookup"><span data-stu-id="d0395-150">In the first stage, a client trying to access a service is referred to a *secure token service* (STS).</span></span> <span data-ttu-id="d0395-151">Затем служба маркеров безопасности проводит проверку подлинности клиента и выдает клиенту маркер, обычно на языке Security Assertions Markup Language (SAML).</span><span class="sxs-lookup"><span data-stu-id="d0395-151">The STS then authenticates the client and subsequently issues the client a token, typically a Security Assertions Markup Language (SAML) token.</span></span> <span data-ttu-id="d0395-152">После этого клиент возвращается к службе с этим маркером.</span><span class="sxs-lookup"><span data-stu-id="d0395-152">The client then returns to the service with the token.</span></span> <span data-ttu-id="d0395-153">Служба проверяет наличие в маркере данных, позволяющих проверить подлинность маркера и, соответственно, самого клиента.</span><span class="sxs-lookup"><span data-stu-id="d0395-153">The service examines the token for data that allows the service to authenticate the token and therefore the client.</span></span> <span data-ttu-id="d0395-154">Для проверки подлинности маркера сертификат, используемый службой маркеров безопасности, должен быть известен службе.</span><span class="sxs-lookup"><span data-stu-id="d0395-154">To authenticate the token, the certificate that the secure token service uses must be known to the service.</span></span> <span data-ttu-id="d0395-155">Элемент [\<иссуедтокенаусентикатион >](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md) является репозиторием для любых таких сертификатов службы безопасных маркеров.</span><span class="sxs-lookup"><span data-stu-id="d0395-155">The [\<issuedTokenAuthentication>](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md) element is the repository for any such secure token service certificates.</span></span> <span data-ttu-id="d0395-156">Чтобы добавить сертификаты, используйте [\<кновнцертификатес >](../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md).</span><span class="sxs-lookup"><span data-stu-id="d0395-156">To add certificates, use the [\<knownCertificates>](../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md).</span></span> <span data-ttu-id="d0395-157">Вставьте [\<добавить >](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-knowncertificates.md) для каждого сертификата, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="d0395-157">Insert an [\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-knowncertificates.md) for each certificate, as shown in the following example.</span></span>  
  
```xml  
<issuedTokenAuthentication>  
   <knownCertificates>  
      <add findValue="www.contoso.com"   
           storeLocation="LocalMachine" storeName="My"   
           X509FindType="FindBySubjectName" />  
    </knownCertificates>  
</issuedTokenAuthentication>  
```  
  
 <span data-ttu-id="d0395-158">По умолчанию сертификаты должны быть получены от службы маркеров безопасности.</span><span class="sxs-lookup"><span data-stu-id="d0395-158">By default, the certificates must be obtained from a secure token service.</span></span> <span data-ttu-id="d0395-159">Эти "известные" сертификаты гарантируют, что доступ к службе могут получить только допустимые клиенты.</span><span class="sxs-lookup"><span data-stu-id="d0395-159">These "known" certificates ensure that only legitimate clients can access a service.</span></span>  
  
 <span data-ttu-id="d0395-160">Вы должны использовать коллекцию [\<алловедаудиенцеурис >](../../../../docs/framework/configure-apps/file-schema/wcf/allowedaudienceuris.md) в Федеративной приложении, использующем *службу токенов* безопасности (STS), которая выдает `SamlSecurityToken` маркеров.</span><span class="sxs-lookup"><span data-stu-id="d0395-160">You should use the [\<allowedAudienceUris>](../../../../docs/framework/configure-apps/file-schema/wcf/allowedaudienceuris.md) collection in a federated application that utilizes a *secure token service* (STS) that issues `SamlSecurityToken` security tokens.</span></span> <span data-ttu-id="d0395-161">При выпуске маркера безопасности служба STS также может указать универсальный код ресурса (URI) веб-служб, для которых предназначен маркер безопасности, добавив выражение `SamlAudienceRestrictionCondition` к маркеру безопасности.</span><span class="sxs-lookup"><span data-stu-id="d0395-161">When the STS issues the security token, it can specify the URI of the Web services for which the security token is intended by adding a `SamlAudienceRestrictionCondition` to the security token.</span></span> <span data-ttu-id="d0395-162">Это позволяет коду `SamlSecurityTokenAuthenticator` для веб-службы получателя проверить, что выданный маркер безопасности предназначен для данной службы, указав на необходимость выполнения соответствующей проверки. Для этого выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="d0395-162">That allows the `SamlSecurityTokenAuthenticator` for the recipient Web service to verify that the issued security token is intended for this Web service by specifying that this check should happen by doing the following:</span></span>  
  
- <span data-ttu-id="d0395-163">Задайте для атрибута `audienceUriMode` [\<иссуедтокенаусентикатион >](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md) значение `Always` или `BearerKeyOnly`.</span><span class="sxs-lookup"><span data-stu-id="d0395-163">Set the `audienceUriMode` attribute of [\<issuedTokenAuthentication>](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md) to `Always` or `BearerKeyOnly`.</span></span>  
  
- <span data-ttu-id="d0395-164">Задайте набор допустимых универсальных кодов ресурса (URI), добавив их в данную коллекцию.</span><span class="sxs-lookup"><span data-stu-id="d0395-164">Specify the set of valid URIs, by adding the URIs to this collection.</span></span> <span data-ttu-id="d0395-165">Для этого вставьте [\<добавить >](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-allowedaudienceuris.md) для каждого URI.</span><span class="sxs-lookup"><span data-stu-id="d0395-165">To do this, insert an [\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-allowedaudienceuris.md) for each URI</span></span>  
  
 <span data-ttu-id="d0395-166">Дополнительные сведения см. в разделе <xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator>.</span><span class="sxs-lookup"><span data-stu-id="d0395-166">For more information, see <xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator>.</span></span>  
  
 <span data-ttu-id="d0395-167">Дополнительные сведения об использовании этого элемента конфигурации см. в разделе [как настроить учетные данные на служба федерации](../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md).</span><span class="sxs-lookup"><span data-stu-id="d0395-167">For more information about using this configuration element, see [How to: Configure Credentials on a Federation Service](../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md).</span></span>  
  
#### <a name="allowing-anonymous-cardspace-users"></a><span data-ttu-id="d0395-168">Разрешение анонимных пользователей CardSpace</span><span class="sxs-lookup"><span data-stu-id="d0395-168">Allowing Anonymous CardSpace Users</span></span>  
 <span data-ttu-id="d0395-169">Если для атрибута `AllowUntrustedRsaIssuers` элемента `<IssuedTokenAuthentication>` явно задано значение `true`, любой клиент может представить самостоятельно выданный маркер, подписанный произвольной парой ключей RSA.</span><span class="sxs-lookup"><span data-stu-id="d0395-169">Setting the `AllowUntrustedRsaIssuers` attribute of the `<IssuedTokenAuthentication>` element to `true` explicitly allows any client to present a self-issued token signed with an arbitrary RSA key pair.</span></span> <span data-ttu-id="d0395-170">Поставщик не является *доверенным* , так как с ключом не связаны данные издателя.</span><span class="sxs-lookup"><span data-stu-id="d0395-170">The issuer is *untrusted* because the key has no issuer data associated with it.</span></span> <span data-ttu-id="d0395-171">Пользователь CardSpace может создать собственную карточку, включающую собственные утверждения идентификации.</span><span class="sxs-lookup"><span data-stu-id="d0395-171">A CardSpace user can create a self-issued card that includes self-provided claims of identity.</span></span> <span data-ttu-id="d0395-172">Эту возможность следует использовать с осторожностью.</span><span class="sxs-lookup"><span data-stu-id="d0395-172">Use this capability with caution.</span></span> <span data-ttu-id="d0395-173">Используя эту функцию, считайте открытый ключ RSA просто более безопасным паролем, который должен храниться в базе данных вместе с именем пользователя.</span><span class="sxs-lookup"><span data-stu-id="d0395-173">To use this feature, think of the RSA public key as a more secure password that should be stored in a database along with a user name.</span></span> <span data-ttu-id="d0395-174">Прежде чем разрешить клиенту доступ к службе, проверьте представленный клиентом открытый ключ RSA, сравнив его с хранящимся открытым ключом для указанного имени пользователя.</span><span class="sxs-lookup"><span data-stu-id="d0395-174">Before allowing a client access to the service, verify the client-presented RSA public key by comparing it with the stored public key for the presented user name.</span></span> <span data-ttu-id="d0395-175">Это подразумевает, что организован процесс регистрации, в котором пользователи могут регистрировать свои имена пользователя и связывать их с самостоятельно изданными открытыми ключами RSA.</span><span class="sxs-lookup"><span data-stu-id="d0395-175">This presumes that you have established a registration process whereby users can register their user names and associate them with the self-issued RSA public keys.</span></span>  
  
## <a name="client-credentials"></a><span data-ttu-id="d0395-176">Учетные данные клиента</span><span class="sxs-lookup"><span data-stu-id="d0395-176">Client Credentials</span></span>  
 <span data-ttu-id="d0395-177">Учетные данные клиента используются для проверки подлинности клиента при подключении к службам в случаях, когда требуется взаимная проверка подлинности.</span><span class="sxs-lookup"><span data-stu-id="d0395-177">Client credentials are used to authenticate the client to services in cases where mutual authentication is required.</span></span> <span data-ttu-id="d0395-178">Данный раздел можно использовать для задания сертификатов служб для сценариев, где клиент должен обеспечить защиту сообщений, передаваемых службе, с помощью сертификатов службы.</span><span class="sxs-lookup"><span data-stu-id="d0395-178">You can use the section to specify service certificates for scenarios where the client must secure messages to a service with the service's certificate.</span></span>  
  
 <span data-ttu-id="d0395-179">В рамках сценария федерации также можно настроить в клиенте использование токенов, выданных службой токенов безопасности или локальным источником токенов.</span><span class="sxs-lookup"><span data-stu-id="d0395-179">You can also configure a client as part of a federation scenario to use issued tokens from a secure token service or a local issuer of tokens.</span></span> <span data-ttu-id="d0395-180">Дополнительные сведения о федеративных сценариях см. в разделе [Федерация и выданные токены](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="d0395-180">For more information about federated scenarios, see [Federation and Issued Tokens](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span></span> <span data-ttu-id="d0395-181">Все учетные данные клиента находятся в [\<endpointBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md), как показано в следующем коде.</span><span class="sxs-lookup"><span data-stu-id="d0395-181">All client credentials are found under the [\<endpointBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md), as shown in the following code.</span></span>  
  
```xml  
<behaviors>  
 <endpointBehaviors>  
  <behavior name="EndpointBehavior1">  
   <clientCredentials>  
    <clientCertificate findValue="cn=www.contoso.com"     
        storeLocation="LocalMachine"  
        storeName="AuthRoot" x509FindType="FindBySubjectName" />  
    <serviceCertificate>  
     <defaultCertificate findValue="www.cohowinery.com"   
                    storeLocation="LocalMachine"  
                    storeName="Root" x509FindType="FindByIssuerName" />  
    <authentication revocationMode="Online"  
                    trustedStoreLocation="LocalMachine" />  
    </serviceCertificate>  
   </clientCredentials>  
  </behavior>  
 </endpointBehaviors>  
```  
  
#### <a name="clientcertificate-element"></a><span data-ttu-id="d0395-182">\<clientCertificate > элемент</span><span class="sxs-lookup"><span data-stu-id="d0395-182">\<clientCertificate> Element</span></span>  
 <span data-ttu-id="d0395-183">Задает сертификат, используемый для проверки подлинности клиента с помощью этого элемента.</span><span class="sxs-lookup"><span data-stu-id="d0395-183">Set the certificate used to authenticate the client with this element.</span></span> <span data-ttu-id="d0395-184">Дополнительные сведения см. [в разделе инструкции. Указание значений учетных данных клиента](../../../../docs/framework/wcf/how-to-specify-client-credential-values.md).</span><span class="sxs-lookup"><span data-stu-id="d0395-184">For more information, see [How to: Specify Client Credential Values](../../../../docs/framework/wcf/how-to-specify-client-credential-values.md).</span></span>  
  
#### <a name="httpdigest"></a><span data-ttu-id="d0395-185">\<Хттпдижест ></span><span class="sxs-lookup"><span data-stu-id="d0395-185">\<httpDigest></span></span>  
 <span data-ttu-id="d0395-186">Эта функция должна быть включена с помощью Active Directory в Windows и службах IIS.</span><span class="sxs-lookup"><span data-stu-id="d0395-186">This feature must be enabled with Active Directory on Windows and Internet Information Services (IIS).</span></span> <span data-ttu-id="d0395-187">Дополнительные сведения см. [в статье дайджест-проверка подлинности в IIS 6,0](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc782661(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="d0395-187">For more information, see [Digest Authentication in IIS 6.0](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc782661(v=ws.10)).</span></span>  
  
#### <a name="issuedtoken-element"></a><span data-ttu-id="d0395-188">\<issuedToken > элемент</span><span class="sxs-lookup"><span data-stu-id="d0395-188">\<issuedToken> Element</span></span>  
 <span data-ttu-id="d0395-189">[\<issuedToken >](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtoken.md) содержит элементы, используемые для настройки локального издателя маркеров или поведения, используемые в службе маркеров безопасности.</span><span class="sxs-lookup"><span data-stu-id="d0395-189">The [\<issuedToken>](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtoken.md) contains the elements used to configure a local issuer of tokens, or behaviors used with an security token service.</span></span> <span data-ttu-id="d0395-190">Инструкции по настройке клиента для использования локального издателя см. [в разделе как настроить локальный издатель](../../../../docs/framework/wcf/feature-details/how-to-configure-a-local-issuer.md).</span><span class="sxs-lookup"><span data-stu-id="d0395-190">For instructions on configuring a client to use a local issuer, see [How to: Configure a Local Issuer](../../../../docs/framework/wcf/feature-details/how-to-configure-a-local-issuer.md).</span></span>  
  
#### <a name="localissueraddress"></a><span data-ttu-id="d0395-191">\<Локалиссуераддресс ></span><span class="sxs-lookup"><span data-stu-id="d0395-191">\<localIssuerAddress></span></span>  
 <span data-ttu-id="d0395-192">Задает адрес службы маркеров безопасности по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="d0395-192">Specifies a default security token service address.</span></span> <span data-ttu-id="d0395-193">Используется, когда <xref:System.ServiceModel.WSFederationHttpBinding> не предоставляет URL-адрес для службы маркеров безопасности или если адрес издателя Федеративной привязки — `http://schemas.microsoft.com/2005/12/ServiceModel/Addressing/Anonymous` или `null`.</span><span class="sxs-lookup"><span data-stu-id="d0395-193">This is used when the <xref:System.ServiceModel.WSFederationHttpBinding> does not supply a URL for the security token service, or when the issuer address of a federated binding is `http://schemas.microsoft.com/2005/12/ServiceModel/Addressing/Anonymous` or `null`.</span></span> <span data-ttu-id="d0395-194">В этих случаях необходимо настроить объект <xref:System.ServiceModel.Description.ClientCredentials> с использованием адреса локального издателя и привязки, с помощью которой будет осуществляться взаимодействие с этим издателем.</span><span class="sxs-lookup"><span data-stu-id="d0395-194">In such cases, the <xref:System.ServiceModel.Description.ClientCredentials> must be configured with the address of the local issuer and the binding to use to communicate with that issuer.</span></span>  
  
#### <a name="issuerchannelbehaviors"></a><span data-ttu-id="d0395-195">\<issuerChannelBehaviors ></span><span class="sxs-lookup"><span data-stu-id="d0395-195">\<issuerChannelBehaviors></span></span>  
 <span data-ttu-id="d0395-196">Используйте [\<issuerChannelBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/issuerchannelbehaviors-element.md) , чтобы добавить поведение клиента WCF, используемое при взаимодействии со службой маркеров безопасности.</span><span class="sxs-lookup"><span data-stu-id="d0395-196">Use the [\<issuerChannelBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/issuerchannelbehaviors-element.md) to add WCF client behaviors used when communicating with a security token service.</span></span> <span data-ttu-id="d0395-197">Определите поведение клиента в разделе [\<endpointBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md) .</span><span class="sxs-lookup"><span data-stu-id="d0395-197">Define client behaviors in the [\<endpointBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md) section.</span></span> <span data-ttu-id="d0395-198">Чтобы использовать определенное поведение, добавьте элемент <`add`> в элемент `<issuerChannelBehaviors>` с двумя атрибутами.</span><span class="sxs-lookup"><span data-stu-id="d0395-198">To use a defined behavior, add an <`add`> element to the `<issuerChannelBehaviors>` element with two attributes.</span></span> <span data-ttu-id="d0395-199">Задайте в атрибуте `issuerAddress` URL-адрес службы маркеров безопасности, а в атрибуте `behaviorConfiguration` - имя определенного поведения конечной точки, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="d0395-199">Set the `issuerAddress` to the URL of the security token service and set the `behaviorConfiguration` attribute to the name of the defined endpoint behavior, as shown in the following example.</span></span>  
  
```xml  
<clientCredentials>  
   <issuedToken>  
      <issuerChannelBehaviors>  
         <add issuerAddress="http://www.contoso.com"  
               behaviorConfiguration="clientBehavior1" />     
```  
  
#### <a name="servicecertificate-element"></a><span data-ttu-id="d0395-200">\<serviceCertificate > элемент</span><span class="sxs-lookup"><span data-stu-id="d0395-200">\<serviceCertificate> Element</span></span>  
 <span data-ttu-id="d0395-201">Этот элемент служит для управления проверкой подлинности сертификатов службы.</span><span class="sxs-lookup"><span data-stu-id="d0395-201">Use this element to control authentication of service certificates.</span></span>  
  
 <span data-ttu-id="d0395-202">Элемент [\<дефаултцертификате >](../../../../docs/framework/configure-apps/file-schema/wcf/defaultcertificate-element.md) может хранить один сертификат, используемый, если служба не указывает сертификат.</span><span class="sxs-lookup"><span data-stu-id="d0395-202">The [\<defaultCertificate>](../../../../docs/framework/configure-apps/file-schema/wcf/defaultcertificate-element.md) element can store a single certificate used when the service specifies no certificate.</span></span>  
  
 <span data-ttu-id="d0395-203">Используйте [\<скопедцертификатес >](../../../../docs/framework/configure-apps/file-schema/wcf/scopedcertificates-element.md) и [\<Добавить >](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-scopedcertificates-element.md) , чтобы задать сертификаты служб, связанные с конкретными службами.</span><span class="sxs-lookup"><span data-stu-id="d0395-203">Use the [\<scopedCertificates>](../../../../docs/framework/configure-apps/file-schema/wcf/scopedcertificates-element.md) and [\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-scopedcertificates-element.md) to set service certificates that are associated with specific services.</span></span> <span data-ttu-id="d0395-204">Элемент `<add>` содержит атрибут `targetUri`, который служит для связывания сертификата со службой.</span><span class="sxs-lookup"><span data-stu-id="d0395-204">The `<add>` element includes a `targetUri` attribute that is used to associate the certificate with the service.</span></span>  
  
 <span data-ttu-id="d0395-205">Элемент [> проверки подлинности\<](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) указывает уровень доверия, используемый для проверки подлинности сертификатов.</span><span class="sxs-lookup"><span data-stu-id="d0395-205">The [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) element specifies the level of trust used to authenticate certificates.</span></span> <span data-ttu-id="d0395-206">По умолчанию для уровня устанавливается значение ChainTrust, указывающее, что каждый сертификат должен находиться в иерархии сертификатов, которая на самом верху цепи завершается доверенным центром сертификации.</span><span class="sxs-lookup"><span data-stu-id="d0395-206">By default, the level is set to "ChainTrust," which specifies that each certificate must be found in a hierarchy of certificates ending in a trusted certification authority at the top of the chain.</span></span> <span data-ttu-id="d0395-207">Это наиболее безопасный режим.</span><span class="sxs-lookup"><span data-stu-id="d0395-207">This is the most secure mode.</span></span> <span data-ttu-id="d0395-208">Также можно установить значение PeerOrChainTrust. В этом случае будут приниматься как самостоятельно выдаваемые сертификаты (доверие одноранговой группы), так и сертификаты, которые находятся в цепочке доверия.</span><span class="sxs-lookup"><span data-stu-id="d0395-208">You can also set the value to "PeerOrChainTrust", which specifies that self-issued certificates (peer trust) are accepted, as well as certificates that are in a trusted chain.</span></span> <span data-ttu-id="d0395-209">Данное значение используется при разработке и отладке клиентов и служб, так как самостоятельно выданные сертификаты не нужно приобретать у доверенного центра сертификации.</span><span class="sxs-lookup"><span data-stu-id="d0395-209">This value is used when developing and debugging clients and services because self-issued certificates need not be purchased from a trusted authority.</span></span> <span data-ttu-id="d0395-210">При развертывании клиента вместо этого значения следует использовать значение "ChainTrust".</span><span class="sxs-lookup"><span data-stu-id="d0395-210">When deploying a client, use the "ChainTrust" value instead.</span></span> <span data-ttu-id="d0395-211">Также можно задать значение "Custom" или "None".</span><span class="sxs-lookup"><span data-stu-id="d0395-211">You can also set the value to "Custom" or "None."</span></span> <span data-ttu-id="d0395-212">Чтобы использовать значение "Custom", необходимо также установить для атрибута `CustomCertificateValidatorType` значение сборки и типа, которые используются при проверке сертификата.</span><span class="sxs-lookup"><span data-stu-id="d0395-212">To use the "Custom" value, you must also set the `CustomCertificateValidatorType` attribute to an assembly and type used to validate the certificate.</span></span> <span data-ttu-id="d0395-213">Для создания собственного пользовательского модуля проверки необходимо наследование от абстрактного класса <xref:System.IdentityModel.Selectors.X509CertificateValidator>.</span><span class="sxs-lookup"><span data-stu-id="d0395-213">To create your own custom validator, you must inherit from the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator> class.</span></span> <span data-ttu-id="d0395-214">Дополнительные сведения см. [в разделе инструкции. Создание службы, использующей пользовательский проверяющий элемент управления для сертификатов](../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md).</span><span class="sxs-lookup"><span data-stu-id="d0395-214">For more information, see [How to: Create a Service that Employs a Custom Certificate Validator](../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md).</span></span>  
  
 <span data-ttu-id="d0395-215">Элемент [> проверки подлинности\<](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) содержит атрибут `RevocationMode`, указывающий способ проверки сертификатов для отзыва.</span><span class="sxs-lookup"><span data-stu-id="d0395-215">The [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) element includes a `RevocationMode` attribute that specifies how certificates are checked for revocation.</span></span> <span data-ttu-id="d0395-216">По умолчанию используется значение online, которое указывает, что проверка отзыва сертификата выполняется автоматически.</span><span class="sxs-lookup"><span data-stu-id="d0395-216">The default is "online", which indicates that certificates are automatically checked for revocation.</span></span> <span data-ttu-id="d0395-217">Дополнительные сведения см. в разделе [Работа с сертификатами](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).</span><span class="sxs-lookup"><span data-stu-id="d0395-217">For more information, see [Working with Certificates](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).</span></span>  
  
## <a name="serviceauthorization"></a><span data-ttu-id="d0395-218">ServiceAuthorization</span><span class="sxs-lookup"><span data-stu-id="d0395-218">ServiceAuthorization</span></span>  
 <span data-ttu-id="d0395-219">Элемент [\<serviceAuthorization >](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md) содержит элементы, влияющие на авторизацию, поставщиков пользовательских ролей и олицетворение.</span><span class="sxs-lookup"><span data-stu-id="d0395-219">The [\<serviceAuthorization>](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md) element contains elements that affect authorization, custom role providers, and impersonation.</span></span>  
  
 <span data-ttu-id="d0395-220">Класс <xref:System.Security.Permissions.PrincipalPermissionAttribute> применяется к методу службы.</span><span class="sxs-lookup"><span data-stu-id="d0395-220">The <xref:System.Security.Permissions.PrincipalPermissionAttribute> class is applied to a service method.</span></span> <span data-ttu-id="d0395-221">Этот атрибут указывает группы пользователей, которые следует использовать при авторизации использования защищенного метода.</span><span class="sxs-lookup"><span data-stu-id="d0395-221">The attribute specifies the groups of users to use when authorizing use of a protected method.</span></span> <span data-ttu-id="d0395-222">Значение по умолчанию - "UseWindowsGroups". Оно указывает, что при попытке доступа к ресурсу поиск идентификации выполняется в таких группах Windows, как "Администраторы" или "Пользователи".</span><span class="sxs-lookup"><span data-stu-id="d0395-222">The default value is "UseWindowsGroups" and specifies that Windows groups, such as "Administrators" or "Users," are searched for an identity trying to access a resource.</span></span> <span data-ttu-id="d0395-223">Можно также указать "UseAspNetRoles", чтобы использовать пользовательский поставщик ролей, настроенный в элементе <`system.web` >, как показано в следующем коде.</span><span class="sxs-lookup"><span data-stu-id="d0395-223">You can also specify "UseAspNetRoles" to use a custom role provider that is configured under the <`system.web` > element, as shown in the following code.</span></span>  
  
```xml  
<system.web>  
  <membership defaultProvider="SqlProvider"   
   userIsOnlineTimeWindow="15">  
     <providers>  
       <clear />  
       <add   
          name="SqlProvider"   
          type="System.Web.Security.SqlMembershipProvider"   
          connectionStringName="SqlConn"  
          applicationName="MembershipProvider"  
          enablePasswordRetrieval="false"  
          enablePasswordReset="false"  
          requiresQuestionAndAnswer="false"  
          requiresUniqueEmail="true"  
          passwordFormat="Hashed" />  
     </providers>  
   </membership>  
  <!-- Other configuration code not shown.-->  
</system.web>  
```  
  
 <span data-ttu-id="d0395-224">В следующем примере показано использование элемента `roleProviderName` с атрибутом `principalPermissionMode`.</span><span class="sxs-lookup"><span data-stu-id="d0395-224">The following code shows the `roleProviderName` used with the `principalPermissionMode` attribute.</span></span>  
  
```xml  
<behaviors>  
 <behavior name="ServiceBehaviour">          
  <serviceAuthorization principalPermissionMode ="UseAspNetRoles"   
                        roleProviderName ="SqlProvider" />  
</behavior>   
   <!-- Other configuration code not shown. -->  
</behaviors>  
```  
  
## <a name="configuring-security-audits"></a><span data-ttu-id="d0395-225">Настройка аудита безопасности</span><span class="sxs-lookup"><span data-stu-id="d0395-225">Configuring Security Audits</span></span>  
 <span data-ttu-id="d0395-226">Используйте [\<сервицесекуритяудит >](../../../../docs/framework/configure-apps/file-schema/wcf/servicesecurityaudit.md) , чтобы указать записываемый журнал и типы событий, которые необходимо заносить в журнал.</span><span class="sxs-lookup"><span data-stu-id="d0395-226">Use the [\<serviceSecurityAudit>](../../../../docs/framework/configure-apps/file-schema/wcf/servicesecurityaudit.md) to specify the log written to, and what types of events to log.</span></span> <span data-ttu-id="d0395-227">Дополнительные сведения см. в разделе [Audit](../../../../docs/framework/wcf/feature-details/auditing-security-events.md).</span><span class="sxs-lookup"><span data-stu-id="d0395-227">For more information, see [Auditing](../../../../docs/framework/wcf/feature-details/auditing-security-events.md).</span></span>  
  
```xml  
<system.serviceModel>  
<serviceBehaviors>  
  <behavior name="NewBehavior">  
    <serviceSecurityAudit auditLogLocation="Application"   
             suppressAuditFailure="true"  
             serviceAuthorizationAuditLevel="Success"   
             messageAuthenticationAuditLevel="Success" />  
    </behavior>  
  </serviceBehaviors>  
</behaviors>  
```  
  
## <a name="secure-metadata-exchange"></a><span data-ttu-id="d0395-228">Безопасный обмен метаданными</span><span class="sxs-lookup"><span data-stu-id="d0395-228">Secure Metadata Exchange</span></span>  
 <span data-ttu-id="d0395-229">Экспорт метаданных в клиенты удобен для разработчиков служб и клиентов, так как позволяет загружать конфигурацию и код клиента.</span><span class="sxs-lookup"><span data-stu-id="d0395-229">Exporting metadata to clients is convenient for service and client developers, as it enables downloads of configuration and client code.</span></span> <span data-ttu-id="d0395-230">Для снижения подверженности службы действиям недобросовестных пользователей перенос можно защитить с помощью механизма SSL по протоколу HTTP (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="d0395-230">To reduce the exposure of a service to malicious users, it is possible to secure the transfer using the SSL over HTTP (HTTPS) mechanism.</span></span> <span data-ttu-id="d0395-231">Для этого необходимо вначале выполнить привязку подходящего сертификата X.509 к конкретному порту компьютера, на котором размещена служба.</span><span class="sxs-lookup"><span data-stu-id="d0395-231">To do so, you must first bind a suitable X.509 certificate to a specific port on the computer that is hosting the service.</span></span> <span data-ttu-id="d0395-232">(Дополнительные сведения см. в разделе [Работа с сертификатами](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).) Во-вторых, добавьте [\<serviceMetadata >](../../../../docs/framework/configure-apps/file-schema/wcf/servicemetadata.md) в конфигурацию службы и присвойте атрибуту `HttpsGetEnabled` значение `true`.</span><span class="sxs-lookup"><span data-stu-id="d0395-232">(For more information, see [Working with Certificates](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).) Second, add a [\<serviceMetadata>](../../../../docs/framework/configure-apps/file-schema/wcf/servicemetadata.md) to the service configuration and set the `HttpsGetEnabled` attribute to `true`.</span></span> <span data-ttu-id="d0395-233">После этого следует присвоить атрибуту `HttpsGetUrl` URL-адрес конечной точки метаданных службы, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="d0395-233">Finally, set the `HttpsGetUrl` attribute to the URL of the service metadata endpoint, as shown in the following example.</span></span>  
  
```xml  
<behaviors>  
 <serviceBehaviors>  
  <behavior name="NewBehavior">  
    <serviceMetadata httpsGetEnabled="true"   
     httpsGetUrl="https://myComputerName/myEndpoint" />  
  </behavior>  
 </serviceBehaviors>  
</behaviors>  
```  
  
## <a name="see-also"></a><span data-ttu-id="d0395-234">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="d0395-234">See also</span></span>

- [<span data-ttu-id="d0395-235">Аудит</span><span class="sxs-lookup"><span data-stu-id="d0395-235">Auditing</span></span>](../../../../docs/framework/wcf/feature-details/auditing-security-events.md)
- <span data-ttu-id="d0395-236">[Модель безопасности для Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677202(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="d0395-236">[Security Model for Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677202(v=azure.10))</span></span>
