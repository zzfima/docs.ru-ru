---
title: Активация на основе конфигурации в IIS и WAS
ms.date: 03/30/2017
ms.assetid: 6a927e1f-b905-4ee5-ad0f-78265da38238
ms.openlocfilehash: 6515d6621798a9dab67aa7b73a39b9481c1779fc
ms.sourcegitcommit: c01c18755bb7b0f82c7232314ccf7955ea7834db
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/15/2020
ms.locfileid: "75963488"
---
# <a name="configuration-based-activation-in-iis-and-was"></a>Активация на основе конфигурации в IIS и WAS

Обычно при размещении службы Windows Communication Foundation (WCF) в службы IIS (IIS) или службе активации Windows (WAS) необходимо предоставить SVC-файл. SVC-файл содержит имя службы, а также дополнительную пользовательскую фабрику узла службы. С помощью этого дополнительного файла добавляются служебные данные по управлению. Возможность активации на основе конфигурации снимает требование по наличию SVC-файла и, следовательно, по наличию связанных служебных данных.

## <a name="configuration-based-activation"></a>Активация на основе конфигурации

Активация на основе конфигурации принимает метаданные, которые используются для размещения в SVC-файле, и помещает их в файл Web.config. В элементе > <`serviceHostingEnvironment`имеется элемент <`serviceActivations`>. В <`serviceActivations`элемент > — один или несколько элементов <`add`>, по одному для каждой размещенной службы. Элемент <`add`> содержит атрибуты, позволяющие задать относительный адрес для службы, а также тип службы или фабрику узла службы. В следующем примере конфигурации показано, каким образом используется этот раздел.

> [!NOTE]
> Каждый <`add`элемент > должен указывать атрибут Service или Factory. Можно указать и атрибут службы, и атрибут фабрики.

```xml
<serviceHostingEnvironment>
  <serviceActivations>
    <add relativeAddress="MyServiceAddress" service="Service" factory="MyServiceHostFactory"/>
  </serviceActivations>
</serviceHostingEnvironment>
```

 Такой код, показанный в файле Web.config, позволяет поместить исходный код службы в каталог App_Code приложения или откомпилированную сборку в каталог Bin приложения.

> [!NOTE]
>
> - При использовании активации на основе конфигурации, встроенный программный код в SVC-файлах не поддерживается.
> - Для атрибута `relativeAddress` необходимо задать относительный адрес, например "\<подкаталог >/сервице.СВК" или "~/\<суб-директори/Service. svc".
> - Если зарегистрирован относительный адрес, который не содержит известного расширения имени, связанного с WCF, то будет создано исключение конфигурации.
> - Относительный адрес указывается относительно корневого каталога виртуального приложения.
> - Поскольку модель конфигурации имеет иерархическую структуру, относительный адрес, который зарегистрирован на уровне компьютера и узла, наследуется виртуальными приложениями.
> - Регистрация в файле конфигурации имеет более высокий приоритет, чем параметры в SVC-файле, XAMLX-файле, XOML-файле и других файлах.
> - Все символы обратной косой черты «\» в URI, отправляемых в IIS/WAS, автоматически преобразуются в символы косой черты «/». Если добавляемый относительный адрес содержит символ «\», а в IIS отправлен URI, который использует относительный адрес, то символ обратной косой черты преобразуется в символ косой черты и IIS не может сопоставить его с относительным адресом. Службы IIS отправляют сведения трассировки, которые указывают, что соответствие не найдено.

## <a name="see-also"></a>См. также:

- <xref:System.ServiceModel.Configuration.ServiceHostingEnvironmentSection.ServiceActivations%2A>
- [Размещение служб](../../../../docs/framework/wcf/hosting-services.md)
- [Общие сведения о размещении служб рабочих процессов](../../../../docs/framework/wcf/feature-details/hosting-workflow-services-overview.md)
- [\<serviceHostingEnvironment >](../../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md)
- [Функции размещения Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))
