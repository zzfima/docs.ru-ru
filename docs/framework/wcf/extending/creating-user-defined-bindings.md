---
title: Создание пользовательских привязок
ms.date: 03/30/2017
helpviewer_keywords:
- user-defined bindings [WCF]
ms.assetid: c4960675-d701-4bc9-b400-36a752fdd08b
ms.openlocfilehash: 34100569dc5cd5a340abca66fedca40ba21c1e0b
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2020
ms.locfileid: "79185634"
---
# <a name="creating-user-defined-bindings"></a><span data-ttu-id="b5e85-102">Создание пользовательских привязок</span><span class="sxs-lookup"><span data-stu-id="b5e85-102">Creating User-Defined Bindings</span></span>
<span data-ttu-id="b5e85-103">Существует несколько способов создания привязок, не предоставленных системой.</span><span class="sxs-lookup"><span data-stu-id="b5e85-103">There are several ways to create bindings not provided by the system:</span></span>  
  
- <span data-ttu-id="b5e85-104">Создать пользовательскую привязку на основе класса <xref:System.ServiceModel.Channels.CustomBinding>, который служит контейнером, вмещающим элементы привязки.</span><span class="sxs-lookup"><span data-stu-id="b5e85-104">Create a custom binding, based on the <xref:System.ServiceModel.Channels.CustomBinding> class, which is a container that you fill with binding elements.</span></span> <span data-ttu-id="b5e85-105">Впоследствии пользовательская привязка добавляется к конечной точке службы.</span><span class="sxs-lookup"><span data-stu-id="b5e85-105">The custom binding is then added to a service endpoint.</span></span> <span data-ttu-id="b5e85-106">Для создания пользовательской привязки можно использовать программные методы или файл конфигурации приложения.</span><span class="sxs-lookup"><span data-stu-id="b5e85-106">You can create the custom binding either programmatically or in an application configuration file.</span></span> <span data-ttu-id="b5e85-107">Для использования элемента привязки из файла конфигурации приложения элемент привязки должен быть производным от класса <xref:System.ServiceModel.Configuration.BindingElementExtensionElement>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-107">To use a binding element from an application configuration file, the binding element must extend <xref:System.ServiceModel.Configuration.BindingElementExtensionElement>.</span></span> <span data-ttu-id="b5e85-108">Для получения дополнительной информации о пользовательских <xref:System.ServiceModel.Channels.CustomBinding>привязок, см [пользовательских привязок](custom-bindings.md) и .</span><span class="sxs-lookup"><span data-stu-id="b5e85-108">For more information about custom bindings, see [Custom Bindings](custom-bindings.md) and <xref:System.ServiceModel.Channels.CustomBinding>.</span></span>  
  
- <span data-ttu-id="b5e85-109">Создать класс, производный от стандартной привязки.</span><span class="sxs-lookup"><span data-stu-id="b5e85-109">You can create a class that derives from a standard binding.</span></span> <span data-ttu-id="b5e85-110">Например, чтобы получить элементы привязки и вставить элемент пользовательской привязки или установить определенное значение для обеспечения безопасности, можно создать класс, производный от <xref:System.ServiceModel.WSHttpBinding>, и переопределить метод <xref:System.ServiceModel.Channels.CustomBinding.CreateBindingElements%2A>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-110">For example, you can derive a class from <xref:System.ServiceModel.WSHttpBinding> and override <xref:System.ServiceModel.Channels.CustomBinding.CreateBindingElements%2A> method to obtain the binding elements and insert a custom binding element or establish a particular value for security.</span></span>  
  
- <span data-ttu-id="b5e85-111">Создать новый тип <xref:System.ServiceModel.Channels.Binding> для того, чтобы полностью контролировать реализацию всей привязки.</span><span class="sxs-lookup"><span data-stu-id="b5e85-111">You can create a new <xref:System.ServiceModel.Channels.Binding> type to completely control the entire binding implementation.</span></span>  
  
## <a name="the-order-of-binding-elements"></a><span data-ttu-id="b5e85-112">Порядок элементов привязки</span><span class="sxs-lookup"><span data-stu-id="b5e85-112">The Order of Binding Elements</span></span>  
 <span data-ttu-id="b5e85-113">Каждый элемент привязки представляет собой этап обработки при отправке или получении сообщений.</span><span class="sxs-lookup"><span data-stu-id="b5e85-113">Each binding element represents a processing step when sending or receiving messages.</span></span> <span data-ttu-id="b5e85-114">Во время работы элементы привязки создают каналы и прослушиватели, необходимые для построения стеков исходящих и входящих каналов.</span><span class="sxs-lookup"><span data-stu-id="b5e85-114">At runtime, binding elements create the channels and listeners necessary to build outgoing and incoming channel stacks.</span></span>  
  
 <span data-ttu-id="b5e85-115">Существует три основных типа элементов привязки: элементы привязки протокола, элементы привязки кодирования и элементы привязки транспорта.</span><span class="sxs-lookup"><span data-stu-id="b5e85-115">There are three main types of binding elements: Protocol Binding Elements, Encoding Binding Elements and Transport Binding Elements.</span></span>  
  
 <span data-ttu-id="b5e85-116">Элементы привязки протокола - эти элементы представляют собой высокоуровневые этапы обработки сообщений.</span><span class="sxs-lookup"><span data-stu-id="b5e85-116">Protocol Binding Elements – These elements represent higher-level processing steps that act on messages.</span></span> <span data-ttu-id="b5e85-117">Каналы и прослушиватели, созданные этими элементами привязки, могут добавлять, удалять или изменять содержание сообщения.</span><span class="sxs-lookup"><span data-stu-id="b5e85-117">Channels and listeners created by these binding elements can add, remove, or modify the message content.</span></span> <span data-ttu-id="b5e85-118">Данная привязка может иметь произвольное число элементов привязки протокола, каждый из которых наследуется от <xref:System.ServiceModel.Channels.BindingElement>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-118">A given binding may have an arbitrary number of protocol binding elements, each inheriting from <xref:System.ServiceModel.Channels.BindingElement>.</span></span> <span data-ttu-id="b5e85-119">Windows Communication Foundation (WCF) включает в <xref:System.ServiceModel.Channels.ReliableSessionBindingElement> себя <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>несколько элементов связывания протоколов, включая и .</span><span class="sxs-lookup"><span data-stu-id="b5e85-119">Windows Communication Foundation (WCF) includes several protocol binding elements, including the <xref:System.ServiceModel.Channels.ReliableSessionBindingElement> and the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>.</span></span>  
  
 <span data-ttu-id="b5e85-120">Элемент привязки кодирования - эти элементы представляют собой преобразования сообщений в кодировку для передачи по сети.</span><span class="sxs-lookup"><span data-stu-id="b5e85-120">Encoding Binding Element – These elements represent transformations between a message and an encoding ready for transmission on the wire.</span></span> <span data-ttu-id="b5e85-121">Типичные привязки WCF включают в себя ровно один элемент связывания кодирования.</span><span class="sxs-lookup"><span data-stu-id="b5e85-121">Typical WCF bindings include exactly one encoding binding element.</span></span> <span data-ttu-id="b5e85-122">Примерами элементов привязки кодирования служат <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement> и <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-122">Examples of encoding binding elements include the <xref:System.ServiceModel.Channels.MtomMessageEncodingBindingElement>, the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, and the <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>.</span></span> <span data-ttu-id="b5e85-123">Если для привязки не задан элемент привязки кодирования, используется кодирование по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="b5e85-123">If an encoding binding element is not specified for a binding, a default encoding is used.</span></span> <span data-ttu-id="b5e85-124">Для передачи по протоколу HTTP по умолчанию используется текстовое кодирование, в остальных случаях - двоичное.</span><span class="sxs-lookup"><span data-stu-id="b5e85-124">The default is text when the transport is HTTP and binary otherwise.</span></span>  
  
 <span data-ttu-id="b5e85-125">Элементы привязки транспорта - эти элементы представляют собой передачу закодированного сообщения по транспортному протоколу.</span><span class="sxs-lookup"><span data-stu-id="b5e85-125">Transport Binding Element – These elements represent the transmission of an encoding message on a transport protocol.</span></span> <span data-ttu-id="b5e85-126">Типичные привязки WCF включают ровно один <xref:System.ServiceModel.Channels.TransportBindingElement>транспортный связывающий элемент, который наследует от .</span><span class="sxs-lookup"><span data-stu-id="b5e85-126">Typical WCF bindings include exactly one transport binding element, which inherits from <xref:System.ServiceModel.Channels.TransportBindingElement>.</span></span> <span data-ttu-id="b5e85-127">Примерами элементов привязки транспорта служат <xref:System.ServiceModel.Channels.TcpTransportBindingElement>, <xref:System.ServiceModel.Channels.HttpTransportBindingElement> и <xref:System.ServiceModel.Channels.NamedPipeTransportBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-127">Examples of transport binding elements include the <xref:System.ServiceModel.Channels.TcpTransportBindingElement>, the <xref:System.ServiceModel.Channels.HttpTransportBindingElement>, and the <xref:System.ServiceModel.Channels.NamedPipeTransportBindingElement>.</span></span>  
  
 <span data-ttu-id="b5e85-128">При создании новых привязок важно соблюдать порядок вновь добавляемых элементов привязки.</span><span class="sxs-lookup"><span data-stu-id="b5e85-128">When creating new bindings, the order of the added binding elements is important.</span></span> <span data-ttu-id="b5e85-129">При добавлении элементов привязки необходимо соблюдать следующий порядок.</span><span class="sxs-lookup"><span data-stu-id="b5e85-129">Always add binding elements in the following order:</span></span>  
  
|<span data-ttu-id="b5e85-130">Уровень</span><span class="sxs-lookup"><span data-stu-id="b5e85-130">Layer</span></span>|<span data-ttu-id="b5e85-131">Параметры</span><span class="sxs-lookup"><span data-stu-id="b5e85-131">Options</span></span>|<span data-ttu-id="b5e85-132">Обязательно</span><span class="sxs-lookup"><span data-stu-id="b5e85-132">Required</span></span>|  
|-----------|-------------|--------------|  
|<span data-ttu-id="b5e85-133">Поток транзакций</span><span class="sxs-lookup"><span data-stu-id="b5e85-133">Transaction Flow</span></span>|<xref:System.ServiceModel.Channels.TransactionFlowBindingElement?displayProperty=nameWithType>|<span data-ttu-id="b5e85-134">нет</span><span class="sxs-lookup"><span data-stu-id="b5e85-134">No</span></span>|  
|<span data-ttu-id="b5e85-135">Надежность</span><span class="sxs-lookup"><span data-stu-id="b5e85-135">Reliability</span></span>|<xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType>|<span data-ttu-id="b5e85-136">нет</span><span class="sxs-lookup"><span data-stu-id="b5e85-136">No</span></span>|  
|<span data-ttu-id="b5e85-137">Безопасность</span><span class="sxs-lookup"><span data-stu-id="b5e85-137">Security</span></span>|<xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType>|<span data-ttu-id="b5e85-138">нет</span><span class="sxs-lookup"><span data-stu-id="b5e85-138">No</span></span>|  
|<span data-ttu-id="b5e85-139">Составной дуплексный</span><span class="sxs-lookup"><span data-stu-id="b5e85-139">Composite Duplex</span></span>|<xref:System.ServiceModel.Channels.CompositeDuplexBindingElement?displayProperty=nameWithType>|<span data-ttu-id="b5e85-140">нет</span><span class="sxs-lookup"><span data-stu-id="b5e85-140">No</span></span>|  
|<span data-ttu-id="b5e85-141">Кодирование</span><span class="sxs-lookup"><span data-stu-id="b5e85-141">Encoding</span></span>|<span data-ttu-id="b5e85-142">Текстовая, двоичная, MTOM, пользовательская</span><span class="sxs-lookup"><span data-stu-id="b5e85-142">Text, Binary, MTOM, Custom</span></span>|<span data-ttu-id="b5e85-143">Да\*</span><span class="sxs-lookup"><span data-stu-id="b5e85-143">Yes\*</span></span>|  
|<span data-ttu-id="b5e85-144">Транспортировка</span><span class="sxs-lookup"><span data-stu-id="b5e85-144">Transport</span></span>|<span data-ttu-id="b5e85-145">TCP, именованные каналы, HTTP, HTTPS, MSMQ, определенный пользователем</span><span class="sxs-lookup"><span data-stu-id="b5e85-145">TCP, Named Pipes, HTTP, HTTPS, MSMQ, Custom</span></span>|<span data-ttu-id="b5e85-146">Да</span><span class="sxs-lookup"><span data-stu-id="b5e85-146">Yes</span></span>|  
  
<span data-ttu-id="b5e85-147">\*Поскольку кодирование требуется для каждой привязки, если кодирование не указано, WCF добавляет кодирование по умолчанию для вас.</span><span class="sxs-lookup"><span data-stu-id="b5e85-147">\*Because an encoding is required for each binding, if an encoding is not specified, WCF adds a default encoding for you.</span></span> <span data-ttu-id="b5e85-148">Для передачи по протоколам HTTP и HTTPS по умолчанию используется текстовое/XML-кодирование, в остальных случаях - двоичное.</span><span class="sxs-lookup"><span data-stu-id="b5e85-148">The default is Text/XML for the HTTP and HTTPS transports, and Binary otherwise.</span></span>  
  
## <a name="creating-a-new-binding-element"></a><span data-ttu-id="b5e85-149">Создание нового элемента привязки</span><span class="sxs-lookup"><span data-stu-id="b5e85-149">Creating a new Binding Element</span></span>  
 <span data-ttu-id="b5e85-150">В дополнение к типам, полученным из <xref:System.ServiceModel.Channels.BindingElement> которые предоставляются WCF, вы можете создать свои собственные элементы связывания.</span><span class="sxs-lookup"><span data-stu-id="b5e85-150">In addition to the types derived from <xref:System.ServiceModel.Channels.BindingElement> that are provided by WCF, you can create your own binding elements.</span></span> <span data-ttu-id="b5e85-151">Это позволяет настроить способ создания стека привязок, а также добавления к нему компонентов путем создания собственного класса <xref:System.ServiceModel.Channels.BindingElement>, который может формироваться из других типов элементов стека, предоставляемых системой.</span><span class="sxs-lookup"><span data-stu-id="b5e85-151">This lets you customize the way the stack of bindings is created and the components that go in it by creating your own <xref:System.ServiceModel.Channels.BindingElement> that can be composed with the other system-provided types in the stack.</span></span>  
  
 <span data-ttu-id="b5e85-152">Например, при реализации `LoggingBindingElement`, позволяющего заносить сообщение в базу данных, его необходимо размещать в стеке каналов над транспортным каналом.</span><span class="sxs-lookup"><span data-stu-id="b5e85-152">For example, if you implement a `LoggingBindingElement` that provides the ability to log the message to a database, you must place it above a transport channel in the channel stack.</span></span> <span data-ttu-id="b5e85-153">В этом случае приложение создает пользовательскую привязку, состоящую из `LoggingBindingElement` с `TcpTransportBindingElement`, как показано в примере.</span><span class="sxs-lookup"><span data-stu-id="b5e85-153">In this case, the application creates a custom binding that composed the `LoggingBindingElement` with `TcpTransportBindingElement`, as in the following example.</span></span>  
  
```csharp  
Binding customBinding = new CustomBinding(  
  new LoggingBindingElement(),
  new TcpTransportBindingElement()  
);  
```  
  
 <span data-ttu-id="b5e85-154">Способ записи нового элемента привязки зависит от его непосредственной функциональности.</span><span class="sxs-lookup"><span data-stu-id="b5e85-154">How you write your new binding element depends on its exact functionality.</span></span> <span data-ttu-id="b5e85-155">Один из образцов, [Transport: UDP](../samples/transport-udp.md), содержит подробное описание того, как реализовать один вид связывающего элемента.</span><span class="sxs-lookup"><span data-stu-id="b5e85-155">One of the samples, [Transport: UDP](../samples/transport-udp.md), provides a detailed description of how to implement one kind of binding element.</span></span>  
  
## <a name="creating-a-new-binding"></a><span data-ttu-id="b5e85-156">Создание новой привязки</span><span class="sxs-lookup"><span data-stu-id="b5e85-156">Creating a New Binding</span></span>  
 <span data-ttu-id="b5e85-157">Созданный пользователем элемент привязки можно использовать двумя способами.</span><span class="sxs-lookup"><span data-stu-id="b5e85-157">A user-created binding element can be used in two ways.</span></span> <span data-ttu-id="b5e85-158">В предыдущем разделе описан первый способ: посредством пользовательской привязки.</span><span class="sxs-lookup"><span data-stu-id="b5e85-158">The previous section illustrates the first way: through a custom binding.</span></span> <span data-ttu-id="b5e85-159">Пользовательская привязка позволяет пользователю создать собственную привязку на основе произвольного набора элементов привязки, включающего помимо прочих элементы, созданные пользователем.</span><span class="sxs-lookup"><span data-stu-id="b5e85-159">A custom binding allows the user to create their own binding based on an arbitrary set of binding elements, including user-created ones.</span></span>  
  
 <span data-ttu-id="b5e85-160">При необходимости использования привязки в нескольких приложениях нужно создать собственную привязку и расширить <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-160">If you use the binding in more than one application, create your own binding and extend the <xref:System.ServiceModel.Channels.Binding>.</span></span> <span data-ttu-id="b5e85-161">Это избавит от необходимости создания пользовательской привязки вручную каждый раз, когда она нужна.</span><span class="sxs-lookup"><span data-stu-id="b5e85-161">This avoids manually creating a custom binding every time you want to use it.</span></span> <span data-ttu-id="b5e85-162">Определенные пользователем привязки позволяют определить поведение привязки и включить элементы привязки, определенные пользователем.</span><span class="sxs-lookup"><span data-stu-id="b5e85-162">A user-defined binding allows you to define the binding’s behavior and include user-defined binding elements.</span></span> <span data-ttu-id="b5e85-163">И это *предварительно упакованы*: вам не придется перестраивать связывания каждый раз, когда вы используете его.</span><span class="sxs-lookup"><span data-stu-id="b5e85-163">And it is *pre-packaged*: you do not have to rebuild the binding every time you use it.</span></span>  
  
 <span data-ttu-id="b5e85-164">Определенная пользователем привязка должна, как минимум, реализовать метод <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> и свойство <xref:System.ServiceModel.Channels.Binding.Scheme%2A>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-164">At a minimum, a user-defined binding must implement the <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method and the <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property.</span></span>  
  
 <span data-ttu-id="b5e85-165">Метод <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> возвращает новую коллекцию <xref:System.ServiceModel.Channels.BindingElementCollection>, содержащую элементы для привязки.</span><span class="sxs-lookup"><span data-stu-id="b5e85-165">The <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method returns a new <xref:System.ServiceModel.Channels.BindingElementCollection> that contains the binding elements for the binding.</span></span> <span data-ttu-id="b5e85-166">Коллекция упорядочена и должна содержать элементы привязки протокола, следующий за ними элемент привязки кодирования и, идущий последним, элемент привязки транспорта.</span><span class="sxs-lookup"><span data-stu-id="b5e85-166">The collection is ordered, and should contain the protocol binding elements first, followed by the encoding binding element, followed by the transport binding element.</span></span> <span data-ttu-id="b5e85-167">При использовании обязательных элементов системы WCF необходимо следовать правилам обязательного элемента, указанным в [пользовательских привязки.](custom-bindings.md)</span><span class="sxs-lookup"><span data-stu-id="b5e85-167">When using the WCF system-provided binding elements, you must follow the binding element ordering rules specified in [Custom Bindings](custom-bindings.md).</span></span> <span data-ttu-id="b5e85-168">Эта коллекция не должна ссылаться на объекты, на которые имеются ссылки в пределах класса привязки, определенной пользователем; а, следовательно, авторы привязок должны возвращать `Clone()` коллекции <xref:System.ServiceModel.Channels.BindingElementCollection> при каждом вызове <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-168">This collection should never reference objects referenced within the user-defined binding class; consequently, binding authors must return a `Clone()` of the <xref:System.ServiceModel.Channels.BindingElementCollection> on each call to <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A>.</span></span>  
  
 <span data-ttu-id="b5e85-169">Свойство <xref:System.ServiceModel.Channels.Binding.Scheme%2A> представляет схему универсального кода ресурса (URI) для транспортного протокола, используемого в привязке.</span><span class="sxs-lookup"><span data-stu-id="b5e85-169">The <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property represents the URI scheme for the transport protocol in use on the binding.</span></span> <span data-ttu-id="b5e85-170">Например, *WSHttpBinding* и *NetTcpBinding* возвращают "http" и "net.tcp" из своих соответствующих <xref:System.ServiceModel.Channels.Binding.Scheme%2A> свойств.</span><span class="sxs-lookup"><span data-stu-id="b5e85-170">For example, the *WSHttpBinding* and the *NetTcpBinding* return "http" and "net.tcp" from their respective <xref:System.ServiceModel.Channels.Binding.Scheme%2A> properties.</span></span>  
  
 <span data-ttu-id="b5e85-171">Полный список необязательных методов и свойств для определяемых пользователем привязок см. в разделе <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-171">For a complete list of optional methods and properties for user-defined bindings, see <xref:System.ServiceModel.Channels.Binding>.</span></span>  
  
### <a name="example"></a><span data-ttu-id="b5e85-172">Пример</span><span class="sxs-lookup"><span data-stu-id="b5e85-172">Example</span></span>  
 <span data-ttu-id="b5e85-173">В этом примере реализуется профиль привязки в `SampleProfileUdpBinding`, производном от <xref:System.ServiceModel.Channels.Binding>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-173">This example implements profile binding in `SampleProfileUdpBinding`, which derives from <xref:System.ServiceModel.Channels.Binding>.</span></span> <span data-ttu-id="b5e85-174">В `SampleProfileUdpBinding` нем содержится до четырех связывающих `UdpTransportBindingElement`элементов: один созданный пользователем; и три системы, предоставляемые: `TextMessageEncodingBindingElement`, `CompositeDuplexBindingElement`и `ReliableSessionBindingElement`.</span><span class="sxs-lookup"><span data-stu-id="b5e85-174">The `SampleProfileUdpBinding` contains up to four binding elements within it: one user-created `UdpTransportBindingElement`; and three system-provided: `TextMessageEncodingBindingElement`, `CompositeDuplexBindingElement`, and `ReliableSessionBindingElement`.</span></span>  
  
```csharp
public override BindingElementCollection CreateBindingElements()  
{
    BindingElementCollection bindingElements = new BindingElementCollection();  
    if (ReliableSessionEnabled)  
    {  
        bindingElements.Add(session);  
        bindingElements.Add(compositeDuplex);  
    }  
    bindingElements.Add(encoding);  
    bindingElements.Add(transport);  
    return bindingElements.Clone();  
}  
```  
  
## <a name="security-restrictions-with-duplex-contracts"></a><span data-ttu-id="b5e85-175">Ограничения безопасности с дуплексными контрактами</span><span class="sxs-lookup"><span data-stu-id="b5e85-175">Security Restrictions with Duplex Contracts</span></span>  
 <span data-ttu-id="b5e85-176">Не все элементы привязки совместимы друг с другом.</span><span class="sxs-lookup"><span data-stu-id="b5e85-176">Not all binding elements are compatible with each other.</span></span> <span data-ttu-id="b5e85-177">В частности, существует несколько ограничений, налагаемых на элементы привязки безопасности, при их использовании с дуплексными контрактами.</span><span class="sxs-lookup"><span data-stu-id="b5e85-177">In particular, there are some restrictions on security binding elements when used with duplex contracts.</span></span>  
  
### <a name="one-shot-security"></a><span data-ttu-id="b5e85-178">Одноступенчатый способ обеспечения безопасности</span><span class="sxs-lookup"><span data-stu-id="b5e85-178">One-Shot Security</span></span>  
 <span data-ttu-id="b5e85-179">Можно реализовать безопасность "одного выстрела", где все необходимые учетные данные `negotiateServiceCredential` безопасности \<отправляются в `false`одном сообщении, установив атрибут сообщения> элемент конфигурации.</span><span class="sxs-lookup"><span data-stu-id="b5e85-179">You can implement "one-shot" security, where all the necessary security credentials are sent in a single message, by setting the `negotiateServiceCredential` attribute of the \<message> configuration element to `false`.</span></span>  
  
 <span data-ttu-id="b5e85-180">Одноступенчатая проверка подлинности не работает с дуплексными контрактами.</span><span class="sxs-lookup"><span data-stu-id="b5e85-180">One-shot authentication does not work with duplex contracts.</span></span>  
  
 <span data-ttu-id="b5e85-181">При контрактах типа запрос-ответ одноступенчатая проверка подлинности работает только в том случае, если стек привязки, находящийся после элемента безопасности привязки, поддерживает возможность создания экземпляров <xref:System.ServiceModel.Channels.IRequestChannel> или <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-181">For Request-Reply contracts, one-shot authentication works only if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="b5e85-182">При односторонних контрактах одноступенчатая проверка подлинности работает в том случае, если стек привязки, находящийся после элемента безопасности привязки, поддерживает возможность создания экземпляров <xref:System.ServiceModel.Channels.IRequestChannel>, <xref:System.ServiceModel.Channels.IRequestSessionChannel>, <xref:System.ServiceModel.Channels.IOutputChannel> или <xref:System.ServiceModel.Channels.IOutputSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-182">For one-way contracts, one-shot authentication works if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel>, <xref:System.ServiceModel.Channels.IRequestSessionChannel>, <xref:System.ServiceModel.Channels.IOutputChannel> or <xref:System.ServiceModel.Channels.IOutputSessionChannel> instances.</span></span>  
  
### <a name="cookie-mode-security-context-tokens"></a><span data-ttu-id="b5e85-183">Маркеры контекста безопасности режима "cookie"</span><span class="sxs-lookup"><span data-stu-id="b5e85-183">Cookie-mode Security Context Tokens</span></span>  
 <span data-ttu-id="b5e85-184">Маркеры контекста безопасности режима "cookie" нельзя использовать с дуплексными контрактами.</span><span class="sxs-lookup"><span data-stu-id="b5e85-184">Cookie mode security context tokens cannot be used with duplex contracts.</span></span>  
  
 <span data-ttu-id="b5e85-185">При контрактах типа запрос-ответ маркеры контекста безопасности режима "cookie" работают только при условии, что стек привязки, находящийся после элемента безопасности привязки, поддерживает возможность создания экземпляров <xref:System.ServiceModel.Channels.IRequestChannel> или <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-185">For Request-Reply contracts, cookie-mode security context tokens work only if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="b5e85-186">При односторонних контрактах маркеры контекста безопасности режима "cookie" работают в том случае, если стек привязки, находящийся после элемента безопасности привязки, поддерживает возможность создания экземпляров <xref:System.ServiceModel.Channels.IRequestChannel> или <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-186">For one-way contracts, cookie-mode security context tokens works if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
### <a name="session-mode-security-context-tokens"></a><span data-ttu-id="b5e85-187">Маркеры контекста безопасности режима сеанса</span><span class="sxs-lookup"><span data-stu-id="b5e85-187">Session-mode Security Context Tokens</span></span>  
 <span data-ttu-id="b5e85-188">Маркеры контекста безопасности режима сеанса работают для дуплексных контрактов тогда, когда стек привязки, находящийся после элемента безопасности привязки, поддерживает возможность создания экземпляров <xref:System.ServiceModel.Channels.IDuplexChannel> или <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-188">Session mode SCT works for duplex contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel> or <xref:System.ServiceModel.Channels.IDuplexSessionChannel> instances.</span></span>  
  
 <span data-ttu-id="b5e85-189">Маркеры контекста безопасности режима сеанса работают для контрактов типа запрос-ответ тогда, когда стек привязки, находящийся после элемента безопасности привязки, поддерживает возможность создания экземпляров <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> или <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-189">Session mode SCT works for Request-Reply contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel>, instances.</span></span>  
  
 <span data-ttu-id="b5e85-190">Маркеры контекста безопасности режима сеанса работают для односторонних контрактов тогда, когда стек привязки, находящийся после элемента безопасности привязки, поддерживает возможность создания экземпляров <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> или <xref:System.ServiceModel.Channels.IRequestSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-190">Session mode SCT works for 1-way contracts if the binding stack below the security binding element supports creating <xref:System.ServiceModel.Channels.IDuplexChannel>, <xref:System.ServiceModel.Channels.IDuplexSessionChannel>, <xref:System.ServiceModel.Channels.IRequestChannel> or <xref:System.ServiceModel.Channels.IRequestSessionChannel> instances.</span></span>  
  
## <a name="deriving-from-a-standard-binding"></a><span data-ttu-id="b5e85-191">Класс, производный от стандартной привязки</span><span class="sxs-lookup"><span data-stu-id="b5e85-191">Deriving from a Standard Binding</span></span>  
 <span data-ttu-id="b5e85-192">Вместо создания абсолютно нового класса привязки можно расширить одну из существующих привязок, предоставленных системой.</span><span class="sxs-lookup"><span data-stu-id="b5e85-192">Instead of creating an entirely new binding class, it may be possible for you to extend one of the existing system-provided bindings.</span></span> <span data-ttu-id="b5e85-193">Здесь так же, как в предыдущем случае, необходимо переопределить метод <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> и свойство <xref:System.ServiceModel.Channels.Binding.Scheme%2A>.</span><span class="sxs-lookup"><span data-stu-id="b5e85-193">Much like the preceding case, you must override the <xref:System.ServiceModel.Channels.Binding.CreateBindingElements%2A> method and the <xref:System.ServiceModel.Channels.Binding.Scheme%2A> property.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b5e85-194">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="b5e85-194">See also</span></span>

- <xref:System.ServiceModel.Channels.Binding>
- [<span data-ttu-id="b5e85-195">Пользовательские привязки</span><span class="sxs-lookup"><span data-stu-id="b5e85-195">Custom Bindings</span></span>](custom-bindings.md)
