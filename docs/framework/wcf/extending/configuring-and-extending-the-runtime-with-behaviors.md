---
title: Настройка и расширение среды выполнения с помощью поведений
ms.date: 03/30/2017
helpviewer_keywords:
- attaching extensions using behaviors [WCF]
ms.assetid: 149b99b6-6eb6-4f45-be22-c967279677d9
ms.openlocfilehash: 67db06649d6059ff6b6e6fb8d84058621fcc7dab
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2020
ms.locfileid: "79185657"
---
# <a name="configuring-and-extending-the-runtime-with-behaviors"></a><span data-ttu-id="28dca-102">Настройка и расширение среды выполнения с помощью поведений</span><span class="sxs-lookup"><span data-stu-id="28dca-102">Configuring and Extending the Runtime with Behaviors</span></span>
<span data-ttu-id="28dca-103">Поведение позволяет изменять поведение по умолчанию и добавлять пользовательские расширения, которые проверяют и проверяют конфигурацию службы или изменяют поведение в работе в приложениях для клиентов и сервисных приложений Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="28dca-103">Behaviors enable you to modify default behavior and add custom extensions that inspect and validate service configuration or modify runtime behavior in Windows Communication Foundation (WCF) client and service applications.</span></span> <span data-ttu-id="28dca-104">В этом разделе описаны интерфейсы поведений, способы их реализации, а также порядок их добавления в описания служб (в приложениях служб) и конечных точек (в клиентских приложениях) как программным образом, так и с помощью файла конфигурации.</span><span class="sxs-lookup"><span data-stu-id="28dca-104">This topic describes the behavior interfaces, how to implement them, and how to add them to the service description (in a service application) or endpoint (in a client application) programmatically or in a configuration file.</span></span> <span data-ttu-id="28dca-105">Для получения дополнительной информации об использовании системного поведения [Specifying Client Run-Time Behavior](../specifying-client-run-time-behavior.md)см. [Specifying Service Run-Time Behavior](../specifying-service-run-time-behavior.md)</span><span class="sxs-lookup"><span data-stu-id="28dca-105">For more information about using system-provided behaviors, see [Specifying Service Run-Time Behavior](../specifying-service-run-time-behavior.md) and [Specifying Client Run-Time Behavior](../specifying-client-run-time-behavior.md).</span></span>  
  
## <a name="behaviors"></a><span data-ttu-id="28dca-106">Расширения функциональности</span><span class="sxs-lookup"><span data-stu-id="28dca-106">Behaviors</span></span>  
 <span data-ttu-id="28dca-107">Типы поведения добавляются к объектам описания конечных точек службы или службы (на службе или клиенте, соответственно), прежде чем эти объекты будут использованы Фондом связи Windows (WCF) для создания времени выполнения службы WCF или клиента WCF.</span><span class="sxs-lookup"><span data-stu-id="28dca-107">Behavior types are added to the service or service endpoint description objects (on the service or client, respectively) before those objects are used by Windows Communication Foundation (WCF) to create a runtime that executes a WCF service or a WCF client.</span></span> <span data-ttu-id="28dca-108">Если эти поведения вызываются в процессе создания среды выполнения, то они могут получать доступ к свойствам и методам среды выполнения, которые позволяют изменить создаваемую среду выполнения с использованием других контрактов, привязок и адресов.</span><span class="sxs-lookup"><span data-stu-id="28dca-108">When these behaviors are called during the runtime construction process they are then able to access runtime properties and methods that modify the runtime constructed by the contract, bindings, and addresses.</span></span>  
  
### <a name="behavior-methods"></a><span data-ttu-id="28dca-109">Методы поведений</span><span class="sxs-lookup"><span data-stu-id="28dca-109">Behavior Methods</span></span>  
 <span data-ttu-id="28dca-110">У всех поведений имеется метод `AddBindingParameters`, метод `ApplyDispatchBehavior`, метод `Validate` и метод `ApplyClientBehavior` за единственным исключением: поскольку интерфейс <xref:System.ServiceModel.Description.IServiceBehavior> не может выполняться на клиенте, он не реализует метод `ApplyClientBehavior`.</span><span class="sxs-lookup"><span data-stu-id="28dca-110">All behaviors have an `AddBindingParameters` method, an `ApplyDispatchBehavior` method, a `Validate` method, and an `ApplyClientBehavior` method with one exception: Because <xref:System.ServiceModel.Description.IServiceBehavior> cannot execute in a client, it does not implement `ApplyClientBehavior`.</span></span>  
  
- <span data-ttu-id="28dca-111">Метод `AddBindingParameters` служит для изменения или добавления пользовательских объектов в коллекцию, к которой могут общаться пользовательские привязки при создании среды выполнения.</span><span class="sxs-lookup"><span data-stu-id="28dca-111">Use the `AddBindingParameters` method to modify or add custom objects to a collection that custom bindings can access for their use when the runtime is constructed.</span></span> <span data-ttu-id="28dca-112">Например, с помощью этого метода можно задать требования защиты, которые влияют на способ создания канала, но не известны разработчику канала.</span><span class="sxs-lookup"><span data-stu-id="28dca-112">For example, this how protection requirements are specified that affect the way the channel is built, but are not known by the channel developer.</span></span>  
  
- <span data-ttu-id="28dca-113">Метод `Validate` служит для проверки дерева описания и соответствующего объекта среды выполнения, чтобы убедиться, что они соответствуют определенному набору условий.</span><span class="sxs-lookup"><span data-stu-id="28dca-113">Use the `Validate` method to examine the description tree and corresponding runtime object to ensure it conforms to some set of criteria.</span></span>  
  
- <span data-ttu-id="28dca-114">Методы `ApplyDispatchBehavior` и `ApplyClientBehavior` служат для проверки дерева описания и изменения среды выполнения в определенной области (на стороне службы или на стороне клиента соответственно).</span><span class="sxs-lookup"><span data-stu-id="28dca-114">Use the `ApplyDispatchBehavior` and `ApplyClientBehavior` methods to examine the description tree and modify the runtime for a particular scope on either the service or the client.</span></span> <span data-ttu-id="28dca-115">Кроме того, эти методы позволяют вставлять объекты расширения.</span><span class="sxs-lookup"><span data-stu-id="28dca-115">You can also insert extension objects as well.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="28dca-116">Хотя эти методы получают дерево описания, оно доступно им только для проверки.</span><span class="sxs-lookup"><span data-stu-id="28dca-116">Although a description tree is provided in these methods, it is for examination only.</span></span> <span data-ttu-id="28dca-117">Если изменить дерево описания, поведение станет неопределенным.</span><span class="sxs-lookup"><span data-stu-id="28dca-117">If a description tree is modified, the behavior is undefined.</span></span>  
  
 <span data-ttu-id="28dca-118">Доступ к свойствам, которые можно изменить, и к интерфейсам настройки, которые можно реализовать, осуществляется через классы среды выполнения службы и клиента.</span><span class="sxs-lookup"><span data-stu-id="28dca-118">The properties you can modify and the customization interfaces you can implement are accessed through the service and client runtime classes.</span></span> <span data-ttu-id="28dca-119">Типами службы являются классы <xref:System.ServiceModel.Dispatcher.DispatchRuntime> и <xref:System.ServiceModel.Dispatcher.DispatchOperation>.</span><span class="sxs-lookup"><span data-stu-id="28dca-119">The service types are the <xref:System.ServiceModel.Dispatcher.DispatchRuntime> and  <xref:System.ServiceModel.Dispatcher.DispatchOperation> classes.</span></span> <span data-ttu-id="28dca-120">Типами клиента являются классы <xref:System.ServiceModel.Dispatcher.ClientRuntime> и <xref:System.ServiceModel.Dispatcher.ClientOperation>.</span><span class="sxs-lookup"><span data-stu-id="28dca-120">The client types are the <xref:System.ServiceModel.Dispatcher.ClientRuntime> and <xref:System.ServiceModel.Dispatcher.ClientOperation> classes.</span></span> <span data-ttu-id="28dca-121">Классы <xref:System.ServiceModel.Dispatcher.ClientRuntime> и <xref:System.ServiceModel.Dispatcher.DispatchRuntime> являются точками входа расширяемости для доступа к коллекциям расширения и свойствам среды выполнения клиента и службы соответственно.</span><span class="sxs-lookup"><span data-stu-id="28dca-121">The <xref:System.ServiceModel.Dispatcher.ClientRuntime> and <xref:System.ServiceModel.Dispatcher.DispatchRuntime> classes are the extensibility entry points to access client-wide and service-wide runtime properties and extension collections, respectively.</span></span> <span data-ttu-id="28dca-122">Аналогично классы <xref:System.ServiceModel.Dispatcher.ClientOperation> и <xref:System.ServiceModel.Dispatcher.DispatchOperation> предоставляют доступ к коллекциям расширения и свойствам среды выполнения операций клиента и операций службы соответственно.</span><span class="sxs-lookup"><span data-stu-id="28dca-122">Similarly, the <xref:System.ServiceModel.Dispatcher.ClientOperation> and  <xref:System.ServiceModel.Dispatcher.DispatchOperation> classes expose client operation and service operation runtime properties and extension collections, respectively.</span></span> <span data-ttu-id="28dca-123">Однако из объекта среды выполнения операции, если это требуется, можно получить доступ к объекту среды выполнения с более широкой областью и наоборот.</span><span class="sxs-lookup"><span data-stu-id="28dca-123">You can, however, access the wider scoped runtime object from the operation runtime object and vice versa if need be.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="28dca-124">Для обсуждения свойств времени выполнения и типов расширений, которые можно использовать для изменения поведения клиента выполнения, [см.](extending-clients.md)</span><span class="sxs-lookup"><span data-stu-id="28dca-124">For a discussion of runtime properties and extension types that you can use to modify the execution behavior of a client, see [Extending Clients](extending-clients.md).</span></span> <span data-ttu-id="28dca-125">Для обсуждения свойств времени выполнения и типов расширений, которые можно использовать для изменения поведения диспетчера службы, [см.](extending-dispatchers.md)</span><span class="sxs-lookup"><span data-stu-id="28dca-125">For a discussion of runtime properties and extension types that you can use to modify the execution behavior of a service dispatcher, see [Extending Dispatchers](extending-dispatchers.md).</span></span>  
  
 <span data-ttu-id="28dca-126">Большинство пользователей WCF не взаимодействуют с временем выполнения напрямую; вместо этого они используют основные модели программирования, такие как конечные точки, контракты, привязки, адреса и атрибуты поведения на классах или поведениях в файлах конфигурации.</span><span class="sxs-lookup"><span data-stu-id="28dca-126">Most WCF users do not interact with the runtime directly; instead they use core programming model constructs like endpoints, contracts, bindings, addresses, and behavior attributes on classes or behaviors in configuration files.</span></span> <span data-ttu-id="28dca-127">Эти конструкции составляют *дерево описания,* которое является полной спецификацией для построения времени выполнения для поддержки службы или клиента, описанного деревом описания.</span><span class="sxs-lookup"><span data-stu-id="28dca-127">These constructs make up the *description tree*, which is the complete specification for constructing a runtime to support a service or client described by the description tree.</span></span>  
  
 <span data-ttu-id="28dca-128">Есть четыре вида поведения в WCF:</span><span class="sxs-lookup"><span data-stu-id="28dca-128">There are four kinds of behaviors in WCF:</span></span>  
  
- <span data-ttu-id="28dca-129">поведения служб (типы <xref:System.ServiceModel.Description.IServiceBehavior>) позволяют настраивать среду выполнения службы целиком, включая <xref:System.ServiceModel.ServiceHostBase>;</span><span class="sxs-lookup"><span data-stu-id="28dca-129">Service behaviors (<xref:System.ServiceModel.Description.IServiceBehavior> types) enable the customization of the entire service runtime including <xref:System.ServiceModel.ServiceHostBase>.</span></span>  
  
- <span data-ttu-id="28dca-130">поведения конечных точек (типы <xref:System.ServiceModel.Description.IEndpointBehavior>) позволяют настраивать конечные точки служб и соответствующие объекты <xref:System.ServiceModel.Dispatcher.EndpointDispatcher>;</span><span class="sxs-lookup"><span data-stu-id="28dca-130">Endpoint behaviors (<xref:System.ServiceModel.Description.IEndpointBehavior> types) enable the customization of service endpoints and their associated <xref:System.ServiceModel.Dispatcher.EndpointDispatcher> objects.</span></span>  
  
- <span data-ttu-id="28dca-131">поведения контрактов (типы <xref:System.ServiceModel.Description.IContractBehavior>) позволяют настраивать классы <xref:System.ServiceModel.Dispatcher.ClientRuntime> и <xref:System.ServiceModel.Dispatcher.DispatchRuntime> в приложениях клиентов и служб соответственно;</span><span class="sxs-lookup"><span data-stu-id="28dca-131">Contract behaviors (<xref:System.ServiceModel.Description.IContractBehavior> types) enable the customization of both the <xref:System.ServiceModel.Dispatcher.ClientRuntime> and <xref:System.ServiceModel.Dispatcher.DispatchRuntime> classes in client and service applications, respectively.</span></span>  
  
- <span data-ttu-id="28dca-132">поведения операций (типы <xref:System.ServiceModel.Description.IOperationBehavior>) позволяют настраивать классы <xref:System.ServiceModel.Dispatcher.ClientOperation> и <xref:System.ServiceModel.Dispatcher.DispatchOperation> в приложениях клиентов и служб.</span><span class="sxs-lookup"><span data-stu-id="28dca-132">Operation behaviors (<xref:System.ServiceModel.Description.IOperationBehavior> types) enable the customization of the <xref:System.ServiceModel.Dispatcher.ClientOperation> and <xref:System.ServiceModel.Dispatcher.DispatchOperation> classes, again, on the client and service.</span></span>  
  
 <span data-ttu-id="28dca-133">Эти поведения можно добавлять в различные объекты описания путем реализации пользовательских атрибутов, с помощью файлов конфигурации приложений или путем их непосредственного добавления в коллекцию поведений соответствующего объекта описания.</span><span class="sxs-lookup"><span data-stu-id="28dca-133">You can add these behaviors to the various description objects by implementing custom attributes, using application configuration files, or directly by adding them to the behaviors collection on the appropriate description object.</span></span> <span data-ttu-id="28dca-134">Однако их обязательно необходимо добавлять в объекты описания службы или конечной точки службы до вызова метода <xref:System.ServiceModel.ICommunicationObject.Open%2A?displayProperty=nameWithType> объектов <xref:System.ServiceModel.ServiceHost> и <xref:System.ServiceModel.ChannelFactory%601>.</span><span class="sxs-lookup"><span data-stu-id="28dca-134">The must, however, be added to a service description or service endpoint description object prior to calling <xref:System.ServiceModel.ICommunicationObject.Open%2A?displayProperty=nameWithType> on the <xref:System.ServiceModel.ServiceHost> or a <xref:System.ServiceModel.ChannelFactory%601>.</span></span>  
  
### <a name="behavior-scopes"></a><span data-ttu-id="28dca-135">Области поведений</span><span class="sxs-lookup"><span data-stu-id="28dca-135">Behavior Scopes</span></span>  
 <span data-ttu-id="28dca-136">Каждый из четырех типов поведений соответствует определенной области доступа среды выполнения.</span><span class="sxs-lookup"><span data-stu-id="28dca-136">There are four behavior types, each of which corresponds to a particular scope of runtime access.</span></span>  
  
#### <a name="service-behaviors"></a><span data-ttu-id="28dca-137">Поведения служб</span><span class="sxs-lookup"><span data-stu-id="28dca-137">Service Behaviors</span></span>  
 <span data-ttu-id="28dca-138">Поведения служб, реализующие интерфейс <xref:System.ServiceModel.Description.IServiceBehavior>, являются основным механизмом для изменения всей среды выполнения службы.</span><span class="sxs-lookup"><span data-stu-id="28dca-138">Service behaviors, which implement <xref:System.ServiceModel.Description.IServiceBehavior>, are the primary mechanism by which you modify the entire service runtime.</span></span> <span data-ttu-id="28dca-139">Имеется три механизма добавления поведений служб к службам.</span><span class="sxs-lookup"><span data-stu-id="28dca-139">There are three mechanisms for adding service behaviors to a service.</span></span>  
  
1. <span data-ttu-id="28dca-140">С помощью атрибута класса службы.</span><span class="sxs-lookup"><span data-stu-id="28dca-140">Using an attribute on the service class.</span></span>  <span data-ttu-id="28dca-141">При создании объекта <xref:System.ServiceModel.ServiceHost> реализация класса <xref:System.ServiceModel.ServiceHost> использует отражение, чтобы обнаружить набор атрибутов типа службы.</span><span class="sxs-lookup"><span data-stu-id="28dca-141">When a <xref:System.ServiceModel.ServiceHost> is constructed, the <xref:System.ServiceModel.ServiceHost> implementation uses reflection to discover the set of attributes on the type of the service.</span></span> <span data-ttu-id="28dca-142">Все атрибуты, реализующие интерфейс <xref:System.ServiceModel.Description.IServiceBehavior>, добавляются в коллекцию поведений в объекте <xref:System.ServiceModel.Description.ServiceDescription>.</span><span class="sxs-lookup"><span data-stu-id="28dca-142">If any of those attributes are implementations of <xref:System.ServiceModel.Description.IServiceBehavior>, they are added to the behaviors collection on <xref:System.ServiceModel.Description.ServiceDescription>.</span></span> <span data-ttu-id="28dca-143">Это позволяет таким поведениям участвовать в создании среды выполнения службы.</span><span class="sxs-lookup"><span data-stu-id="28dca-143">This allows those behaviors to participate in the construction of the service run time.</span></span>  
  
2. <span data-ttu-id="28dca-144">Добавление поведения в коллекцию поведений в объекте <xref:System.ServiceModel.Description.ServiceDescription> программным образом.</span><span class="sxs-lookup"><span data-stu-id="28dca-144">Programmatically adding the behavior to the behaviors collection on <xref:System.ServiceModel.Description.ServiceDescription>.</span></span> <span data-ttu-id="28dca-145">Эту задачу можно решить с помощью следующего фрагмента кода:</span><span class="sxs-lookup"><span data-stu-id="28dca-145">This can be accomplished with the following lines of code:</span></span>  
  
    ```csharp
    ServiceHost host = new ServiceHost(/* Parameters */);  
    host.Description.Behaviors.Add(/* Service Behavior */);  
    ```  
  
3. <span data-ttu-id="28dca-146">Реализация пользовательского элемента <xref:System.ServiceModel.Configuration.BehaviorExtensionElement>, который расширяет конфигурацию.</span><span class="sxs-lookup"><span data-stu-id="28dca-146">Implementing a custom <xref:System.ServiceModel.Configuration.BehaviorExtensionElement> that extends configuration.</span></span> <span data-ttu-id="28dca-147">Это позволяет использовать поведение службы в файлах конфигурации приложения.</span><span class="sxs-lookup"><span data-stu-id="28dca-147">This enables the use of the service behavior from application configuration files.</span></span>  
  
 <span data-ttu-id="28dca-148">Примеры поведения службы в <xref:System.ServiceModel.ServiceBehaviorAttribute> WCF <xref:System.ServiceModel.Description.ServiceThrottlingBehavior>включают атрибут, и <xref:System.ServiceModel.Description.ServiceMetadataBehavior> поведение.</span><span class="sxs-lookup"><span data-stu-id="28dca-148">Examples of service behaviors in WCF include the <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute, the <xref:System.ServiceModel.Description.ServiceThrottlingBehavior>, and the <xref:System.ServiceModel.Description.ServiceMetadataBehavior> behavior.</span></span>  
  
#### <a name="contract-behaviors"></a><span data-ttu-id="28dca-149">Поведения контрактов</span><span class="sxs-lookup"><span data-stu-id="28dca-149">Contract Behaviors</span></span>  
 <span data-ttu-id="28dca-150">Поведения контрактов, реализующие интерфейс <xref:System.ServiceModel.Description.IContractBehavior>, служат для расширения сред выполнения клиента и службы в рамках контракта.</span><span class="sxs-lookup"><span data-stu-id="28dca-150">Contract behaviors, which implement the <xref:System.ServiceModel.Description.IContractBehavior> interface, are used to extend both the client and service runtime across a contract.</span></span>  
  
 <span data-ttu-id="28dca-151">Имеется два механизма добавления поведений контрактов к контрактам.</span><span class="sxs-lookup"><span data-stu-id="28dca-151">There are two mechanisms for adding contract behaviors to a contract.</span></span>  <span data-ttu-id="28dca-152">Первый механизм предполагает создание пользовательского атрибута, который будет использоваться в интерфейсе контракта.</span><span class="sxs-lookup"><span data-stu-id="28dca-152">The first mechanism is to create a custom attribute to be used on the contract interface.</span></span> <span data-ttu-id="28dca-153">Когда интерфейс контракта передается <xref:System.ServiceModel.ServiceHost> либо <xref:System.ServiceModel.ChannelFactory%601>a, либо a, WCF изучает атрибуты интерфейса.</span><span class="sxs-lookup"><span data-stu-id="28dca-153">When a contract interface is passed to either a <xref:System.ServiceModel.ServiceHost> or a <xref:System.ServiceModel.ChannelFactory%601>, WCF examines the attributes on the interface.</span></span> <span data-ttu-id="28dca-154">Все атрибуты, реализующие интерфейс <xref:System.ServiceModel.Description.IContractBehavior>, добавляются в коллекцию поведений в объекте <xref:System.ServiceModel.Description.ContractDescription?displayProperty=nameWithType>, созданном для этого интерфейса.</span><span class="sxs-lookup"><span data-stu-id="28dca-154">If any attributes are implementations of <xref:System.ServiceModel.Description.IContractBehavior>, those are added to the behaviors collection on the <xref:System.ServiceModel.Description.ContractDescription?displayProperty=nameWithType> created for that interface.</span></span>  
  
 <span data-ttu-id="28dca-155">Кроме того, можно реализовать интерфейс <xref:System.ServiceModel.Description.IContractBehaviorAttribute?displayProperty=nameWithType> в атрибуте поведения пользовательского контракта.</span><span class="sxs-lookup"><span data-stu-id="28dca-155">You can also implement the <xref:System.ServiceModel.Description.IContractBehaviorAttribute?displayProperty=nameWithType> on the custom contract behavior attribute.</span></span> <span data-ttu-id="28dca-156">В этом случае поведение, если оно применяется, выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="28dca-156">In this case, the behavior is as follows when applied to:</span></span>  
  
 <span data-ttu-id="28dca-157">•Интерфейс контракта.</span><span class="sxs-lookup"><span data-stu-id="28dca-157">•A contract interface.</span></span> <span data-ttu-id="28dca-158">В этом случае поведение применяется ко всем контрактам этого типа в любой <xref:System.ServiceModel.Description.IContractBehaviorAttribute.TargetContract%2A?displayProperty=nameWithType> конечной точке, и WCF игнорирует стоимость свойства.</span><span class="sxs-lookup"><span data-stu-id="28dca-158">In this case, the behavior is applied to all contracts of that type in any endpoint and WCF ignores the value of the <xref:System.ServiceModel.Description.IContractBehaviorAttribute.TargetContract%2A?displayProperty=nameWithType> property.</span></span>  
  
 <span data-ttu-id="28dca-159">•Класс службы.</span><span class="sxs-lookup"><span data-stu-id="28dca-159">•A service class.</span></span> <span data-ttu-id="28dca-160">В этом случае поведение применяется только к конечным точкам, контракт которых имеет значение, равное значению свойства <xref:System.ServiceModel.Description.IContractBehaviorAttribute.TargetContract%2A>.</span><span class="sxs-lookup"><span data-stu-id="28dca-160">In this case, the behavior is applied only to endpoints the contract of which is the value of the <xref:System.ServiceModel.Description.IContractBehaviorAttribute.TargetContract%2A> property.</span></span>  
  
 <span data-ttu-id="28dca-161">•Класс обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="28dca-161">•A callback class.</span></span> <span data-ttu-id="28dca-162">В этом случае поведение применяется к конечной точке дуплексного клиента, <xref:System.ServiceModel.Description.IContractBehaviorAttribute.TargetContract%2A> и WCF игнорирует значение свойства.</span><span class="sxs-lookup"><span data-stu-id="28dca-162">In this case, the behavior is applied to the duplex client's endpoint and WCF ignores the value of the <xref:System.ServiceModel.Description.IContractBehaviorAttribute.TargetContract%2A> property.</span></span>  
  
 <span data-ttu-id="28dca-163">Второй механизм предполагает добавление поведения в коллекцию поведений объекта <xref:System.ServiceModel.Description.ContractDescription>.</span><span class="sxs-lookup"><span data-stu-id="28dca-163">The second mechanism is to add the behavior to the behaviors collection on a <xref:System.ServiceModel.Description.ContractDescription>.</span></span>  
  
 <span data-ttu-id="28dca-164">Примеры поведения по контрактам <xref:System.ServiceModel.DeliveryRequirementsAttribute?displayProperty=nameWithType> в WCF включают атрибут.</span><span class="sxs-lookup"><span data-stu-id="28dca-164">Examples of contract behaviors in WCF include the <xref:System.ServiceModel.DeliveryRequirementsAttribute?displayProperty=nameWithType> attribute.</span></span> <span data-ttu-id="28dca-165">Дополнительные сведения и пример см. в справочном разделе.</span><span class="sxs-lookup"><span data-stu-id="28dca-165">For more information and an example, see the reference topic.</span></span>  
  
#### <a name="endpoint-behaviors"></a><span data-ttu-id="28dca-166">Поведения конечных точек</span><span class="sxs-lookup"><span data-stu-id="28dca-166">Endpoint Behaviors</span></span>  
 <span data-ttu-id="28dca-167">Поведения конечных точек, реализующие интерфейс <xref:System.ServiceModel.Description.IEndpointBehavior>, являются основным механизмом для изменения всей среды выполнения службы или клиента для конкретной конечной точки.</span><span class="sxs-lookup"><span data-stu-id="28dca-167">Endpoint behaviors, which implement <xref:System.ServiceModel.Description.IEndpointBehavior>, are the primary mechanism by which you modify the entire service or client run time for a specific endpoint.</span></span>  
  
 <span data-ttu-id="28dca-168">Имеется два механизма добавления поведений конечных точек к службам.</span><span class="sxs-lookup"><span data-stu-id="28dca-168">There are two mechanisms for adding endpoint behaviors to a service.</span></span>  
  
1. <span data-ttu-id="28dca-169">Добавьте поведение в свойство <xref:System.ServiceModel.Description.ServiceEndpoint.Behaviors%2A>.</span><span class="sxs-lookup"><span data-stu-id="28dca-169">Add the behavior to the <xref:System.ServiceModel.Description.ServiceEndpoint.Behaviors%2A> property.</span></span>  
  
2. <span data-ttu-id="28dca-170">Реализуйте пользовательский элемент <xref:System.ServiceModel.Configuration.BehaviorExtensionElement>, который расширяет конфигурацию.</span><span class="sxs-lookup"><span data-stu-id="28dca-170">Implement a custom <xref:System.ServiceModel.Configuration.BehaviorExtensionElement> that extends configuration.</span></span>  
  
 <span data-ttu-id="28dca-171">Дополнительные сведения и пример см. в справочном разделе.</span><span class="sxs-lookup"><span data-stu-id="28dca-171">For more information and an example, see the reference topic.</span></span>  
  
#### <a name="operation-behaviors"></a><span data-ttu-id="28dca-172">Поведения операций</span><span class="sxs-lookup"><span data-stu-id="28dca-172">Operation Behaviors</span></span>  
 <span data-ttu-id="28dca-173">Поведения операций, реализующие интерфейс <xref:System.ServiceModel.Description.IOperationBehavior>, служат для расширения сред выполнения клиента и службы для каждой из операций.</span><span class="sxs-lookup"><span data-stu-id="28dca-173">Operation behaviors, which implement the <xref:System.ServiceModel.Description.IOperationBehavior> interface, are used to extend both the client and service runtime for each operation.</span></span>  
  
 <span data-ttu-id="28dca-174">Имеется два механизма добавления поведений операций к операциям.</span><span class="sxs-lookup"><span data-stu-id="28dca-174">There are two mechanisms for adding operation behaviors to an operation.</span></span> <span data-ttu-id="28dca-175">Первый механизм предполагает создание пользовательского атрибута, который будет использоваться в методе, моделирующем операцию.</span><span class="sxs-lookup"><span data-stu-id="28dca-175">The first mechanism is to create a custom attribute to be used on the method that models the operation.</span></span> <span data-ttu-id="28dca-176">При добавлении операции <xref:System.ServiceModel.ServiceHost> к <xref:System.ServiceModel.ChannelFactory>a или a, WCF добавляет <xref:System.ServiceModel.Description.IOperationBehavior> любые <xref:System.ServiceModel.Description.OperationDescription> атрибуты в коллекцию поведения в созданной для этой операции.</span><span class="sxs-lookup"><span data-stu-id="28dca-176">When an operation is added to either a <xref:System.ServiceModel.ServiceHost> or a <xref:System.ServiceModel.ChannelFactory>, WCF adds any  <xref:System.ServiceModel.Description.IOperationBehavior> attributes to the behaviors collection on the <xref:System.ServiceModel.Description.OperationDescription> created for that operation.</span></span>  
  
 <span data-ttu-id="28dca-177">Второй механизм предполагает непосредственное добавление поведения в коллекцию поведений объекта <xref:System.ServiceModel.Description.OperationDescription>.</span><span class="sxs-lookup"><span data-stu-id="28dca-177">The second mechanism is by directly adding the behavior to the behaviors collection on a constructed <xref:System.ServiceModel.Description.OperationDescription>.</span></span>  
  
 <span data-ttu-id="28dca-178">Примеры эксплуатации поведения в <xref:System.ServiceModel.OperationBehaviorAttribute> WCF <xref:System.ServiceModel.TransactionFlowAttribute>включают и .</span><span class="sxs-lookup"><span data-stu-id="28dca-178">Examples of operation behaviors in WCF include the <xref:System.ServiceModel.OperationBehaviorAttribute> and the <xref:System.ServiceModel.TransactionFlowAttribute>.</span></span>  
  
 <span data-ttu-id="28dca-179">Дополнительные сведения и пример см. в справочном разделе.</span><span class="sxs-lookup"><span data-stu-id="28dca-179">For more information and an example, see the reference topic.</span></span>  
  
### <a name="using-configuration-to-create-behaviors"></a><span data-ttu-id="28dca-180">Создание поведений с помощью файла конфигурации</span><span class="sxs-lookup"><span data-stu-id="28dca-180">Using Configuration to Create Behaviors</span></span>  
 <span data-ttu-id="28dca-181">Поведения служб, конечных точек и контрактов можно разрабатывать таким образом, чтобы задавать их в коде с помощью атрибутов. Только поведения служб и конечных точек можно настраивать с помощью файлов конфигурации приложения и веб-службы.</span><span class="sxs-lookup"><span data-stu-id="28dca-181">Service and endpoint, and contract behaviors can by designed to be specified in code or using attributes; only service and endpoint behaviors can be configured using application or Web configuration files.</span></span> <span data-ttu-id="28dca-182">Предоставление доступа к поведениям с помощью атрибутов позволяет разработчикам задавать поведение во время компиляции; это значит, что такое поведение нельзя добавлять, удалять или изменять во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="28dca-182">Exposing behaviors using attributes allows developers to specify a behavior at compilation-time that cannot be added, removed, or modified at runtime.</span></span> <span data-ttu-id="28dca-183">Этот подход часто применяется для поведений, которые обязательно нужны для правильной работы службы (например, связанные с транзакциями параметры атрибута <xref:System.ServiceModel.ServiceBehaviorAttribute?displayProperty=nameWithType>).</span><span class="sxs-lookup"><span data-stu-id="28dca-183">This is often suitable for behaviors that are always required for the correct operation of a service (for example, the transaction-related parameters to the <xref:System.ServiceModel.ServiceBehaviorAttribute?displayProperty=nameWithType> attribute).</span></span> <span data-ttu-id="28dca-184">Предоставление доступа к поведениям с помощью файлов конфигурации позволяет разработчикам переложить обязанности по спецификации и настойке этих поведений на тех, кто будет развертывать службу.</span><span class="sxs-lookup"><span data-stu-id="28dca-184">Exposing behaviors using configuration allows developers to leave the specification and configuration of those behaviors to those who deploy the service.</span></span> <span data-ttu-id="28dca-185">Такой подход удобно применять для поведений, которые являются необязательными компонентами, или для других конфигураций, которые зависят от развертывания, например, чтобы определить, нужно ли предоставлять метаданные всей службе или же только конкретной конфигурации авторизации службы.</span><span class="sxs-lookup"><span data-stu-id="28dca-185">This is suitable for behaviors that are optional components or other deployment-specific configuration, such as whether metadata is exposed for the service or the particular authorization configuration for a service.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="28dca-186">Также можно использовать поведения, которые поддерживают файлы конфигурации, для реализации политик применения путем их вставки в файл конфигурации machine.config и блокировки соответствующих элементов от изменений.</span><span class="sxs-lookup"><span data-stu-id="28dca-186">You can also use behaviors that support configuration to enforce company application policies by inserting them into the machine.config configuration file and locking those items down.</span></span> <span data-ttu-id="28dca-187">Для описания и примера см. [Как: Блокировка конечных точек в предприятии.](how-to-lock-down-endpoints-in-the-enterprise.md)</span><span class="sxs-lookup"><span data-stu-id="28dca-187">For a description and an example, see [How to: Lock Down Endpoints in the Enterprise](how-to-lock-down-endpoints-in-the-enterprise.md).</span></span>  
  
 <span data-ttu-id="28dca-188">Чтобы сделать поведение доступным с помощью файла конфигурации, разработчик должен создать производный класс для класса <xref:System.ServiceModel.Configuration.BehaviorExtensionElement>, а затем зарегистрировать расширение в конфигурации.</span><span class="sxs-lookup"><span data-stu-id="28dca-188">To expose a behavior using configuration, a developer must create a derived class of <xref:System.ServiceModel.Configuration.BehaviorExtensionElement> and then register that extension with configuration.</span></span>  
  
 <span data-ttu-id="28dca-189">В следующем примере кода показано, каким образом интерфейс <xref:System.ServiceModel.Description.IEndpointBehavior> реализует объект <xref:System.ServiceModel.Configuration.BehaviorExtensionElement>.</span><span class="sxs-lookup"><span data-stu-id="28dca-189">The following code example shows how an  <xref:System.ServiceModel.Description.IEndpointBehavior> implements <xref:System.ServiceModel.Configuration.BehaviorExtensionElement>:</span></span>  
  
```csharp
// BehaviorExtensionElement members  
public override Type BehaviorType  
{  
  get { return typeof(EndpointBehaviorMessageInspector); }  
}  
  
protected override object CreateBehavior()  
{  
  return new EndpointBehaviorMessageInspector();  
}  
```  
  
 <span data-ttu-id="28dca-190">Чтобы система конфигурации загрузила пользовательский объект <xref:System.ServiceModel.Configuration.BehaviorExtensionElement>, он должен быть зарегистрирован в качестве расширения.</span><span class="sxs-lookup"><span data-stu-id="28dca-190">In order for the configuration system to load a custom <xref:System.ServiceModel.Configuration.BehaviorExtensionElement>, it must be registered as an extension.</span></span> <span data-ttu-id="28dca-191">В следующем примере кода показан файл конфигурации для предыдущего поведения конечной точки.</span><span class="sxs-lookup"><span data-stu-id="28dca-191">The following code example shows the configuration file for the preceding endpoint behavior:</span></span>  
  
```xml  
<configuration>  
  <system.serviceModel>  
    <services>  
      <service
        name="Microsoft.WCF.Documentation.SampleService"  
        behaviorConfiguration="metadataSupport"  
      >  
        <host>  
          <baseAddresses>  
            <add baseAddress="http://localhost:8080/ServiceMetadata" />  
          </baseAddresses>  
        </host>  
        <endpoint  
          address="/SampleService"  
          binding="wsHttpBinding"  
          behaviorConfiguration="withMessageInspector"
          contract="Microsoft.WCF.Documentation.ISampleService"  
        />  
        <endpoint  
           address="mex"  
           binding="mexHttpBinding"  
           contract="IMetadataExchange"  
        />  
      </service>  
    </services>  
    <behaviors>  
      <serviceBehaviors>  
      <behavior name="metadataSupport">  
        <serviceMetadata httpGetEnabled="true" httpGetUrl=""/>  
      </behavior>  
      </serviceBehaviors>  
      <endpointBehaviors>  
        <behavior name="withMessageInspector">  
          <endpointMessageInspector />  
        </behavior>  
      </endpointBehaviors>  
    </behaviors>  
    <extensions>  
      <behaviorExtensions>  
        <add
          name="endpointMessageInspector"  
          type="Microsoft.WCF.Documentation.EndpointBehaviorMessageInspector, HostApplication, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null"  
        />  
      </behaviorExtensions>  
    </extensions>  
  </system.serviceModel>  
</configuration>  
```  
  
 <span data-ttu-id="28dca-192">Где `Microsoft.WCF.Documentation.EndpointBehaviorMessageInspector` тип расширения поведения `HostApplication` и это имя сборки, в которую был составлен этот класс.</span><span class="sxs-lookup"><span data-stu-id="28dca-192">Where `Microsoft.WCF.Documentation.EndpointBehaviorMessageInspector` is the behavior extension type and `HostApplication` is the name of the assembly into which that class has been compiled.</span></span>  
  
### <a name="evaluation-order"></a><span data-ttu-id="28dca-193">Порядок вычисления</span><span class="sxs-lookup"><span data-stu-id="28dca-193">Evaluation Order</span></span>  
 <span data-ttu-id="28dca-194">Классы <xref:System.ServiceModel.ChannelFactory%601?displayProperty=nameWithType> и <xref:System.ServiceModel.ServiceHost?displayProperty=nameWithType> отвечают за построение среды выполнения на основе модели программирования и описания.</span><span class="sxs-lookup"><span data-stu-id="28dca-194">The <xref:System.ServiceModel.ChannelFactory%601?displayProperty=nameWithType> and the <xref:System.ServiceModel.ServiceHost?displayProperty=nameWithType> are responsible for building the runtime from the programming model and description.</span></span> <span data-ttu-id="28dca-195">Как было сказано выше, поведения участвуют в этом процессе, оказывая влияние на службы, конечные точки, контракты и операции.</span><span class="sxs-lookup"><span data-stu-id="28dca-195">Behaviors, as previously described, contribute to that build process at the service, endpoint, contract, and operation.</span></span>  
  
 <span data-ttu-id="28dca-196">Объект <xref:System.ServiceModel.ServiceHost> применяет поведения в следующем порядке.</span><span class="sxs-lookup"><span data-stu-id="28dca-196">The <xref:System.ServiceModel.ServiceHost> applies behaviors in the following order:</span></span>  
  
1. <span data-ttu-id="28dca-197">Служба</span><span class="sxs-lookup"><span data-stu-id="28dca-197">Service</span></span>  
  
2. <span data-ttu-id="28dca-198">Контракт</span><span class="sxs-lookup"><span data-stu-id="28dca-198">Contract</span></span>  
  
3. <span data-ttu-id="28dca-199">Конечная точка</span><span class="sxs-lookup"><span data-stu-id="28dca-199">Endpoint</span></span>  
  
4. <span data-ttu-id="28dca-200">Операция</span><span class="sxs-lookup"><span data-stu-id="28dca-200">Operation</span></span>  
  
 <span data-ttu-id="28dca-201">В рамках одной коллекции поведений порядок не гарантируется.</span><span class="sxs-lookup"><span data-stu-id="28dca-201">Within any collection of behaviors, no order is guaranteed.</span></span>  
  
 <span data-ttu-id="28dca-202">Объект <xref:System.ServiceModel.ChannelFactory%601> применяет поведения в следующем порядке.</span><span class="sxs-lookup"><span data-stu-id="28dca-202">The <xref:System.ServiceModel.ChannelFactory%601> applies behaviors in the following order:</span></span>  
  
1. <span data-ttu-id="28dca-203">Контракт</span><span class="sxs-lookup"><span data-stu-id="28dca-203">Contract</span></span>  
  
2. <span data-ttu-id="28dca-204">Конечная точка</span><span class="sxs-lookup"><span data-stu-id="28dca-204">Endpoint</span></span>  
  
3. <span data-ttu-id="28dca-205">Операция</span><span class="sxs-lookup"><span data-stu-id="28dca-205">Operation</span></span>  
  
 <span data-ttu-id="28dca-206">В рамках одной коллекции поведений порядок также не гарантируется.</span><span class="sxs-lookup"><span data-stu-id="28dca-206">Within any collection of behaviors, again, no order is guaranteed.</span></span>  
  
### <a name="adding-behaviors-programmatically"></a><span data-ttu-id="28dca-207">Добавление поведений программным образом</span><span class="sxs-lookup"><span data-stu-id="28dca-207">Adding Behaviors Programmatically</span></span>  
 <span data-ttu-id="28dca-208">Свойства объекта <xref:System.ServiceModel.Description.ServiceDescription?displayProperty=nameWithType> в приложении службы нельзя изменять после вызова метода <xref:System.ServiceModel.Channels.CommunicationObject.OnOpening%2A?displayProperty=nameWithType> для объекта <xref:System.ServiceModel.ServiceHostBase?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="28dca-208">Properties of the <xref:System.ServiceModel.Description.ServiceDescription?displayProperty=nameWithType> in the service application must not be modified subsequent to the <xref:System.ServiceModel.Channels.CommunicationObject.OnOpening%2A?displayProperty=nameWithType> method on <xref:System.ServiceModel.ServiceHostBase?displayProperty=nameWithType>.</span></span> <span data-ttu-id="28dca-209">Некоторые члены, например свойство <xref:System.ServiceModel.ServiceHostBase.Credentials%2A?displayProperty=nameWithType> и методы `AddServiceEndpoint` классов <xref:System.ServiceModel.ServiceHostBase> и <xref:System.ServiceModel.ServiceHost?displayProperty=nameWithType> создают исключения, если их изменить на этом этапе.</span><span class="sxs-lookup"><span data-stu-id="28dca-209">Some members, like the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A?displayProperty=nameWithType> property and the `AddServiceEndpoint` methods on <xref:System.ServiceModel.ServiceHostBase> and <xref:System.ServiceModel.ServiceHost?displayProperty=nameWithType>, throw an exception if modified past that point.</span></span> <span data-ttu-id="28dca-210">Другие члены можно изменять без появления исключения, но результат при этом будет неопределенным.</span><span class="sxs-lookup"><span data-stu-id="28dca-210">Others permit you to modify them, but the result is undefined.</span></span>  
  
 <span data-ttu-id="28dca-211">Аналогично, на стороне клиента нельзя изменять значения <xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType> после вызова метода <xref:System.ServiceModel.Channels.CommunicationObject.OnOpening%2A> для объекта <xref:System.ServiceModel.ChannelFactory?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="28dca-211">Similarly, on the client the <xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType> values must not be modified after the call to <xref:System.ServiceModel.Channels.CommunicationObject.OnOpening%2A> on the <xref:System.ServiceModel.ChannelFactory?displayProperty=nameWithType>.</span></span> <span data-ttu-id="28dca-212">Если свойство <xref:System.ServiceModel.ChannelFactory.Credentials%2A?displayProperty=nameWithType> изменить на этом этапе, будет создано исключение. Другие значения описания клиента можно изменять без возникновения ошибки,</span><span class="sxs-lookup"><span data-stu-id="28dca-212">The <xref:System.ServiceModel.ChannelFactory.Credentials%2A?displayProperty=nameWithType> property throws an exception if modified past that point, but the other client description values can be modified without error.</span></span> <span data-ttu-id="28dca-213">однако результат в этом случае будет неопределенным.</span><span class="sxs-lookup"><span data-stu-id="28dca-213">The result, however, is undefined.</span></span>  
  
 <span data-ttu-id="28dca-214">Как для службы, так и для клиента, рекомендуется изменять описание до вызова метода <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="28dca-214">Whether for the service or client, it is recommended that you modify the description prior to calling <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A?displayProperty=nameWithType>.</span></span>  
  
### <a name="inheritance-rules-for-behavior-attributes"></a><span data-ttu-id="28dca-215">Правила наследования атрибутов поведений</span><span class="sxs-lookup"><span data-stu-id="28dca-215">Inheritance Rules for Behavior Attributes</span></span>  
 <span data-ttu-id="28dca-216">Поведения всех четырех типов можно определять с использованием атрибутов - поведений служб и контрактов.</span><span class="sxs-lookup"><span data-stu-id="28dca-216">All four types of behaviors can be populated using attributes – service behaviors and contract behaviors.</span></span> <span data-ttu-id="28dca-217">Поскольку атрибуты определяются в управляемых объектах и членах, а управляемые объекты и члены поддерживают наследование, необходимо определить, как атрибуты поведений ведут себя в контексте наследования.</span><span class="sxs-lookup"><span data-stu-id="28dca-217">Because attributes are defined on managed objects and members, and managed objects and members support inheritance, it is necessary to define how behavior attributes work in the context of inheritance.</span></span>  
  
 <span data-ttu-id="28dca-218">На верхнем уровне действует следующее правило: для конкретной области (например, для службы, контракта или операции) применяются все атрибуты поведений в иерархии наследования для данной области.</span><span class="sxs-lookup"><span data-stu-id="28dca-218">At a high level, the rule is that for a particular scope (for example, service, contract, or operation), all behavior attributes in the inheritance hierarchy for that scope are applied.</span></span> <span data-ttu-id="28dca-219">Если имеется два атрибута поведений одного типа, используется тип более низкого уровня иерархии.</span><span class="sxs-lookup"><span data-stu-id="28dca-219">If there are two behavior attributes of the same type, only the most-derived type is used.</span></span>  
  
#### <a name="service-behaviors"></a><span data-ttu-id="28dca-220">Поведения служб</span><span class="sxs-lookup"><span data-stu-id="28dca-220">Service Behaviors</span></span>  
 <span data-ttu-id="28dca-221">Для заданного класса службы применяются все атрибуты поведения службы для этого класса и всех его родительских классов.</span><span class="sxs-lookup"><span data-stu-id="28dca-221">For a given service class, all service behavior attributes on that class, and on parents of that class, are applied.</span></span> <span data-ttu-id="28dca-222">Если атрибуты одного и того же типа встречаются на различных уровнях иерархии наследования, используется тип более низкого уровня иерархии.</span><span class="sxs-lookup"><span data-stu-id="28dca-222">If the same type of attribute is applied at multiple places in the inheritance hierarchy, the most-derived type is used.</span></span>  
  
```csharp  
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple)]  
[AspNetCompatibilityRequirementsAttribute(  
    AspNetCompatibilityRequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]  
public class A { /* … */ }  
  
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]  
public class B : A { /* … */}  
```  
  
 <span data-ttu-id="28dca-223">В приведенном выше примере у службы B атрибут <xref:System.ServiceModel.InstanceContextMode> имеет значение <xref:System.ServiceModel.InstanceContextMode.Single>, атрибут <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode> - значение <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed>, а атрибут <xref:System.ServiceModel.ConcurrencyMode> - значение <xref:System.ServiceModel.ConcurrencyMode.Single>.</span><span class="sxs-lookup"><span data-stu-id="28dca-223">For example, in the preceding case, the service B ends up with an <xref:System.ServiceModel.InstanceContextMode> of <xref:System.ServiceModel.InstanceContextMode.Single>, an <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode> mode of <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed>, and a <xref:System.ServiceModel.ConcurrencyMode> of <xref:System.ServiceModel.ConcurrencyMode.Single>.</span></span> <span data-ttu-id="28dca-224">Атрибут <xref:System.ServiceModel.ConcurrencyMode> будет равняться <xref:System.ServiceModel.ConcurrencyMode.Single>, потому что атрибут <xref:System.ServiceModel.ServiceBehaviorAttribute> службы B расположен на более низком уровне иерархии по сравнению со службой A.</span><span class="sxs-lookup"><span data-stu-id="28dca-224">The <xref:System.ServiceModel.ConcurrencyMode> is <xref:System.ServiceModel.ConcurrencyMode.Single>, because <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute on service B is on "more derived" than that on service A.</span></span>  
  
#### <a name="contract-behaviors"></a><span data-ttu-id="28dca-225">Поведения контрактов</span><span class="sxs-lookup"><span data-stu-id="28dca-225">Contract Behaviors</span></span>  
 <span data-ttu-id="28dca-226">Для заданного контракта применяются все атрибуты поведения контракта для этого интерфейса и всех его родительских интерфейсов.</span><span class="sxs-lookup"><span data-stu-id="28dca-226">For a given contract, all contract behavior attributes on that interface and on parents of that interface, are applied.</span></span> <span data-ttu-id="28dca-227">Если атрибуты одного и того же типа встречаются на различных уровнях иерархии наследования, используется тип более низкого уровня иерархии.</span><span class="sxs-lookup"><span data-stu-id="28dca-227">If the same type of attribute is applied at multiple places in the inheritance hierarchy, the most-derived type is used.</span></span>  
  
#### <a name="operation-behaviors"></a><span data-ttu-id="28dca-228">Поведения операций</span><span class="sxs-lookup"><span data-stu-id="28dca-228">Operation Behaviors</span></span>  
 <span data-ttu-id="28dca-229">Если данная операция не переопределяет существующую абстрактную или виртуальную операцию, никакие правила наследования не применяются.</span><span class="sxs-lookup"><span data-stu-id="28dca-229">If a given operation does not override an existing abstract or virtual operation, no inheritance rules apply.</span></span>  
  
 <span data-ttu-id="28dca-230">Если операция переопределяет существующую операцию, то применяются все атрибуты поведения данной операции и ее родительских операций.</span><span class="sxs-lookup"><span data-stu-id="28dca-230">If an operation does override an existing operation, then all operation behavior attributes on that operation and on parents of that operation, are applied.</span></span>  <span data-ttu-id="28dca-231">Если атрибуты одного и того же типа встречаются на различных уровнях иерархии наследования, используется тип более низкого уровня иерархии.</span><span class="sxs-lookup"><span data-stu-id="28dca-231">If the same type of attribute is applied at multiple places in the inheritance hierarchy, the most-derived type is used.</span></span>
