---
title: Публикация служб WCF
ms.date: 03/30/2017
ms.assetid: c806b253-cd47-4b96-b831-e73cbf08808f
ms.openlocfilehash: 90d2a841fa5ce14b1ad5295b3bb6493df0350339
ms.sourcegitcommit: 628e8147ca10187488e6407dab4c4e6ebe0cac47
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/15/2019
ms.locfileid: "72321242"
---
# <a name="wcf-service-publishing"></a>Публикация служб WCF

Публикация службы Windows Communication Foundation (WCF) помогает в выполнении из ранней среды разработки, предоставляемой узлом службы WCF и тестового клиента WCF, для фактического развертывания приложения в рабочей среде для тестирования. Перед фиксацией в окончательном плане развертывания можно использовать публикацию службы Windows Communication Foundation (WCF), чтобы убедиться, что служба WCF работает правильно и готова к публикации. Можно также выбрать развертывание библиотек службы WCF в различных целевых расположениях для тестирования.

## <a name="supported-services-and-target-locations"></a>Поддерживаемые службы и целевые размещения

Публикация службы WCF поддерживает публикацию служб WCF, созданных из набора шаблонов библиотеки служб WCF, и соответствующие шаблоны элементов, в том числе следующие:

- Шаблон библиотеки службы WCF с шаблоном элемента.

- Библиотека служб синдикации.

Эти шаблоны служб можно найти, выбрав **файл** > **создать проект** > [**Visual Basic** или **Visual C#** ] > **WCF**. Для других шаблонов WCF в этом расположении (включая приложение службы рабочего процесса WCF и приложение службы WCF) можно опубликовать с помощью [публикации одним щелчком для веб-приложений](https://docs.microsoft.com/previous-versions/aspnet/dd465337(v=vs.110)).

Служба может быть опубликована в следующих целевых расположениях.

- Локальный веб-сервер IIS.

- Файловая система.

- FTP-узел.

## <a name="using-wcf-service-publishing"></a>Использование публикации служб WCF

Выполните следующие действия для развертывания реализации службы:

1. Откройте Visual Studio с повышенными привилегиями (щелкните исполняемый файл правой кнопкой мыши и выберите **Запуск от имени администратора** , чтобы открыть его).  Если вы используете IIS 7,0 или более поздней версии, убедитесь, что установлен компонент "Совместимость метабазы IIS и IIS6" на панели управления "Включение или отключение компонентов Windows".

2. Откройте проект службы, выберите **сборка** > **опубликовать \<имя проекта >** в главном меню или щелкните правой кнопкой мыши проект в **Обозреватель решений** и выберите пункт **опубликовать**.

3. Откроется окно **Публикация** . Нажмите кнопку **...** . чтобы указать целевое расположение, в котором должна быть развернута служба. Можно выбрать развертывание приложения в локальную службу IIS, файловую систему или FTP-сайт. При развертывании приложения на локальных службах IIS можно выбрать веб-сайт и создать в нем веб-приложение, щелкнув значок **создать веб-приложение** в правом верхнем углу.

4. После нажатия кнопки **опубликовать** в главном окне Visual Studio развертывает приложение в указанном целевом расположении и копирует файлы Web. config,. svc и сборки в целевой каталог. . Имя SVC будет "ProjectName. ServiceName. svc". После успешной публикации службы можно найти хотлинк в окне вывода Visual Studio, которое выглядит примерно так: "подключение к `http://localhost/WebApplicationFolderName...`". Можно щелкнуть ссылку при нажатой клавише CTRL, чтобы открыть страницу браузера в Visual Studio для просмотра структуры каталогов службы.

     Если перейти к узлу не удается, возможно, браузер каталогов в IIS не включен. Следуйте советам в разделе "что можно попытаться", чтобы включить его. Кроме того, можно непосредственно ввести `http://localhost/WebApplicationFolderName/ProjectName.ServiceName.svc` для просмотра страницы службы.

Можно использовать **публикацию** , чтобы указать, нужно ли копировать сборку, конфигурацию и SVC для всех служб, определенных в проекте, в целевое расположение и перезаписать существующие файлы в месте назначения.

При выборе развертывания приложения на локальный сервер IIS могут возникнуть ошибки, связанные с настройкой IIS. Убедитесь, что IIS установлен правильно. Вы можете ввести `http://localhost` в адресной строке браузера и проверить, отображается ли страница IIS по умолчанию. В некоторых случаях проблемы также могут быть вызваны неправильной регистрацией ASP.NET или WCF в службах IIS. Вы можете открыть Командная строка разработчика для Visual Studio и выполнить команду `aspnet_regiis.exe -ir`, чтобы устранить проблемы регистрации ASP.NET, или выполнить команду `ServiceModelReg.exe –ia`, чтобы устранить проблемы регистрации WCF.

## <a name="files-generated-for-publishing"></a>Файлы, созданные для опубликования
 Прежде чем библиотека службы WCF может быть размещена в веб-среде, программа создает следующие файлы: файлы сборки, файл Web. config и SVC-файл. Все файлы копируются в целевое расположение. После этого выполняется публикация службы.

### <a name="assembly-files"></a>Файлы сборки
 При публикации службы WCF с помощью этого средства сначала создается служба, а файлы сборки создаются в проекте службы после сборки.

### <a name="svc-file"></a>Файл SVC
 Операция публикации создает SVC-файл для каждой службы WCF (независимо от того, существует ли файл или нет), чтобы обеспечить правильность версий. Существует два типа SVC-файлов: один для библиотеки службы WCF и Библиотека службы синдикации, а другой — для последовательной и для поочередной библиотеки службы рабочего процесса конечного автомата. Созданный файл \*. svc копируется в корневую папку в целевом расположении.

### <a name="webconfig-file"></a>Файл Web.config
 Файл Web.config создается каждый раз при публикации проекта службы в заданное целевое расположение.

 Созданный файл Web. config включает веб-разделы, полезные для размещения веб-приложений, и содержимое файла App. config для библиотеки службы WCF со следующими изменениями:

- Базовый адрес клиента исключен.

- Параметры в элементе `<diagnostics>` исключены, чтобы сохранить параметры отслеживания целевой платформы.

## <a name="publishing-wcf-services-with-non-http-bindings-to-iis"></a>Публикация служб WCF с привязками, не использующими HTTP, в службах IIS
 Если вы используете IIS 7.0 или более поздней версии, вы можете опубликовать службы WCF с привязками, отличными от HTTP, к службам IIS. Потребуется провести некоторые предварительные настройки. Дополнительные сведения см. в разделах, посвященных [размещению в службе активации Windows](./feature-details/hosting-in-windows-process-activation-service.md).

## <a name="security"></a>Безопасность
 Публикация в локальный сервер IIS требует наличия прав администратора, так как IIS требует выполнения под учетной записью администратора. Если пользователь без прав администратора открывает публикацию службы WCF, службы IIS недоступны в качестве целевого расположения. Публикация в файловой системе или FTP-сайт работает без прав администратора.

## <a name="see-also"></a>См. также:

- [Шаблоны WCF в Visual Studio](wcf-vs-templates.md)
- [Узел службы WCF (WcfSvcHost.exe)](wcf-service-host-wcfsvchost-exe.md)
- [Тестовый клиент WCF (WcfTestClient.exe)](wcf-test-client-wcftestclient-exe.md)
