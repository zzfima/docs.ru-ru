---
title: Ресурсы в приложениях .NET
ms.date: 07/25/2018
helpviewer_keywords:
- deploying applications [.NET Framework], resources
- deploying applications [.NET Core], resources
- application resources
- resource files
- satellite assemblies
- localization
- packaging application resources
- localizing resources
ms.assetid: 8ad495d4-2941-40cf-bf64-e82e85825890
ms.openlocfilehash: f7db871c6643973ab18a5bb6bbfac7ab85a11a76
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/15/2020
ms.locfileid: "75346740"
---
# <a name="resources-in-net-apps"></a><span data-ttu-id="fd5d7-102">Ресурсы в приложениях .NET</span><span class="sxs-lookup"><span data-stu-id="fd5d7-102">Resources in .NET apps</span></span>

<span data-ttu-id="fd5d7-103">Практически любое высококачественное приложение должно использовать ресурсы.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-103">Nearly every production-quality app has to use resources.</span></span> <span data-ttu-id="fd5d7-104">Ресурс представляет собой любые неисполняемые данные, которые логически развертываются вместе с приложением.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-104">A resource is any nonexecutable data that is logically deployed with an app.</span></span> <span data-ttu-id="fd5d7-105">Ресурсы могут отображаться в приложении в виде сообщений об ошибках либо как часть интерфейса пользователя.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-105">A resource might be displayed in an app as error messages or as part of the user interface.</span></span> <span data-ttu-id="fd5d7-106">Ресурсы могут содержать данные различных видов, включая символьные строки, изображения и объекты.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-106">Resources can contain data in a number of forms, including strings, images, and persisted objects.</span></span> <span data-ttu-id="fd5d7-107">(Для записи сохраняемых объектов в файл ресурсов объекты должны быть сериализуемыми.) Благодаря хранению данных в файле ресурсов сами данные можно изменять без перекомпиляции всего приложения.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-107">(To write persisted objects to a resource file, the objects must be serializable.) Storing your data in a resource file enables you to change the data without recompiling your entire app.</span></span> <span data-ttu-id="fd5d7-108">Это также позволяет хранить данные в одном месте и исключает необходимость в использовании жестко закодированных данных, которые хранятся в нескольких местах.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-108">It also enables you to store data in a single location, and eliminates the need to rely on hard-coded data that is stored in multiple locations.</span></span>

<span data-ttu-id="fd5d7-109">.NET Framework и .NET Core обеспечивают всестороннюю поддержку для создания и локализации ресурсов.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-109">The .NET Framework and .NET Core provide comprehensive support for the creation and localization of resources.</span></span> <span data-ttu-id="fd5d7-110">Кроме того, .NET поддерживает простую модель упаковки и развертывания локализованных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-110">In addition, .NET supports a simple model for packaging and deploying localized resources.</span></span>

<span data-ttu-id="fd5d7-111">Сведения о ресурсах ASP.NET см. в разделе [Общие сведения о ресурсах страниц ASP.NET](https://docs.microsoft.com/previous-versions/aspnet/ms227427(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="fd5d7-111">For information about resources in ASP.NET, see [ASP.NET Web Page Resources Overview](https://docs.microsoft.com/previous-versions/aspnet/ms227427(v=vs.100)).</span></span>

## <a name="create-and-localize-resources"></a><span data-ttu-id="fd5d7-112">Создание и локализация ресурсов</span><span class="sxs-lookup"><span data-stu-id="fd5d7-112">Create and localize resources</span></span>

<span data-ttu-id="fd5d7-113">В нелокализованном приложении файлы ресурсов можно использовать как хранилище для данных приложения, особенно для строк, которые в противном случае было бы необходимо жестко задавать в нескольких местах в исходном коде.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-113">In a non-localized app, you can use resource files as a repository for app data, particularly for strings that might otherwise be hard-coded in multiple locations in source code.</span></span> <span data-ttu-id="fd5d7-114">Чаще всего ресурсы создаются в виде текстовых (txt) или XML-файлов (.resx), а для их компиляции в двоичные RESOURCES-файлы используется [Resgen.exe (генератор файлов ресурсов)](../tools/resgen-exe-resource-file-generator.md).</span><span class="sxs-lookup"><span data-stu-id="fd5d7-114">Most commonly, you create resources as either text (.txt) or XML (.resx) files, and use [Resgen.exe (Resource File Generator)](../tools/resgen-exe-resource-file-generator.md) to compile them into binary .resources files.</span></span> <span data-ttu-id="fd5d7-115">Эти файлы можно затем встроить в исполняемый файл приложения с помощью компилятора языка.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-115">These files can then be embedded in the app's executable file by a language compiler.</span></span> <span data-ttu-id="fd5d7-116">Дополнительные сведения о создании ресурсов см. в разделе [Создание файлов ресурсов](creating-resource-files-for-desktop-apps.md).</span><span class="sxs-lookup"><span data-stu-id="fd5d7-116">For more information about creating resources, see [Creating Resource Files](creating-resource-files-for-desktop-apps.md).</span></span>

<span data-ttu-id="fd5d7-117">Вы также можете локализовать ресурсы приложения для конкретных языков и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-117">You can also localize your app's resources for specific cultures.</span></span> <span data-ttu-id="fd5d7-118">Это позволяет создавать локализованные (переведенные) версии приложений.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-118">This enables you to build localized (translated) versions of your apps.</span></span> <span data-ttu-id="fd5d7-119">При разработке приложения, использующего локализованные ресурсы, необходимо назначить язык и региональные параметры, являющиеся нейтральными или резервными, языком и региональными параметрами, ресурсы которого используются в случае отсутствия подходящих ресурсов.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-119">When you develop an app that uses localized resources, you designate a culture that serves as the neutral or fallback culture whose resources are used if no suitable resources are available.</span></span> <span data-ttu-id="fd5d7-120">Как правило, ресурсы нейтрального языка и региональных параметров хранятся в исполняемом файле приложения.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-120">Typically, the resources of the neutral culture are stored in the app's executable.</span></span> <span data-ttu-id="fd5d7-121">Остальные ресурсы для отдельных языков и региональных параметров хранятся в автономных вспомогательных сборках.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-121">The remaining resources for individual localized cultures are stored in standalone satellite assemblies.</span></span> <span data-ttu-id="fd5d7-122">Дополнительные сведения см. в разделе [Создание вспомогательных сборок](creating-satellite-assemblies-for-desktop-apps.md).</span><span class="sxs-lookup"><span data-stu-id="fd5d7-122">For more information, see [Creating Satellite Assemblies](creating-satellite-assemblies-for-desktop-apps.md).</span></span>

## <a name="package-and-deploy-resources"></a><span data-ttu-id="fd5d7-123">Упаковка и развертывание ресурсов</span><span class="sxs-lookup"><span data-stu-id="fd5d7-123">Package and deploy resources</span></span>

<span data-ttu-id="fd5d7-124">Развертывание ресурсов локализованного приложения выполняется во [вспомогательных сборках](packaging-and-deploying-resources-in-desktop-apps.md).</span><span class="sxs-lookup"><span data-stu-id="fd5d7-124">You deploy localized app resources in [satellite assemblies](packaging-and-deploying-resources-in-desktop-apps.md).</span></span> <span data-ttu-id="fd5d7-125">Вспомогательная сборка содержит ресурсы для одного языка и региональных параметров; в ней нет никакого кода приложения.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-125">A satellite assembly contains the resources of a single culture; it does not contain any app code.</span></span> <span data-ttu-id="fd5d7-126">В модели развертывания вспомогательной сборки вы создаете приложение с одной сборкой по умолчанию (которая обычно является главной сборкой) и одной вспомогательной сборкой для каждого языка и региональных параметров, поддерживаемых приложением.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-126">In the satellite assembly deployment model, you create an app with one default assembly (which is typically the main assembly) and one satellite assembly for each culture that the app supports.</span></span> <span data-ttu-id="fd5d7-127">Поскольку вспомогательные сборки не являются частью главной сборки, ресурсы, относящиеся к конкретному языку и региональным параметрам, можно легко заменять или обновлять, не заменяя главную сборку приложения.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-127">Because the satellite assemblies are not part of the main assembly, you can easily replace or update resources corresponding to a specific culture without replacing the app's main assembly.</span></span>

<span data-ttu-id="fd5d7-128">Точно определите ресурсы, которые будут применяться в сборке ресурсов по умолчанию для приложения.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-128">Carefully determine which resources will make up your app's default resource assembly.</span></span> <span data-ttu-id="fd5d7-129">Так как сборка по умолчанию является частью главной сборки, то при внесении в нее любых изменений потребуется замена главной сборки.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-129">Because it is a part of the main assembly, any changes to it will require you to replace the main assembly.</span></span> <span data-ttu-id="fd5d7-130">Если ресурс по умолчанию не предоставлен, то в случае его поиска [процессом использования резервных ресурсов](packaging-and-deploying-resources-in-desktop-apps.md) будет создаваться исключение.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-130">If you do not provide a default resource, an exception will be thrown when the [resource fallback process](packaging-and-deploying-resources-in-desktop-apps.md) attempts to find it.</span></span> <span data-ttu-id="fd5d7-131">В хорошо спроектированном приложении при использовании ресурсов исключения никогда не создаются.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-131">In a well-designed app, using resources should never throw an exception.</span></span>

<span data-ttu-id="fd5d7-132">Дополнительные сведения см. в статье [Упаковка и развертывание ресурсов](packaging-and-deploying-resources-in-desktop-apps.md).</span><span class="sxs-lookup"><span data-stu-id="fd5d7-132">For more information, see the [Packaging and Deploying Resources](packaging-and-deploying-resources-in-desktop-apps.md) article.</span></span>

## <a name="retrieve-resources"></a><span data-ttu-id="fd5d7-133">Извлечение ресурсов</span><span class="sxs-lookup"><span data-stu-id="fd5d7-133">Retrieve resources</span></span>

<span data-ttu-id="fd5d7-134">Приложение во время выполнения загружает соответствующие локализованные ресурсы отдельно для каждого потока на основе языка и региональных параметров, которые заданы свойством <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-134">At run time, an app loads the appropriate localized resources on a per-thread basis, based on the culture specified by the <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="fd5d7-135">Значение этого свойства формируется следующим образом:</span><span class="sxs-lookup"><span data-stu-id="fd5d7-135">This property value is derived as follows:</span></span>

- <span data-ttu-id="fd5d7-136">Присвоением свойству <xref:System.Threading.Thread.CurrentUICulture%2A?displayProperty=nameWithType> объекта <xref:System.Globalization.CultureInfo>, который представляет локализованные значения языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-136">By directly assigning a <xref:System.Globalization.CultureInfo> object that represents the localized culture to the <xref:System.Threading.Thread.CurrentUICulture%2A?displayProperty=nameWithType> property.</span></span>

- <span data-ttu-id="fd5d7-137">Если язык и региональные параметры не заданы явным образом, соответствующие значения по умолчанию для пользовательского интерфейса каждого потока извлекаются из свойства <xref:System.Globalization.CultureInfo.DefaultThreadCurrentUICulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-137">If a culture is not explicitly assigned, by retrieving the default thread UI culture from the <xref:System.Globalization.CultureInfo.DefaultThreadCurrentUICulture%2A?displayProperty=nameWithType> property.</span></span>

- <span data-ttu-id="fd5d7-138">Если язык и региональные параметры по умолчанию для пользовательского интерфейса в потоке не заданы явным образом, применяются язык и региональные параметры текущего пользователя на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-138">If a default thread UI culture is not explicitly assigned, by retrieving the culture for the current user on the local computer.</span></span> <span data-ttu-id="fd5d7-139">В реализациях .NET на базе Windows для этого вызывается Windows-функция [`GetUserDefaultUILanguage`](/windows/desktop/api/winnls/nf-winnls-getuserdefaultuilanguage).</span><span class="sxs-lookup"><span data-stu-id="fd5d7-139">.NET implementations running on Windows do this  by calling the Windows [`GetUserDefaultUILanguage`](/windows/desktop/api/winnls/nf-winnls-getuserdefaultuilanguage) function.</span></span>

<span data-ttu-id="fd5d7-140">Дополнительные сведения об указании языка и региональных параметров для пользовательского интерфейса см. в разделах справки <xref:System.Globalization.CultureInfo> и <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-140">For more information about how the current UI culture is set, see the <xref:System.Globalization.CultureInfo> and <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType> reference pages.</span></span>

<span data-ttu-id="fd5d7-141">Ресурсы для текущего или определенного языка и региональных параметров пользовательского интерфейса можно получить с помощью класса <xref:System.Resources.ResourceManager?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-141">You can then retrieve resources for the current UI culture or for a specific culture by using the <xref:System.Resources.ResourceManager?displayProperty=nameWithType> class.</span></span> <span data-ttu-id="fd5d7-142">Хотя для получения ресурсов чаще всего используется класс <xref:System.Resources.ResourceManager>, пространство имен <xref:System.Resources?displayProperty=nameWithType> содержит дополнительные типы, которые можно использовать для получения ресурсов.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-142">Although the <xref:System.Resources.ResourceManager> class is most commonly used for retrieving resources, the <xref:System.Resources?displayProperty=nameWithType> namespace contains additional types that you can use to retrieve resources.</span></span> <span data-ttu-id="fd5d7-143">Сюда входит следующее.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-143">These include:</span></span>

- <span data-ttu-id="fd5d7-144">Класс <xref:System.Resources.ResourceReader>, который позволяет перечислять ресурсы, встроенные в сборку или хранящиеся в отдельном двоичном RESOURCES-файле.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-144">The <xref:System.Resources.ResourceReader> class, which enables you to enumerate resources embedded in an assembly or stored in a standalone binary .resources file.</span></span> <span data-ttu-id="fd5d7-145">Это удобно, когда точные имена ресурсов, доступных во время выполнения, неизвестны.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-145">It is useful when you don't know the precise names of the resources that are available at run time.</span></span>

- <span data-ttu-id="fd5d7-146">Класс <xref:System.Resources.ResXResourceReader>, который позволяет получать ресурсы из XML-файла (.resx).</span><span class="sxs-lookup"><span data-stu-id="fd5d7-146">The <xref:System.Resources.ResXResourceReader> class, which enables you to retrieve resources from an XML (.resx) file.</span></span>

- <span data-ttu-id="fd5d7-147">Класс <xref:System.Resources.ResourceSet>, который позволяет получать ресурсы для конкретного языка и региональных параметров без учета правил отката.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-147">The <xref:System.Resources.ResourceSet> class, which enables you to retrieve the resources of a specific culture without observing fallback rules.</span></span> <span data-ttu-id="fd5d7-148">Ресурсы могут храниться в сборке или отдельном двоичном RESOURCES-файле.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-148">The resources can be stored in an assembly or a standalone binary .resources file.</span></span> <span data-ttu-id="fd5d7-149">Можно также разработать реализацию <xref:System.Resources.IResourceReader>, которая позволит использовать класс <xref:System.Resources.ResourceSet> для извлечения ресурсов из другого источника.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-149">You can also develop an <xref:System.Resources.IResourceReader> implementation that enables you to use the <xref:System.Resources.ResourceSet> class to retrieve resources from some other source.</span></span>

- <span data-ttu-id="fd5d7-150">Класс <xref:System.Resources.ResXResourceSet>, который позволяет получить в память все элементы из XML-файла ресурсов.</span><span class="sxs-lookup"><span data-stu-id="fd5d7-150">The <xref:System.Resources.ResXResourceSet> class, which enables you to retrieve all the items in an XML resource file into memory.</span></span>

## <a name="see-also"></a><span data-ttu-id="fd5d7-151">См. также</span><span class="sxs-lookup"><span data-stu-id="fd5d7-151">See also</span></span>

- <xref:System.Globalization.CultureInfo>
- <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType>
- [<span data-ttu-id="fd5d7-152">Основные сведения о приложениях .NET Framework</span><span class="sxs-lookup"><span data-stu-id="fd5d7-152">Application Essentials</span></span>](../../standard/application-essentials.md)
- [<span data-ttu-id="fd5d7-153">Создание файлов ресурсов</span><span class="sxs-lookup"><span data-stu-id="fd5d7-153">Creating Resource Files</span></span>](creating-resource-files-for-desktop-apps.md)
- [<span data-ttu-id="fd5d7-154">Упаковка и развертывание ресурсов</span><span class="sxs-lookup"><span data-stu-id="fd5d7-154">Packaging and Deploying Resources</span></span>](packaging-and-deploying-resources-in-desktop-apps.md)
- [<span data-ttu-id="fd5d7-155">Создание вспомогательных сборок</span><span class="sxs-lookup"><span data-stu-id="fd5d7-155">Creating Satellite Assemblies</span></span>](creating-satellite-assemblies-for-desktop-apps.md)
- [<span data-ttu-id="fd5d7-156">Извлечение ресурсов</span><span class="sxs-lookup"><span data-stu-id="fd5d7-156">Retrieving Resources</span></span>](retrieving-resources-in-desktop-apps.md)
