---
title: Метаданные и компоненты с самоописанием
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- runtime, metadata
- languages, interoperability
- portable executable files, metadata
- self-describing files
- metadata, about metadata
- common language runtime, metadata
- PE files, metadata
- components [.NET Framework], metadata
ms.assetid: 3dd13c5d-a508-455b-8dce-0a852882a5a7
ms.openlocfilehash: a4f4c0e1af379d31c5b478472780d5c7de813bf6
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2019
ms.locfileid: "73121936"
---
# <a name="metadata-and-self-describing-components"></a><span data-ttu-id="ec51f-102">Метаданные и компоненты с самоописанием</span><span class="sxs-lookup"><span data-stu-id="ec51f-102">Metadata and Self-Describing Components</span></span>

<span data-ttu-id="ec51f-103">В прошлом программный компонент (EXE или DLL), написанный на одном языке, не мог просто так использовать программный компонент, написанный на другом языке.</span><span class="sxs-lookup"><span data-stu-id="ec51f-103">In the past, a software component (.exe or .dll) that was written in one language could not easily use a software component that was written in another language.</span></span> <span data-ttu-id="ec51f-104">Модель COM стала шагом вперед в решении этой проблемы.</span><span class="sxs-lookup"><span data-stu-id="ec51f-104">COM provided a step towards solving this problem.</span></span> <span data-ttu-id="ec51f-105">Платформа .NET Framework упрощает взаимодействие компонентов, позволяя компиляторам добавлять дополнительные описательные данные во все модули и сборки.</span><span class="sxs-lookup"><span data-stu-id="ec51f-105">The .NET Framework makes component interoperation even easier by allowing compilers to emit additional declarative information into all modules and assemblies.</span></span> <span data-ttu-id="ec51f-106">Эти данные, называемые метаданными, способствуют эффективному взаимодействию компонентов.</span><span class="sxs-lookup"><span data-stu-id="ec51f-106">This information, called metadata, helps components to interact seamlessly.</span></span>

 <span data-ttu-id="ec51f-107">Метаданные — это данные в двоичном формате с описанием программы, хранящиеся либо в переносимом исполняемом (PE) файле среды CLR, либо в памяти.</span><span class="sxs-lookup"><span data-stu-id="ec51f-107">Metadata is binary information describing your program that is stored either in a common language runtime portable executable (PE) file or in memory.</span></span> <span data-ttu-id="ec51f-108">Когда код компилируется в PE-файл, метаданные помещаются в одну часть файла, а код преобразуется в MSIL и помещается в другую часть файла.</span><span class="sxs-lookup"><span data-stu-id="ec51f-108">When you compile your code into a PE file, metadata is inserted into one portion of the file, and your code is converted to Microsoft intermediate language (MSIL) and inserted into another portion of the file.</span></span> <span data-ttu-id="ec51f-109">В метаданных описываются все типы и члены, определенные или используемые в модуле или сборке.</span><span class="sxs-lookup"><span data-stu-id="ec51f-109">Every type and member that is defined and referenced in a module or assembly is described within metadata.</span></span> <span data-ttu-id="ec51f-110">При исполнении кода среда выполнения загружает метаданные в память и обращается к ним для получения сведений о классах, членах, наследовании и других элементах кода.</span><span class="sxs-lookup"><span data-stu-id="ec51f-110">When code is executed, the runtime loads metadata into memory and references it to discover information about your code's classes, members, inheritance, and so on.</span></span>

 <span data-ttu-id="ec51f-111">В метаданных в независимом от языка виде описываются все типы и члены, определенные в коде.</span><span class="sxs-lookup"><span data-stu-id="ec51f-111">Metadata describes every type and member defined in your code in a language-neutral manner.</span></span> <span data-ttu-id="ec51f-112">В метаданных хранятся следующие сведения.</span><span class="sxs-lookup"><span data-stu-id="ec51f-112">Metadata stores the following information:</span></span>

- <span data-ttu-id="ec51f-113">Описание сборки.</span><span class="sxs-lookup"><span data-stu-id="ec51f-113">Description of the assembly.</span></span>

  - <span data-ttu-id="ec51f-114">Удостоверение (имя, версия, язык и региональные параметры, открытый ключ).</span><span class="sxs-lookup"><span data-stu-id="ec51f-114">Identity (name, version, culture, public key).</span></span>

  - <span data-ttu-id="ec51f-115">Экспортируемые типы.</span><span class="sxs-lookup"><span data-stu-id="ec51f-115">The types that are exported.</span></span>

  - <span data-ttu-id="ec51f-116">Другие сборки, от которых зависит данная сборка.</span><span class="sxs-lookup"><span data-stu-id="ec51f-116">Other assemblies that this assembly depends on.</span></span>

  - <span data-ttu-id="ec51f-117">Необходимые разрешения безопасности.</span><span class="sxs-lookup"><span data-stu-id="ec51f-117">Security permissions needed to run.</span></span>

- <span data-ttu-id="ec51f-118">Описание типов.</span><span class="sxs-lookup"><span data-stu-id="ec51f-118">Description of types.</span></span>

  - <span data-ttu-id="ec51f-119">Имя, видимость, базовый класс и реализованные интерфейсы.</span><span class="sxs-lookup"><span data-stu-id="ec51f-119">Name, visibility, base class, and interfaces implemented.</span></span>

  - <span data-ttu-id="ec51f-120">Члены (методы, поля, свойства, события, вложенные типы).</span><span class="sxs-lookup"><span data-stu-id="ec51f-120">Members (methods, fields, properties, events, nested types).</span></span>

- <span data-ttu-id="ec51f-121">Атрибуты.</span><span class="sxs-lookup"><span data-stu-id="ec51f-121">Attributes.</span></span>

  - <span data-ttu-id="ec51f-122">Дополнительные описательные элементы, изменяющие типы и члены.</span><span class="sxs-lookup"><span data-stu-id="ec51f-122">Additional descriptive elements that modify types and members.</span></span>

## <a name="benefits-of-metadata"></a><span data-ttu-id="ec51f-123">Преимущества метаданных</span><span class="sxs-lookup"><span data-stu-id="ec51f-123">Benefits of Metadata</span></span>

<span data-ttu-id="ec51f-124">Метаданные — это ключ к более простой модели программирования; они устраняют необходимость в файлах IDL, файлах заголовков или каких-либо внешних методах ссылки на компоненты.</span><span class="sxs-lookup"><span data-stu-id="ec51f-124">Metadata is the key to a simpler programming model, and eliminates the need for Interface Definition Language (IDL) files, header files, or any external method of component reference.</span></span> <span data-ttu-id="ec51f-125">Метаданные позволяют языкам платформы .NET Framework автоматически описывать себя не зависящим от языка образом незаметно для разработчика и пользователя.</span><span class="sxs-lookup"><span data-stu-id="ec51f-125">Metadata enables .NET Framework languages to describe themselves automatically in a language-neutral manner, unseen by both the developer and the user.</span></span> <span data-ttu-id="ec51f-126">К тому же метаданные имеют возможности для расширения за счет использование атрибутов.</span><span class="sxs-lookup"><span data-stu-id="ec51f-126">Additionally, metadata is extensible through the use of attributes.</span></span> <span data-ttu-id="ec51f-127">Метаданные обеспечивают также следующие преимущества.</span><span class="sxs-lookup"><span data-stu-id="ec51f-127">Metadata provides the following major benefits:</span></span>

- <span data-ttu-id="ec51f-128">Файлы с самоописанием.</span><span class="sxs-lookup"><span data-stu-id="ec51f-128">Self-describing files.</span></span>

  <span data-ttu-id="ec51f-129">Модули среды CLR и сборки обладают свойством самоописания.</span><span class="sxs-lookup"><span data-stu-id="ec51f-129">Common language runtime modules and assemblies are self-describing.</span></span> <span data-ttu-id="ec51f-130">Метаданные модуля содержат все необходимое для взаимодействия с другим модулем.</span><span class="sxs-lookup"><span data-stu-id="ec51f-130">A module's metadata contains everything needed to interact with another module.</span></span> <span data-ttu-id="ec51f-131">Метаданные автоматически предоставляют функциональные возможности IDL для модели СОМ, в связи с чем один и тот же файл может использоваться и для определения, и для реализации.</span><span class="sxs-lookup"><span data-stu-id="ec51f-131">Metadata automatically provides the functionality of IDL in COM, so you can use one file for both definition and implementation.</span></span> <span data-ttu-id="ec51f-132">Модули и сборки среды выполнения даже не требуют регистрации в операционной системе.</span><span class="sxs-lookup"><span data-stu-id="ec51f-132">Runtime modules and assemblies do not even require registration with the operating system.</span></span> <span data-ttu-id="ec51f-133">Благодаря этому описания, используемые средой выполнения, всегда отражают фактический код в скомпилированном файле, что повышает надежность приложения.</span><span class="sxs-lookup"><span data-stu-id="ec51f-133">As a result, the descriptions used by the runtime always reflect the actual code in your compiled file, which increases application reliability.</span></span>

- <span data-ttu-id="ec51f-134">Взаимодействие языков и упрощение разработки на основе компонентов</span><span class="sxs-lookup"><span data-stu-id="ec51f-134">Language interoperability and easier component-based design.</span></span>

  <span data-ttu-id="ec51f-135">Метаданные содержат полные сведения о скомпилированном коде, необходимые для наследования класса из PE-файла, написанного на другом языке.</span><span class="sxs-lookup"><span data-stu-id="ec51f-135">Metadata provides all the information required about compiled code for you to inherit a class from a PE file written in a different language.</span></span> <span data-ttu-id="ec51f-136">Можно создать экземпляр класса, написанного на любом другом управляемом языке (это может быть любой язык, обращающийся к среде CLR), не беспокоясь о явной упаковке или настройке кода взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="ec51f-136">You can create an instance of any class written in any managed language (any language that targets the common language runtime) without worrying about explicit marshaling or using custom interoperability code.</span></span>

- <span data-ttu-id="ec51f-137">Атрибуты.</span><span class="sxs-lookup"><span data-stu-id="ec51f-137">Attributes.</span></span>

  <span data-ttu-id="ec51f-138">Платформа .NET Framework позволяет объявлять особые виды метаданных, называемые атрибутами, в скомпилированном файле.</span><span class="sxs-lookup"><span data-stu-id="ec51f-138">The .NET Framework lets you declare specific kinds of metadata, called attributes, in your compiled file.</span></span> <span data-ttu-id="ec51f-139">Атрибуты находятся в .NET Framework и используются для более детального контроля над работой программы во время ее выполнения.</span><span class="sxs-lookup"><span data-stu-id="ec51f-139">Attributes can be found throughout the .NET Framework and are used to control in more detail how your program behaves at run time.</span></span> <span data-ttu-id="ec51f-140">Также с помощью атрибутов в файлы .NET Framework можно вносить пользовательские метаданные, определяемые самим пользователем.</span><span class="sxs-lookup"><span data-stu-id="ec51f-140">Additionally, you can emit your own custom metadata into .NET Framework files through user-defined custom attributes.</span></span> <span data-ttu-id="ec51f-141">Дополнительные сведения см. в разделе [Атрибуты](../../docs/standard/attributes/index.md).</span><span class="sxs-lookup"><span data-stu-id="ec51f-141">For more information, see [Attributes](../../docs/standard/attributes/index.md).</span></span>

## <a name="metadata-and-the-pe-file-structure"></a><span data-ttu-id="ec51f-142">Метаданные и структура PE-файла</span><span class="sxs-lookup"><span data-stu-id="ec51f-142">Metadata and the PE File Structure</span></span>

<span data-ttu-id="ec51f-143">Метаданные хранятся в одном разделе переносимого исполняемого (PE) файла .NET Framework, а код на промежуточном языке MSIL хранится в другом его разделе.</span><span class="sxs-lookup"><span data-stu-id="ec51f-143">Metadata is stored in one section of a .NET Framework portable executable (PE) file, while Microsoft intermediate language (MSIL) is stored in another section of the PE file.</span></span> <span data-ttu-id="ec51f-144">Раздел файла с метаданными содержит ряд табличных структур и структур данных кучи.</span><span class="sxs-lookup"><span data-stu-id="ec51f-144">The metadata portion of the file contains a series of table and heap data structures.</span></span> <span data-ttu-id="ec51f-145">Раздел MSIL содержит код MSIL и лексемы метаданных, ссылающиеся на раздел метаданных PE-файла.</span><span class="sxs-lookup"><span data-stu-id="ec51f-145">The MSIL portion contains MSIL and metadata tokens that reference the metadata portion of the PE file.</span></span> <span data-ttu-id="ec51f-146">При использовании таких средств, как [дизассемблер MSIL (Ildasm.exe)](../../docs/framework/tools/ildasm-exe-il-disassembler.md), для просмотра MSIL-кода можно обнаружить токены метаданных.</span><span class="sxs-lookup"><span data-stu-id="ec51f-146">You might encounter metadata tokens when you use tools such as the [MSIL Disassembler (Ildasm.exe)](../../docs/framework/tools/ildasm-exe-il-disassembler.md) to view your code's MSIL, for example.</span></span>

### <a name="metadata-tables-and-heaps"></a><span data-ttu-id="ec51f-147">Таблицы и кучи метаданных</span><span class="sxs-lookup"><span data-stu-id="ec51f-147">Metadata Tables and Heaps</span></span>

<span data-ttu-id="ec51f-148">Каждая таблица метаданных содержит сведения об элементах программы.</span><span class="sxs-lookup"><span data-stu-id="ec51f-148">Each metadata table holds information about the elements of your program.</span></span> <span data-ttu-id="ec51f-149">К примеру, в одной таблице метаданных описываются классы в коде, в другой — поля и так далее.</span><span class="sxs-lookup"><span data-stu-id="ec51f-149">For example, one metadata table describes the classes in your code, another table describes the fields, and so on.</span></span> <span data-ttu-id="ec51f-150">Если в коде используется десять классов, таблица классов будет содержать десять строк, по одной для каждого класса.</span><span class="sxs-lookup"><span data-stu-id="ec51f-150">If you have ten classes in your code, the class table will have tens rows, one for each class.</span></span> <span data-ttu-id="ec51f-151">Таблицы метаданных ссылаются на другие таблицы и кучи.</span><span class="sxs-lookup"><span data-stu-id="ec51f-151">Metadata tables reference other tables and heaps.</span></span> <span data-ttu-id="ec51f-152">Например, таблица метаданных для классов ссылается на таблицу методов.</span><span class="sxs-lookup"><span data-stu-id="ec51f-152">For example, the metadata table for classes references the table for methods.</span></span>

<span data-ttu-id="ec51f-153">В метаданных сведения также хранятся в четырех структурах кучи — в куче строк, больших двоичных объектов, пользовательских строк и идентификаторов GUID.</span><span class="sxs-lookup"><span data-stu-id="ec51f-153">Metadata also stores information in four heap structures: string, blob, user string, and GUID.</span></span> <span data-ttu-id="ec51f-154">Все строки, используемые для названия типов и членов, хранятся в куче строк.</span><span class="sxs-lookup"><span data-stu-id="ec51f-154">All the strings used to name types and members are stored in the string heap.</span></span> <span data-ttu-id="ec51f-155">Например, в таблице методов не хранится имя конкретного метода, но содержится ссылка на имя этого метода, находящееся в куче строк.</span><span class="sxs-lookup"><span data-stu-id="ec51f-155">For example, a method table does not directly store the name of a particular method, but points to the method's name stored in the string heap.</span></span>

### <a name="metadata-tokens"></a><span data-ttu-id="ec51f-156">Лексемы метаданных</span><span class="sxs-lookup"><span data-stu-id="ec51f-156">Metadata Tokens</span></span>

<span data-ttu-id="ec51f-157">Каждая строка любой таблицы метаданных уникально идентифицируется в разделе MSIL PE-файла с помощью лексемы метаданных.</span><span class="sxs-lookup"><span data-stu-id="ec51f-157">Each row of each metadata table is uniquely identified in the MSIL portion of the PE file by a metadata token.</span></span> <span data-ttu-id="ec51f-158">Лексемы метаданных по своей сути похожи на указатели, сохраненные в MSIL, которые ссылаются на определенную таблицу метаданных.</span><span class="sxs-lookup"><span data-stu-id="ec51f-158">Metadata tokens are conceptually similar to pointers, persisted in MSIL, that reference a particular metadata table.</span></span>

<span data-ttu-id="ec51f-159">Лексема метаданных является четырехбайтным числом.</span><span class="sxs-lookup"><span data-stu-id="ec51f-159">A metadata token is a four-byte number.</span></span> <span data-ttu-id="ec51f-160">Старший байт указывает на таблицу метаданных, к которой относится данная лексема (метод, тип и т. д.).</span><span class="sxs-lookup"><span data-stu-id="ec51f-160">The top byte denotes the metadata table to which a particular token refers (method, type, and so on).</span></span> <span data-ttu-id="ec51f-161">Остальные три байта определяют строку в таблице метаданных, которая соответствует описываемому программному элементу.</span><span class="sxs-lookup"><span data-stu-id="ec51f-161">The remaining three bytes specify the row in the metadata table that corresponds to the programming element being described.</span></span> <span data-ttu-id="ec51f-162">Если определить метод в языке C# и скомпилировать его в PE-файл, то в разделе MSIL PE-файла может появиться следующая лексема метаданных:</span><span class="sxs-lookup"><span data-stu-id="ec51f-162">If you define a method in C# and compile it into a PE file, the following metadata token might exist in the MSIL portion of the PE file:</span></span>

`0x06000004`

<span data-ttu-id="ec51f-163">Старший байт (`0x06`) указывает, что это лексема **MethodDef**.</span><span class="sxs-lookup"><span data-stu-id="ec51f-163">The top byte (`0x06`) indicates that this is a **MethodDef** token.</span></span> <span data-ttu-id="ec51f-164">Три младших байта (`000004`) отсылают среду CLR к четвертой строке таблицы **MethodDef** для получения сведений с описанием определения метода.</span><span class="sxs-lookup"><span data-stu-id="ec51f-164">The lower three bytes (`000004`) tells the common language runtime to look in the fourth row of the **MethodDef** table for the information that describes this method definition.</span></span>

### <a name="metadata-within-a-pe-file"></a><span data-ttu-id="ec51f-165">Метаданные внутри PE-файла</span><span class="sxs-lookup"><span data-stu-id="ec51f-165">Metadata within a PE File</span></span>

<span data-ttu-id="ec51f-166">После компиляции программы для среды CLR она преобразуется в PE-файл, состоящий из трех разделов.</span><span class="sxs-lookup"><span data-stu-id="ec51f-166">When a program is compiled for the common language runtime, it is converted to a PE file that consists of three parts.</span></span> <span data-ttu-id="ec51f-167">В следующей таблице описано содержание каждого раздела.</span><span class="sxs-lookup"><span data-stu-id="ec51f-167">The following table describes the contents of each part.</span></span>

|<span data-ttu-id="ec51f-168">Раздел PE-файла</span><span class="sxs-lookup"><span data-stu-id="ec51f-168">PE section</span></span>|<span data-ttu-id="ec51f-169">Содержание раздела PE-файла</span><span class="sxs-lookup"><span data-stu-id="ec51f-169">Contents of PE section</span></span>|
|----------------|----------------------------|
|<span data-ttu-id="ec51f-170">Заголовок PE</span><span class="sxs-lookup"><span data-stu-id="ec51f-170">PE header</span></span>|<span data-ttu-id="ec51f-171">Индекс основных разделов PE-файла и адрес точки входа.</span><span class="sxs-lookup"><span data-stu-id="ec51f-171">The index of the PE file's main sections and the address of the entry point.</span></span><br /><br /> <span data-ttu-id="ec51f-172">Среда выполнения использует эти сведения для определения файла как PE-файла и определения начала выполнения при загрузке программы в память.</span><span class="sxs-lookup"><span data-stu-id="ec51f-172">The runtime uses this information to identify the file as a PE file and to determine where execution starts when loading the program into memory.</span></span>|
|<span data-ttu-id="ec51f-173">Инструкции MSIL</span><span class="sxs-lookup"><span data-stu-id="ec51f-173">MSIL instructions</span></span>|<span data-ttu-id="ec51f-174">Инструкции промежуточного языка MSIL, реализующие пользовательский код.</span><span class="sxs-lookup"><span data-stu-id="ec51f-174">The Microsoft intermediate language instructions (MSIL) that make up your code.</span></span> <span data-ttu-id="ec51f-175">Многие инструкции MSIL сопровождаются лексемами метаданных.</span><span class="sxs-lookup"><span data-stu-id="ec51f-175">Many MSIL instructions are accompanied by metadata tokens.</span></span>|
|<span data-ttu-id="ec51f-176">Метаданные</span><span class="sxs-lookup"><span data-stu-id="ec51f-176">Metadata</span></span>|<span data-ttu-id="ec51f-177">Таблицы и кучи метаданных</span><span class="sxs-lookup"><span data-stu-id="ec51f-177">Metadata tables and heaps.</span></span> <span data-ttu-id="ec51f-178">Среда выполнения использует этот раздел для записи сведений о каждом типе и члене в коде.</span><span class="sxs-lookup"><span data-stu-id="ec51f-178">The runtime uses this section to record information about every type and member in your code.</span></span> <span data-ttu-id="ec51f-179">Этот раздел также содержит пользовательские атрибуты и сведения о безопасности.</span><span class="sxs-lookup"><span data-stu-id="ec51f-179">This section also includes custom attributes and security information.</span></span>|

## <a name="run-time-use-of-metadata"></a><span data-ttu-id="ec51f-180">Использование метаданных во время выполнения</span><span class="sxs-lookup"><span data-stu-id="ec51f-180">Run-Time Use of Metadata</span></span>

<span data-ttu-id="ec51f-181">Для лучшего понимания метаданных и их роли в среде CLR полезно написать простую программу и наглядно проиллюстрировать, как метаданные влияют на работу среды выполнения.</span><span class="sxs-lookup"><span data-stu-id="ec51f-181">To better understand metadata and its role in the common language runtime, it might be helpful to construct a simple program and illustrate how metadata affects its run-time life.</span></span> <span data-ttu-id="ec51f-182">В приведенном ниже примере показано два метода внутри класса `MyApp`.</span><span class="sxs-lookup"><span data-stu-id="ec51f-182">The following code example shows two methods inside a class called `MyApp`.</span></span> <span data-ttu-id="ec51f-183">Метод `Main` является точкой входа программы, а метод `Add` — просто возвращает сумму двух целочисленных аргументов.</span><span class="sxs-lookup"><span data-stu-id="ec51f-183">The `Main` method is the program entry point, while the `Add` method simply returns the sum of two integer arguments.</span></span>

```vb
Public Class MyApp
   Public Shared Sub Main()
      Dim ValueOne As Integer = 10
      Dim ValueTwo As Integer = 20
      Console.WriteLine("The Value is: {0}", Add(ValueOne, ValueTwo))
   End Sub

   Public Shared Function Add(One As Integer, Two As Integer) As Integer
      Return (One + Two)
   End Function
End Class
```

```csharp
using System;
public class MyApp
{
   public static int Main()
   {
      int ValueOne = 10;
      int ValueTwo = 20;
      Console.WriteLine("The Value is: {0}", Add(ValueOne, ValueTwo));
      return 0;
   }
   public static int Add(int One, int Two)
   {
      return (One + Two);
   }
}
```

<span data-ttu-id="ec51f-184">При запуске кода среда выполнения загружает модуль в память и обращается к метаданным за сведениями об этом классе.</span><span class="sxs-lookup"><span data-stu-id="ec51f-184">When the code runs, the runtime loads the module into memory and consults the metadata for this class.</span></span> <span data-ttu-id="ec51f-185">После загрузки среда выполнения проводит подробный анализ потока кода MSIL для метода, чтобы преобразовать его в инструкции машинного кода (выполнение которых осуществляется максимально быстро).</span><span class="sxs-lookup"><span data-stu-id="ec51f-185">Once loaded, the runtime performs extensive analysis of the method's Microsoft intermediate language (MSIL) stream to convert it to fast native machine instructions.</span></span> <span data-ttu-id="ec51f-186">В среде выполнения для преобразования инструкций MSIL в исходный машинный код используется JIT-компилятор. Преобразование выполняется по одному методу за раз по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="ec51f-186">The runtime uses a just-in-time (JIT) compiler to convert the MSIL instructions to native machine code one method at a time as needed.</span></span>

<span data-ttu-id="ec51f-187">В приведенном ниже примере показана часть кода MSIL, полученного для функции `Main` из предыдущего кода.</span><span class="sxs-lookup"><span data-stu-id="ec51f-187">The following example shows part of the MSIL produced from the previous code's `Main` function.</span></span> <span data-ttu-id="ec51f-188">Код MSIL и метаданные любого приложения .NET Framework можно просмотреть при помощи [дизассемблера MSIL (Ildasm.exe)](../../docs/framework/tools/ildasm-exe-il-disassembler.md).</span><span class="sxs-lookup"><span data-stu-id="ec51f-188">You can view the MSIL and metadata from any .NET Framework application using the [MSIL Disassembler (Ildasm.exe)](../../docs/framework/tools/ildasm-exe-il-disassembler.md).</span></span>

```console
.entrypoint
.maxstack  3
.locals ([0] int32 ValueOne,
         [1] int32 ValueTwo,
         [2] int32 V_2,
         [3] int32 V_3)
IL_0000:  ldc.i4.s   10
IL_0002:  stloc.0
IL_0003:  ldc.i4.s   20
IL_0005:  stloc.1
IL_0006:  ldstr      "The Value is: {0}"
IL_000b:  ldloc.0
IL_000c:  ldloc.1
IL_000d:  call int32 ConsoleApplication.MyApp::Add(int32,int32) /* 06000003 */
```

<span data-ttu-id="ec51f-189">JIT-компилятор считывает код MSIL для всего метода, проводит тщательный анализ и создает эффективный набор машинных инструкций для этого метода.</span><span class="sxs-lookup"><span data-stu-id="ec51f-189">The JIT compiler reads the MSIL for the whole method, analyzes it thoroughly, and generates efficient native instructions for the method.</span></span> <span data-ttu-id="ec51f-190">В строке `IL_000d` появляется лексема метаданных для метода `Add` (`/*` `06000003 */`) и среда выполнения использует эту лексему для обращения к третьей строке таблице **MethodDef**.</span><span class="sxs-lookup"><span data-stu-id="ec51f-190">At `IL_000d`, a metadata token for the `Add` method (`/*` `06000003 */`) is encountered and the runtime uses the token to consult the third row of the **MethodDef** table.</span></span>

<span data-ttu-id="ec51f-191">В приведенной ниже таблице показана часть таблицы **MethodDef**, на которую ссылается лексема метаданных, описывающая метод `Add`.</span><span class="sxs-lookup"><span data-stu-id="ec51f-191">The following table shows part of the **MethodDef** table referenced by the metadata token that describes the `Add` method.</span></span> <span data-ttu-id="ec51f-192">В сборке существуют и другие таблицы метаданных со своими уникальными значениями, но в данный момент рассматривается только эта таблица.</span><span class="sxs-lookup"><span data-stu-id="ec51f-192">While other metadata tables exist in this assembly and have their own unique values, only this table is discussed.</span></span>

|<span data-ttu-id="ec51f-193">Строка</span><span class="sxs-lookup"><span data-stu-id="ec51f-193">Row</span></span>|<span data-ttu-id="ec51f-194">Относительный виртуальный адрес (RVA)</span><span class="sxs-lookup"><span data-stu-id="ec51f-194">Relative Virtual Address (RVA)</span></span>|<span data-ttu-id="ec51f-195">Неявные флаги</span><span class="sxs-lookup"><span data-stu-id="ec51f-195">ImplFlags</span></span>|<span data-ttu-id="ec51f-196">Флаги</span><span class="sxs-lookup"><span data-stu-id="ec51f-196">Flags</span></span>|<span data-ttu-id="ec51f-197">name</span><span class="sxs-lookup"><span data-stu-id="ec51f-197">Name</span></span><br /><br /> <span data-ttu-id="ec51f-198">(Указывает на кучу строк.)</span><span class="sxs-lookup"><span data-stu-id="ec51f-198">(Points to string heap.)</span></span>|<span data-ttu-id="ec51f-199">Сигнатура (указывает на кучу больших двоичных объектов)</span><span class="sxs-lookup"><span data-stu-id="ec51f-199">Signature (Points to blob heap.)</span></span>|
|---------|--------------------------------------|---------------|-----------|-----------------------------------------|----------------------------------------|
|<span data-ttu-id="ec51f-200">1</span><span class="sxs-lookup"><span data-stu-id="ec51f-200">1</span></span>|<span data-ttu-id="ec51f-201">0x00002050</span><span class="sxs-lookup"><span data-stu-id="ec51f-201">0x00002050</span></span>|<span data-ttu-id="ec51f-202">IL</span><span class="sxs-lookup"><span data-stu-id="ec51f-202">IL</span></span><br /><br /> <span data-ttu-id="ec51f-203">Управляемый</span><span class="sxs-lookup"><span data-stu-id="ec51f-203">Managed</span></span>|<span data-ttu-id="ec51f-204">Public</span><span class="sxs-lookup"><span data-stu-id="ec51f-204">Public</span></span><br /><br /> <span data-ttu-id="ec51f-205">ReuseSlot</span><span class="sxs-lookup"><span data-stu-id="ec51f-205">ReuseSlot</span></span><br /><br /> <span data-ttu-id="ec51f-206">SpecialName</span><span class="sxs-lookup"><span data-stu-id="ec51f-206">SpecialName</span></span><br /><br /> <span data-ttu-id="ec51f-207">RTSpecialName</span><span class="sxs-lookup"><span data-stu-id="ec51f-207">RTSpecialName</span></span><br /><br /> <span data-ttu-id="ec51f-208">.ctor</span><span class="sxs-lookup"><span data-stu-id="ec51f-208">.ctor</span></span>|<span data-ttu-id="ec51f-209">.ctor (конструктор)</span><span class="sxs-lookup"><span data-stu-id="ec51f-209">.ctor (constructor)</span></span>||
|<span data-ttu-id="ec51f-210">2</span><span class="sxs-lookup"><span data-stu-id="ec51f-210">2</span></span>|<span data-ttu-id="ec51f-211">0x00002058</span><span class="sxs-lookup"><span data-stu-id="ec51f-211">0x00002058</span></span>|<span data-ttu-id="ec51f-212">IL</span><span class="sxs-lookup"><span data-stu-id="ec51f-212">IL</span></span><br /><br /> <span data-ttu-id="ec51f-213">Управляемый</span><span class="sxs-lookup"><span data-stu-id="ec51f-213">Managed</span></span>|<span data-ttu-id="ec51f-214">Public</span><span class="sxs-lookup"><span data-stu-id="ec51f-214">Public</span></span><br /><br /> <span data-ttu-id="ec51f-215">Статические</span><span class="sxs-lookup"><span data-stu-id="ec51f-215">Static</span></span><br /><br /> <span data-ttu-id="ec51f-216">ReuseSlot</span><span class="sxs-lookup"><span data-stu-id="ec51f-216">ReuseSlot</span></span>|<span data-ttu-id="ec51f-217">Главная ветвь</span><span class="sxs-lookup"><span data-stu-id="ec51f-217">Main</span></span>|<span data-ttu-id="ec51f-218">Строка</span><span class="sxs-lookup"><span data-stu-id="ec51f-218">String</span></span>|
|<span data-ttu-id="ec51f-219">3</span><span class="sxs-lookup"><span data-stu-id="ec51f-219">3</span></span>|<span data-ttu-id="ec51f-220">0x0000208c</span><span class="sxs-lookup"><span data-stu-id="ec51f-220">0x0000208c</span></span>|<span data-ttu-id="ec51f-221">IL</span><span class="sxs-lookup"><span data-stu-id="ec51f-221">IL</span></span><br /><br /> <span data-ttu-id="ec51f-222">Управляемый</span><span class="sxs-lookup"><span data-stu-id="ec51f-222">Managed</span></span>|<span data-ttu-id="ec51f-223">Public</span><span class="sxs-lookup"><span data-stu-id="ec51f-223">Public</span></span><br /><br /> <span data-ttu-id="ec51f-224">Статические</span><span class="sxs-lookup"><span data-stu-id="ec51f-224">Static</span></span><br /><br /> <span data-ttu-id="ec51f-225">ReuseSlot</span><span class="sxs-lookup"><span data-stu-id="ec51f-225">ReuseSlot</span></span>|<span data-ttu-id="ec51f-226">Add</span><span class="sxs-lookup"><span data-stu-id="ec51f-226">Add</span></span>|<span data-ttu-id="ec51f-227">int, int, int</span><span class="sxs-lookup"><span data-stu-id="ec51f-227">int, int, int</span></span>|

<span data-ttu-id="ec51f-228">В каждом столбце таблицы содержатся важные сведения о коде.</span><span class="sxs-lookup"><span data-stu-id="ec51f-228">Each column of the table contains important information about your code.</span></span> <span data-ttu-id="ec51f-229">Значения в столбце **RVA** позволяют среде выполнения вычислить начальный адрес в памяти кода MSIL, определяющего этот метод.</span><span class="sxs-lookup"><span data-stu-id="ec51f-229">The **RVA** column allows the runtime to calculate the starting memory address of the MSIL that defines this method.</span></span> <span data-ttu-id="ec51f-230">Столбцы **Неявные флаги** и **Флаги** содержат битовые маски, описывающие метод (например, является ли метод общим или закрытым).</span><span class="sxs-lookup"><span data-stu-id="ec51f-230">The **ImplFlags** and **Flags** columns contain bitmasks that describe the method (for example, whether the method is public or private).</span></span> <span data-ttu-id="ec51f-231">Столбец **Имя** содержит указатель имени метода из кучи строк.</span><span class="sxs-lookup"><span data-stu-id="ec51f-231">The **Name** column indexes the name of the method from the string heap.</span></span> <span data-ttu-id="ec51f-232">Столбец **Сигнатура** содержит указатель определения сигнатуры метода в куче больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="ec51f-232">The **Signature** column indexes the definition of the method's signature in the blob heap.</span></span>

<span data-ttu-id="ec51f-233">Среда выполнения вычисляет нужный относительный адрес из столбца **RVA** в третьей строке и возвращает этот адрес JIT-компилятору, который затем переходит к новому адресу.</span><span class="sxs-lookup"><span data-stu-id="ec51f-233">The runtime calculates the desired offset address from the **RVA** column in the third row and returns this address to the JIT compiler, which then proceeds to the new address.</span></span> <span data-ttu-id="ec51f-234">JIT-компилятор продолжает обрабатывать код MSIL по новому адресу до тех пор, пока не найдет другую лексему метаданных, и затем процесс повторяется заново.</span><span class="sxs-lookup"><span data-stu-id="ec51f-234">The JIT compiler continues to process MSIL at the new address until it encounters another metadata token and the process is repeated.</span></span>

<span data-ttu-id="ec51f-235">Благодаря метаданным среда выполнения имеет доступ к любым сведениям, необходимым для загрузки кода пользователя и его преобразования в инструкции машинного кода.</span><span class="sxs-lookup"><span data-stu-id="ec51f-235">Using metadata, the runtime has access to all the information it needs to load your code and process it into native machine instructions.</span></span> <span data-ttu-id="ec51f-236">Таким образом, метаданные позволяют использовать файлы с самоописанием и — совместно с системой общих типов — межъязыковое наследование.</span><span class="sxs-lookup"><span data-stu-id="ec51f-236">In this manner, metadata enables self-describing files and, together with the common type system, cross-language inheritance.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ec51f-237">См. также</span><span class="sxs-lookup"><span data-stu-id="ec51f-237">Related Topics</span></span>

|<span data-ttu-id="ec51f-238">Заголовок</span><span class="sxs-lookup"><span data-stu-id="ec51f-238">Title</span></span>|<span data-ttu-id="ec51f-239">ОПИСАНИЕ</span><span class="sxs-lookup"><span data-stu-id="ec51f-239">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="ec51f-240">Атрибуты</span><span class="sxs-lookup"><span data-stu-id="ec51f-240">Attributes</span></span>](../../docs/standard/attributes/index.md)|<span data-ttu-id="ec51f-241">Описание способов применения атрибутов, написания настраиваемых атрибутов и извлечения данных, хранящихся в атрибутах.</span><span class="sxs-lookup"><span data-stu-id="ec51f-241">Describes how to apply attributes, write custom attributes, and retrieve information that is stored in attributes.</span></span>|
