---
title: Создание исключений
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- exceptions, throwing
- explicitly throwing exceptions
- throwing exceptions, design guidelines
ms.assetid: 5388e02b-52f5-460e-a2b5-eeafe60eeebe
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 9fbbe84811e3fa096b9e13c459143311bb75a198
ms.sourcegitcommit: 64f4baed249341e5bf64d1385bf48e3f2e1a0211
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/07/2018
ms.locfileid: "44132646"
---
# <a name="exception-throwing"></a>Создание исключений
Исключения рекомендации, приведенные в этом разделе требуется хорошее определение значение сбой при выполнении. Сбой при выполнении происходит всякий раз, когда член не может это было целью (что член названия). Например если `OpenFile` метод не может возвращать дескриптор открытого файла вызывающей стороне, он будет считаться ошибкой выполнения.  
  
 Большинство разработчиков ознакомления с использования исключений для использования ошибок, например деление на 0 или пустых ссылок. В платформе исключения используются для всех ошибок, включая ошибки выполнения.  
  
 **X DO NOT** возвращенный код ошибки.  
  
 Исключениями являются основным средством отчетов об ошибках в платформах.  
  
 **✓ DO** отчета сбоев при выполнении путем вызова исключений.  
  
 **✓ CONSIDER** завершение процесса путем вызова `System.Environment.FailFast` (функции .NET Framework версии 2.0) вместо создания исключения при обнаружении в коде ситуации, когда он небезопасных для дальнейшего выполнения.  
  
 **X DO NOT** использовать исключения для обычного потока управления, если это возможно.  
  
 За исключением системных сбоев и операций с помощью потенциальных состояний гонки конструкторах framework следует разрабатывать API-интерфейсов, поэтому пользователи могут писать код, который не создает исключение. Например можно предоставить способ проверки предварительных условий до вызова члена, поэтому пользователи могут писать код, который не вызывает исключения.  
  
 Элемент, используемый для проверки предварительных условий для другого элемента часто называют тест-инженер, а член, который фактически выполняет работу, называется doer.  
  
 Бывают случаи, когда шаблон Tester-Doer может привести к снижению неприемлемо производительности. В таких случаях следует рассматривать так называемые шаблон Try-Parse (см. в разделе [исключения и производительность](../../../docs/standard/design-guidelines/exceptions-and-performance.md) Дополнительные сведения).  
  
 **✓ CONSIDER** создание исключений влияет на производительность. Тарифы throw выше 100 в секунду, скорее всего существенно повлиять на производительность большинства приложений.  
  
 **✓ DO** документ, все исключения, создаваемые публично вызываемыми членами из-за нарушения элемента контракта (а не системной ошибки) и обрабатывает их как часть вашего контракта.  
  
 Исключения, которые являются частью контракта не должны изменяться от одной версии к следующему (т. е. не изменяйте тип исключения и не нужно добавлять новые исключения).  
  
 **X DO NOT** имеет общих членов, которые можно либо throw или не на основе некоторых параметра.  
  
 **X DO NOT** иметь открытые члены, которые возвращают исключения в качестве возвращаемого значения или `out` параметра.  
  
 Возвращать исключения из общедоступных интерфейсов API, а не вызывает их противоречит преимущества отчетов об ошибках, основанной на исключении.  
  
 **✓ CONSIDER** с помощью методы построителя исключений.  
  
 Чаще всего же исключение из различных мест. Чтобы избежать Раздувание кода, используйте вспомогательные методы, создающие исключения и инициализировать их свойства.  
  
 Кроме того, члены, вызывающие исключения не получаете как встроенный. Перемещение инструкцию throw в построитель может разрешить член для встраивания.  
  
 **X DO NOT** вызывать исключения из блоков фильтрации исключений.  
  
 Когда фильтр исключений создает исключение, исключение перехватывается в среде CLR и фильтр возвращает значение false. Это поведение не отличается от фильтра, выполнение и возвращает значение false, явным образом, поэтому очень трудно отлаживать.  
  
 **X AVOID** явное создание исключений из блоков finally. Неявно возникающих исключениях, полученным в результате вызова методов, которые выдают являются допустимыми.  
  
 *Фрагменты: © Корпорация Майкрософт (Microsoft Corporation), 2005, 2009. Все права защищены.*  
  
 *Перепечатано с разрешения Pearson Education, Inc. из книги [Инфраструктура программных проектов. Соглашения, идиомы и шаблоны для многократно используемых библиотек .NET (2-е издание)](https://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619), авторы: Кржиштоф Цвалина (Krzysztof Cwalina) и Брэд Абрамс (Brad Abrams). Книга опубликована 22 октября 2008 г. издательством Addison-Wesley Professional в рамках серии, посвященной разработке для Microsoft Windows.*  
  
## <a name="see-also"></a>См. также

- [Рекомендации по проектированию на основе Framework](../../../docs/standard/design-guidelines/index.md)  
- [Правила разработки исключений](../../../docs/standard/design-guidelines/exceptions.md)
