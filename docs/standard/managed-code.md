---
title: Что такое "управляемый код"?
description: Сведения о том, что управляемый код — это код, выполнение которого управляется средой выполнения CLR.
ms.date: 06/20/2016
ms.technology: dotnet-standard
ms.assetid: 20bb7ea8-192e-4a96-8ef3-e10e1950fd3d
ms.openlocfilehash: 9133859bd9c999e076effcf0d4d631c59db02f33
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/15/2020
ms.locfileid: "61910121"
---
# <a name="what-is-managed-code"></a>Что такое управляемый код

При работе с платформой .NET Framework вы будете часто сталкиваться с термином "управляемый код". В этом документе приводится пояснение этого термина и дополнительные сведения о нем.

В первом приближении управляемым кодом называется код, выполнение которого управляется средой выполнения. В этом случае соответствующая среда выполнения называется **общеязыковой средой выполнения** или средой CLR, независимо от реализации ([Mono](https://www.mono-project.com/), .NET Framework или .NET Core). Среда CLR отвечает за использование управляемого кода, его компиляцию в машинный код и последующее выполнение. Кроме того, среда выполнения предоставляет несколько важных служб, таких как автоматическое управление памятью, границы безопасности, безопасность типа и т. д.

Сравните это с запуском программы C/C++, которая также называется "неуправляемым кодом". В мире неуправляемого кода практически за все отвечает программист. Сама программа представляет собой двоичный файл, который операционная система (ОС) загружает в память и запускает. За все остальное — от управления памятью до различных аспектов безопасности — отвечает программист.

Управляемый код пишется в одном из языков высокого уровня, которые могут выполняться в .NET, например C#, Visual Basic, F# и других. При компиляции кода, написанного на этих языках, с помощью соответствующего компилятора вы получаете не машинный код. Вы получаете код **промежуточного языка**, который затем компилируется и запускается средой выполнения. Язык C++ является исключением из этого правила, так как он позволяет создавать машинные неуправляемые двоичные файлы, которые запускаются в Windows.

## <a name="intermediate-language--execution"></a>Промежуточный язык и выполнение

Что такое "промежуточный язык" (сокращенно IL)? Это результат компиляции кода, написанного на языках высокого уровня .NET. После компиляции кода, написанного на одном из этих языков, вы получаете двоичный файл на базе IL. Важно отметить, что IL не зависит от языка, выполняемого поверх среды выполнения. Для него даже есть отдельная спецификация, с которой при желании можно ознакомиться.

После создания IL из кода высокого уровня вы, скорее всего, захотите запустить его. В этот момент среда CLR берет управление на себя и запускает процесс **JIT**-компиляции, используя **JIT** для преобразования кода из промежуточного языка в машинный код, который может выполняться на ЦП. Таким образом, среде CLR точно известно, что делает код, поэтому она может эффективно _управлять_ им.

Промежуточный язык иногда называют языком CIL или MSIL.

## <a name="unmanaged-code-interoperability"></a>Взаимодействие неуправляемого кода

Конечно же, среда CLR позволяет пересекать границы между управляемым и неуправляемым кодом, и даже в [библиотеках базовых классов](framework-libraries.md) объем подобного кода довольно велик. Это называется **взаимодействием** или **межпрограммным взаимодействием**. Все это позволяет вам, например, заключить неуправляемую библиотеку в оболочку и вызвать ее. Но следует отметить, что после того как код пересекает границы среды выполнения, управление выполнением снова осуществляется в виде неуправляемого кода с соответствующими ограничениями.

Аналогично, C# — это язык, позволяющий использовать неуправляемые конструкции, такие как указатели, прямо в коде с помощью так называемого **небезопасного контекста**, указывающего часть кода, для которой выполнение не управляется средой CLR.

## <a name="more-resources"></a>Дополнительные ресурсы

* [Общие сведения о платформе .NET Framework](../framework/get-started/overview.md)
* [Небезопасный код и указатели](../../docs/csharp/programming-guide/unsafe-code-pointers/index.md)
* [Взаимодействие на уровне машинного кода](./native-interop/index.md)
