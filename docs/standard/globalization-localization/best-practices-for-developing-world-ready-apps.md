---
title: Рекомендации по разработке международных приложений
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- global applications, best practices
- world-ready applications, best practices
- globalization [.NET Framework], best practices
- international applications [.NET Framework], best practices
ms.assetid: f08169c7-aad8-4ec3-9a21-9ebd3b89986c
ms.openlocfilehash: a2cd1039f95a763002922fc2fa24eff77838de80
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2019
ms.locfileid: "73141301"
---
# <a name="best-practices-for-developing-world-ready-applications"></a><span data-ttu-id="c2d63-102">Рекомендации по разработке международных приложений</span><span class="sxs-lookup"><span data-stu-id="c2d63-102">Best practices for developing world-ready applications</span></span>

<span data-ttu-id="c2d63-103">В этом разделе описаны рекомендации по разработке международных приложений.</span><span class="sxs-lookup"><span data-stu-id="c2d63-103">This section describes the best practices to follow when developing world-ready applications.</span></span>

## <a name="globalization-best-practices"></a><span data-ttu-id="c2d63-104">Рекомендации по глобализации</span><span class="sxs-lookup"><span data-stu-id="c2d63-104">Globalization best practices</span></span>

1. <span data-ttu-id="c2d63-105">Используйте Юникод в качестве внутреннего стандарта приложения.</span><span class="sxs-lookup"><span data-stu-id="c2d63-105">Make your application Unicode internally.</span></span>

2. <span data-ttu-id="c2d63-106">Для управления данными и их форматирования необходимо использовать классы, учитывающие язык и регион, которые представлены в пространстве имен <xref:System.Globalization>.</span><span class="sxs-lookup"><span data-stu-id="c2d63-106">Use the culture-aware classes provided by the <xref:System.Globalization> namespace to manipulate and format data.</span></span>

    - <span data-ttu-id="c2d63-107">Для сортировки используйте классы <xref:System.Globalization.SortKey> и <xref:System.Globalization.CompareInfo>.</span><span class="sxs-lookup"><span data-stu-id="c2d63-107">For sorting, use the <xref:System.Globalization.SortKey> class and the <xref:System.Globalization.CompareInfo> class.</span></span>

    - <span data-ttu-id="c2d63-108">Для сравнения строк используйте класс <xref:System.Globalization.CompareInfo>.</span><span class="sxs-lookup"><span data-stu-id="c2d63-108">For string comparisons, use the <xref:System.Globalization.CompareInfo> class.</span></span>

    - <span data-ttu-id="c2d63-109">Для форматирования даты и времени используйте класс <xref:System.Globalization.DateTimeFormatInfo>.</span><span class="sxs-lookup"><span data-stu-id="c2d63-109">For date and time formatting, use the <xref:System.Globalization.DateTimeFormatInfo> class.</span></span>

    - <span data-ttu-id="c2d63-110">Для форматирования чисел используйте класс <xref:System.Globalization.NumberFormatInfo>.</span><span class="sxs-lookup"><span data-stu-id="c2d63-110">For numeric formatting, use the <xref:System.Globalization.NumberFormatInfo> class.</span></span>

    - <span data-ttu-id="c2d63-111">Для григорианского и иных календарей следует использовать класс <xref:System.Globalization.Calendar> или одну из конкретных реализаций календаря.</span><span class="sxs-lookup"><span data-stu-id="c2d63-111">For Gregorian and non-Gregorian calendars, use the <xref:System.Globalization.Calendar> class or one of the specific calendar implementations.</span></span>

3. <span data-ttu-id="c2d63-112">В соответствующих ситуациях необходимо использовать настройки языка и региональных параметров, предоставленные классом <xref:System.Globalization.CultureInfo?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c2d63-112">Use the culture property settings provided by the <xref:System.Globalization.CultureInfo?displayProperty=nameWithType> class in the appropriate situations.</span></span> <span data-ttu-id="c2d63-113">Для задач форматирования, например форматирования даты и времени или чисел, необходимо использовать свойство <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c2d63-113">Use the <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> property for formatting tasks, such as date and time or numeric formatting.</span></span> <span data-ttu-id="c2d63-114">Для извлечения ресурсов используйте свойство <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c2d63-114">Use the <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType> property to retrieve resources.</span></span> <span data-ttu-id="c2d63-115">Обратите внимание, что свойства `CurrentCulture` и `CurrentUICulture` можно задавать на уровне отдельных потоков.</span><span class="sxs-lookup"><span data-stu-id="c2d63-115">Note that the `CurrentCulture` and `CurrentUICulture` properties can be set per thread.</span></span>

4. <span data-ttu-id="c2d63-116">В приложении необходимо обеспечить возможность считывания и записи данных в различных кодировках. Для этого используются классы кодировок из пространства имен <xref:System.Text>.</span><span class="sxs-lookup"><span data-stu-id="c2d63-116">Enable your application to read and write data to and from a variety of encodings by using the encoding classes in the <xref:System.Text> namespace.</span></span> <span data-ttu-id="c2d63-117">Не рекомендуется использовать данные в формате ASCII.</span><span class="sxs-lookup"><span data-stu-id="c2d63-117">Do not assume ASCII data.</span></span> <span data-ttu-id="c2d63-118">Следует обеспечить ввод пользователем текста с использованием символов в международном формате.</span><span class="sxs-lookup"><span data-stu-id="c2d63-118">Assume that international characters will be supplied anywhere a user can enter text.</span></span> <span data-ttu-id="c2d63-119">Например, приложение должно поддерживать использование символов в международном формате в именах серверов, каталогов, файлов, пользователей и в URL-адресах.</span><span class="sxs-lookup"><span data-stu-id="c2d63-119">For example, the application should accept international characters in server names, directories, file names, user names, and URLs.</span></span>

5. <span data-ttu-id="c2d63-120">При использовании класса <xref:System.Text.UTF8Encoding> в целях безопасности рекомендуется включить возможность обнаружения ошибок, предоставляемую этим классом.</span><span class="sxs-lookup"><span data-stu-id="c2d63-120">When using the <xref:System.Text.UTF8Encoding> class, for security reasons, use the error detection feature offered by this class.</span></span> <span data-ttu-id="c2d63-121">Чтобы включить возможность обнаружения ошибок, создайте экземпляр класса с использованием конструктора, принимающего параметр `throwOnInvalidBytes`, и установите для этого параметра значение `true`.</span><span class="sxs-lookup"><span data-stu-id="c2d63-121">To turn on the error detection feature, create an instance of the class using the constructor that takes a `throwOnInvalidBytes` parameter and set the value of this parameter to `true`.</span></span>

6. <span data-ttu-id="c2d63-122">При возможности рекомендуется обрабатывать строки целиком, а не в виде последовательностей отдельных символов.</span><span class="sxs-lookup"><span data-stu-id="c2d63-122">Whenever possible, handle strings as entire strings instead of as a series of individual characters.</span></span> <span data-ttu-id="c2d63-123">Это особенно важно при сортировке или поиске подстрок.</span><span class="sxs-lookup"><span data-stu-id="c2d63-123">This is especially important when sorting or searching for substrings.</span></span> <span data-ttu-id="c2d63-124">Это поможет избежать ошибок, связанных с обработкой несамостоятельных знаков.</span><span class="sxs-lookup"><span data-stu-id="c2d63-124">This will prevent problems associated with parsing combined characters.</span></span> <span data-ttu-id="c2d63-125">Вы можете также работать с единицами текста, а не отдельными символами, с помощью класса <xref:System.Globalization.StringInfo?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c2d63-125">You can also work with units of text rather than single characters by using the <xref:System.Globalization.StringInfo?displayProperty=nameWithType> class.</span></span>

7. <span data-ttu-id="c2d63-126">Для отображения текста следует использовать классы из пространства имен <xref:System.Drawing>.</span><span class="sxs-lookup"><span data-stu-id="c2d63-126">Display text using the classes provided by the <xref:System.Drawing> namespace.</span></span>

8. <span data-ttu-id="c2d63-127">Для совместимости с разными операционными системами не следует допускать переопределения <xref:System.Globalization.CultureInfo> пользователем.</span><span class="sxs-lookup"><span data-stu-id="c2d63-127">For consistency across operating systems, do not allow user settings to override <xref:System.Globalization.CultureInfo>.</span></span> <span data-ttu-id="c2d63-128">Воспользуйтесь конструктором `CultureInfo`, который принимает параметр `useUserOverride`, и задайте для этого параметра значение `false`.</span><span class="sxs-lookup"><span data-stu-id="c2d63-128">Use the `CultureInfo` constructor that accepts a `useUserOverride` parameter and set it to `false`.</span></span>

9. <span data-ttu-id="c2d63-129">Протестируйте функциональность приложения в версиях операционных систем на других языках с использованием данных на других языках.</span><span class="sxs-lookup"><span data-stu-id="c2d63-129">Test your application functionality on international operating system versions, using international data.</span></span>

10. <span data-ttu-id="c2d63-130">Если решение системы безопасности принимается на основе результатов операций сравнения строк или изменения регистра, используйте операции без учета языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="c2d63-130">If a security decision is based on the result of a string comparison or case change operation, use a culture-insensitive string operation.</span></span> <span data-ttu-id="c2d63-131">Это гарантирует, что значение свойства `CultureInfo.CurrentCulture` не повлияет на результат.</span><span class="sxs-lookup"><span data-stu-id="c2d63-131">This practice ensures that the result is not affected by the value of `CultureInfo.CurrentCulture`.</span></span> <span data-ttu-id="c2d63-132">Пример строковых операций с учетом языка и региональных параметров, дающих противоречивые результаты, см. в разделе ["Сравнение строк с использованием текущего языка и региональных параметров"](../../../docs/standard/base-types/best-practices-strings.md#string-comparisons-that-use-the-current-culture) в списке [рекомендаций по использованию строк](../../../docs/standard/base-types/best-practices-strings.md).</span><span class="sxs-lookup"><span data-stu-id="c2d63-132">See the ["String Comparisons that Use the Current Culture"](../../../docs/standard/base-types/best-practices-strings.md#string-comparisons-that-use-the-current-culture) section of [Best Practices for Using Strings](../../../docs/standard/base-types/best-practices-strings.md) for an example that demonstrates how culture-sensitive string comparisons can produce inconsistent results.</span></span>

## <a name="localization-best-practices"></a><span data-ttu-id="c2d63-133">Рекомендации по локализации</span><span class="sxs-lookup"><span data-stu-id="c2d63-133">Localization best practices</span></span>

1. <span data-ttu-id="c2d63-134">Следует перемещать все локализуемые ресурсы в отдельные библиотеки DLL, содержащие только ресурсы.</span><span class="sxs-lookup"><span data-stu-id="c2d63-134">Move all localizable resources to separate resource-only DLLs.</span></span> <span data-ttu-id="c2d63-135">Локализуемые ресурсы включают в себя элементы пользовательского интерфейса, например строки, сообщения об ошибках, диалоговые окна, элементы меню и внедренные объектные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="c2d63-135">Localizable resources include user interface elements, such as strings, error messages, dialog boxes, menus, and embedded object resources.</span></span>

2. <span data-ttu-id="c2d63-136">Не следует жестко кодировать строки или ресурсы пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="c2d63-136">Do not hardcode strings or user interface resources.</span></span>

3. <span data-ttu-id="c2d63-137">Не следует помещать нелокализуемые ресурсы в библиотеки DLL, содержащие только ресурсы.</span><span class="sxs-lookup"><span data-stu-id="c2d63-137">Do not put nonlocalizable resources into the resource-only DLLs.</span></span> <span data-ttu-id="c2d63-138">Это может вызвать сложности при переводе.</span><span class="sxs-lookup"><span data-stu-id="c2d63-138">This causes confusion for translators.</span></span>

4. <span data-ttu-id="c2d63-139">Не следует использовать составные строки, полученные во время выполнения программы при помощи соединения фраз.</span><span class="sxs-lookup"><span data-stu-id="c2d63-139">Do not use composite strings that are built at run time from concatenated phrases.</span></span> <span data-ttu-id="c2d63-140">Составные строки трудно локализовать, потому что они часто используют грамматический порядок английского языка, который не может быть применен для всех языков.</span><span class="sxs-lookup"><span data-stu-id="c2d63-140">Composite strings are difficult to localize because they often assume an English grammatical order that does not apply to all languages.</span></span>

5. <span data-ttu-id="c2d63-141">Следует избегать неоднозначных конструкций, например "Empty Folder", в которых строки могут быть переведены различным образом в зависимости от грамматической роли их составляющих.</span><span class="sxs-lookup"><span data-stu-id="c2d63-141">Avoid ambiguous constructs such as "Empty Folder" where the strings can be translated differently depending on the grammatical roles of the string components.</span></span> <span data-ttu-id="c2d63-142">Например, слово "empty" может быть как глаголом "очистить", так и прилагательным "пустая", что может привести к различным переводам такой фразы на такие языки, как французский или итальянский.</span><span class="sxs-lookup"><span data-stu-id="c2d63-142">For example, "empty" can be either a verb or an adjective, which can lead to different translations in languages such as Italian or French.</span></span>

6. <span data-ttu-id="c2d63-143">Не следует использовать в приложении изображения и значки, содержащие текст.</span><span class="sxs-lookup"><span data-stu-id="c2d63-143">Avoid using images and icons that contain text in your application.</span></span> <span data-ttu-id="c2d63-144">При их локализации могут возникнуть трудности.</span><span class="sxs-lookup"><span data-stu-id="c2d63-144">They are expensive to localize.</span></span>

7. <span data-ttu-id="c2d63-145">Следует выделять достаточно памяти на случай увеличения длины строк в интерфейсе пользователя.</span><span class="sxs-lookup"><span data-stu-id="c2d63-145">Allow plenty of room for the length of strings to expand in the user interface.</span></span> <span data-ttu-id="c2d63-146">В некоторых языках длина фраз может увеличиться на 50–75 процентов по сравнению с другими языками.</span><span class="sxs-lookup"><span data-stu-id="c2d63-146">In some languages, phrases can require 50-75 percent more space than they need in other languages.</span></span>

8. <span data-ttu-id="c2d63-147">Для извлечения ресурсов для конкретного языка и региона следует использовать класс <xref:System.Resources.ResourceManager?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c2d63-147">Use the <xref:System.Resources.ResourceManager?displayProperty=nameWithType> class to retrieve resources based on culture.</span></span>

9. <span data-ttu-id="c2d63-148">Используйте [Visual Studio](https://visualstudio.microsoft.com/vs/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link) для создания диалоговых окон Windows Forms, чтобы эти диалоговые окна можно было локализовать с помощью [редактора ресурсов форм Windows (Winres.exe)](../../../docs/framework/tools/winres-exe-windows-forms-resource-editor.md).</span><span class="sxs-lookup"><span data-stu-id="c2d63-148">Use [Visual Studio](https://visualstudio.microsoft.com/vs/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link) to create Windows Forms dialog boxes so they can be localized using the [Windows Forms Resource Editor (Winres.exe)](../../../docs/framework/tools/winres-exe-windows-forms-resource-editor.md).</span></span> <span data-ttu-id="c2d63-149">Не следует кодировать диалоговые окна форм Windows Forms вручную.</span><span class="sxs-lookup"><span data-stu-id="c2d63-149">Do not code Windows Forms dialog boxes by hand.</span></span>

10. <span data-ttu-id="c2d63-150">Следует систематизировать создаваемое приложение с учетом возможности профессиональной локализации (перевода).</span><span class="sxs-lookup"><span data-stu-id="c2d63-150">Arrange for professional localization (translation).</span></span>

11. <span data-ttu-id="c2d63-151">См. дополнительные сведения о создания и локализации [ресурсов в приложениях](../../../docs/framework/resources/index.md).</span><span class="sxs-lookup"><span data-stu-id="c2d63-151">For a complete description of creating and localizing resources, see [Resources in Applications](../../../docs/framework/resources/index.md).</span></span>

## <a name="globalization-best-practices-for-aspnet-applications"></a><span data-ttu-id="c2d63-152">Рекомендации по глобализации приложений ASP.NET</span><span class="sxs-lookup"><span data-stu-id="c2d63-152">Globalization best practices for ASP.NET applications</span></span>

1. <span data-ttu-id="c2d63-153">В приложении следует явно задать свойства <xref:System.Globalization.CultureInfo.CurrentUICulture%2A> и <xref:System.Globalization.CultureInfo.CurrentCulture%2A>.</span><span class="sxs-lookup"><span data-stu-id="c2d63-153">Explicitly set the <xref:System.Globalization.CultureInfo.CurrentUICulture%2A> and <xref:System.Globalization.CultureInfo.CurrentCulture%2A> properties in your application.</span></span> <span data-ttu-id="c2d63-154">Не следует полагаться на настройки по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="c2d63-154">Do not rely on defaults.</span></span>

2. <span data-ttu-id="c2d63-155">Обратите внимание, что приложения ASP.NET являются управляемыми приложениями и поэтому могут использовать те же классы, что и другие управляемые приложения для извлечения и отображения данных, а также работы с ними в зависимости от языка и региона.</span><span class="sxs-lookup"><span data-stu-id="c2d63-155">Note that ASP.NET applications are managed applications and therefore can use the same classes as other managed applications for retrieving, displaying, and manipulating information based on culture.</span></span>

3. <span data-ttu-id="c2d63-156">Следует помнить, что в ASP.NET можно определить следующие три типа кодировок:</span><span class="sxs-lookup"><span data-stu-id="c2d63-156">Be aware that you can specify the following three types of encodings in ASP.NET:</span></span>

    - <span data-ttu-id="c2d63-157">requestEncoding определяет кодировку данных, получаемых от браузера клиента;</span><span class="sxs-lookup"><span data-stu-id="c2d63-157">requestEncoding specifies the encoding received from the client's browser.</span></span>

    - <span data-ttu-id="c2d63-158">responseEncoding определяет кодировку данных, передаваемых в браузер клиента.</span><span class="sxs-lookup"><span data-stu-id="c2d63-158">responseEncoding specifies the encoding to send to the client browser.</span></span> <span data-ttu-id="c2d63-159">В большинстве случаев эта кодировка должна соответствовать кодировке requestEncoding;</span><span class="sxs-lookup"><span data-stu-id="c2d63-159">In most situations, this encoding should be the same as that specified for requestEncoding.</span></span>

    - <span data-ttu-id="c2d63-160">fileEncoding определяет кодировку по умолчанию, используемую для анализа файлов .aspx, .asmx и .asax.</span><span class="sxs-lookup"><span data-stu-id="c2d63-160">fileEncoding specifies the default encoding for .aspx, .asmx, and .asax file parsing.</span></span>

4. <span data-ttu-id="c2d63-161">Следует задать значения для атрибутов requestEncoding, responseEncoding, fileEncoding, culture и uiCulture в следующих трех местах в приложении ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="c2d63-161">Specify the values for the requestEncoding, responseEncoding, fileEncoding, culture, and uiCulture attributes in the following three places in an ASP.NET application:</span></span>

    - <span data-ttu-id="c2d63-162">В разделе глобализации файла Web.config.</span><span class="sxs-lookup"><span data-stu-id="c2d63-162">In the globalization section of a Web.config file.</span></span> <span data-ttu-id="c2d63-163">Это внешний файл приложения ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="c2d63-163">This file is external to the ASP.NET application.</span></span> <span data-ttu-id="c2d63-164">Дополнительные сведения см. в описании [\<элемента <globalization>](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/hy4kkhe0(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="c2d63-164">For more information, see [\<globalization> Element](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/hy4kkhe0(v=vs.100)).</span></span>

    - <span data-ttu-id="c2d63-165">В директиве страницы.</span><span class="sxs-lookup"><span data-stu-id="c2d63-165">In a page directive.</span></span> <span data-ttu-id="c2d63-166">Обратите внимание, что когда приложение находится на странице, файл уже считан.</span><span class="sxs-lookup"><span data-stu-id="c2d63-166">Note that, when an application is in a page, the file has already been read.</span></span> <span data-ttu-id="c2d63-167">Следовательно, уже поздно задавать атрибуты fileEncoding и requestEncoding.</span><span class="sxs-lookup"><span data-stu-id="c2d63-167">Therefore, it is too late to specify fileEncoding and requestEncoding.</span></span> <span data-ttu-id="c2d63-168">В директиве страницы могут задаваться только атрибуты uiCulture, Culture и responseEncoding.</span><span class="sxs-lookup"><span data-stu-id="c2d63-168">Only uiCulture, Culture, and responseEncoding can be specified in a page directive.</span></span>

    - <span data-ttu-id="c2d63-169">Программно в коде приложения.</span><span class="sxs-lookup"><span data-stu-id="c2d63-169">Programmatically in application code.</span></span> <span data-ttu-id="c2d63-170">Эта настройка может изменяться для различных запросов.</span><span class="sxs-lookup"><span data-stu-id="c2d63-170">This setting can vary per request.</span></span> <span data-ttu-id="c2d63-171">Как и в случае с директивой страницы, при передаче управления коду приложения слишком поздно задавать атрибуты fileEncoding и requestEncoding.</span><span class="sxs-lookup"><span data-stu-id="c2d63-171">As with a page directive, by the time the application's code is reached it is too late to specify fileEncoding and requestEncoding.</span></span> <span data-ttu-id="c2d63-172">В коде приложения могут задаваться только атрибуты uiCulture, Culture и responseEncoding.</span><span class="sxs-lookup"><span data-stu-id="c2d63-172">Only uiCulture, Culture, and responseEncoding can be specified in application code.</span></span>

5. <span data-ttu-id="c2d63-173">Обратите внимание, что в качестве значения uiCulture может быть задан язык, установленный в браузере.</span><span class="sxs-lookup"><span data-stu-id="c2d63-173">Note that the uiCulture value can be set to the browser accept language.</span></span>

## <a name="see-also"></a><span data-ttu-id="c2d63-174">См. также</span><span class="sxs-lookup"><span data-stu-id="c2d63-174">See also</span></span>

- [<span data-ttu-id="c2d63-175">Глобализация и локализация</span><span class="sxs-lookup"><span data-stu-id="c2d63-175">Globalization and Localization</span></span>](../../../docs/standard/globalization-localization/index.md)
- [<span data-ttu-id="c2d63-176">Ресурсы в приложениях для настольных систем</span><span class="sxs-lookup"><span data-stu-id="c2d63-176">Resources in Desktop Apps</span></span>](../../../docs/framework/resources/index.md)
