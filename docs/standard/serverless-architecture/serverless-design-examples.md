---
title: Примеры бессерверных конструирования - Бессерверных приложений
description: Понять разнообразные сценарии, поддерживаемые бессерверную архитектуру, от планирования и обработки событий триггеры файлов и процесса потока.
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: cf46c601ac6aa401c7c37bd64c1f8981589ebd2e
ms.sourcegitcommit: ccd8c36b0d74d99291d41aceb14cf98d74dc9d2b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2018
ms.locfileid: "53146716"
---
# <a name="serverless-design-examples"></a><span data-ttu-id="e6808-103">Примеры бессерверных конструирования</span><span class="sxs-lookup"><span data-stu-id="e6808-103">Serverless design examples</span></span>

<span data-ttu-id="e6808-104">Много шаблонов проектирования, которые существуют для бессерверной.</span><span class="sxs-lookup"><span data-stu-id="e6808-104">There are many design patterns that exist for serverless.</span></span> <span data-ttu-id="e6808-105">Этот раздел содержит некоторые распространенные сценарии, использующие без сервера.</span><span class="sxs-lookup"><span data-stu-id="e6808-105">This section captures some common scenarios that use serverless.</span></span> <span data-ttu-id="e6808-106">Что все примеры имеют общие представляет собой фундаментальные сочетание событий триггера и бизнес-логики.</span><span class="sxs-lookup"><span data-stu-id="e6808-106">What all of the examples have in common is the fundamental combination of an event trigger and business logic.</span></span>

## <a name="scheduling"></a><span data-ttu-id="e6808-107">Планирование</span><span class="sxs-lookup"><span data-stu-id="e6808-107">Scheduling</span></span>

<span data-ttu-id="e6808-108">Планирование заданий все еще общую функцию.</span><span class="sxs-lookup"><span data-stu-id="e6808-108">Scheduling tasks is a common function.</span></span> <span data-ttu-id="e6808-109">На следующей схеме показана прежних версий базы данных, которые не соответствующие тесты на целостность.</span><span class="sxs-lookup"><span data-stu-id="e6808-109">The following diagram shows a legacy database that doesn't have appropriate integrity checks.</span></span> <span data-ttu-id="e6808-110">Необходимо периодически перемещать базы данных.</span><span class="sxs-lookup"><span data-stu-id="e6808-110">The database must be scrubbed periodically.</span></span> <span data-ttu-id="e6808-111">Независимые от сервера функции находит недопустимые данные и очищает его.</span><span class="sxs-lookup"><span data-stu-id="e6808-111">The serverless function finds invalid data and cleans it.</span></span> <span data-ttu-id="e6808-112">Триггер представляет собой таймер, который выполняется по расписанию.</span><span class="sxs-lookup"><span data-stu-id="e6808-112">The trigger is a timer that runs the code on a schedule.</span></span>

![Без сервера планирования](./media/serverless-scheduling.png)

## <a name="command-and-query-responsibility-segregation-cqrs"></a><span data-ttu-id="e6808-114">Команды и разделение обязанностей запросов (CQRS)</span><span class="sxs-lookup"><span data-stu-id="e6808-114">Command and Query Responsibility Segregation (CQRS)</span></span>

<span data-ttu-id="e6808-115">Команда и Query Responsibility Segregation (CQRS) — это шаблон, которая предоставляет различные интерфейсы для чтения (или запроса) данные и операции, которые изменяют данные.</span><span class="sxs-lookup"><span data-stu-id="e6808-115">Command and Query Responsibility Segregation (CQRS) is a pattern that provides different interfaces for reading (or querying) data and operations that modify data.</span></span> <span data-ttu-id="e6808-116">Она устраняет некоторые распространенные проблемы.</span><span class="sxs-lookup"><span data-stu-id="e6808-116">It addresses several common problems.</span></span> <span data-ttu-id="e6808-117">В традиционных системах создания чтения обновления и удаления (CRUD) на основе могут возникнуть конфликты с большим объемом операций чтения и записи к одному хранилищу данных.</span><span class="sxs-lookup"><span data-stu-id="e6808-117">In traditional Create Read Update Delete (CRUD) based systems, conflicts can arise from high volume of both reads and writes to the same data store.</span></span> <span data-ttu-id="e6808-118">Блокировка может часто происходят и значительно снизить скорость операций чтения.</span><span class="sxs-lookup"><span data-stu-id="e6808-118">Locking may frequently occur and dramatically slow down reads.</span></span> <span data-ttu-id="e6808-119">Часто данные представляются как составной несколько объектов домена и операций чтения необходимо объединить данные из различных сущностей.</span><span class="sxs-lookup"><span data-stu-id="e6808-119">Often, data is presented as a composite of several domain objects and read operations must combine data from different entities.</span></span>

<span data-ttu-id="e6808-120">С помощью CQRS, чтение может включать специальной сущностью «плоский», когда модель данных, способ их использования.</span><span class="sxs-lookup"><span data-stu-id="e6808-120">Using CQRS, a read might involve a special "flattened" entity that models data the way it's consumed.</span></span> <span data-ttu-id="e6808-121">Чтение обрабатывается иначе, чем хранение.</span><span class="sxs-lookup"><span data-stu-id="e6808-121">The read is handled differently than how it's stored.</span></span> <span data-ttu-id="e6808-122">Например несмотря на то, что базы данных может хранить в виде запись заголовка с дочерней записи адрес контакта, чтения может позволять сущности в заголовки и свойства адреса.</span><span class="sxs-lookup"><span data-stu-id="e6808-122">For example, although the database may store a contact as a header record with a child address record, the read could involve an entity with both header and address properties.</span></span> <span data-ttu-id="e6808-123">Существует множество подходов к созданию модели чтения.</span><span class="sxs-lookup"><span data-stu-id="e6808-123">There are myriad approaches to creating the read model.</span></span> <span data-ttu-id="e6808-124">Он может быть материализовано из представлений.</span><span class="sxs-lookup"><span data-stu-id="e6808-124">It might be materialized from views.</span></span> <span data-ttu-id="e6808-125">Операции обновления может быть инкапсулирован как изолированных событий, которые затем запускать обновления в две различные модели.</span><span class="sxs-lookup"><span data-stu-id="e6808-125">Update operations could be encapsulated as isolated events that then trigger updates to two different models.</span></span> <span data-ttu-id="e6808-126">Отдельные модели существует для чтения и записи.</span><span class="sxs-lookup"><span data-stu-id="e6808-126">Separate models exist for reading and writing.</span></span>

![Пример CQRS](./media/cqrs-example.png)

<span data-ttu-id="e6808-128">Без использования сервера позволяет разместить Шаблон CQRS, предоставляя отделенные друг от друга конечных точек.</span><span class="sxs-lookup"><span data-stu-id="e6808-128">Serverless can accommodate the CQRS pattern by providing the segregated endpoints.</span></span> <span data-ttu-id="e6808-129">Один независимой от сервера функции обеспечивает запросов или операций чтения, и различные независимые от сервера функции или набора функций обрабатывает операции обновления.</span><span class="sxs-lookup"><span data-stu-id="e6808-129">One serverless function accommodates queries or reads, and a different serverless function or set of functions handles update operations.</span></span> <span data-ttu-id="e6808-130">Независимые от сервера функции может быть также отвечает за поддержание модель чтения в актуальном состоянии и может запускаться в базе данных [веб-канал изменений](https://docs.microsoft.com/azure/cosmos-db/change-feed).</span><span class="sxs-lookup"><span data-stu-id="e6808-130">A serverless function may also be responsible for keeping the read model up-to-date, and can be triggered by the database's [change feed](https://docs.microsoft.com/azure/cosmos-db/change-feed).</span></span> <span data-ttu-id="e6808-131">Переднего плана разработки упрощен, чтобы подключение к необходимые конечные точки.</span><span class="sxs-lookup"><span data-stu-id="e6808-131">Front-end development is simplified to connecting to the necessary endpoints.</span></span> <span data-ttu-id="e6808-132">Обработка событий осуществляется в серверной части.</span><span class="sxs-lookup"><span data-stu-id="e6808-132">Processing of events is handled on the back end.</span></span> <span data-ttu-id="e6808-133">Эта модель также масштабируется для больших проектов, так как разные команды могут работать на различных операций.</span><span class="sxs-lookup"><span data-stu-id="e6808-133">This model also scales well for large projects because different teams may work on different operations.</span></span>

## <a name="event-based-processing"></a><span data-ttu-id="e6808-134">Обработка на основе событий</span><span class="sxs-lookup"><span data-stu-id="e6808-134">Event-based processing</span></span>

<span data-ttu-id="e6808-135">В системах на основе сообщений события часто собираются в очереди или разделы издатель подписчик, потребуют ответных действий.</span><span class="sxs-lookup"><span data-stu-id="e6808-135">In message-based systems, events are often collected in queues or publisher/subscriber topics to be acted upon.</span></span> <span data-ttu-id="e6808-136">Эти события могут активировать бессерверные функции для выполнения части бизнес-логики.</span><span class="sxs-lookup"><span data-stu-id="e6808-136">These events can trigger serverless functions to execute a piece of business logic.</span></span> <span data-ttu-id="e6808-137">Пример обработки на основе событий является источником событий системы.</span><span class="sxs-lookup"><span data-stu-id="e6808-137">An example of event-based processing is event-sourced systems.</span></span> <span data-ttu-id="e6808-138">Чтобы пометить задачу как выполненную возникает «event».</span><span class="sxs-lookup"><span data-stu-id="e6808-138">An "event" is raised to mark a task as complete.</span></span> <span data-ttu-id="e6808-139">Бессерверные функции, активируемой объектом события обновляет его соответствующей базе данных.</span><span class="sxs-lookup"><span data-stu-id="e6808-139">A serverless function triggered by the event updates the appropriate database document.</span></span> <span data-ttu-id="e6808-140">Второй независимой от сервера функции может использовать событие, чтобы обновить модель чтения для системы.</span><span class="sxs-lookup"><span data-stu-id="e6808-140">A second serverless function may use the event to update the read model for the system.</span></span> <span data-ttu-id="e6808-141">[Сетка событий Azure](https://docs.microsoft.com/azure/event-grid/overview) позволяет интегрировать события с помощью функций в качестве подписчиков.</span><span class="sxs-lookup"><span data-stu-id="e6808-141">[Azure Event Grid](https://docs.microsoft.com/azure/event-grid/overview) provides a way to integrate events with functions as subscribers.</span></span>

> <span data-ttu-id="e6808-142">События, информационные сообщения.</span><span class="sxs-lookup"><span data-stu-id="e6808-142">Events are informational messages.</span></span> <span data-ttu-id="e6808-143">Дополнительные сведения см. в разделе [шаблон источников событий](https://docs.microsoft.com/azure/architecture/patterns/event-sourcing).</span><span class="sxs-lookup"><span data-stu-id="e6808-143">For more information, see [Event Sourcing pattern](https://docs.microsoft.com/azure/architecture/patterns/event-sourcing).</span></span>

## <a name="file-triggers-and-transformations"></a><span data-ttu-id="e6808-144">Триггеры файлов и преобразования</span><span class="sxs-lookup"><span data-stu-id="e6808-144">File triggers and transformations</span></span>

<span data-ttu-id="e6808-145">Извлечение, преобразование и загрузки (ETL) — это общие бизнес-функции.</span><span class="sxs-lookup"><span data-stu-id="e6808-145">Extract, Transform, and Load (ETL) is a common business function.</span></span> <span data-ttu-id="e6808-146">Бессерверные идеально подходит для Извлечения, так как оно позволяет коду выполняться как часть конвейера.</span><span class="sxs-lookup"><span data-stu-id="e6808-146">Serverless is a great solution for ETL because it allows code to be triggered as part of a pipeline.</span></span> <span data-ttu-id="e6808-147">Отдельные компоненты можно решить различные аспекты.</span><span class="sxs-lookup"><span data-stu-id="e6808-147">Individual code components can address various aspects.</span></span> <span data-ttu-id="e6808-148">Один независимой от сервера функции может загрузить файл, другой применяет преобразование и другой загружает данные.</span><span class="sxs-lookup"><span data-stu-id="e6808-148">One serverless function may download the file, another applies the transformation, and another loads the data.</span></span> <span data-ttu-id="e6808-149">Код можно тестировать и развертывать независимо друг от друга, что упрощает для обслуживания и масштабирование при необходимости.</span><span class="sxs-lookup"><span data-stu-id="e6808-149">The code can be tested and deployed independently, making it easier to maintain and scale where needed.</span></span>

![Триггеры бессерверной файлов и преобразования](./media/serverless-file-triggers.png)

<span data-ttu-id="e6808-151">На диаграмме «холодный уровень хранилища» предоставляет данные, полученные в [Azure Stream Analytics](https://docs.microsoft.com/azure/stream-analytics).</span><span class="sxs-lookup"><span data-stu-id="e6808-151">In the diagram, "cool storage" provides data that is parsed in [Azure Stream Analytics](https://docs.microsoft.com/azure/stream-analytics).</span></span> <span data-ttu-id="e6808-152">Все проблемы, в потоке данных обнаружен активировать функции Azure для устранения аномалии.</span><span class="sxs-lookup"><span data-stu-id="e6808-152">Any issues encountered in the data stream trigger an Azure Function to address the anomaly.</span></span>

## <a name="asynchronous-background-processing-and-messaging"></a><span data-ttu-id="e6808-153">Асинхронной фоновой обработки и обмена сообщениями</span><span class="sxs-lookup"><span data-stu-id="e6808-153">Asynchronous background processing and messaging</span></span>

<span data-ttu-id="e6808-154">Асинхронный обмен сообщениями и приложением фоновой обработки позволяют приложениям запускать процессы без ожидания.</span><span class="sxs-lookup"><span data-stu-id="e6808-154">Asynchronous messaging and background processing allow applications to kick off processes without having to wait.</span></span> <span data-ttu-id="e6808-155">Пример асинхронной обработки — это приложение OCR.</span><span class="sxs-lookup"><span data-stu-id="e6808-155">An example of asynchronous processing is an OCR app.</span></span> <span data-ttu-id="e6808-156">Образа отправлен и поставлен в очередь для обработки.</span><span class="sxs-lookup"><span data-stu-id="e6808-156">An image is submitted and queued for processing.</span></span> <span data-ttu-id="e6808-157">Сканирование образа для извлечения текста может потребоваться время и после его завершения уведомление отправляется.</span><span class="sxs-lookup"><span data-stu-id="e6808-157">Scanning the image to extract text may take time, and once it's finished a notification is sent.</span></span> <span data-ttu-id="e6808-158">Без использования сервера может обрабатывать вызова и результат в этом сценарии.</span><span class="sxs-lookup"><span data-stu-id="e6808-158">Serverless can handle both the invocation and the result in this scenario.</span></span>

## <a name="web-apps-and-apis"></a><span data-ttu-id="e6808-159">Веб-приложений и API-интерфейсов</span><span class="sxs-lookup"><span data-stu-id="e6808-159">Web apps and APIs</span></span>

<span data-ttu-id="e6808-160">Распространенный вариант для бессерверной N-уровневых приложений, чаще всего для тех, где слой пользовательского интерфейса веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="e6808-160">A popular scenario for serverless is N-tier applications, most commonly ones where the UI layer is a web app.</span></span> <span data-ttu-id="e6808-161">Рост популярности для одностраничных приложений (SPA) уведомило недавно.</span><span class="sxs-lookup"><span data-stu-id="e6808-161">The popularity of Single Page Applications (SPA) has surged recently.</span></span> <span data-ttu-id="e6808-162">Приложения SPA визуализации на одной странице, а затем полагаться на вызовы API и возвращаемых данных для динамического отображения новый пользовательский Интерфейс без перезагрузки страницы.</span><span class="sxs-lookup"><span data-stu-id="e6808-162">SPA apps render a single page, then rely on API calls and the returned data to dynamically render new UI without reloading a full page.</span></span> <span data-ttu-id="e6808-163">Отрисовка на стороне клиента предоставляет гораздо быстрее, более быстрых приложение для конечного пользователя.</span><span class="sxs-lookup"><span data-stu-id="e6808-163">Client-side rendering provides a much faster, more responsive application to the end user.</span></span>

<span data-ttu-id="e6808-164">Бессерверные конечных точек, запускается посредством вызова HTTP можно использовать для обработки запросов API.</span><span class="sxs-lookup"><span data-stu-id="e6808-164">Serverless endpoints triggered by HTTP calls can be used to handle the API requests.</span></span> <span data-ttu-id="e6808-165">Например компания ad может вызвать независимой от сервера функции с информацией профиля пользователя для запроса пользовательского рекламы.</span><span class="sxs-lookup"><span data-stu-id="e6808-165">For example, an ad services company may call a serverless function with user profile information to request custom advertising.</span></span> <span data-ttu-id="e6808-166">Независимые от сервера функции возвращает пользовательские ad и веб-страницы готовит его к просмотру.</span><span class="sxs-lookup"><span data-stu-id="e6808-166">The serverless function returns the custom ad and the web page renders it.</span></span>

![Без сервера веб-API](./media/serverless-web-api.png)

## <a name="data-pipeline"></a><span data-ttu-id="e6808-168">Конвейер данных</span><span class="sxs-lookup"><span data-stu-id="e6808-168">Data pipeline</span></span>

<span data-ttu-id="e6808-169">Бессерверные функции можно использовать для упрощения конвейер данных.</span><span class="sxs-lookup"><span data-stu-id="e6808-169">Serverless functions can be used to facilitate a data pipeline.</span></span> <span data-ttu-id="e6808-170">В этом примере файл активируется функция для преобразования данных в CSV-файла для данных строк в таблице.</span><span class="sxs-lookup"><span data-stu-id="e6808-170">In this example, a file triggers a function to translate data in a CSV file to data rows in a table.</span></span> <span data-ttu-id="e6808-171">Организованное table допускает информационную панель Power BI для представления аналитики для конечного пользователя.</span><span class="sxs-lookup"><span data-stu-id="e6808-171">The organized table allows a Power BI dashboard to present analytics to the end user.</span></span>

![Конвейер данных в бессерверной](./media/serverless-data-pipeline.png)

## <a name="stream-processing"></a><span data-ttu-id="e6808-173">Обработка Stream</span><span class="sxs-lookup"><span data-stu-id="e6808-173">Stream processing</span></span>

<span data-ttu-id="e6808-174">Устройства и датчики создают потоки данных, которые должны быть обработаны в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="e6808-174">Devices and sensors often generate streams of data that must be processed in real time.</span></span> <span data-ttu-id="e6808-175">Предусмотрен целый ряд технологий, которые способны отслеживать сообщения и потоки из [концентраторов событий](https://docs.microsoft.com/azure/event-hubs/event-hubs-what-is-event-hubs) и [центра Интернета вещей](https://docs.microsoft.com/azure/iot-hub) для [служебной шины](/service-bus).</span><span class="sxs-lookup"><span data-stu-id="e6808-175">There are a number of technologies that can capture messages and streams from [Event Hubs](https://docs.microsoft.com/azure/event-hubs/event-hubs-what-is-event-hubs) and [IoT Hub](https://docs.microsoft.com/azure/iot-hub) to [Service Bus](/service-bus).</span></span> <span data-ttu-id="e6808-176">Независимо от транспорта бессерверные представляет собой идеальный механизм для обработки сообщений и потоков данных, как они доступны.</span><span class="sxs-lookup"><span data-stu-id="e6808-176">Regardless of transport, serverless is an ideal mechanism for processing the messages and streams of data as they come in.</span></span> <span data-ttu-id="e6808-177">Бессерверные решения можно быстро масштабировать для удовлетворения этих потребностей больших объемов данных.</span><span class="sxs-lookup"><span data-stu-id="e6808-177">Serverless can scale quickly to meet the demand of large volumes of data.</span></span> <span data-ttu-id="e6808-178">Бессерверного кода можно применить бизнес-логику для анализа данных и выходные данные в структурированном формате для действия и аналитики.</span><span class="sxs-lookup"><span data-stu-id="e6808-178">The serverless code can apply business logic to parse the data and output in a structured format for action and analytics.</span></span>

![Обработка потоков без сервера](./media/serverless-stream-processing.png)

## <a name="api-gateway"></a><span data-ttu-id="e6808-180">Шлюз API</span><span class="sxs-lookup"><span data-stu-id="e6808-180">API gateway</span></span>

<span data-ttu-id="e6808-181">Шлюз API предоставляет единую точку входа для клиентов и интеллектуально направляет запросы к службам серверной части.</span><span class="sxs-lookup"><span data-stu-id="e6808-181">An API gateway provides a single point of entry for clients and then intelligently routes requests to back-end services.</span></span> <span data-ttu-id="e6808-182">Это полезно для управления большими наборами служб.</span><span class="sxs-lookup"><span data-stu-id="e6808-182">It's useful to manage large sets of services.</span></span> <span data-ttu-id="e6808-183">Он также можно обработать управление версиями и упростите разработку, легко подключение клиентов к разрозненные среды.</span><span class="sxs-lookup"><span data-stu-id="e6808-183">It can also handle versioning and simplify development by easily connecting clients to disparate environments.</span></span> <span data-ttu-id="e6808-184">Без использования сервера может обрабатывать во время презентации один внешний интерфейс через шлюз API серверной части масштабирование отдельные микрослужбы.</span><span class="sxs-lookup"><span data-stu-id="e6808-184">Serverless can handle back-end scaling of individual microservices while presenting a single front end via an API gateway.</span></span>

![Без сервера шлюза API](./media/serverless-api-gateway.png)

## <a name="recommended-resources"></a><span data-ttu-id="e6808-186">Рекомендуемые ресурсы</span><span class="sxs-lookup"><span data-stu-id="e6808-186">Recommended resources</span></span>

* [<span data-ttu-id="e6808-187">Сетка событий Azure</span><span class="sxs-lookup"><span data-stu-id="e6808-187">Azure Event Grid</span></span>](https://docs.microsoft.com/azure/event-grid/overview)
* [<span data-ttu-id="e6808-188">Центр Интернета вещей Azure</span><span class="sxs-lookup"><span data-stu-id="e6808-188">Azure IoT Hub</span></span>](https://docs.microsoft.com/azure/iot-hub)
* [<span data-ttu-id="e6808-189">Распределенное управление данными: проблемы и решения</span><span class="sxs-lookup"><span data-stu-id="e6808-189">Challenges and solutions for distributed data management</span></span>](../microservices-architecture/architect-microservice-container-applications/distributed-data-management.md)
* [<span data-ttu-id="e6808-190">Проектирование микрослужб: определение границ микрослужбы</span><span class="sxs-lookup"><span data-stu-id="e6808-190">Designing microservices: identifying microservice boundaries</span></span>](https://docs.microsoft.com/azure/architecture/microservices/microservice-boundaries)
* [<span data-ttu-id="e6808-191">Концентраторы событий</span><span class="sxs-lookup"><span data-stu-id="e6808-191">Event Hubs</span></span>](https://docs.microsoft.com/azure/event-hubs/event-hubs-what-is-event-hubs)
* [<span data-ttu-id="e6808-192">Шаблон источников событий</span><span class="sxs-lookup"><span data-stu-id="e6808-192">Event Sourcing pattern</span></span>](https://docs.microsoft.com/azure/architecture/patterns/event-sourcing)
* [<span data-ttu-id="e6808-193">Реализация шаблона размыкателя цепи</span><span class="sxs-lookup"><span data-stu-id="e6808-193">Implementing the Circuit Breaker pattern</span></span>](../microservices-architecture/implement-resilient-applications/implement-circuit-breaker-pattern.md)
* [<span data-ttu-id="e6808-194">Центр Интернета вещей</span><span class="sxs-lookup"><span data-stu-id="e6808-194">IoT Hub</span></span>](https://docs.microsoft.com/azure/iot-hub)
* [<span data-ttu-id="e6808-195">Служебная шина</span><span class="sxs-lookup"><span data-stu-id="e6808-195">Service Bus</span></span>](https://docs.microsoft.com/azure/service-bus)
* [<span data-ttu-id="e6808-196">Работа с поддержкой веб-канала в Azure Cosmos DB изменений</span><span class="sxs-lookup"><span data-stu-id="e6808-196">Working with the change feed support in Azure Cosmos DB</span></span>](https://docs.microsoft.com/azure/cosmos-db/change-feed)

>[!div class="step-by-step"]
><span data-ttu-id="e6808-197">[Назад](serverless-architecture-considerations.md)
>[Вперед](azure-serverless-platform.md)</span><span class="sxs-lookup"><span data-stu-id="e6808-197">[Previous](serverless-architecture-considerations.md)
[Next](azure-serverless-platform.md)</span></span>