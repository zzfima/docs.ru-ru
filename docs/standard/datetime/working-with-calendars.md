---
title: Работа с календарями
ms.date: 04/01/2019
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- globalization [.NET], calendars
- calendars, global applications
- global applications, calendars
- world-ready applications, calendars
- international applications [.NET], calendars
- culture, calendars
ms.assetid: 0c1534e5-979b-4c8a-a588-1c24301aefb3
ms.openlocfilehash: 7795fa8d348a3053e6d999d007a558b418cafbd3
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2019
ms.locfileid: "73132521"
---
# <a name="working-with-calendars"></a><span data-ttu-id="2c0de-102">Работа с календарями</span><span class="sxs-lookup"><span data-stu-id="2c0de-102">Working with calendars</span></span>

<span data-ttu-id="2c0de-103">Несмотря на то что значение даты и времени обозначает момент во времени, его строковое представление зависит от конкретного языка и региональных параметров. На него влияют как принятые стандарты обозначения даты и времени, так и используемый календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-103">Although a date and time value represents a moment in time, its string representation is culture-sensitive and depends both on the conventions used for displaying date and time values by a specific culture and on the calendar used by that culture.</span></span> <span data-ttu-id="2c0de-104">В этом разделе рассматривается поддержка календарей в .NET и обсуждается использование классов календаря при работе со значениями дат.</span><span class="sxs-lookup"><span data-stu-id="2c0de-104">This topic explores the support for calendars in .NET and discusses the use of the calendar classes when working with date values.</span></span>

## <a name="calendars-in-net"></a><span data-ttu-id="2c0de-105">Календари в .NET</span><span class="sxs-lookup"><span data-stu-id="2c0de-105">Calendars in .NET</span></span>

<span data-ttu-id="2c0de-106">Все календари в .NET являются производными от класса <xref:System.Globalization.Calendar?displayProperty=nameWithType>, который обеспечивает реализацию базового календаря.</span><span class="sxs-lookup"><span data-stu-id="2c0de-106">All calendars in .NET derive from the <xref:System.Globalization.Calendar?displayProperty=nameWithType> class, which provides the base calendar implementation.</span></span> <span data-ttu-id="2c0de-107">Одним из классов, наследующих от класса <xref:System.Globalization.Calendar>, является класс <xref:System.Globalization.EastAsianLunisolarCalendar> — базовый класс для всех лунно-солнечных календарей.</span><span class="sxs-lookup"><span data-stu-id="2c0de-107">One of the classes that inherits from the <xref:System.Globalization.Calendar> class is the <xref:System.Globalization.EastAsianLunisolarCalendar> class, which is the base class for all lunisolar calendars.</span></span> <span data-ttu-id="2c0de-108">.NET включает следующие реализации календаря:</span><span class="sxs-lookup"><span data-stu-id="2c0de-108">.NET includes the following calendar implementations:</span></span>

- <span data-ttu-id="2c0de-109"><xref:System.Globalization.ChineseLunisolarCalendar>. Представляет китайский лунно-солнечный календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-109"><xref:System.Globalization.ChineseLunisolarCalendar>, which represents the Chinese lunisolar calendar.</span></span>

- <span data-ttu-id="2c0de-110"><xref:System.Globalization.GregorianCalendar>. Представляет григорианский календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-110"><xref:System.Globalization.GregorianCalendar>, which represents the Gregorian calendar.</span></span> <span data-ttu-id="2c0de-111">Этот календарь, в свою очередь, разделяется на подтипы (такие как арабский и ближневосточный французский), определяемые перечислением <xref:System.Globalization.GregorianCalendarTypes?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-111">This calendar is further divided into subtypes (such as Arabic and Middle East French) that are defined by the <xref:System.Globalization.GregorianCalendarTypes?displayProperty=nameWithType> enumeration.</span></span> <span data-ttu-id="2c0de-112">Свойство <xref:System.Globalization.GregorianCalendar.CalendarType%2A?displayProperty=nameWithType> определяет подтип григорианского календаря.</span><span class="sxs-lookup"><span data-stu-id="2c0de-112">The <xref:System.Globalization.GregorianCalendar.CalendarType%2A?displayProperty=nameWithType> property specifies the subtype of the Gregorian calendar.</span></span>

- <span data-ttu-id="2c0de-113"><xref:System.Globalization.HebrewCalendar>. Представляет еврейский календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-113"><xref:System.Globalization.HebrewCalendar>, which represents the Hebrew calendar.</span></span>

- <span data-ttu-id="2c0de-114"><xref:System.Globalization.HijriCalendar>. Представляет календарь Хиджра.</span><span class="sxs-lookup"><span data-stu-id="2c0de-114"><xref:System.Globalization.HijriCalendar>, which represents the Hijri calendar.</span></span>

- <span data-ttu-id="2c0de-115"><xref:System.Globalization.JapaneseCalendar>. Представляет японский календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-115"><xref:System.Globalization.JapaneseCalendar>, which represents the Japanese calendar.</span></span>

- <span data-ttu-id="2c0de-116"><xref:System.Globalization.JapaneseLunisolarCalendar>. Представляет японский лунно-солнечный календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-116"><xref:System.Globalization.JapaneseLunisolarCalendar>, which represents the Japanese lunisolar calendar.</span></span>

- <span data-ttu-id="2c0de-117"><xref:System.Globalization.JulianCalendar>Представляет юлианский календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-117"><xref:System.Globalization.JulianCalendar>, which represents the Julian calendar.</span></span>

- <span data-ttu-id="2c0de-118"><xref:System.Globalization.KoreanCalendar>. Представляет корейский календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-118"><xref:System.Globalization.KoreanCalendar>, which represents the Korean calendar.</span></span>

- <span data-ttu-id="2c0de-119"><xref:System.Globalization.KoreanLunisolarCalendar>. Представляет корейский лунно-солнечный календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-119"><xref:System.Globalization.KoreanLunisolarCalendar>, which represents the Korean lunisolar calendar.</span></span>

- <span data-ttu-id="2c0de-120"><xref:System.Globalization.PersianCalendar>. Представляет персидский календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-120"><xref:System.Globalization.PersianCalendar>, which represents the Persian calendar.</span></span>

- <span data-ttu-id="2c0de-121"><xref:System.Globalization.TaiwanCalendar>. Представляет тайваньский календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-121"><xref:System.Globalization.TaiwanCalendar>, which represents the Taiwan calendar.</span></span>

- <span data-ttu-id="2c0de-122"><xref:System.Globalization.TaiwanLunisolarCalendar>. Представляет тайваньский лунно-солнечный календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-122"><xref:System.Globalization.TaiwanLunisolarCalendar>, which represents the Taiwan lunisolar calendar.</span></span>

- <span data-ttu-id="2c0de-123"><xref:System.Globalization.ThaiBuddhistCalendar>. Представляет тай-буддистский календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-123"><xref:System.Globalization.ThaiBuddhistCalendar>, which represents the Thai Buddhist calendar.</span></span>

- <span data-ttu-id="2c0de-124"><xref:System.Globalization.UmAlQuraCalendar>. Представляет саудовский календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-124"><xref:System.Globalization.UmAlQuraCalendar>, which represents the Um Al Qura calendar.</span></span>

<span data-ttu-id="2c0de-125">Календарь можно использовать одним из двух способов:</span><span class="sxs-lookup"><span data-stu-id="2c0de-125">A calendar can be used in one of two ways:</span></span>

- <span data-ttu-id="2c0de-126">Как календарь, используемый для конкретных языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="2c0de-126">As the calendar used by a specific culture.</span></span> <span data-ttu-id="2c0de-127">Каждый объект <xref:System.Globalization.CultureInfo> имеет текущий календарь, то есть календарь, который объект использует в настоящий момент.</span><span class="sxs-lookup"><span data-stu-id="2c0de-127">Each <xref:System.Globalization.CultureInfo> object has a current calendar, which is the calendar that the object is currently using.</span></span> <span data-ttu-id="2c0de-128">Строковое представление значений даты и времени автоматически отражает используемые язык и региональные параметры и текущий календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-128">The string representations of all date and time values automatically reflect the current culture and its current calendar.</span></span> <span data-ttu-id="2c0de-129">Обычно текущий календарь является календарем по умолчанию для языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="2c0de-129">Typically, the current calendar is the culture's default calendar.</span></span> <span data-ttu-id="2c0de-130"><xref:System.Globalization.CultureInfo> объекты также имеют дополнительные календари, которые включают дополнительные календари, которые может использовать язык и региональные параметры.</span><span class="sxs-lookup"><span data-stu-id="2c0de-130"><xref:System.Globalization.CultureInfo> objects also have optional calendars, which include additional calendars that the culture can use.</span></span>

- <span data-ttu-id="2c0de-131">Как самостоятельный календарь, не зависящий от конкретных языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="2c0de-131">As a standalone calendar independent of a specific culture.</span></span> <span data-ttu-id="2c0de-132">В таком случае методы <xref:System.Globalization.Calendar> используются для выражения дат и значений календаря.</span><span class="sxs-lookup"><span data-stu-id="2c0de-132">In this case, <xref:System.Globalization.Calendar> methods are used to express dates as values that reflect the calendar.</span></span>

<span data-ttu-id="2c0de-133">Обратите внимание, что шесть классов календаря (<xref:System.Globalization.ChineseLunisolarCalendar>, <xref:System.Globalization.JapaneseLunisolarCalendar>, <xref:System.Globalization.JulianCalendar>, <xref:System.Globalization.KoreanLunisolarCalendar>, <xref:System.Globalization.PersianCalendar> и <xref:System.Globalization.TaiwanLunisolarCalendar>) можно использовать только как самостоятельные календари.</span><span class="sxs-lookup"><span data-stu-id="2c0de-133">Note that six calendar classes – <xref:System.Globalization.ChineseLunisolarCalendar>, <xref:System.Globalization.JapaneseLunisolarCalendar>, <xref:System.Globalization.JulianCalendar>, <xref:System.Globalization.KoreanLunisolarCalendar>, <xref:System.Globalization.PersianCalendar>, and <xref:System.Globalization.TaiwanLunisolarCalendar> – can be used only as standalone calendars.</span></span> <span data-ttu-id="2c0de-134">Никакие языки и региональные параметры не используют их как календари по умолчанию или как дополнительные календари.</span><span class="sxs-lookup"><span data-stu-id="2c0de-134">They are not used by any culture as either the default calendar or as an optional calendar.</span></span>

## <a name="calendars-and-cultures"></a><span data-ttu-id="2c0de-135">Календари и языки и региональные параметры</span><span class="sxs-lookup"><span data-stu-id="2c0de-135">Calendars and cultures</span></span>

<span data-ttu-id="2c0de-136">Для любого языка и региональных параметров есть календарь по умолчанию, определенный свойством <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-136">Each culture has a default calendar, which is defined by the <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="2c0de-137">Свойство <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> возвращает массив объектов <xref:System.Globalization.Calendar>, содержащий все календари, поддерживаемые конкретным языком и региональными параметрами, включая календарь по умолчанию для этого языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="2c0de-137">The <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> property returns an array of <xref:System.Globalization.Calendar> objects that specifies all the calendars supported by a particular culture, including that culture's default calendar.</span></span>

<span data-ttu-id="2c0de-138">Следующий пример иллюстрирует свойства <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType> и <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-138">The following example illustrates the <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType> and <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> properties.</span></span> <span data-ttu-id="2c0de-139">В нем создаются объекты `CultureInfo` для языков и региональных параметров "Тайский (Таиланд)" и "Японский (Япония)", а также выводятся их календари по умолчанию и дополнительные календари.</span><span class="sxs-lookup"><span data-stu-id="2c0de-139">It creates `CultureInfo` objects for the Thai (Thailand) and Japanese (Japan) cultures and displays their default and optional calendars.</span></span> <span data-ttu-id="2c0de-140">Обратите внимание, что в обоих случаях календарь по умолчанию для языка и региональных параметров также включается в коллекцию <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-140">Note that in both cases, the culture's default calendar is also included in the <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> collection.</span></span>

[!code-csharp[Conceptual.Calendars#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/calendarinfo1.cs#1)]
[!code-vb[Conceptual.Calendars#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/calendarinfo1.vb#1)]

<span data-ttu-id="2c0de-141">Календарь, используемый в настоящий момент каким-либо конкретным объектом <xref:System.Globalization.CultureInfo>, определяется свойством <xref:System.Globalization.DateTimeFormatInfo.Calendar%2A?displayProperty=nameWithType> языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="2c0de-141">The calendar currently in use by a particular <xref:System.Globalization.CultureInfo> object is defined by the culture's <xref:System.Globalization.DateTimeFormatInfo.Calendar%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="2c0de-142">Объект <xref:System.Globalization.DateTimeFormatInfo> языка и региональных параметров возвращается свойством <xref:System.Globalization.CultureInfo.DateTimeFormat%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-142">A culture's <xref:System.Globalization.DateTimeFormatInfo> object is returned by the <xref:System.Globalization.CultureInfo.DateTimeFormat%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="2c0de-143">При создании языка и региональных параметров значение по умолчанию совпадает со значением свойства <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-143">When a culture is created, its default value is the same as the value of the <xref:System.Globalization.CultureInfo.Calendar%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="2c0de-144">Однако текущий календарь языка и региональных параметров можно изменить на любой календарь из массива, возвращаемого свойством <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-144">However, you can change the culture's current calendar to any calendar contained in the array returned by the <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="2c0de-145">Если попытаться изменить текущий календарь на календарь, не входящий в значение свойства <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType>, будет создано исключение <xref:System.ArgumentException>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-145">If you try to set the current calendar to a calendar that is not included in the <xref:System.Globalization.CultureInfo.OptionalCalendars%2A?displayProperty=nameWithType> property value, an <xref:System.ArgumentException> is thrown.</span></span>

<span data-ttu-id="2c0de-146">В следующем примере изменяется календарь, используемый для языка и региональных параметров "Арабский (Саудовская Аравия)".</span><span class="sxs-lookup"><span data-stu-id="2c0de-146">The following example changes the calendar used by the Arabic (Saudi Arabia) culture.</span></span> <span data-ttu-id="2c0de-147">Сперва создается значение <xref:System.DateTime> и отображается с использованием текущего языка и региональных параметров (в данном случае "Английский (США)") и текущего календаря для языка и региональных параметров (в данном случае григорианского календаря).</span><span class="sxs-lookup"><span data-stu-id="2c0de-147">It first instantiates a <xref:System.DateTime> value and displays it using the current culture - which, in this case, is English (United States) - and the current culture's calendar (which, in this case, is the Gregorian calendar).</span></span> <span data-ttu-id="2c0de-148">Затем текущий язык и региональные параметры изменяются на "Арабский (Саудовская Аравия)" и дата отображается с использованием календаря по умолчанию — саудовского календаря.</span><span class="sxs-lookup"><span data-stu-id="2c0de-148">Next, it changes the current culture to Arabic (Saudi Arabia) and displays the date using its default Um Al-Qura calendar.</span></span> <span data-ttu-id="2c0de-149">Затем вызывается метод `CalendarExists`, чтобы определить, поддерживается ли календарь Хиджра языком и региональными параметрами "Арабский (Саудовская Аравия)".</span><span class="sxs-lookup"><span data-stu-id="2c0de-149">It then calls the `CalendarExists` method to determine whether the Hijri calendar is supported by the Arabic (Saudi Arabia) culture.</span></span> <span data-ttu-id="2c0de-150">Поскольку этот календарь поддерживается, текущий календарь изменяется на календарь Хиджра и дата отображается снова.</span><span class="sxs-lookup"><span data-stu-id="2c0de-150">Because the calendar is supported, it changes the current calendar to Hijri and again displays the date.</span></span> <span data-ttu-id="2c0de-151">Обратите внимание, что в обоих случаях дата отображается с использованием текущего календаря текущего языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="2c0de-151">Note that in each case, the date is displayed using the current culture's current calendar.</span></span>

[!code-csharp[Conceptual.Calendars#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/changecalendar2.cs#2)]
[!code-vb[Conceptual.Calendars#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/changecalendar2.vb#2)]

## <a name="dates-and-calendars"></a><span data-ttu-id="2c0de-152">Даты и календари</span><span class="sxs-lookup"><span data-stu-id="2c0de-152">Dates and calendars</span></span>

<span data-ttu-id="2c0de-153">За исключением конструкторов, содержащих параметры типа <xref:System.Globalization.Calendar> и допускающих отображение элементов даты (месяц, день, год) по указанному календарю, значения <xref:System.DateTime> и <xref:System.DateTimeOffset> всегда приводятся по григорианскому календарю.</span><span class="sxs-lookup"><span data-stu-id="2c0de-153">With the exception of the constructors that include a parameter of type <xref:System.Globalization.Calendar> and allow the elements of a date (that is, the month, the day, and the year) to reflect values in a designated calendar, both <xref:System.DateTime> and <xref:System.DateTimeOffset> values are always based on the Gregorian calendar.</span></span> <span data-ttu-id="2c0de-154">Это означает, например, что свойство <xref:System.DateTime.Year%2A?displayProperty=nameWithType> возвращает год по григорианскому календарю, а свойство <xref:System.DateTime.Day%2A?displayProperty=nameWithType> возвращает день месяца по григорианскому календарю.</span><span class="sxs-lookup"><span data-stu-id="2c0de-154">This means, for example, that the <xref:System.DateTime.Year%2A?displayProperty=nameWithType> property returns the year in the Gregorian calendar, and the <xref:System.DateTime.Day%2A?displayProperty=nameWithType> property returns the day of the month in the Gregorian calendar.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2c0de-155">Важно помнить, что есть разница между значением даты и его строковым представлением.</span><span class="sxs-lookup"><span data-stu-id="2c0de-155">It is important to remember that there is a difference between a date value and its string representation.</span></span> <span data-ttu-id="2c0de-156">Первое основывается на григорианском календаре, а последнее — на текущем календаре конкретного языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="2c0de-156">The former is based on the Gregorian calendar; the latter is based on the current calendar of a specific culture.</span></span>

<span data-ttu-id="2c0de-157">Следующий пример иллюстрирует разницу между свойствами <xref:System.DateTime> и их соответствующими методами <xref:System.Globalization.Calendar>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-157">The following example illustrates this difference between <xref:System.DateTime> properties and their corresponding <xref:System.Globalization.Calendar> methods.</span></span> <span data-ttu-id="2c0de-158">В этом примере текущий язык и региональные параметры — "Арабский (Египет)", а текущий календарь — саудовский.</span><span class="sxs-lookup"><span data-stu-id="2c0de-158">In the example, the current culture is Arabic (Egypt), and the current calendar is Um Al Qura.</span></span> <span data-ttu-id="2c0de-159">Задано значение <xref:System.DateTime>, обозначающее пятнадцатый день седьмого месяца 2011 года.</span><span class="sxs-lookup"><span data-stu-id="2c0de-159">A <xref:System.DateTime> value is set to the fifteenth day of the seventh month of 2011.</span></span> <span data-ttu-id="2c0de-160">Очевидно, что это значение интерпретируется как дата григорианского календаря, поскольку именно эти значения возвращаются методом <xref:System.DateTime.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> при использовании стандартов инвариантного языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="2c0de-160">It is clear that this is interpreted as a Gregorian date, because these same values are returned by the <xref:System.DateTime.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> method when it uses the conventions of the invariant culture.</span></span> <span data-ttu-id="2c0de-161">Строковое представление даты форматируется по стандартам текущего языка и региональных параметров и выглядит как 14/08/32, указывая соответствующую дату по саудовскому календарю.</span><span class="sxs-lookup"><span data-stu-id="2c0de-161">The string representation of the date that is formatted using the conventions of the current culture is 14/08/32, which is the equivalent date in the Um Al Qura calendar.</span></span> <span data-ttu-id="2c0de-162">Затем члены `DateTime` и `Calendar` используются для возврата дня, месяца и года значения <xref:System.DateTime>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-162">Next, members of `DateTime` and `Calendar` are used to return the day, the month, and the year of the <xref:System.DateTime> value.</span></span> <span data-ttu-id="2c0de-163">В любом случае, значения, возвращаемые членами <xref:System.DateTime>, отражают значения по григорианскому календарю, а значения, возвращаемые членами <xref:System.Globalization.UmAlQuraCalendar> отражают значения по саудовскому календарю.</span><span class="sxs-lookup"><span data-stu-id="2c0de-163">In each case, the values returned by <xref:System.DateTime> members reflect values in the Gregorian calendar, whereas values returned by <xref:System.Globalization.UmAlQuraCalendar> members reflect values in the Uum al-Qura calendar.</span></span>

[!code-csharp[Conceptual.Calendars#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/datesandcalendars2.cs#3)]
[!code-vb[Conceptual.Calendars#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/datesandcalendars2.vb#3)]

### <a name="instantiating-dates-based-on-a-calendar"></a><span data-ttu-id="2c0de-164">Создание экземпляров дат на основе календаря</span><span class="sxs-lookup"><span data-stu-id="2c0de-164">Instantiating dates based on a calendar</span></span>

<span data-ttu-id="2c0de-165">Поскольку значения <xref:System.DateTime> и <xref:System.DateTimeOffset> основываются на григорианском календаре, необходимо вызвать перегруженный конструктор, включающий параметр типа <xref:System.Globalization.Calendar>, для создания значения даты, если требуется использовать значение дня, месяца или года по другому календарю.</span><span class="sxs-lookup"><span data-stu-id="2c0de-165">Because <xref:System.DateTime> and <xref:System.DateTimeOffset> values are based on the Gregorian calendar, you must call an overloaded constructor that includes a parameter of type <xref:System.Globalization.Calendar> to instantiate a date value if you want to use the day, month, or year values from a different calendar.</span></span> <span data-ttu-id="2c0de-166">Можно также вызвать одну из перегрузок метода <xref:System.Globalization.Calendar.ToDateTime%2A?displayProperty=nameWithType> конкретного календаря для создания объекта <xref:System.DateTime> на основе значений конкретного календаря.</span><span class="sxs-lookup"><span data-stu-id="2c0de-166">You can also call one of the overloads of a specific calendar's <xref:System.Globalization.Calendar.ToDateTime%2A?displayProperty=nameWithType> method to instantiate a <xref:System.DateTime> object based on the values of a particular calendar.</span></span>

<span data-ttu-id="2c0de-167">В следующем примере первое значение <xref:System.DateTime> создается путем передачи объекта <xref:System.Globalization.HebrewCalendar> конструктору <xref:System.DateTime>, а второе значение <xref:System.DateTime> создается путем вызова метода <xref:System.Globalization.HebrewCalendar.ToDateTime%28System.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-167">The following example instantiates one <xref:System.DateTime> value by passing a <xref:System.Globalization.HebrewCalendar> object to a <xref:System.DateTime> constructor, and instantiates a second <xref:System.DateTime> value by calling the <xref:System.Globalization.HebrewCalendar.ToDateTime%28System.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="2c0de-168">Поскольку эти два значения создаются с одинаковыми значениями еврейского календаря, вызов метода <xref:System.DateTime.Equals%2A?displayProperty=nameWithType> показывает, что два значения <xref:System.DateTime> совпадают.</span><span class="sxs-lookup"><span data-stu-id="2c0de-168">Because the two values are created with identical values from the Hebrew calendar, the call to the <xref:System.DateTime.Equals%2A?displayProperty=nameWithType> method shows that the two <xref:System.DateTime> values are equal.</span></span>

[!code-csharp[Conceptual.Calendars#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/instantiatehcdate1.cs#4)]
[!code-vb[Conceptual.Calendars#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/instantiatehcdate1.vb#4)]

### <a name="representing-dates-in-the-current-calendar"></a><span data-ttu-id="2c0de-169">Представление дат в текущем календаре</span><span class="sxs-lookup"><span data-stu-id="2c0de-169">Representing dates in the current calendar</span></span>

<span data-ttu-id="2c0de-170">Методы форматирования даты и времени при преобразовании дат в строки всегда используют текущий календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-170">Date and time formatting methods always use the current calendar when converting dates to strings.</span></span> <span data-ttu-id="2c0de-171">Это значит, что строковое представление года, месяца и дня месяца отражают текущий календарь, а не обязательно григорианский календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-171">This means that the string representation of the year, the month, and the day of the month reflect the current calendar, and do not necessarily reflect the Gregorian calendar.</span></span>

<span data-ttu-id="2c0de-172">В следующем примере показано, как текущий календарь влияет на строковое представление даты.</span><span class="sxs-lookup"><span data-stu-id="2c0de-172">The following example shows how the current calendar affects the string representation of a date.</span></span> <span data-ttu-id="2c0de-173">Текущий язык и региональные параметры изменяются на "Китайский (традиционное письмо, Тайвань)", затем создается значение даты.</span><span class="sxs-lookup"><span data-stu-id="2c0de-173">It changes the current culture to Chinese (Traditional, Taiwan), and instantiates a date value.</span></span> <span data-ttu-id="2c0de-174">Затем отображается текущий календарь и дата, текущий календарь изменяется на <xref:System.Globalization.TaiwanCalendar>, текущий календарь и дата отображаются снова.</span><span class="sxs-lookup"><span data-stu-id="2c0de-174">It then displays the current calendar and the date, changes the current calendar to <xref:System.Globalization.TaiwanCalendar>, and displays the current calendar and date once again.</span></span> <span data-ttu-id="2c0de-175">При первом отображении даты она представляется как дата григорианского календаря.</span><span class="sxs-lookup"><span data-stu-id="2c0de-175">The first time the date is displayed, it is represented as a date in the Gregorian calendar.</span></span> <span data-ttu-id="2c0de-176">При отображении даты во второй раз она представляется как дата тайваньского календаря.</span><span class="sxs-lookup"><span data-stu-id="2c0de-176">The second time it is displayed, it is represented as a date in the Taiwan calendar.</span></span>

[!code-csharp[Conceptual.Calendars#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/currentcalendar1.cs#5)]
[!code-vb[Conceptual.Calendars#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/currentcalendar1.vb#5)]

### <a name="representing-dates-in-a-non-current-calendar"></a><span data-ttu-id="2c0de-177">Представление дат в нетекущем календаре</span><span class="sxs-lookup"><span data-stu-id="2c0de-177">Representing dates in a non-current calendar</span></span>

<span data-ttu-id="2c0de-178">Чтобы представить дату с помощью календаря, который не является текущим для языка и региональных параметров, необходимо вызвать методы нужного объекта <xref:System.Globalization.Calendar>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-178">To represent a date using a calendar that is not the current calendar of a particular culture, you must call methods of that <xref:System.Globalization.Calendar> object.</span></span> <span data-ttu-id="2c0de-179">Например, методы <xref:System.Globalization.Calendar.GetYear%2A?displayProperty=nameWithType>, <xref:System.Globalization.Calendar.GetMonth%2A?displayProperty=nameWithType> и <xref:System.Globalization.Calendar.GetDayOfMonth%2A?displayProperty=nameWithType> преобразуют значения года, месяца и дня в значения, соответствующие определенному календарю.</span><span class="sxs-lookup"><span data-stu-id="2c0de-179">For example, the <xref:System.Globalization.Calendar.GetYear%2A?displayProperty=nameWithType>, <xref:System.Globalization.Calendar.GetMonth%2A?displayProperty=nameWithType>, and <xref:System.Globalization.Calendar.GetDayOfMonth%2A?displayProperty=nameWithType> methods convert the year, month, and day to values that reflect a particular calendar.</span></span>

> [!WARNING]
> <span data-ttu-id="2c0de-180">Поскольку некоторые календари не являются дополнительными календарями ни для какого языка и региональных параметров, указание дат по этим календарям всегда требует вызова методов календаря.</span><span class="sxs-lookup"><span data-stu-id="2c0de-180">Because some calendars are not optional calendars of any culture, representing dates in these calendars always requires that you call calendar methods.</span></span> <span data-ttu-id="2c0de-181">Это верно для всех календарей, унаследованных от классов <xref:System.Globalization.EastAsianLunisolarCalendar>, <xref:System.Globalization.JulianCalendar> и <xref:System.Globalization.PersianCalendar>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-181">This is true of all calendars that derive from the <xref:System.Globalization.EastAsianLunisolarCalendar>, <xref:System.Globalization.JulianCalendar>, and <xref:System.Globalization.PersianCalendar> classes.</span></span>

<span data-ttu-id="2c0de-182">В следующем примере используется объект <xref:System.Globalization.JulianCalendar> для создания даты 9 января 1905 года по юлианскому календарю.</span><span class="sxs-lookup"><span data-stu-id="2c0de-182">The following example uses a <xref:System.Globalization.JulianCalendar> object to instantiate a date, January 9, 1905, in the Julian calendar.</span></span> <span data-ttu-id="2c0de-183">При отображении этой даты по календарю по умолчанию (григорианскому), она представляется как 22 января 1905 года.</span><span class="sxs-lookup"><span data-stu-id="2c0de-183">When this date is displayed using the default (Gregorian) calendar, it is represented as January 22, 1905.</span></span> <span data-ttu-id="2c0de-184">Вызов отдельных методов <xref:System.Globalization.JulianCalendar> позволяет отобразить дату по юлианскому календарю.</span><span class="sxs-lookup"><span data-stu-id="2c0de-184">Calls to individual <xref:System.Globalization.JulianCalendar> methods enable the date to be represented in the Julian calendar.</span></span>

[!code-csharp[Conceptual.Calendars#6](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/noncurrentcalendar1.cs#6)]
[!code-vb[Conceptual.Calendars#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/noncurrentcalendar1.vb#6)]

### <a name="calendars-and-date-ranges"></a><span data-ttu-id="2c0de-185">Календари и диапазоны дат</span><span class="sxs-lookup"><span data-stu-id="2c0de-185">Calendars and date ranges</span></span>

<span data-ttu-id="2c0de-186">Самая ранняя дата, поддерживаемая календарем, отображается свойством <xref:System.Globalization.Calendar.MinSupportedDateTime%2A?displayProperty=nameWithType> этого календаря.</span><span class="sxs-lookup"><span data-stu-id="2c0de-186">The earliest date supported by a calendar is indicated by that calendar's <xref:System.Globalization.Calendar.MinSupportedDateTime%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="2c0de-187">Для класса <xref:System.Globalization.GregorianCalendar> эта дата — 1 января 0001 года нашей эры.</span><span class="sxs-lookup"><span data-stu-id="2c0de-187">For the <xref:System.Globalization.GregorianCalendar> class, that date is January 1, 0001 C.E.</span></span> <span data-ttu-id="2c0de-188">Большинство других календарей в .NET поддерживают более позднюю дату.</span><span class="sxs-lookup"><span data-stu-id="2c0de-188">Most of the other calendars in .NET support a later date.</span></span> <span data-ttu-id="2c0de-189">При попытке работы с датой и временем, меньшими самой ранней поддерживаемой календарем даты, возникнет исключение <xref:System.ArgumentOutOfRangeException>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-189">Trying to work with a date and time value that precedes a calendar's earliest supported date throws an <xref:System.ArgumentOutOfRangeException> exception.</span></span>

<span data-ttu-id="2c0de-190">Однако существует одно важное исключение из этого правила.</span><span class="sxs-lookup"><span data-stu-id="2c0de-190">However, there is one important exception.</span></span> <span data-ttu-id="2c0de-191">По умолчанию (неинициализированное) значение объекта <xref:System.DateTime> и объекта <xref:System.DateTimeOffset> равно значению <xref:System.Globalization.GregorianCalendar.MinSupportedDateTime%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-191">The default (uninitialized) value of a <xref:System.DateTime> object and a <xref:System.DateTimeOffset> object is equal to the <xref:System.Globalization.GregorianCalendar.MinSupportedDateTime%2A?displayProperty=nameWithType> value.</span></span> <span data-ttu-id="2c0de-192">Если вы попытаетесь отформатировать эту дату в календаре, не поддерживающем 1 января 0001 года нашей эры</span><span class="sxs-lookup"><span data-stu-id="2c0de-192">If you try to format this date in a calendar that does not support January 1, 0001 C.E.</span></span> <span data-ttu-id="2c0de-193">и не предоставляется описатель формата, в методе форматирования используется описатель формата "s" (шаблон даты и времени с сортировкой) вместо описателя формата "G" (общий шаблон даты и времени).</span><span class="sxs-lookup"><span data-stu-id="2c0de-193">and you do not provide a format specifier, the formatting method uses the "s" (sortable date/time pattern) format specifier instead of the "G" (general date/time pattern) format specifier.</span></span> <span data-ttu-id="2c0de-194">В результате операция форматирования не вызовет исключения <xref:System.ArgumentOutOfRangeException>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-194">As a result, the formatting operation does not throw an <xref:System.ArgumentOutOfRangeException> exception.</span></span> <span data-ttu-id="2c0de-195">Вместо этого будет возвращена неподдерживаемая дата.</span><span class="sxs-lookup"><span data-stu-id="2c0de-195">Instead, it returns the unsupported date.</span></span> <span data-ttu-id="2c0de-196">Это продемонстрировано в следующем примере, отображающем значение <xref:System.DateTime.MinValue?displayProperty=nameWithType> во время установки текущих языка и региональных параметров в японские (Япония) с японским календарем и в арабские (Египет) с календарем Um Al Qura.</span><span class="sxs-lookup"><span data-stu-id="2c0de-196">This is illustrated in the following example, which displays the value of <xref:System.DateTime.MinValue?displayProperty=nameWithType> when the current culture is set to Japanese (Japan) with the Japanese calendar, and to Arabic (Egypt) with the Um Al Qura calendar.</span></span> <span data-ttu-id="2c0de-197">Также текущие язык и региональные параметры устанавливаются в английские (США) и вызывается метод <xref:System.DateTime.ToString%28System.IFormatProvider%29?displayProperty=nameWithType> с каждым из этих объектов <xref:System.Globalization.CultureInfo>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-197">It also sets the current culture to English (United States) and calls the <xref:System.DateTime.ToString%28System.IFormatProvider%29?displayProperty=nameWithType> method with each of these <xref:System.Globalization.CultureInfo> objects.</span></span> <span data-ttu-id="2c0de-198">В каждом случае дата отображается с помощью сортируемого шаблона даты и времени.</span><span class="sxs-lookup"><span data-stu-id="2c0de-198">In each case, the date is displayed by using the sortable date/time pattern.</span></span>

[!code-csharp[Conceptual.Calendars#11](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/minsupporteddatetime1.cs#11)]
[!code-vb[Conceptual.Calendars#11](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/minsupporteddatetime1.vb#11)]

## <a name="working-with-eras"></a><span data-ttu-id="2c0de-199">Работа с Эр</span><span class="sxs-lookup"><span data-stu-id="2c0de-199">Working with eras</span></span>

<span data-ttu-id="2c0de-200">В календарях даты обычно разделены на эры.</span><span class="sxs-lookup"><span data-stu-id="2c0de-200">Calendars typically divide dates into eras.</span></span> <span data-ttu-id="2c0de-201">Однако <xref:System.Globalization.Calendar> классы в .NET не поддерживают каждую эру, определенную календарем, и большинство классов <xref:System.Globalization.Calendar> поддерживают только одну эру.</span><span class="sxs-lookup"><span data-stu-id="2c0de-201">However, the <xref:System.Globalization.Calendar> classes in .NET do not support every era defined by a calendar, and most of the <xref:System.Globalization.Calendar> classes support only a single era.</span></span> <span data-ttu-id="2c0de-202">Только классы <xref:System.Globalization.JapaneseCalendar> и <xref:System.Globalization.JapaneseLunisolarCalendar> поддерживают несколько эр.</span><span class="sxs-lookup"><span data-stu-id="2c0de-202">Only the <xref:System.Globalization.JapaneseCalendar> and <xref:System.Globalization.JapaneseLunisolarCalendar> classes support multiple eras.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2c0de-203">Эпоха Реива, Новая эра в <xref:System.Globalization.JapaneseCalendar> и <xref:System.Globalization.JapaneseLunisolarCalendar>, начинается 1 мая 2019.</span><span class="sxs-lookup"><span data-stu-id="2c0de-203">The Reiwa era, a new era in the <xref:System.Globalization.JapaneseCalendar> and <xref:System.Globalization.JapaneseLunisolarCalendar>, begins on May 1, 2019.</span></span> <span data-ttu-id="2c0de-204">Это изменение затрагивает все приложения, использующие эти календари.</span><span class="sxs-lookup"><span data-stu-id="2c0de-204">This change affects all applications that use these calendars.</span></span> <span data-ttu-id="2c0de-205">Дополнительные сведения см. в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="2c0de-205">See the following articles for more information:</span></span>
>
> - <span data-ttu-id="2c0de-206">[Обработка новой эры в японском календаре в .NET](https://devblogs.microsoft.com/dotnet/handling-a-new-era-in-the-japanese-calendar-in-net/), которая документирует функции, добавленные в .NET для поддержки календарей с несколькими Эр, и обсуждаются рекомендации по обработке календарей с несколькими эрами.</span><span class="sxs-lookup"><span data-stu-id="2c0de-206">[Handling a new era in the Japanese calendar in .NET](https://devblogs.microsoft.com/dotnet/handling-a-new-era-in-the-japanese-calendar-in-net/), which documents features added to .NET to support calendars with multiple eras and discusses best practices to use when handling multi-era calendars.</span></span>
> - <span data-ttu-id="2c0de-207">[Подготовьте свое приложение к изменению японской эры](/windows/uwp/design/globalizing/japanese-era-change), которое содержит сведения о тестировании приложений в Windows, чтобы гарантировать их готовность к изменению эры.</span><span class="sxs-lookup"><span data-stu-id="2c0de-207">[Prepare your application for the Japanese era change](/windows/uwp/design/globalizing/japanese-era-change), which provides information on testing your applications on Windows to ensure their readiness for the era change.</span></span>
> - <span data-ttu-id="2c0de-208">[Сводка новых обновлений японской эры для .NET Framework](https://support.microsoft.com/help/4477957/new-japanese-era-updates-for-net-framework), в которой перечислены .NET Framework обновления для отдельных версий Windows, связанных с новой эре японского календаря, заметок о новых функциях .NET Framework для поддержки нескольких эпох, а также о том, как Ищите в тестируемых приложениях.</span><span class="sxs-lookup"><span data-stu-id="2c0de-208">[Summary of new Japanese Era updates for .NET Framework](https://support.microsoft.com/help/4477957/new-japanese-era-updates-for-net-framework), which lists .NET Framework updates for individual Windows versions that are related to the new Japanese calendar era, notes new .NET Framework features for multi-era support, and includes things to look for in testing your applications.</span></span>

<span data-ttu-id="2c0de-209">Эра в большинстве календарей обозначает очень длинный период времени.</span><span class="sxs-lookup"><span data-stu-id="2c0de-209">An era in most calendars denotes an extremely long time period.</span></span> <span data-ttu-id="2c0de-210">Например, в григорианском календаре текущая эра охватывает более двух тысячелетий.</span><span class="sxs-lookup"><span data-stu-id="2c0de-210">In the Gregorian calendar, for example, the current era spans more than two millennia.</span></span> <span data-ttu-id="2c0de-211">Для <xref:System.Globalization.JapaneseCalendar> и <xref:System.Globalization.JapaneseLunisolarCalendar>два календаря, которые поддерживают несколько эр, это не так.</span><span class="sxs-lookup"><span data-stu-id="2c0de-211">For the <xref:System.Globalization.JapaneseCalendar> and the <xref:System.Globalization.JapaneseLunisolarCalendar>, the two calendars that support multiple eras, this is not the case.</span></span> <span data-ttu-id="2c0de-212">Эра соответствует периоду Reign императора.</span><span class="sxs-lookup"><span data-stu-id="2c0de-212">An era corresponds to the period of an emperor's reign.</span></span> <span data-ttu-id="2c0de-213">Поддержка нескольких Эр, особенно если верхний предел текущей эры неизвестен, создает особые трудности.</span><span class="sxs-lookup"><span data-stu-id="2c0de-213">Support for multiple eras, particularly when the upper limit of the current era is unknown, poses special challenges.</span></span>

### <a name="eras-and-era-names"></a><span data-ttu-id="2c0de-214">Эры и названия Эр</span><span class="sxs-lookup"><span data-stu-id="2c0de-214">Eras and era names</span></span>

<span data-ttu-id="2c0de-215">В .NET целые числа, представляющие эры, поддерживаемые конкретной реализацией календаря, хранятся в обратных последовательностях в массиве <xref:System.Globalization.Calendar.Eras%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-215">In .NET, integers that represent the eras supported by a particular calendar implementation are stored in reverse order in the <xref:System.Globalization.Calendar.Eras%2A?displayProperty=nameWithType> array.</span></span> <span data-ttu-id="2c0de-216">Текущая эра (эра с последним диапазоном времени) имеет нулевой индекс, а для <xref:System.Globalization.Calendar> классов, которые поддерживают несколько эр, каждый последовательный индекс отражает предыдущую эру.</span><span class="sxs-lookup"><span data-stu-id="2c0de-216">The current era (which is the era with the latest time range) is at index zero, and for <xref:System.Globalization.Calendar> classes that support multiple eras, each successive index reflects the previous era.</span></span> <span data-ttu-id="2c0de-217">Статическое свойство <xref:System.Globalization.Calendar.CurrentEra?displayProperty=nameWithType> определяет индекс текущей эры в массиве <xref:System.Globalization.Calendar.Eras%2A?displayProperty=nameWithType>; это константа, значение которой всегда ноль.</span><span class="sxs-lookup"><span data-stu-id="2c0de-217">The static <xref:System.Globalization.Calendar.CurrentEra?displayProperty=nameWithType> property defines the index of the current era in the <xref:System.Globalization.Calendar.Eras%2A?displayProperty=nameWithType> array; it is a constant whose value is always zero.</span></span> <span data-ttu-id="2c0de-218">Отдельные классы <xref:System.Globalization.Calendar> также включают статические поля, возвращающие значение текущей эры.</span><span class="sxs-lookup"><span data-stu-id="2c0de-218">Individual <xref:System.Globalization.Calendar> classes also include static fields that return the value of the current era.</span></span> <span data-ttu-id="2c0de-219">Они перечислены в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="2c0de-219">They are listed in the following table.</span></span>

| <span data-ttu-id="2c0de-220">Класс календаря</span><span class="sxs-lookup"><span data-stu-id="2c0de-220">Calendar class</span></span>                                        | <span data-ttu-id="2c0de-221">Поле текущей эры</span><span class="sxs-lookup"><span data-stu-id="2c0de-221">Current era field</span></span>                                                 |
| ----------------------------------------------------- | ----------------------------------------------------------------- |
| <xref:System.Globalization.ChineseLunisolarCalendar>  | <xref:System.Globalization.ChineseLunisolarCalendar.ChineseEra>   |
| <xref:System.Globalization.GregorianCalendar>         | <xref:System.Globalization.GregorianCalendar.ADEra>               |
| <xref:System.Globalization.HebrewCalendar>            | <xref:System.Globalization.HebrewCalendar.HebrewEra>              |
| <xref:System.Globalization.HijriCalendar>             | <xref:System.Globalization.HijriCalendar.HijriEra>                |
| <xref:System.Globalization.JapaneseLunisolarCalendar> | <xref:System.Globalization.JapaneseLunisolarCalendar.JapaneseEra> |
| <xref:System.Globalization.JulianCalendar>            | <xref:System.Globalization.JulianCalendar.JulianEra>              |
| <xref:System.Globalization.KoreanCalendar>            | <xref:System.Globalization.KoreanCalendar.KoreanEra>              |
| <xref:System.Globalization.KoreanLunisolarCalendar>   | <xref:System.Globalization.KoreanLunisolarCalendar.GregorianEra>  |
| <xref:System.Globalization.PersianCalendar>           | <xref:System.Globalization.PersianCalendar.PersianEra>            |
| <xref:System.Globalization.ThaiBuddhistCalendar>      | <xref:System.Globalization.ThaiBuddhistCalendar.ThaiBuddhistEra>  |
| <xref:System.Globalization.UmAlQuraCalendar>          | <xref:System.Globalization.UmAlQuraCalendar.UmAlQuraEra>          |

<span data-ttu-id="2c0de-222">Имя, соответствующее номеру конкретной эры, которое можно получить, передав номер эры методу <xref:System.Globalization.DateTimeFormatInfo.GetEraName%2A?displayProperty=nameWithType> или <xref:System.Globalization.DateTimeFormatInfo.GetAbbreviatedEraName%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-222">The name that corresponds to a particular era number can be retrieved by passing the era number to the <xref:System.Globalization.DateTimeFormatInfo.GetEraName%2A?displayProperty=nameWithType> or <xref:System.Globalization.DateTimeFormatInfo.GetAbbreviatedEraName%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="2c0de-223">В следующем примере эти методы вызываются для получения информации о поддержке эр в классе <xref:System.Globalization.GregorianCalendar>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-223">The following example calls these methods to retrieve information about era support in the <xref:System.Globalization.GregorianCalendar> class.</span></span> <span data-ttu-id="2c0de-224">Она отображает дату григорианского календаря, которая соответствует 1 января второго года текущей эры, а также дату григорианского календаря, которая соответствует 1 января второго года каждой поддерживаемой эры в японском календаре.</span><span class="sxs-lookup"><span data-stu-id="2c0de-224">It displays the Gregorian calendar date that corresponds to January 1 of the second year of the current era, as well as the Gregorian calendar date that corresponds to January 1 of the second year of each supported Japanese calendar era.</span></span>

[!code-csharp[Conceptual.Calendars#7](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/instantiatewithera1.cs)]
[!code-vb[Conceptual.Calendars#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/instantiatewithera1.vb)]

<span data-ttu-id="2c0de-225">Кроме того, строка пользовательского формата даты и времени "g" включает имя эры календаря в строковое представлении даты и времени.</span><span class="sxs-lookup"><span data-stu-id="2c0de-225">In addition, the "g" custom date and time format string includes a calendar's era name in the string representation of a date and time.</span></span> <span data-ttu-id="2c0de-226">Дополнительные сведения см. в разделе [строки настраиваемых форматов даты и времени](../../../docs/standard/base-types/custom-date-and-time-format-strings.md).</span><span class="sxs-lookup"><span data-stu-id="2c0de-226">For more information, see [Custom date and time format strings](../../../docs/standard/base-types/custom-date-and-time-format-strings.md).</span></span>

### <a name="instantiating-a-date-with-an-era"></a><span data-ttu-id="2c0de-227">Создание экземпляра даты с помощью эры</span><span class="sxs-lookup"><span data-stu-id="2c0de-227">Instantiating a date with an era</span></span>

<span data-ttu-id="2c0de-228">Для двух <xref:System.Globalization.Calendar> классов, поддерживающих несколько эр, Дата, состоящая из определенного года, месяца и дня значения месяца, может быть неоднозначной.</span><span class="sxs-lookup"><span data-stu-id="2c0de-228">For the two <xref:System.Globalization.Calendar> classes that support multiple eras, a date that consists of a particular year, month, and day of the month value can be ambiguous.</span></span> <span data-ttu-id="2c0de-229">Например, все эры, поддерживаемые <xref:System.Globalization.JapaneseCalendar>, имеют годы, число которых равно 1.</span><span class="sxs-lookup"><span data-stu-id="2c0de-229">For example, all eras supported by the <xref:System.Globalization.JapaneseCalendar> have years whose number is 1.</span></span> <span data-ttu-id="2c0de-230">Обычно если эра не указана, методы даты и времени и календаря предполагают, что значения относятся к текущей эре.</span><span class="sxs-lookup"><span data-stu-id="2c0de-230">Ordinarily, if an era is not specified, both date and time and calendar methods assume that values belong to the current era.</span></span> <span data-ttu-id="2c0de-231">Это справедливо для конструкторов <xref:System.DateTime.%23ctor%2A> и <xref:System.DateTimeOffset.%23ctor%2A>, которые включают параметры типа <xref:System.Globalization.Calendar>, а также методы [жапанесекалендар. ToDateTime](xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)) и [жапанеселунисоларкалендар. ToDateTime](xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)) .</span><span class="sxs-lookup"><span data-stu-id="2c0de-231">This is true of the <xref:System.DateTime.%23ctor%2A> and <xref:System.DateTimeOffset.%23ctor%2A> constructors that include parameters of type <xref:System.Globalization.Calendar>, as well as the [JapaneseCalendar.ToDateTime](xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)) and [JapaneseLunisolarCalendar.ToDateTime](xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)) methods.</span></span> <span data-ttu-id="2c0de-232">В следующем примере создается экземпляр даты, представляющей 1 января второго года неуказанной эры.</span><span class="sxs-lookup"><span data-stu-id="2c0de-232">The following example instantiates a date that represents January 1 of the second year of an unspecified era.</span></span> <span data-ttu-id="2c0de-233">Если вы выполняете пример, когда эра Реива является текущая эра, Дата интерпретируется как второй год эры Реива.</span><span class="sxs-lookup"><span data-stu-id="2c0de-233">If you execute the example when the Reiwa era is the current era, the date is interpreted as the second year of the Reiwa era.</span></span> <span data-ttu-id="2c0de-234">Эра, 令和, предшествует году в строке, возвращенной методом <xref:System.DateTime.ToString(System.String,System.IFormatProvider)?displayProperty=nameWithType>, и соответствует 1 января 2020 в григорианском календаре.</span><span class="sxs-lookup"><span data-stu-id="2c0de-234">The era, 令和, precedes the year in the string returned by the <xref:System.DateTime.ToString(System.String,System.IFormatProvider)?displayProperty=nameWithType> method and corresponds to January 1, 2020, in the Gregorian calendar.</span></span> <span data-ttu-id="2c0de-235">(Реива эпоха начинается в 2019 григорианского календаря.)</span><span class="sxs-lookup"><span data-stu-id="2c0de-235">(The Reiwa era begins in the year 2019 of the Gregorian calendar.)</span></span>

[!code-csharp[A date in the current era](~/samples/snippets/standard/datetime/calendars/current-era/cs/program.cs)]
[!code-vb[A date in the current era](~/samples/snippets/standard/datetime/calendars/current-era/vb/program.vb)]

<span data-ttu-id="2c0de-236">Однако при изменении эры цель этого кода станет неоднозначным.</span><span class="sxs-lookup"><span data-stu-id="2c0de-236">However, if the era changes, the intent of this code becomes ambiguous.</span></span> <span data-ttu-id="2c0de-237">Дата, предназначенная для представления второго года текущей эры, или она должна представлять второй год эры Хэйсэй?</span><span class="sxs-lookup"><span data-stu-id="2c0de-237">Is the date intended to represent the second year of the current era, or is it intended to represent the second year of the Heisei era?</span></span> <span data-ttu-id="2c0de-238">Избежать этой неоднозначности можно двумя способами:</span><span class="sxs-lookup"><span data-stu-id="2c0de-238">There are two ways to avoid this ambiguity:</span></span>

- <span data-ttu-id="2c0de-239">Создайте экземпляр значения даты и времени с помощью класса <xref:System.Globalization.GregorianCalendar> по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="2c0de-239">Instantiate the date and time value using the default <xref:System.Globalization.GregorianCalendar> class.</span></span> <span data-ttu-id="2c0de-240">Затем можно использовать Японский календарь или японский лунного календаря для представления строк дат, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="2c0de-240">You can then use the Japanese calendar or the Japanese Lunisolar calendar for the string representation of dates, as the following example shows.</span></span>

  [!code-csharp[Insantiating a Gregorian date](~/samples/snippets/standard/datetime/calendars/gregorian/cs/program.cs)]
  [!code-vb[Instantiating a Gregorian date](~/samples/snippets/standard/datetime/calendars/gregorian/vb/program.vb)]

- <span data-ttu-id="2c0de-241">Вызовите метод даты и времени, который явно указывает эру.</span><span class="sxs-lookup"><span data-stu-id="2c0de-241">Call a date and time method that explicitly specifies an era.</span></span> <span data-ttu-id="2c0de-242">Включены следующие методы:</span><span class="sxs-lookup"><span data-stu-id="2c0de-242">This includes the following methods:</span></span>

  - <span data-ttu-id="2c0de-243">Метод <xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)> класса <xref:System.Globalization.JapaneseCalendar> или <xref:System.Globalization.JapaneseLunisolarCalendar>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-243">The <xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)> method of the <xref:System.Globalization.JapaneseCalendar> or <xref:System.Globalization.JapaneseLunisolarCalendar> class.</span></span>

  - <span data-ttu-id="2c0de-244">Метод синтаксического анализа <xref:System.DateTime> или <xref:System.DateTimeOffset>, например <xref:System.DateTime.Parse%2A>, <xref:System.DateTime.TryParse%2A>, <xref:System.DateTime.ParseExact%2A>или <xref:System.DateTime.TryParseExact%2A>, который содержит строку для синтаксического анализа и, при необходимости, аргумент <xref:System.Globalization.DateTimeStyles>, если текущий язык и региональные параметры являются японскими ("ja-JP"), а этот календарь является <xref:System.Globalization.JapaneseCalendar>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-244">A <xref:System.DateTime> or <xref:System.DateTimeOffset> parsing method, such as <xref:System.DateTime.Parse%2A>, <xref:System.DateTime.TryParse%2A>, <xref:System.DateTime.ParseExact%2A>, or <xref:System.DateTime.TryParseExact%2A>, that includes the string to be parsed and optionally a <xref:System.Globalization.DateTimeStyles> argument if the current culture is Japanese-Japan ("ja-JP") and that culture's calendar is the <xref:System.Globalization.JapaneseCalendar>.</span></span> <span data-ttu-id="2c0de-245">Анализируемая строка должна включать эру.</span><span class="sxs-lookup"><span data-stu-id="2c0de-245">The string to be parsed must include the era.</span></span>

  - <span data-ttu-id="2c0de-246">Метод синтаксического анализа <xref:System.DateTime> или <xref:System.DateTimeOffset>, который включает параметр `provider` типа <xref:System.IFormatProvider>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-246">A <xref:System.DateTime> or <xref:System.DateTimeOffset> parsing method that includes a `provider` parameter of type <xref:System.IFormatProvider>.</span></span> <span data-ttu-id="2c0de-247">`provider` должен быть <xref:System.Globalization.CultureInfo>ным объектом, представляющим язык и региональные параметры ("ja-JP"), текущий календарь которых <xref:System.Globalization.JapaneseCalendar>, или объект <xref:System.Globalization.DateTimeFormatInfo>, свойство <xref:System.Globalization.DateTimeFormatInfo.Calendar> которого <xref:System.Globalization.JapaneseCalendar>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-247">`provider` must be either a <xref:System.Globalization.CultureInfo> object that represents the Japanese-Japan ("ja-JP") culture whose current calendar is <xref:System.Globalization.JapaneseCalendar> or a <xref:System.Globalization.DateTimeFormatInfo> object whose <xref:System.Globalization.DateTimeFormatInfo.Calendar> property is <xref:System.Globalization.JapaneseCalendar>.</span></span> <span data-ttu-id="2c0de-248">Анализируемая строка должна включать эру.</span><span class="sxs-lookup"><span data-stu-id="2c0de-248">The string to be parsed must include the era.</span></span>

  <span data-ttu-id="2c0de-249">В следующем примере используются три из этих методов для создания экземпляра даты и времени в эпоху Меижи, которая началась 8 сентября 1868 и заканчивается 29 июля 1912.</span><span class="sxs-lookup"><span data-stu-id="2c0de-249">The following example uses three of these methods to instantiate a date and time in the Meiji era, which began on September 8, 1868, and ended on July 29, 1912.</span></span>

  [!code-csharp[A date in a specified era](~/samples/snippets/standard/datetime/calendars/specify-era/cs/program.cs)]
  [!code-vb[A date in a specified era](~/samples/snippets/standard/datetime/calendars/specify-era/vb/program.vb)]

> [!TIP]
> <span data-ttu-id="2c0de-250">При работе с календарями, поддерживающими несколько эр, *всегда* используйте дату григорианского задания для создания экземпляра даты или укажите эру при создании экземпляра даты и времени на основе этого календаря.</span><span class="sxs-lookup"><span data-stu-id="2c0de-250">When working with calendars that support multiple eras, *always* use the Gregorian date to instantiate a date, or specify the era when you instantiate a date and time based on that calendar.</span></span>

<span data-ttu-id="2c0de-251">При указании эры для метода <xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)> вы предоставляете индекс эры в свойстве <xref:System.Globalization.Calendar.Eras> календаря.</span><span class="sxs-lookup"><span data-stu-id="2c0de-251">In specifying an era to the <xref:System.Globalization.Calendar.ToDateTime(System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32)> method, you provide the index of the era in the calendar's <xref:System.Globalization.Calendar.Eras> property.</span></span> <span data-ttu-id="2c0de-252">Однако для календарей, Эр которых может изменяться, эти индексы не являются постоянными значениями. Текущая эра имеет индекс 0, а самая старая эра — по индексу `Eras.Length - 1`.</span><span class="sxs-lookup"><span data-stu-id="2c0de-252">For calendars whose eras are subject to change, however, these indexes are not constant values; the current era is at index 0, and the oldest era is at index `Eras.Length - 1`.</span></span> <span data-ttu-id="2c0de-253">При добавлении новой эры в календарь индексы предыдущих Эр увеличиваются на единицу.</span><span class="sxs-lookup"><span data-stu-id="2c0de-253">When a new era is added to a calendar, the indexes of the previous eras increase by one.</span></span> <span data-ttu-id="2c0de-254">Вы можете указать соответствующий индекс эры следующим образом:</span><span class="sxs-lookup"><span data-stu-id="2c0de-254">You can supply the appropriate era index as follows:</span></span>

- <span data-ttu-id="2c0de-255">Для дат в текущей эре всегда используйте свойство <xref:System.Globalization.Calendar.CurrentEra> календаря.</span><span class="sxs-lookup"><span data-stu-id="2c0de-255">For dates in the current era, always use the calendar's <xref:System.Globalization.Calendar.CurrentEra> property.</span></span>

- <span data-ttu-id="2c0de-256">Для дат в указанной эре используйте метод <xref:System.Globalization.DateTimeFormatInfo.GetEraName%2A?displayProperty=nameWithType>, чтобы получить индекс, соответствующий указанному названию эры.</span><span class="sxs-lookup"><span data-stu-id="2c0de-256">For dates in a specified era, use the <xref:System.Globalization.DateTimeFormatInfo.GetEraName%2A?displayProperty=nameWithType> method to retrieve the index that corresponds to a specified era name.</span></span> <span data-ttu-id="2c0de-257">Для этого необходимо, чтобы <xref:System.Globalization.JapaneseCalendar> был текущим календарем <xref:System.Globalization.CultureInfo> объекта, представляющего культуру ja-JP.</span><span class="sxs-lookup"><span data-stu-id="2c0de-257">This requires that the <xref:System.Globalization.JapaneseCalendar> be the current calendar of the <xref:System.Globalization.CultureInfo> object that represents the ja-JP culture.</span></span>  <span data-ttu-id="2c0de-258">(Этот метод работает также для <xref:System.Globalization.JapaneseLunisolarCalendar>, так как он поддерживает те же эры, что и <xref:System.Globalization.JapaneseCalendar>.) Этот подход показан в предыдущем примере.</span><span class="sxs-lookup"><span data-stu-id="2c0de-258">(This technique works for the <xref:System.Globalization.JapaneseLunisolarCalendar> as well, since it supports the same eras as the <xref:System.Globalization.JapaneseCalendar>.) The previous example illustrates this approach.</span></span>

### <a name="calendars-eras-and-date-ranges-relaxed-range-checks"></a><span data-ttu-id="2c0de-259">Календари, эры и диапазоны дат: нестрогие проверки диапазона</span><span class="sxs-lookup"><span data-stu-id="2c0de-259">Calendars, eras, and date ranges: Relaxed range checks</span></span>

<span data-ttu-id="2c0de-260">Во многом так же, как в отдельных календарях поддерживаются диапазоны дат, эры в классах <xref:System.Globalization.JapaneseCalendar> и <xref:System.Globalization.JapaneseLunisolarCalendar> также имеют поддерживаемые диапазоны.</span><span class="sxs-lookup"><span data-stu-id="2c0de-260">Very much like individual calendars have supported date ranges, eras in the <xref:System.Globalization.JapaneseCalendar> and <xref:System.Globalization.JapaneseLunisolarCalendar> classes also have supported ranges.</span></span> <span data-ttu-id="2c0de-261">Ранее в .NET использовались долгосрочные проверки диапазона эры, чтобы гарантировать, что дата, относящаяся к эре, была в диапазоне этой эры.</span><span class="sxs-lookup"><span data-stu-id="2c0de-261">Previously, .NET used strict era range checks to ensure that an era-specific date was within the range of that era.</span></span> <span data-ttu-id="2c0de-262">То есть, если дата находится за пределами диапазона указанной эры, метод создает исключение <xref:System.ArgumentOutOfRangeException>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-262">That is, if a date is outside of the range of the specified era, the method throws an <xref:System.ArgumentOutOfRangeException>.</span></span> <span data-ttu-id="2c0de-263">В настоящее время .NET по умолчанию использует ослабленную проверку по диапазонам.</span><span class="sxs-lookup"><span data-stu-id="2c0de-263">Currently, .NET uses relaxed ranged checking by default.</span></span> <span data-ttu-id="2c0de-264">Обновления для всех версий .NET предоставили более строгие проверки диапазона эры; попытка создать экземпляр даты, относящейся к эре, которая находится за пределами диапазона указанной эры "переполняет" до следующей эры, и исключение не создается.</span><span class="sxs-lookup"><span data-stu-id="2c0de-264">Updates to all versions of .NET introduced relaxed era range checks; the attempt to instantiate an era-specific date that is outside the range of the specified era "overflows" into the following era, and no exception is thrown.</span></span>

<span data-ttu-id="2c0de-265">В следующем примере предпринимается попытка создать экземпляр даты в 65th году эры Шова, которая началась 25 декабря 1926 и закончилась 7 января 1989.</span><span class="sxs-lookup"><span data-stu-id="2c0de-265">The following example attempts to instantiate a date in the 65th year of the Showa era, which began on December 25, 1926 and ended on January 7, 1989.</span></span> <span data-ttu-id="2c0de-266">Эта дата соответствует 9 января 1990, который находится вне диапазона эры Шова в <xref:System.Globalization.JapaneseCalendar>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-266">This date corresponds to January 9, 1990, which is outside the range of the Showa era in the <xref:System.Globalization.JapaneseCalendar>.</span></span> <span data-ttu-id="2c0de-267">Как видно из выходных данных примера, Дата, показанная в примере, — 9 января 1990 г. во втором году эры Хэйсэй.</span><span class="sxs-lookup"><span data-stu-id="2c0de-267">As the output from the example illustrates, the date displayed by the example is January 9, 1990, in the second year of the Heisei era.</span></span>

  [!code-csharp[Relaxed range checks](~/samples/snippets/standard/datetime/calendars/relaxed-range/cs/program.cs)]
  [!code-vb[Relaxed range checks](~/samples/snippets/standard/datetime/calendars/relaxed-range/vb/program.vb)]

<span data-ttu-id="2c0de-268">Если нежелательные проверки диапазона нежелательно, можно восстановить строгие проверки диапазона несколькими способами в зависимости от версии .NET, в которой выполняется приложение:</span><span class="sxs-lookup"><span data-stu-id="2c0de-268">If relaxed range checks are undesirable, you can restore strict range checks in a number of ways, depending on the version of .NET on which your application is running:</span></span>

- <span data-ttu-id="2c0de-269">**.NET Core:** В файл конфигурации *. netcore. Runtime. JSON* можно добавить следующий код:</span><span class="sxs-lookup"><span data-stu-id="2c0de-269">**.NET Core:** You can add the following to the *.netcore.runtime.json* config file:</span></span>

  ```json
  "runtimeOptions": {
    "configProperties": {
        "Switch.System.Globalization.EnforceJapaneseEraYearRanges": true
    }
  }
  ```

- <span data-ttu-id="2c0de-270">**.NET Framework 4,6 или более поздней версии:** Можно задать следующий параметр AppContext:</span><span class="sxs-lookup"><span data-stu-id="2c0de-270">**.NET Framework 4.6 or later:** You can set the following AppContext switch:</span></span>

  ```xml
  <?xml version="1.0" encoding="utf-8"?>
  <configuration>
    <runtime>
      <AppContextSwitchOverrides value="Switch.System.Globalization.EnforceJapaneseEraYearRanges=true" />
    </runtime>
  </configuration>
  ```

- <span data-ttu-id="2c0de-271">**.NET Framework 4.5.2 или более ранней версии:** Можно задать следующее значение реестра:</span><span class="sxs-lookup"><span data-stu-id="2c0de-271">**.NET Framework 4.5.2 or earlier:** You can set the following registry value:</span></span>

   |  |  |
   |--|--|
   |<span data-ttu-id="2c0de-272">Раздел</span><span class="sxs-lookup"><span data-stu-id="2c0de-272">Key</span></span> | <span data-ttu-id="2c0de-273">HKEY_LOCAL_MACHINE\Software\Microsoft\.Нетфрамеворк\аппконтекст</span><span class="sxs-lookup"><span data-stu-id="2c0de-273">HKEY_LOCAL_MACHINE\Software\Microsoft\.NETFramework\AppContext</span></span> |
   |<span data-ttu-id="2c0de-274">Название</span><span class="sxs-lookup"><span data-stu-id="2c0de-274">Name</span></span> | <span data-ttu-id="2c0de-275">Switch. System. Globalization. Енфорцежапанесирайеарранжес</span><span class="sxs-lookup"><span data-stu-id="2c0de-275">Switch.System.Globalization.EnforceJapaneseEraYearRanges</span></span> |
   |<span data-ttu-id="2c0de-276">Type</span><span class="sxs-lookup"><span data-stu-id="2c0de-276">Type</span></span> | <span data-ttu-id="2c0de-277">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="2c0de-277">REG_SZ</span></span> |
   |<span data-ttu-id="2c0de-278">значения</span><span class="sxs-lookup"><span data-stu-id="2c0de-278">Value</span></span> | <span data-ttu-id="2c0de-279">true</span><span class="sxs-lookup"><span data-stu-id="2c0de-279">true</span></span> |

<span data-ttu-id="2c0de-280">Если включена поддержка оптимистических проверок диапазона, в предыдущем примере возникает исключение <xref:System.ArgumentOutOfRangeException> и отображаются следующие выходные данные:</span><span class="sxs-lookup"><span data-stu-id="2c0de-280">With strict range checks enabled, the previous example throws an <xref:System.ArgumentOutOfRangeException> and displays the following output:</span></span>

```console
Unhandled Exception: System.ArgumentOutOfRangeException: Valid values are between 1 and 64, inclusive.
Parameter name: year
   at System.Globalization.GregorianCalendarHelper.GetYearOffset(Int32 year, Int32 era, Boolean throwOnError)
   at System.Globalization.GregorianCalendarHelper.ToDateTime(Int32 year, Int32 month, Int32 day, Int32 hour, Int32 minute, Int32 second, Int32 millisecond, Int32 era)
   at Example.Main()
```

### <a name="representing-dates-in-calendars-with-multiple-eras"></a><span data-ttu-id="2c0de-281">Представление дат в календарях с несколькими Эр</span><span class="sxs-lookup"><span data-stu-id="2c0de-281">Representing dates in calendars with multiple eras</span></span>

<span data-ttu-id="2c0de-282">Если объект <xref:System.Globalization.Calendar> поддерживает эры и является текущим календарем объекта <xref:System.Globalization.CultureInfo>, эра включается в строковое представление даты и времени для полной даты, длинной даты и шаблонов короткой даты.</span><span class="sxs-lookup"><span data-stu-id="2c0de-282">If a <xref:System.Globalization.Calendar> object supports eras and is the current calendar of a <xref:System.Globalization.CultureInfo> object, the era is included in the string representation of a date and time value for the full date and time, long date, and short date patterns.</span></span> <span data-ttu-id="2c0de-283">В следующем примере показаны эти шаблоны даты при текущем языке и региональных параметрах "Японский (Япония)" и японском текущем календаре.</span><span class="sxs-lookup"><span data-stu-id="2c0de-283">The following example displays these date patterns when the current culture is Japan (Japanese) and the current calendar is the Japanese calendar.</span></span>

[!code-csharp[Conceptual.Calendars#8](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/formatstrings1.cs#8)]
[!code-vb[Conceptual.Calendars#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/formatstrings1.vb#8)]

> [!WARNING]
> <span data-ttu-id="2c0de-284">Класс <xref:System.Globalization.JapaneseCalendar> является единственным классом календаря в .NET, который поддерживает даты более чем в одной эре и может быть текущим календарем <xref:System.Globalization.CultureInfo> объекта, в частности, объекта <xref:System.Globalization.CultureInfo>, который представляет японский язык (Япония).</span><span class="sxs-lookup"><span data-stu-id="2c0de-284">The <xref:System.Globalization.JapaneseCalendar> class is the only calendar class in .NET that both supports dates in more than one era and that can be the current calendar of a <xref:System.Globalization.CultureInfo> object - specifically, of a <xref:System.Globalization.CultureInfo> object that represents the Japanese (Japan) culture.</span></span>

<span data-ttu-id="2c0de-285">Для всех календарей описатель пользовательского формата "g" добавляет эру в результирующую строку.</span><span class="sxs-lookup"><span data-stu-id="2c0de-285">For all calendars, the "g" custom format specifier includes the era in the result string.</span></span> <span data-ttu-id="2c0de-286">В следующем примере используется строка пользовательского формата "мм-дд-гггг g", где в дату включается эра, при том что текущим является григорианский календарь.</span><span class="sxs-lookup"><span data-stu-id="2c0de-286">The following example uses the "MM-dd-yyyy g" custom format string to include the era in the result string when the current calendar is the Gregorian calendar.</span></span>

[!code-csharp[Conceptual.Calendars#9](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/formatstrings2.cs#9)]
[!code-vb[Conceptual.Calendars#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/formatstrings2.vb#9)]

<span data-ttu-id="2c0de-287">В случае когда строковое представление даты связано с календарем, который не является текущим, класс <xref:System.Globalization.Calendar> включает метод <xref:System.Globalization.Calendar.GetEra%2A?displayProperty=nameWithType>, который можно использовать с методами <xref:System.Globalization.Calendar.GetYear%2A?displayProperty=nameWithType>, <xref:System.Globalization.Calendar.GetMonth%2A?displayProperty=nameWithType> и <xref:System.Globalization.Calendar.GetDayOfMonth%2A?displayProperty=nameWithType> для однозначного указания даты и эры.</span><span class="sxs-lookup"><span data-stu-id="2c0de-287">In cases where the string representation of a date is expressed in a calendar that is not the current calendar, the <xref:System.Globalization.Calendar> class includes a <xref:System.Globalization.Calendar.GetEra%2A?displayProperty=nameWithType> method that can be used along with the <xref:System.Globalization.Calendar.GetYear%2A?displayProperty=nameWithType>, <xref:System.Globalization.Calendar.GetMonth%2A?displayProperty=nameWithType>, and <xref:System.Globalization.Calendar.GetDayOfMonth%2A?displayProperty=nameWithType> methods to unambiguously indicate a date as well as the era to which it belongs.</span></span> <span data-ttu-id="2c0de-288">В следующем примере для демонстрации используется класс <xref:System.Globalization.JapaneseLunisolarCalendar>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-288">The following example uses the <xref:System.Globalization.JapaneseLunisolarCalendar> class to provide an illustration.</span></span> <span data-ttu-id="2c0de-289">Однако следует учесть, что если требуется включить в результирующую строку понятное имя или сокращенное имя вместо целого числа для эры, необходимо создать объект <xref:System.Globalization.DateTimeFormatInfo> и сделать календарь <xref:System.Globalization.JapaneseCalendar> его текущим календарем.</span><span class="sxs-lookup"><span data-stu-id="2c0de-289">However, note that including a meaningful name or abbreviation instead of an integer for the era in the result string requires that you instantiate a <xref:System.Globalization.DateTimeFormatInfo> object and make <xref:System.Globalization.JapaneseCalendar> its current calendar.</span></span> <span data-ttu-id="2c0de-290">(Календарь <xref:System.Globalization.JapaneseLunisolarCalendar> не может быть текущим календарем для какого-либо языка и региональных параметров, но в данном случае эры этих двух календарей совпадают.)</span><span class="sxs-lookup"><span data-stu-id="2c0de-290">(The <xref:System.Globalization.JapaneseLunisolarCalendar> calendar cannot be the current calendar of any culture, but in this case the two calendars share the same eras.)</span></span>

[!code-csharp[Conceptual.Calendars#10](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.calendars/cs/formatstrings3.cs#10)]
[!code-vb[Conceptual.Calendars#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.calendars/vb/formatstrings3.vb#10)]

<span data-ttu-id="2c0de-291">В японских календарях первый год эры называется Ганнен (元年).</span><span class="sxs-lookup"><span data-stu-id="2c0de-291">In the Japanese calendars, the first year of an era is called Gannen (元年).</span></span> <span data-ttu-id="2c0de-292">Например, вместо эры 1 первый год эры Хэйсэй можно описать как эру Ганнен.</span><span class="sxs-lookup"><span data-stu-id="2c0de-292">For example, instead of Heisei 1, the first year of the Heisei era can be described as Heisei Gannen.</span></span> <span data-ttu-id="2c0de-293">.NET использует это соглашение в операциях форматирования для дат и времени, отформатированных со следующими стандартными или настраиваемыми строками формата даты и времени, когда они используются с <xref:System.Globalization.CultureInfo> объектом, представляющим язык и региональные параметры "ja-JP" с <xref:System.Globalization.JapaneseCalendar> см</span><span class="sxs-lookup"><span data-stu-id="2c0de-293">.NET adopts this convention in formatting operations for dates and times formatted with the following standard or custom date and time format strings when they are used with a <xref:System.Globalization.CultureInfo> object that represents the Japanese-Japan ("ja-JP") culture with the <xref:System.Globalization.JapaneseCalendar> class:</span></span>

- <span data-ttu-id="2c0de-294">[Шаблон длинной даты](../base-types/standard-date-and-time-format-strings.md#LongDate), обозначенный строкой стандартного формата даты и времени "D".</span><span class="sxs-lookup"><span data-stu-id="2c0de-294">[The long date pattern](../base-types/standard-date-and-time-format-strings.md#LongDate), indicated by the "D" standard date and time format string.</span></span>
- <span data-ttu-id="2c0de-295">[Шаблон полной даты длинного времени](../base-types/standard-date-and-time-format-strings.md#FullDateLongTime), обозначенный строкой стандартного формата даты и времени "F".</span><span class="sxs-lookup"><span data-stu-id="2c0de-295">[The full date long time pattern](../base-types/standard-date-and-time-format-strings.md#FullDateLongTime), indicated by the "F" standard date and time format string.</span></span>
- <span data-ttu-id="2c0de-296">[Шаблон полной даты и короткий формат времени](../base-types/standard-date-and-time-format-strings.md#FullDateShortTime), обозначенные строкой "f" стандартного формата даты и времени.</span><span class="sxs-lookup"><span data-stu-id="2c0de-296">[The full date short time pattern](../base-types/standard-date-and-time-format-strings.md#FullDateShortTime), indicated by the "f" standard date and time format string.</span></span>
- <span data-ttu-id="2c0de-297">[Шаблон "год/месяц](../base-types/standard-date-and-time-format-strings.md#YearMonth)", обозначенный строкой "y" или "y" стандартного формата даты и времени.</span><span class="sxs-lookup"><span data-stu-id="2c0de-297">[The year/month pattern](../base-types/standard-date-and-time-format-strings.md#YearMonth), indicated by the Y" or "y" standard date and time format string.</span></span>
- <span data-ttu-id="2c0de-298">[ [Строка настраиваемого формата даты и времени](../base-types/custom-date-and-time-format-strings.md)"ГГИ" 年 "" или "гги年".</span><span class="sxs-lookup"><span data-stu-id="2c0de-298">[The "ggy'年'" or "ggy年" [custom date and time format string](../base-types/custom-date-and-time-format-strings.md).</span></span>

<span data-ttu-id="2c0de-299">Например, в следующем примере отображается дата в первом году эры эры в <xref:System.Globalization.JapaneseCalendar>.</span><span class="sxs-lookup"><span data-stu-id="2c0de-299">For example, the following example displays a date in the first year of the Heisei era in the <xref:System.Globalization.JapaneseCalendar> .</span></span>

  [!code-csharp[gannen](~/samples/snippets/standard/datetime/calendars/gannen/cs/program.cs)]
  [!code-vb[gannen](~/samples/snippets/standard/datetime/calendars/gannen/vb/gannen-fmt.vb)]

<span data-ttu-id="2c0de-300">Если это поведение нежелательно в операциях форматирования, можно восстановить предыдущее поведение, которое всегда представляет первый год эры как "1", а не "Ганнен", выполнив следующие действия в зависимости от версии .NET:</span><span class="sxs-lookup"><span data-stu-id="2c0de-300">If this behavior is undesirable in formatting operations, you can restore the previous behavior, which always represents the first year of an era as “1” rather than “Gannen”, by doing the following, depending on the version of .NET:</span></span>

- <span data-ttu-id="2c0de-301">**.NET Core:** В файл конфигурации *. netcore. Runtime. JSON* можно добавить следующий код:</span><span class="sxs-lookup"><span data-stu-id="2c0de-301">**.NET Core:** You can add the following to the *.netcore.runtime.json* config file:</span></span>

  ```json
  "runtimeOptions": {
    "configProperties": {
        "Switch.System.Globalization.FormatJapaneseFirstYearAsANumber": true
    }
  }
  ```

- <span data-ttu-id="2c0de-302">**.NET Framework 4,6 или более поздней версии:** Можно задать следующий параметр AppContext:</span><span class="sxs-lookup"><span data-stu-id="2c0de-302">**.NET Framework 4.6 or later:** You can set the following AppContext switch:</span></span>

  ```xml
  <?xml version="1.0" encoding="utf-8"?>
  <configuration>
    <runtime>
      <AppContextSwitchOverrides value="Switch.System.Globalization.FormatJapaneseFirstYearAsANumber=true" />
    </runtime>
  </configuration>
  ```

- <span data-ttu-id="2c0de-303">**.NET Framework 4.5.2 или более ранней версии:** Можно задать следующее значение реестра:</span><span class="sxs-lookup"><span data-stu-id="2c0de-303">**.NET Framework 4.5.2 or earlier:** You can set the following registry value:</span></span>

   |  |  |
   |--|--|
   |<span data-ttu-id="2c0de-304">Раздел</span><span class="sxs-lookup"><span data-stu-id="2c0de-304">Key</span></span> | <span data-ttu-id="2c0de-305">HKEY_LOCAL_MACHINE\Software\Microsoft\.Нетфрамеворк\аппконтекст</span><span class="sxs-lookup"><span data-stu-id="2c0de-305">HKEY_LOCAL_MACHINE\Software\Microsoft\.NETFramework\AppContext</span></span> |
   |<span data-ttu-id="2c0de-306">Название</span><span class="sxs-lookup"><span data-stu-id="2c0de-306">Name</span></span> | <span data-ttu-id="2c0de-307">Switch. System. Globalization. Форматжапанесефирстеарасанумбер</span><span class="sxs-lookup"><span data-stu-id="2c0de-307">Switch.System.Globalization.FormatJapaneseFirstYearAsANumber</span></span> |
   |<span data-ttu-id="2c0de-308">Type</span><span class="sxs-lookup"><span data-stu-id="2c0de-308">Type</span></span> | <span data-ttu-id="2c0de-309">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="2c0de-309">REG_SZ</span></span> |
   |<span data-ttu-id="2c0de-310">значения</span><span class="sxs-lookup"><span data-stu-id="2c0de-310">Value</span></span> | <span data-ttu-id="2c0de-311">true</span><span class="sxs-lookup"><span data-stu-id="2c0de-311">true</span></span> |

<span data-ttu-id="2c0de-312">Если поддержка ганнен в операциях форматирования отключена, в предыдущем примере выводятся следующие выходные данные:</span><span class="sxs-lookup"><span data-stu-id="2c0de-312">With gannen support in formatting operations disabled, the previous example displays the following output:</span></span>

```console
Japanese calendar date: 平成1年8月18日 (Gregorian: Friday, August 18, 1989)
```

<span data-ttu-id="2c0de-313">Платформа .NET также была обновлена так, что операции синтаксического анализа даты и времени поддерживают строки, содержащие год, представленный как "1" или Ганнен.</span><span class="sxs-lookup"><span data-stu-id="2c0de-313">.NET has also been updated so that date and time parsing operations support strings that contain the year represented as either "1" or Gannen.</span></span> <span data-ttu-id="2c0de-314">Хотя это делать не нужно, можно восстановить предыдущее поведение, чтобы распознать только "1" в качестве первого года эры.</span><span class="sxs-lookup"><span data-stu-id="2c0de-314">Although you should not need to do this, you can restore the previous behavior to recognizes only “1” as the first year of an era.</span></span> <span data-ttu-id="2c0de-315">Это можно сделать следующим образом в зависимости от версии .NET:</span><span class="sxs-lookup"><span data-stu-id="2c0de-315">You can do this as follows, depending on the version of .NET:</span></span>

- <span data-ttu-id="2c0de-316">**.NET Core:** В файл конфигурации *. netcore. Runtime. JSON* можно добавить следующий код:</span><span class="sxs-lookup"><span data-stu-id="2c0de-316">**.NET Core:** You can add the following to the *.netcore.runtime.json* config file:</span></span>

  ```json
  "runtimeOptions": {
    "configProperties": {
        "Switch.System.Globalization.EnforceLegacyJapaneseDateParsing": true
    }
  }
  ```

- <span data-ttu-id="2c0de-317">**.NET Framework 4,6 или более поздней версии:** Можно задать следующий параметр AppContext:</span><span class="sxs-lookup"><span data-stu-id="2c0de-317">**.NET Framework 4.6 or later:** You can set the following AppContext switch:</span></span>

  ```xml
  <?xml version="1.0" encoding="utf-8"?>
  <configuration>
    <runtime>
      <AppContextSwitchOverrides value="Switch.System.Globalization.EnforceLegacyJapaneseDateParsing=true" />
    </runtime>
  </configuration>
  ```

- <span data-ttu-id="2c0de-318">**.NET Framework 4.5.2 или более ранней версии:** Можно задать следующее значение реестра:</span><span class="sxs-lookup"><span data-stu-id="2c0de-318">**.NET Framework 4.5.2 or earlier:** You can set the following registry value:</span></span>

   |  |  |
   |--|--|  
   |<span data-ttu-id="2c0de-319">Раздел</span><span class="sxs-lookup"><span data-stu-id="2c0de-319">Key</span></span> | <span data-ttu-id="2c0de-320">HKEY_LOCAL_MACHINE\Software\Microsoft\.Нетфрамеворк\аппконтекст</span><span class="sxs-lookup"><span data-stu-id="2c0de-320">HKEY_LOCAL_MACHINE\Software\Microsoft\.NETFramework\AppContext</span></span> |
   |<span data-ttu-id="2c0de-321">Название</span><span class="sxs-lookup"><span data-stu-id="2c0de-321">Name</span></span> | <span data-ttu-id="2c0de-322">Switch. System. Globalization. Енфорцелегацижапанеседатепарсинг</span><span class="sxs-lookup"><span data-stu-id="2c0de-322">Switch.System.Globalization.EnforceLegacyJapaneseDateParsing</span></span> |
   |<span data-ttu-id="2c0de-323">Type</span><span class="sxs-lookup"><span data-stu-id="2c0de-323">Type</span></span> | <span data-ttu-id="2c0de-324">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="2c0de-324">REG_SZ</span></span> |
   |<span data-ttu-id="2c0de-325">значения</span><span class="sxs-lookup"><span data-stu-id="2c0de-325">Value</span></span> | <span data-ttu-id="2c0de-326">true</span><span class="sxs-lookup"><span data-stu-id="2c0de-326">true</span></span> | 

## <a name="see-also"></a><span data-ttu-id="2c0de-327">См. также</span><span class="sxs-lookup"><span data-stu-id="2c0de-327">See also</span></span>

- [<span data-ttu-id="2c0de-328">Пошаговое руководство. Отображение дат в календарях, отличных от григорианского</span><span class="sxs-lookup"><span data-stu-id="2c0de-328">How to: Display dates in non-Gregorian calendars</span></span>](../../../docs/standard/base-types/how-to-display-dates-in-non-gregorian-calendars.md)
- [<span data-ttu-id="2c0de-329">Пример: служебная программа диапазона календарных недель</span><span class="sxs-lookup"><span data-stu-id="2c0de-329">Sample: Calendar week range utility</span></span>](https://code.msdn.microsoft.com/NET-Framework-4-Calendar-3360a84a)
- [<span data-ttu-id="2c0de-330">Класс Calendar</span><span class="sxs-lookup"><span data-stu-id="2c0de-330">Calendar class</span></span>](xref:System.Globalization.Calendar)
