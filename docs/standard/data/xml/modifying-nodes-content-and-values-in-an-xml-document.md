---
title: Изменение узлов, содержимого и значений в XML-документе
ms.date: 03/30/2017
ms.technology: dotnet-standard
ms.assetid: 761773e0-db72-4986-b9f5-a522213d8397
author: mairaw
ms.author: mairaw
ms.openlocfilehash: 976c34d72f9fcc89193658e50727a0ad365f2dd8
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "64647886"
---
# <a name="modifying-nodes-content-and-values-in-an-xml-document"></a><span data-ttu-id="f4fb5-102">Изменение узлов, содержимого и значений в XML-документе</span><span class="sxs-lookup"><span data-stu-id="f4fb5-102">Modifying Nodes, Content, and Values in an XML Document</span></span>
<span data-ttu-id="f4fb5-103">Существует множество способов изменения узлов и содержимого в документе.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-103">There are many ways you can modify the nodes and content in a document.</span></span> <span data-ttu-id="f4fb5-104">Можно выполнить следующие действия.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-104">You can:</span></span>  
  
- <span data-ttu-id="f4fb5-105">изменять значение узлов с помощью свойства <xref:System.Xml.XmlNode.Value%2A>;</span><span class="sxs-lookup"><span data-stu-id="f4fb5-105">Change the value of nodes using the <xref:System.Xml.XmlNode.Value%2A> property.</span></span>  
  
- <span data-ttu-id="f4fb5-106">изменять набор узлов в целом, заменяя узлы новыми.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-106">Modify an entire set of nodes by replacing the nodes with new nodes.</span></span> <span data-ttu-id="f4fb5-107">Это делается с помощью свойства <xref:System.Xml.XmlNode.InnerXml%2A>;</span><span class="sxs-lookup"><span data-stu-id="f4fb5-107">This is done using the <xref:System.Xml.XmlNode.InnerXml%2A> property.</span></span>  
  
- <span data-ttu-id="f4fb5-108">заменять существующие узлы новыми с помощью метода <xref:System.Xml.XmlNode.RemoveChild%2A>;</span><span class="sxs-lookup"><span data-stu-id="f4fb5-108">Replace existing nodes with new nodes using the <xref:System.Xml.XmlNode.RemoveChild%2A> method.</span></span>  
  
- <span data-ttu-id="f4fb5-109">добавлять в узлы дополнительные символы, наследующие от класса <xref:System.Xml.XmlCharacterData>, используя методы <xref:System.Xml.XmlCharacterData.AppendData%2A>, <xref:System.Xml.XmlCharacterData.InsertData%2A> или <xref:System.Xml.XmlCharacterData.ReplaceData%2A>;</span><span class="sxs-lookup"><span data-stu-id="f4fb5-109">Add additional characters to nodes that inherit from the <xref:System.Xml.XmlCharacterData> class using the <xref:System.Xml.XmlCharacterData.AppendData%2A>, <xref:System.Xml.XmlCharacterData.InsertData%2A>, or <xref:System.Xml.XmlCharacterData.ReplaceData%2A> methods.</span></span>  
  
- <span data-ttu-id="f4fb5-110">изменять содержимое путем удаления диапазона символов с помощью метода <xref:System.Xml.XmlCharacterData.DeleteData%2A> для типов узлов, наследующих от <xref:System.Xml.XmlCharacterData>.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-110">Modify the content by removing a range of characters using the <xref:System.Xml.XmlCharacterData.DeleteData%2A> method on node types that inherit from <xref:System.Xml.XmlCharacterData>.</span></span>  
  
 <span data-ttu-id="f4fb5-111">Изменить значение узла можно с помощью простого приема `node.Value = "new value";`.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-111">A simple technique for changing the value of a node is to use `node.Value = "new value";`.</span></span> <span data-ttu-id="f4fb5-112">В следующей таблице перечислены типы узлов, в которых работает эта строка кода, и указано, какие данные изменяются для этого типа узла.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-112">The following table lists the node types that this single line of code works on and exactly what data for that node type is changed.</span></span>  
  
|<span data-ttu-id="f4fb5-113">Тип узла</span><span class="sxs-lookup"><span data-stu-id="f4fb5-113">Node type</span></span>|<span data-ttu-id="f4fb5-114">Изменяемые данные</span><span class="sxs-lookup"><span data-stu-id="f4fb5-114">Data changed</span></span>|  
|---------------|------------------|  
|<span data-ttu-id="f4fb5-115">Атрибут</span><span class="sxs-lookup"><span data-stu-id="f4fb5-115">Attribute</span></span>|<span data-ttu-id="f4fb5-116">Значение атрибута.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-116">The value of the attribute.</span></span>|  
|<span data-ttu-id="f4fb5-117">CDATASection.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-117">CDATASection</span></span>|<span data-ttu-id="f4fb5-118">Содержимое CDATASection.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-118">The content of the CDATASection.</span></span>|  
|<span data-ttu-id="f4fb5-119">Комментарий</span><span class="sxs-lookup"><span data-stu-id="f4fb5-119">Comment</span></span>|<span data-ttu-id="f4fb5-120">Содержимое комментария.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-120">The content of the comment.</span></span>|  
|<span data-ttu-id="f4fb5-121">ProcessingInstruction;</span><span class="sxs-lookup"><span data-stu-id="f4fb5-121">ProcessingInstruction</span></span>|<span data-ttu-id="f4fb5-122">Содержимое, за исключением цели.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-122">The content, excluding the target.</span></span>|  
|<span data-ttu-id="f4fb5-123">Text</span><span class="sxs-lookup"><span data-stu-id="f4fb5-123">Text</span></span>|<span data-ttu-id="f4fb5-124">Содержимое текстового узла.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-124">The content of the text.</span></span>|  
|<span data-ttu-id="f4fb5-125">XmlDeclaration</span><span class="sxs-lookup"><span data-stu-id="f4fb5-125">XmlDeclaration</span></span>|<span data-ttu-id="f4fb5-126">Содержимое декларации, за исключением разметки `<?xml` и `?>`.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-126">The content of the declaration, excluding the `<?xml` and `?>` markup.</span></span>|  
|<span data-ttu-id="f4fb5-127">Whitespace</span><span class="sxs-lookup"><span data-stu-id="f4fb5-127">Whitespace</span></span>|<span data-ttu-id="f4fb5-128">Значение символа пробела.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-128">The value of the white space.</span></span> <span data-ttu-id="f4fb5-129">В качестве значения можно задать один из четырех различаемых в XML пробельных символов: пробел, табуляция, CR или LF.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-129">You can set the value to be one of the four recognized XML white space characters: space, tab, CR, or LF.</span></span>|  
|<span data-ttu-id="f4fb5-130">SignificantWhitespace</span><span class="sxs-lookup"><span data-stu-id="f4fb5-130">SignificantWhitespace</span></span>|<span data-ttu-id="f4fb5-131">Значение значащих пробелов.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-131">The value of the significant white space.</span></span> <span data-ttu-id="f4fb5-132">В качестве значения можно задать один из четырех различаемых в XML пробельных символов: пробел, табуляция, CR или LF.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-132">You can set the value to be one of the four recognized XML white space characters: space, tab, CR, or LF.</span></span>|  
  
 <span data-ttu-id="f4fb5-133">Типы узлов, не представленные в таблице, являются недопустимыми для установки значений.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-133">Any node type not listed in the table is not a valid node type to set a value on.</span></span> <span data-ttu-id="f4fb5-134">При установке значения в узле такого типа вызывается исключение <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-134">Setting a value on any other node type throws an <xref:System.InvalidOperationException>.</span></span>  
  
 <span data-ttu-id="f4fb5-135">Свойство <xref:System.Xml.XmlNode.InnerXml%2A> изменяет разметку дочерних узлов текущего узла.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-135">The <xref:System.Xml.XmlNode.InnerXml%2A> property changes the markup of the child nodes for the current node.</span></span> <span data-ttu-id="f4fb5-136">Задание этого свойства замещает дочерние узлы значением заданной строки, содержимое которой прошло синтаксический анализ.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-136">Setting this property replaces the child nodes with the parsed contents of the given string.</span></span> <span data-ttu-id="f4fb5-137">Синтаксический анализ выполняется в контексте текущего пространства имен.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-137">The parsing is done in the current namespace context.</span></span> <span data-ttu-id="f4fb5-138">Кроме того, свойство <xref:System.Xml.XmlNode.InnerXml%2A> удаляет избыточные декларации пространств имен.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-138">In addition, <xref:System.Xml.XmlNode.InnerXml%2A> removes redundant namespace declarations.</span></span> <span data-ttu-id="f4fb5-139">В результате после многочисленных операций вырезания и вставки размер документа не будет увеличиваться за счет избыточных деклараций пространств имен.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-139">As a result, numerous cut and paste operations do not increase the size of your document with redundant namespace declarations.</span></span> <span data-ttu-id="f4fb5-140">Пример кода, демонстрирующий влияние пространств имен на работу <xref:System.Xml.XmlNode.InnerXml%2A>, см. в свойстве <xref:System.Xml.XmlDocument.InnerXml%2A>.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-140">For a code example showing the effect of namespaces on the <xref:System.Xml.XmlNode.InnerXml%2A> operation, see the <xref:System.Xml.XmlDocument.InnerXml%2A> property.</span></span>  
  
 <span data-ttu-id="f4fb5-141">Использование методов <xref:System.Xml.XmlCharacterData.ReplaceData%2A> и <xref:System.Xml.XmlNode.RemoveChild%2A> возвращает замещенный или удаленный узел.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-141">When using the <xref:System.Xml.XmlCharacterData.ReplaceData%2A> and <xref:System.Xml.XmlNode.RemoveChild%2A> methods, the methods return the replaced or removed node.</span></span> <span data-ttu-id="f4fb5-142">Затем этот узел можно повторно вставить в другом месте модели XML DOM.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-142">This node can then be reinserted somewhere else in the XML Document Object Model (DOM).</span></span> <span data-ttu-id="f4fb5-143">Метод <xref:System.Xml.XmlCharacterData.ReplaceData%2A> выполняет двойную проверку узла, вставляемого в документ.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-143">The <xref:System.Xml.XmlCharacterData.ReplaceData%2A> method does two validation checks on the node being inserted into the document.</span></span> <span data-ttu-id="f4fb5-144">Первая проверка обеспечивает то, что узел становится дочерним для узла, который может иметь дочерние узлы такого типа.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-144">The first check ensures that the node is becoming a child of a node that can have child nodes of its type.</span></span> <span data-ttu-id="f4fb5-145">Вторая проверка обеспечивает то, что вставляемый узел не является предком узла, для которого он становится дочерним.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-145">The second check ensures that the node being inserted is not an ancestor of the node it is becoming a child of.</span></span> <span data-ttu-id="f4fb5-146">Несоблюдение любого из этих условий вызывает исключение <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-146">Violating either of these conditions throws an <xref:System.InvalidOperationException>.</span></span>  
  
 <span data-ttu-id="f4fb5-147">Допустимо добавлять дочерний узел, доступный только для чтения, в узел, поддерживающий изменение, или удалять из него.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-147">It is valid to add or remove a read-only child from a node that can be edited.</span></span> <span data-ttu-id="f4fb5-148">Однако при попытке изменить сам узел, доступный только для чтения, вызывается исключение <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-148">However, attempts to modify the read-only node itself throws an <xref:System.InvalidOperationException>.</span></span> <span data-ttu-id="f4fb5-149">Примером может служить изменение потомков узла <xref:System.Xml.XmlEntityReference>.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-149">An example of this is modifying the children of an <xref:System.Xml.XmlEntityReference> node.</span></span> <span data-ttu-id="f4fb5-150">Потомки доступны только для чтения, и их нельзя изменить.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-150">The children are read-only and cannot be modified.</span></span> <span data-ttu-id="f4fb5-151">Любая попытка изменить вызывает исключение <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="f4fb5-151">Any attempt to modify them throws an <xref:System.InvalidOperationException>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f4fb5-152">См. также</span><span class="sxs-lookup"><span data-stu-id="f4fb5-152">See also</span></span>

- [<span data-ttu-id="f4fb5-153">Модель объектов документов XML (DOM)</span><span class="sxs-lookup"><span data-stu-id="f4fb5-153">XML Document Object Model (DOM)</span></span>](../../../../docs/standard/data/xml/xml-document-object-model-dom.md)
