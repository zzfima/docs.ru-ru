---
title: –û–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–∏–º–≤–æ–ª–æ–≤ –≤ .NET
description: –°–≤–µ–¥–µ–Ω–∏—è –æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–∏–º–≤–æ–ª–æ–≤ –≤ .NET.
ms.date: 03/09/2020
no-loc:
- Rune
- char
- string
dev_langs:
- csharp
helpviewer_keywords:
- encoding, understanding
ms.openlocfilehash: 34b1577f8bcea80c1f41b6f9605bf47d132fdb4f
ms.sourcegitcommit: 07123a475af89b6da5bb6cc51ea40ab1e8a488f0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/24/2020
ms.locfileid: "80134443"
---
# <a name="character-encoding-in-net"></a><span data-ttu-id="cbb16-103">–ö–æ–¥–∏—Ä–æ–≤–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤ –≤ .NET</span><span class="sxs-lookup"><span data-stu-id="cbb16-103">Character encoding in .NET</span></span>

<span data-ttu-id="cbb16-104">–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –æ–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ —Å–∏—Å—Ç–µ–º–∞—Ö –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ .NET.</span><span class="sxs-lookup"><span data-stu-id="cbb16-104">This article provides an introduction to character encoding systems that are used by .NET.</span></span> <span data-ttu-id="cbb16-105">–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è, –∫–∞–∫ —Ç–∏–ø—ã <xref:System.String>, <xref:System.Char>, <xref:System.Text.Rune> –∏ <xref:System.Globalization.StringInfo> —Ä–∞–±–æ—Ç–∞—é—Ç —Å –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏ –Æ–Ω–∏–∫–æ–¥, UTF-16 –∏ UTF-8.</span><span class="sxs-lookup"><span data-stu-id="cbb16-105">The article explains how the <xref:System.String>, <xref:System.Char>, <xref:System.Text.Rune>, and <xref:System.Globalization.StringInfo> types work with Unicode, UTF-16, and UTF-8.</span></span>

<span data-ttu-id="cbb16-106">–¢–µ—Ä–º–∏–Ω *—Å–∏–º–≤–æ–ª* –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–¥–µ—Å—å –≤ –æ–±—â–µ–º —Å–º—ã—Å–ª–µ —Ç–æ–≥–æ, *—á—Ç–æ —á–∏—Ç–∞—Ç–µ–ª—å –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π —ç–ª–µ–º–µ–Ω—Ç*.</span><span class="sxs-lookup"><span data-stu-id="cbb16-106">The term *character* is used here in the general sense of *what a reader perceives as a single display element*.</span></span> <span data-ttu-id="cbb16-107">–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ —è–≤–ª—è—é—Ç—Å—è –±—É–∫–≤–∞ "–∞", —Å–∏–º–≤–æ–ª "@" –∏ —ç–º–æ–¥–∑–∏ "üêÇ".</span><span class="sxs-lookup"><span data-stu-id="cbb16-107">Common examples are the letter "a", the symbol "@", and the emoji "üêÇ".</span></span> <span data-ttu-id="cbb16-108">–ò–Ω–æ–≥–¥–∞ —Ç–æ, —á—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª, –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –≤ —Ä–∞–∑–¥–µ–ª–µ –æ [–∫–ª–∞—Å—Ç–µ—Ä–∞—Ö –≥—Ä–∞—Ñ–µ–º](#grapheme-clusters).</span><span class="sxs-lookup"><span data-stu-id="cbb16-108">Sometimes what looks like one character is actually composed of multiple independent display elements, as the section on [grapheme clusters](#grapheme-clusters) explains.</span></span>

## <a name="the-string-and-char-types"></a><span data-ttu-id="cbb16-109">–¢–∏–ø—ã string –∏ char</span><span class="sxs-lookup"><span data-stu-id="cbb16-109">The string and char types</span></span>

<span data-ttu-id="cbb16-110">–≠–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ [string](xref:System.String) –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∫–∞–∫–æ–π-—Ç–æ —Ç–µ–∫—Å—Ç.</span><span class="sxs-lookup"><span data-stu-id="cbb16-110">An instance of the [string](xref:System.String) class represents some text.</span></span> <span data-ttu-id="cbb16-111">–≠–∫–∑–µ–º–ø–ª—è—Ä `string` –ª–æ–≥–∏—á–µ—Å–∫–∏ —è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é 16-—Ä–∞–∑—Ä—è–¥–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –∫–∞–∂–¥–æ–µ –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã [char](xref:System.Char).</span><span class="sxs-lookup"><span data-stu-id="cbb16-111">A `string` is logically a sequence of 16-bit values, each of which is an instance of the [char](xref:System.Char) struct.</span></span> <span data-ttu-id="cbb16-112">–°–≤–æ–π—Å—Ç–≤–æ [string.Length](xref:System.String.Length) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `char` –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä–µ `string`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-112">The [string.Length](xref:System.String.Length) property returns the number of `char` instances in the `string` instance.</span></span>

<span data-ttu-id="cbb16-113">–°–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–≤–æ–¥–∏—Ç –∑–Ω–∞—á–µ–Ω–∏—è –≤ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–æ–π –Ω–æ—Ç–∞—Ü–∏–∏ –≤—Å–µ—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `char` –≤ `string`:</span><span class="sxs-lookup"><span data-stu-id="cbb16-113">The following sample function prints out the values in hexadecimal notation of all the `char` instances in a `string`:</span></span>

:::code language="csharp" source="snippets/character-encoding-introduction/csharp/PrintStringChars.cs" id="SnippetPrintChars":::

<span data-ttu-id="cbb16-114">–ü–µ—Ä–µ–¥–∞–π—Ç–µ —Å—Ç—Ä–æ–∫—É Hello —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:</span><span class="sxs-lookup"><span data-stu-id="cbb16-114">Pass the string "Hello" to this function, and you get the following output:</span></span>

```csharp
PrintChars("Hello");
```

```output
"Hello".Length = 5
s[0] = 'H' ('\u0048')
s[1] = 'e' ('\u0065')
s[2] = 'l' ('\u006c')
s[3] = 'l' ('\u006c')
s[4] = 'o' ('\u006f')
```

<span data-ttu-id="cbb16-115">–ö–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –æ–¥–Ω–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º `char`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-115">Each character is represented by a single `char` value.</span></span> <span data-ttu-id="cbb16-116">–≠—Ç–æ—Ç —à–∞–±–ª–æ–Ω –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —è–∑—ã–∫–æ–≤ –º–∏—Ä–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-116">That pattern holds true for most of the world's languages.</span></span> <span data-ttu-id="cbb16-117">–ù–∞–ø—Ä–∏–º–µ—Ä, –≤–æ—Ç –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–≤—É—Ö –∫–∏—Ç–∞–π—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∑–≤—É—á–∞—Ç –∫–∞–∫ *n«ê h«éo* –∏ –æ–∑–Ω–∞—á–∞—é—Ç *Hello*:</span><span class="sxs-lookup"><span data-stu-id="cbb16-117">For example, here's the output for two Chinese characters that sound like *n«ê h«éo* and mean *Hello*:</span></span>

```csharp
PrintChars("‰Ω†Â•Ω");
```

```output
"‰Ω†Â•Ω".Length = 2
s[0] = '‰Ω†' ('\u4f60')
s[1] = 'Â•Ω' ('\u597d')
```

<span data-ttu-id="cbb16-118">–û–¥–Ω–∞–∫–æ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —è–∑—ã–∫–æ–≤, —Å–∏–º–≤–æ–ª–æ–≤ –∏ —ç–º–æ–¥–∑–∏, —á—Ç–æ–±—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–≤–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ `char`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-118">However, for some languages and for some symbols and emoji, it takes two `char` instances to represent a single character.</span></span> <span data-ttu-id="cbb16-119">–ù–∞–ø—Ä–∏–º–µ—Ä, —Å—Ä–∞–≤–Ω–∏—Ç–µ —Å–∏–º–≤–æ–ª—ã –∏ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã `char` –≤ —Å–ª–æ–≤–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ–∑–Ω–∞—á–∞–µ—Ç *Osage* –Ω–∞ —è–∑—ã–∫–µ –æ—Å–µ–π–¥–∂:</span><span class="sxs-lookup"><span data-stu-id="cbb16-119">For example, compare the characters and `char` instances in the word that means *Osage* in the Osage language:</span></span>

```csharp
PrintChars("êìèêìòêìªêìòêìªêìü êíªêìü");
```

```output
"êìèêìòêìªêìòêìªêìü êíªêìü".Length = 17
s[0] = 'ÔøΩ' ('\ud801')
s[1] = 'ÔøΩ' ('\udccf')
s[2] = 'ÔøΩ' ('\ud801')
s[3] = 'ÔøΩ' ('\udcd8')
s[4] = 'ÔøΩ' ('\ud801')
s[5] = 'ÔøΩ' ('\udcfb')
s[6] = 'ÔøΩ' ('\ud801')
s[7] = 'ÔøΩ' ('\udcd8')
s[8] = 'ÔøΩ' ('\ud801')
s[9] = 'ÔøΩ' ('\udcfb')
s[10] = 'ÔøΩ' ('\ud801')
s[11] = 'ÔøΩ' ('\udcdf')
s[12] = ' ' ('\u0020')
s[13] = 'ÔøΩ' ('\ud801')
s[14] = 'ÔøΩ' ('\udcbb')
s[15] = 'ÔøΩ' ('\ud801')
s[16] = 'ÔøΩ' ('\udcdf')
```

<span data-ttu-id="cbb16-120">–í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –≤—ã—à–µ –ø—Ä–∏–º–µ—Ä–µ –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª, –∫—Ä–æ–º–µ –ø—Ä–æ–±–µ–ª–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –¥–≤—É–º—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ `char`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-120">In the preceding example, each character except the space is represented by two `char` instances.</span></span>

<span data-ttu-id="cbb16-121">–û–¥–∏–Ω —ç–º–æ–¥–∑–∏ –≤ –Æ–Ω–∏–∫–æ–¥–µ —Ç–∞–∫–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –¥–≤—É–º—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ `char`, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ —Å —ç–º–æ–¥–∑–∏ –≤–æ–ª–∞:</span><span class="sxs-lookup"><span data-stu-id="cbb16-121">A single Unicode emoji is also represented by two `char`s, as seen in the following example showing an ox emoji:</span></span>

```
"üêÇ".Length = 2
s[0] = 'ÔøΩ' ('\ud83d')
s[1] = 'ÔøΩ' ('\udc02')
```

<span data-ttu-id="cbb16-122">–í —ç—Ç–∏—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö –ø–æ–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ `string.Length`, –∫–æ—Ç–æ—Ä–æ–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `char`, –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤.</span><span class="sxs-lookup"><span data-stu-id="cbb16-122">These examples show that the value of `string.Length`, which indicates the number of `char` instances, doesn't necessarily indicate the number of displayed characters.</span></span> <span data-ttu-id="cbb16-123">–û–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä `char` —Å–∞–º –ø–æ —Å–µ–±–µ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–∏–º–≤–æ–ª.</span><span class="sxs-lookup"><span data-stu-id="cbb16-123">A single `char` instance by itself doesn't necessarily represent a character.</span></span>

<span data-ttu-id="cbb16-124">–ü–∞—Ä—ã `char`, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —Å –æ–¥–Ω–∏–º —Å–∏–º–≤–æ–ª–æ–º, –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è *—Å—É—Ä—Ä–æ–≥–∞—Ç–Ω—ã–º–∏ –ø–∞—Ä–∞–º–∏*.</span><span class="sxs-lookup"><span data-stu-id="cbb16-124">The `char` pairs that map to a single character are called *surrogate pairs*.</span></span> <span data-ttu-id="cbb16-125">–ß—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø –∏—Ö —Ä–∞–±–æ—Ç—ã, –≤–∞–º –Ω—É–∂–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π –Æ–Ω–∏–∫–æ–¥ –∏ UTF-16.</span><span class="sxs-lookup"><span data-stu-id="cbb16-125">To understand how they work, you need to understand Unicode and UTF-16 encoding.</span></span>

## <a name="unicode-code-points"></a><span data-ttu-id="cbb16-126">–ö–æ–¥–æ–≤—ã–µ —Ç–æ—á–∫–∏ –Æ–Ω–∏–∫–æ–¥–∞</span><span class="sxs-lookup"><span data-stu-id="cbb16-126">Unicode code points</span></span>

<span data-ttu-id="cbb16-127">–Æ–Ω–∏–∫–æ–¥¬†‚Äî —ç—Ç–æ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö –∏ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —è–∑—ã–∫–∞–º–∏ –∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏.</span><span class="sxs-lookup"><span data-stu-id="cbb16-127">Unicode is an international encoding standard for use on various platforms and with various languages and scripts.</span></span>

<span data-ttu-id="cbb16-128">–°—Ç–∞–Ω–¥–∞—Ä—Ç –Æ–Ω–∏–∫–æ–¥–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –±–æ–ª–µ–µ 1,1¬†–º–∏–ª–ª–∏–æ–Ω–∞ [–∫–æ–¥–æ–≤—ã—Ö —Ç–æ—á–µ–∫](https://www.unicode.org/glossary/#code_point).</span><span class="sxs-lookup"><span data-stu-id="cbb16-128">The Unicode Standard defines over 1.1 million [code points](https://www.unicode.org/glossary/#code_point).</span></span> <span data-ttu-id="cbb16-129">–ö–æ–¥–æ–≤–∞—è —Ç–æ—á–∫–∞¬†‚Äî —ç—Ç–æ —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç¬†0 –¥–æ `U+10FFFF` (–¥–µ—Å—è—Ç–∏—á–Ω–æ–µ —á–∏—Å–ª–æ¬†1¬†114¬†111).</span><span class="sxs-lookup"><span data-stu-id="cbb16-129">A code point is an integer value that can range from 0 to `U+10FFFF` (decimal 1,114,111).</span></span> <span data-ttu-id="cbb16-130">–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–¥–æ–≤—ã–µ —Ç–æ—á–∫–∏ –Ω–∞–∑–Ω–∞—á–∞—é—Ç—Å—è –±—É–∫–≤–∞–º, —Å–∏–º–≤–æ–ª–∞–º –∏–ª–∏ —ç–º–æ–¥–∑–∏.</span><span class="sxs-lookup"><span data-stu-id="cbb16-130">Some code points are assigned to letters, symbols, or emoji.</span></span> <span data-ttu-id="cbb16-131">–î—Ä—É–≥–∏–µ –Ω–∞–∑–Ω–∞—á–∞—é—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏—è–º, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Å–ø–æ—Å–æ–± –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏–ª–∏ —Å–∏–º–≤–æ–ª–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É.</span><span class="sxs-lookup"><span data-stu-id="cbb16-131">Others are assigned to actions that control how text or characters are displayed, such as advance to a new line.</span></span> <span data-ttu-id="cbb16-132">–ú–Ω–æ–≥–∏–µ –∫–æ–¥–æ–≤—ã–µ —Ç–æ—á–∫–∏ –µ—â–µ –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã.</span><span class="sxs-lookup"><span data-stu-id="cbb16-132">Many code points are not yet assigned.</span></span>

<span data-ttu-id="cbb16-133">–í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–¥–æ–≤—ã—Ö —Ç–æ—á–µ–∫ —Å–æ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã –Æ–Ω–∏–∫–æ–¥–∞, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è:</span><span class="sxs-lookup"><span data-stu-id="cbb16-133">Here are some examples of code point assignments, with links to Unicode charts in which they appear:</span></span>

|<span data-ttu-id="cbb16-134">Decimal</span><span class="sxs-lookup"><span data-stu-id="cbb16-134">Decimal</span></span>|<span data-ttu-id="cbb16-135">Hex</span><span class="sxs-lookup"><span data-stu-id="cbb16-135">Hex</span></span>       |<span data-ttu-id="cbb16-136">–ü—Ä–∏–º–µ—Ä</span><span class="sxs-lookup"><span data-stu-id="cbb16-136">Example</span></span>|<span data-ttu-id="cbb16-137">–û–ø–∏—Å–∞–Ω–∏–µ</span><span class="sxs-lookup"><span data-stu-id="cbb16-137">Description</span></span>|
|------:|----------|-------|-----------|
|<span data-ttu-id="cbb16-138">10</span><span class="sxs-lookup"><span data-stu-id="cbb16-138">10</span></span>     | `U+000A` |<span data-ttu-id="cbb16-139">–ù/–î</span><span class="sxs-lookup"><span data-stu-id="cbb16-139">N/A</span></span>| [<span data-ttu-id="cbb16-140">–ü–µ—Ä–µ–≤–æ–¥ —Å—Ç—Ä–æ–∫–∏</span><span class="sxs-lookup"><span data-stu-id="cbb16-140">LINE FEED</span></span>](https://www.unicode.org/charts/PDF/U0000.pdf) |
|<span data-ttu-id="cbb16-141">65</span><span class="sxs-lookup"><span data-stu-id="cbb16-141">65</span></span>     | `U+0061` | <span data-ttu-id="cbb16-142">–∞</span><span class="sxs-lookup"><span data-stu-id="cbb16-142">a</span></span> | [<span data-ttu-id="cbb16-143">–õ–∞—Ç–∏–Ω—Å–∫–∞—è —Å—Ç—Ä–æ—á–Ω–∞—è –±—É–∫–≤–∞ A</span><span class="sxs-lookup"><span data-stu-id="cbb16-143">LATIN SMALL LETTER A</span></span>](https://www.unicode.org/charts/PDF/U0000.pdf) |
|<span data-ttu-id="cbb16-144">562</span><span class="sxs-lookup"><span data-stu-id="cbb16-144">562</span></span>    | `U+0232` | <span data-ttu-id="cbb16-145">»≤</span><span class="sxs-lookup"><span data-stu-id="cbb16-145">»≤</span></span> | [<span data-ttu-id="cbb16-146">–õ–∞—Ç–∏–Ω—Å–∫–∞—è –∑–∞–≥–ª–∞–≤–Ω–∞—è –±—É–∫–≤–∞ Y —Å–æ –∑–Ω–∞–∫–æ–º –¥–æ–ª–≥–æ—Ç—ã</span><span class="sxs-lookup"><span data-stu-id="cbb16-146">LATIN CAPITAL LETTER Y WITH MACRON</span></span>](https://www.unicode.org/charts/PDF/U0180.pdf) |
|<span data-ttu-id="cbb16-147">68¬†675</span><span class="sxs-lookup"><span data-stu-id="cbb16-147">68,675</span></span> | `U+10C43`| <span data-ttu-id="cbb16-148">ê±É</span><span class="sxs-lookup"><span data-stu-id="cbb16-148">ê±É</span></span> | [<span data-ttu-id="cbb16-149">–î—Ä–µ–≤–Ω–µ—Ç—é—Ä–∫—Å–∫–∞—è –±—É–∫–≤–∞ (—è–∑—ã–∫ –æ—Ä—Ö–æ–Ω–æ-–µ–Ω–∏—Å–µ–π—Å–∫–∏—Ö –Ω–∞–¥–ø–∏—Å–µ–π)</span><span class="sxs-lookup"><span data-stu-id="cbb16-149">OLD TURKIC LETTER ORKHON AT</span></span>](https://www.unicode.org/charts/PDF/U10C00.pdf) |
|<span data-ttu-id="cbb16-150">127¬†801</span><span class="sxs-lookup"><span data-stu-id="cbb16-150">127,801</span></span>| `U+1F339`| <span data-ttu-id="cbb16-151">üåπ</span><span class="sxs-lookup"><span data-stu-id="cbb16-151">üåπ</span></span> | [<span data-ttu-id="cbb16-152">–≠–º–æ–¥–∑–∏ "–†–æ–∑–∞"</span><span class="sxs-lookup"><span data-stu-id="cbb16-152">ROSE emoji</span></span>](https://www.unicode.org/charts/PDF/U1F300.pdf) |

<span data-ttu-id="cbb16-153">–ö–æ–¥–æ–≤—ã–µ —Ç–æ—á–∫–∏ –æ–±—ã—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ `U+xxxx`, –≥–¥–µ `xxxx`¬†‚Äî —ç—Ç–æ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–æ–µ —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.</span><span class="sxs-lookup"><span data-stu-id="cbb16-153">Code points are customarily referred to by using the syntax `U+xxxx`, where `xxxx` is the hex-encoded integer value.</span></span>

<span data-ttu-id="cbb16-154">–í –ø—Ä–µ–¥–µ–ª–∞—Ö –≤—Å–µ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∫–æ–¥–æ–≤—ã—Ö —Ç–æ—á–µ–∫ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–∞ –ø–æ–¥–¥–∏–∞–ø–∞–∑–æ–Ω–∞:</span><span class="sxs-lookup"><span data-stu-id="cbb16-154">Within the full range of code points there are two subranges:</span></span>

* <span data-ttu-id="cbb16-155">**–û—Å–Ω–æ–≤–Ω–∞—è –º–Ω–æ–≥–æ—è–∑—ã–∫–æ–≤–∞—è –ø–ª–æ—Å–∫–æ—Å—Ç—å (BMP)** –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ `U+0000..U+FFFF`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-155">The **Basic Multilingual Plane (BMP)** in the range `U+0000..U+FFFF`.</span></span> <span data-ttu-id="cbb16-156">–≠—Ç–æ—Ç 16-—Ä–∞–∑—Ä—è–¥–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç 65¬†536¬†–∫–æ–¥–æ–≤—ã—Ö —Ç–æ—á–µ–∫. –ò—Ö –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –æ—Ö–≤–∞—Ç–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –º–∏—Ä–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º –ø–∏—Å—å–º–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-156">This 16-bit range provides 65,536 code points, enough to cover the majority of the world's writing systems.</span></span>
* <span data-ttu-id="cbb16-157">**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–¥–æ–≤—ã–µ —Ç–æ—á–∫–∏** –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ `U+10000..U+10FFFF`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-157">**Supplementary code points** in the range `U+10000..U+10FFFF`.</span></span> <span data-ttu-id="cbb16-158">–≠—Ç–æ—Ç 21-—Ä–∞–∑—Ä—è–¥–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª–µ–µ –º–∏–ª–ª–∏–æ–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤—ã—Ö —Ç–æ—á–µ–∫, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –º–µ–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —è–∑—ã–∫–æ–≤ –∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ü–µ–ª–µ–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ —ç–º–æ–¥–∑–∏.</span><span class="sxs-lookup"><span data-stu-id="cbb16-158">This 21-bit range provides more than a million additional code points that can be used for less well-known languages and other purposes such as emojis.</span></span>

<span data-ttu-id="cbb16-159">–ù–∞ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ö–µ–º–µ –ø–æ–∫–∞–∑–∞–Ω–∞ –≤–∑–∞–∏–º–æ—Å–≤—è–∑—å –º–µ–∂–¥—É BMP –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∫–æ–¥–æ–≤—ã–º–∏ —Ç–æ—á–∫–∞–º–∏.</span><span class="sxs-lookup"><span data-stu-id="cbb16-159">The following diagram illustrates the relationship between the BMP and the supplementary code points.</span></span>

:::image type="content" source="media/character-encoding-introduction/bmp-and-supplementary.svg" alt-text="BMP –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–¥–æ–≤—ã–µ —Ç–æ—á–∫–∏":::

## <a name="utf-16-code-units"></a><span data-ttu-id="cbb16-161">–ï–¥–∏–Ω–∏—Ü—ã –∫–æ–¥–∞ UTF-16</span><span class="sxs-lookup"><span data-stu-id="cbb16-161">UTF-16 code units</span></span>

<span data-ttu-id="cbb16-162">16-—Ä–∞–∑—Ä—è–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –Æ–Ω–∏–∫–æ–¥–∞ ([UTF-16](https://www.unicode.org/faq/utf_bom.html#UTF16))¬†‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 16-—Ä–∞–∑—Ä—è–¥–Ω—ã–µ *–µ–¥–∏–Ω–∏—Ü—ã –∫–æ–¥–∞* –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∫–æ–¥–æ–≤—ã—Ö —Ç–æ—á–µ–∫ –Æ–Ω–∏–∫–æ–¥–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-162">16-bit Unicode Transformation Format ([UTF-16](https://www.unicode.org/faq/utf_bom.html#UTF16)) is a character encoding system that uses 16-bit *code units* to represent Unicode code points.</span></span> <span data-ttu-id="cbb16-163">.NET –∏—Å–ø–æ–ª—å–∑—É–µ—Ç UTF-16 –¥–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –≤ `string`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-163">.NET uses UTF-16 to encode the text in a `string`.</span></span> <span data-ttu-id="cbb16-164">–≠–∫–∑–µ–º–ø–ª—è—Ä `char` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π 16-—Ä–∞–∑—Ä—è–¥–Ω—É—é –µ–¥–∏–Ω–∏—Ü—É –∫–æ–¥–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-164">A `char` instance represents a 16-bit code unit.</span></span>

<span data-ttu-id="cbb16-165">–û–¥–Ω–∞ 16-—Ä–∞–∑—Ä—è–¥–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –∫–æ–¥–∞ –º–æ–∂–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å –ª—é–±—É—é –∫–æ–¥–æ–≤—É—é —Ç–æ—á–∫—É –≤ 16-—Ä–∞–∑—Ä—è–¥–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–π –º–Ω–æ–≥–æ—è–∑—ã–∫–æ–≤–æ–π –ø–ª–æ—Å–∫–æ—Å—Ç–∏.</span><span class="sxs-lookup"><span data-stu-id="cbb16-165">A single 16-bit code unit can represent any code point in the 16-bit range of the Basic Multilingual Plane.</span></span> <span data-ttu-id="cbb16-166">–û–¥–Ω–∞–∫–æ –¥–ª—è –∫–æ–¥–æ–≤–æ–π —Ç–æ—á–∫–∏ –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–≤–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ `char`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-166">But for a code point in the supplementary range, two `char` instances are needed.</span></span>

## <a name="surrogate-pairs"></a><span data-ttu-id="cbb16-167">–°—É—Ä—Ä–æ–≥–∞—Ç–Ω—ã–µ –ø–∞—Ä—ã</span><span class="sxs-lookup"><span data-stu-id="cbb16-167">Surrogate pairs</span></span>

<span data-ttu-id="cbb16-168">–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–≤—É—Ö 16-—Ä–∞–∑—Ä—è–¥–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ –æ–¥–Ω–æ 21-—Ä–∞–∑—Ä—è–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è *—Å—É—Ä—Ä–æ–≥–∞—Ç–Ω—ã–º–∏ –∫–æ–¥–æ–≤—ã–º–∏ —Ç–æ—á–∫–∞–º–∏*, –æ—Ç `U+D800` –¥–æ `U+DFFF` (–¥–µ—Å—è—Ç–∏—á–Ω–æ–µ —á–∏—Å–ª–æ –æ—Ç¬†55¬†296 –¥–æ¬†57¬†343) –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ.</span><span class="sxs-lookup"><span data-stu-id="cbb16-168">The translation of two 16-bit values to a single 21-bit value is facilitated by a special range called the *surrogate code points*, from `U+D800` to `U+DFFF` (decimal 55,296 to 57,343), inclusive.</span></span>

<span data-ttu-id="cbb16-169">–ù–∞ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ö–µ–º–µ –ø–æ–∫–∞–∑–∞–Ω–∞ –≤–∑–∞–∏–º–æ—Å–≤—è–∑—å –º–µ–∂–¥—É BMP –∏ —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω—ã–º–∏ –∫–æ–¥–æ–≤—ã–º–∏ —Ç–æ—á–∫–∞–º–∏.</span><span class="sxs-lookup"><span data-stu-id="cbb16-169">The following diagram illustrates the relationship between the BMP and the surrogate code points.</span></span>

:::image type="content" source="media/character-encoding-introduction/bmp-and-surrogate.svg" alt-text="BMP –∏ —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω—ã–µ –∫–æ–¥–æ–≤—ã–µ —Ç–æ—á–∫–∏":::

<span data-ttu-id="cbb16-171">–ö–æ–≥–¥–∞ –∑–∞ *—Å—Ç–∞—Ä—à–µ–π –∑–∞–º–µ–Ω—è—é—â–µ–π* –∫–æ–¥–æ–≤–æ–π —Ç–æ—á–∫–æ–π (`U+D800..U+DBFF`) —Å—Ä–∞–∑—É –∂–µ —Å–ª–µ–¥—É–µ—Ç *–º–ª–∞–¥—à–∞—è –∑–∞–º–µ–Ω—è—é—â–∞—è* –∫–æ–¥–æ–≤–∞—è —Ç–æ—á–∫–∞ (`U+DC00..U+DFFF`), –ø–∞—Ä–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∫–æ–¥–æ–≤–∞—è —Ç–æ—á–∫–∞ —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–π —Ñ–æ—Ä–º—É–ª—ã:</span><span class="sxs-lookup"><span data-stu-id="cbb16-171">When a *high surrogate* code point (`U+D800..U+DBFF`) is immediately followed by a *low surrogate* code point (`U+DC00..U+DFFF`), the pair is interpreted as a supplementary code point by using the following formula:</span></span>

```
code point = 0x10000 +
  ((high surrogate code point - 0xD800) * 0x0400) +
  (low surrogate code point - 0xDC00)
```

<span data-ttu-id="cbb16-172">–í–æ—Ç —Ç–∞ –∂–µ —Ñ–æ—Ä–º—É–ª–∞, –Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –¥–µ—Å—è—Ç–∏—á–Ω–æ–π –Ω–æ—Ç–∞—Ü–∏–∏:</span><span class="sxs-lookup"><span data-stu-id="cbb16-172">Here's the same formula using decimal notation:</span></span>

```
code point = 65,536 +
  ((high surrogate code point - 55,296) * 1,024) +
  (low surrogate code point - 56,320)
```

<span data-ttu-id="cbb16-173">*–°—Ç–∞—Ä—à–∞—è* –∑–∞–º–µ–Ω—è—é—â–∞—è –∫–æ–¥–æ–≤–∞—è —Ç–æ—á–∫–∞ –Ω–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è —á–∏—Å–ª–∞ –≤—ã—à–µ, —á–µ–º *–º–ª–∞–¥—à–∞—è* –∑–∞–º–µ–Ω—è—é—â–∞—è –∫–æ–¥–æ–≤–∞—è —Ç–æ—á–∫–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-173">A *high* surrogate code point doesn't have a higher number value than a *low* surrogate code point.</span></span> <span data-ttu-id="cbb16-174">–°—Ç–∞—Ä—à–∞—è –∑–∞–º–µ–Ω—è—é—â–∞—è –∫–æ–¥–æ–≤–∞—è —Ç–æ—á–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "—Å—Ç–∞—Ä—à–µ–π", –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è 11¬†—Ä–∞–∑—Ä—è–¥–æ–≤ –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –ø–æ–ª–Ω–æ–≥–æ 21-—Ä–∞–∑—Ä—è–¥–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∫–æ–¥–æ–≤—ã—Ö —Ç–æ—á–µ–∫.</span><span class="sxs-lookup"><span data-stu-id="cbb16-174">The high surrogate code point is called "high" because it's used to calculate the higher-order 11 bits of the full 21-bit code point range.</span></span> <span data-ttu-id="cbb16-175">–ú–ª–∞–¥—à–∞—è –∑–∞–º–µ–Ω—è—é—â–∞—è –∫–æ–¥–æ–≤–∞—è —Ç–æ—á–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è 10¬†—Ä–∞–∑—Ä—è–¥–æ–≤ –Ω–∏–∑—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-175">The low surrogate code point is used to calculate the lower-order 10 bits.</span></span>

<span data-ttu-id="cbb16-176">–ù–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–¥–æ–≤–∞—è —Ç–æ—á–∫–∞, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω–æ–π –ø–∞—Ä–µ `0xD83C` –∏ `0xDF39`, –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</span><span class="sxs-lookup"><span data-stu-id="cbb16-176">For example, the actual code point that corresponds to the surrogate pair `0xD83C` and `0xDF39`  is computed as follows:</span></span>

```
actual = 0x10000 + ((0xD83C - 0xD800) * 0x0400) + (0xDF39 - 0xDC00)
       = 0x10000 + (          0x003C  * 0x0400) +           0x0339
       = 0x10000 +                      0xF000  +           0x0339
       = 0x1F339
```

<span data-ttu-id="cbb16-177">–í–æ—Ç —Ç–æ—Ç –∂–µ —Ä–∞—Å—á–µ—Ç, –Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –¥–µ—Å—è—Ç–∏—á–Ω–æ–π –Ω–æ—Ç–∞—Ü–∏–∏:</span><span class="sxs-lookup"><span data-stu-id="cbb16-177">Here's the same calculation using decimal notation:</span></span>

```
actual =  65,536 + ((55,356 - 55,296) * 1,024) + (57,145 - 56320)
       =  65,536 + (              60  * 1,024) +             825
       =  65,536 +                     61,440  +             825
       = 127,801
```

<span data-ttu-id="cbb16-178">–í –ø—Ä–µ–¥—ã–¥—É—â–µ–º –ø—Ä–∏–º–µ—Ä–µ –ø–æ–∫–∞–∑–∞–Ω–æ, —á—Ç–æ `"\ud83c\udf39"` —è–≤–ª—è–µ—Ç—Å—è –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π UTF-16 –∫–æ–¥–æ–≤–æ–π —Ç–æ—á–∫–∏ `U+1F339 ROSE ('üåπ')`, —É–ø–æ–º—è–Ω—É—Ç–æ–π —Ä–∞–Ω–µ–µ.</span><span class="sxs-lookup"><span data-stu-id="cbb16-178">The preceding example demonstrates that `"\ud83c\udf39"` is the UTF-16 encoding of the `U+1F339 ROSE ('üåπ')` code point mentioned earlier.</span></span>

## <a name="unicode-scalar-values"></a><span data-ttu-id="cbb16-179">–°–∫–∞–ª—è—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Æ–Ω–∏–∫–æ–¥–∞</span><span class="sxs-lookup"><span data-stu-id="cbb16-179">Unicode scalar values</span></span>

<span data-ttu-id="cbb16-180">–¢–µ—Ä–º–∏–Ω [—Å–∫–∞–ª—è—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Æ–Ω–∏–∫–æ–¥–∞](https://www.unicode.org/glossary/#unicode_scalar_value) –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫–æ –≤—Å–µ–º –∫–æ–¥–æ–≤—ã–º —Ç–æ—á–∫–∞–º, –∫—Ä–æ–º–µ —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω—ã—Ö.</span><span class="sxs-lookup"><span data-stu-id="cbb16-180">The term [Unicode scalar value](https://www.unicode.org/glossary/#unicode_scalar_value) refers to all code points other than the surrogate code points.</span></span> <span data-ttu-id="cbb16-181">–î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, —Å–∫–∞–ª—è—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ¬†‚Äî —ç—Ç–æ –ª—é–±–∞—è –∫–æ–¥–æ–≤–∞—è —Ç–æ—á–∫–∞, –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–∏—Å–≤–æ–µ–Ω —Å–∏–º–≤–æ–ª –∏–ª–∏ –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏—Å–≤–æ–µ–Ω —Å–∏–º–≤–æ–ª –≤ –±—É–¥—É—â–µ–º.</span><span class="sxs-lookup"><span data-stu-id="cbb16-181">In other words, a scalar value is any code point that is assigned a character or can be assigned a character in the future.</span></span> <span data-ttu-id="cbb16-182">–°–ª–æ–≤–æ "—Å–∏–º–≤–æ–ª" –∑–¥–µ—Å—å –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫–æ –≤—Å–µ–º—É, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–æ –∫–æ–¥–æ–≤–æ–π —Ç–æ—á–∫–µ, –≤–∫–ª—é—á–∞—è –¥–µ–π—Å—Ç–≤–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Å–ø–æ—Å–æ–± –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏–ª–∏ —Å–∏–º–≤–æ–ª–æ–≤.</span><span class="sxs-lookup"><span data-stu-id="cbb16-182">"Character" here refers to anything that can be assigned to a code point, which includes such things as actions that control how text or characters are displayed.</span></span>

<span data-ttu-id="cbb16-183">–ù–∞ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–π –Ω–∏–∂–µ —Å—Ö–µ–º–µ –ø–æ–∫–∞–∑–∞–Ω—ã —Ç–æ—á–∫–∏ –∫–æ–¥–∞ —Å–∫–∞–ª—è—Ä–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.</span><span class="sxs-lookup"><span data-stu-id="cbb16-183">The following diagram illustrates the scalar value code points.</span></span>

:::image type="content" source="media/character-encoding-introduction/scalar-values.svg" alt-text="–°–∫–∞–ª—è—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è":::

### <a name="the-opno-locrune-type-as-a-scalar-value"></a><span data-ttu-id="cbb16-185">–¢–∏–ø Rune –∫–∞–∫ —Å–∫–∞–ª—è—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</span><span class="sxs-lookup"><span data-stu-id="cbb16-185">The Rune type as a scalar value</span></span>

<span data-ttu-id="cbb16-186">–ù–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ .NET Core¬†3.0, —Ç–∏–ø <xref:System.Text.Rune?displayProperty=fullName> –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–∫–∞–ª—è—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Æ–Ω–∏–∫–æ–¥–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-186">Beginning with .NET Core 3.0, the <xref:System.Text.Rune?displayProperty=fullName> type represents a Unicode scalar value.</span></span> <span data-ttu-id="cbb16-187">**–¢–∏–ø `Rune` –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –≤ .NET Core¬†2.x –∏–ª–∏ .NET Framework¬†4.x.**</span><span class="sxs-lookup"><span data-stu-id="cbb16-187">**`Rune` is not available in .NET Core 2.x or .NET Framework 4.x.**</span></span>

<span data-ttu-id="cbb16-188">–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã `Rune` –ø—Ä–æ–≤–µ—Ä—è—é—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –¥–æ–ø—É—Å—Ç–∏–º—ã–º —Å–∫–∞–ª—è—Ä–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –Æ–Ω–∏–∫–æ–¥–∞. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –æ–Ω–∏ —Å–æ–∑–¥–∞—é—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.</span><span class="sxs-lookup"><span data-stu-id="cbb16-188">The `Rune` constructors validate that the resulting instance is a valid Unicode scalar value, otherwise they throw an exception.</span></span> <span data-ttu-id="cbb16-189">–í —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ –ø–æ–∫–∞–∑–∞–Ω –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä—ã `Rune`, —Ç–∞–∫ –∫–∞–∫ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∫–∞–ª—è—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:</span><span class="sxs-lookup"><span data-stu-id="cbb16-189">The following example shows code that successfully instantiates `Rune` instances because the input represents valid scalar values:</span></span>

:::code language="csharp" source="snippets/character-encoding-introduction/csharp/InstantiateRunes.cs" id="SnippetValid":::

<span data-ttu-id="cbb16-190">–í —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, —Ç–∞–∫ –∫–∞–∫ –∫–æ–¥–æ–≤–∞—è —Ç–æ—á–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω–æ–π –ø–∞—Ä—ã:</span><span class="sxs-lookup"><span data-stu-id="cbb16-190">The following example throws an exception because the code point is in the surrogate range and isn't part of a surrogate pair:</span></span>

:::code language="csharp" source="snippets/character-encoding-introduction/csharp/InstantiateRunes.cs" id="SnippetInvalidSurrogate":::

<span data-ttu-id="cbb16-191">–í —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, —Ç–∞–∫ –∫–∞–∫ –∫–æ–¥–æ–≤–∞—è —Ç–æ—á–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞:</span><span class="sxs-lookup"><span data-stu-id="cbb16-191">The following example throws an exception because the code point is beyond the supplementary range:</span></span>

:::code language="csharp" source="snippets/character-encoding-introduction/csharp/InstantiateRunes.cs" id="SnippetInvalidHigh":::

### <a name="opno-locrune-usage-example-changing-letter-case"></a><span data-ttu-id="cbb16-192">–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Rune: –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ –±—É–∫–≤</span><span class="sxs-lookup"><span data-stu-id="cbb16-192">Rune usage example: changing letter case</span></span>

<span data-ttu-id="cbb16-193">API, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `char` –∏ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–æ–¥–æ–≤–æ–π —Ç–æ—á–∫–æ–π, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è —Å–∫–∞–ª—è—Ä–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º, —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, –µ—Å–ª–∏ `char` –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω–æ–π –ø–∞—Ä–µ.</span><span class="sxs-lookup"><span data-stu-id="cbb16-193">An API that takes a `char` and assumes it is working with a code point that is a scalar value doesn't work correctly if the `char` is from a surrogate pair.</span></span> <span data-ttu-id="cbb16-194">–ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–ª–µ–¥—É—é—â–∏–π –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç <xref:System.Char.ToUpperInvariant%2A?displayProperty=nameWithType> –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ char –≤ string:</span><span class="sxs-lookup"><span data-stu-id="cbb16-194">For example, consider the following method that calls <xref:System.Char.ToUpperInvariant%2A?displayProperty=nameWithType> on each char in a string:</span></span>

:::code language="csharp" source="snippets/character-encoding-introduction/csharp/ConvertToUpper.cs" id="SnippetBadExample":::

<span data-ttu-id="cbb16-195">–ï—Å–ª–∏ `input` string —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç—Ä–æ—á–Ω—É—é –±—É–∫–≤—É –¥–µ–∑–µ—Ä–µ—Ç `er` (`êëâ`), —ç—Ç–æ—Ç –∫–æ–¥ –Ω–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –µ–µ –≤ –ø—Ä–æ–ø–∏—Å–Ω—É—é –±—É–∫–≤—É (`êê°`).</span><span class="sxs-lookup"><span data-stu-id="cbb16-195">If the `input` string contains the lowercase Deseret letter `er` (`êëâ`), this code won't convert it to uppercase (`êê°`).</span></span> <span data-ttu-id="cbb16-196">–ö–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç `char.ToUpperInvariant` –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω–æ–π –∫–æ–¥–æ–≤–æ–π —Ç–æ—á–∫–∏ `U+D801` –∏ `U+DC49`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-196">The code calls `char.ToUpperInvariant` separately on each surrogate code point, `U+D801` and `U+DC49`.</span></span> <span data-ttu-id="cbb16-197">–û–¥–Ω–∞–∫–æ –≤ —Å–∞–º–æ–π –∫–æ–¥–æ–≤–æ–π —Ç–æ—á–∫–µ `U+D801` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –µ–µ –∫–∞–∫ —Å—Ç—Ä–æ—á–Ω—É—é –±—É–∫–≤—É. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º `char.ToUpperInvariant` –æ—Å—Ç–∞–≤–ª—è–µ—Ç –µ–µ –∫–∞–∫ –µ—Å—Ç—å.</span><span class="sxs-lookup"><span data-stu-id="cbb16-197">But `U+D801` doesn't have enough information by itself to identify it as a lowercase letter, so `char.ToUpperInvariant` leaves it alone.</span></span> <span data-ttu-id="cbb16-198">–ò —Ç–∞–∫–∏–º –∂–µ –æ–±—Ä–∞–∑–æ–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `U+DC49`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-198">And it handles `U+DC49` the same way.</span></span> <span data-ttu-id="cbb16-199">–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –±—É–∫–≤–∞ "êëâ" –Ω–∏–∂–Ω–µ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞ –≤ `input` string –Ω–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ –±—É–∫–≤—É "êê°" –≤–µ—Ä—Ö–Ω–µ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-199">The result is that lowercase 'êëâ' in the `input` string doesn't get converted to uppercase 'êê°'.</span></span>

<span data-ttu-id="cbb16-200">–í–æ—Ç –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è string –≤ –≤–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä:</span><span class="sxs-lookup"><span data-stu-id="cbb16-200">Here are two options for correctly converting a string to uppercase:</span></span>

* <span data-ttu-id="cbb16-201">–í—ã–∑–æ–≤–∏—Ç–µ <xref:System.String.ToUpperInvariant%2A?displayProperty=nameWithType> –¥–ª—è –≤—Ö–æ–¥–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ string, –∞ –Ω–µ –≤ –∏—Ç–µ—Ä–∞—Ü–∏–∏ `char`-by-`char`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-201">Call <xref:System.String.ToUpperInvariant%2A?displayProperty=nameWithType> on the input string rather than iterating `char`-by-`char`.</span></span> <span data-ttu-id="cbb16-202">–ú–µ—Ç–æ–¥ `string.ToUpperInvariant` –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –æ–±–µ–∏–º —á–∞—Å—Ç—è–º –∫–∞–∂–¥–æ–π —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω–æ–π –ø–∞—Ä—ã, –ø–æ—ç—Ç–æ–º—É –æ–Ω –º–æ–∂–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ –∫–æ–¥–æ–≤—ã–µ —Ç–æ—á–∫–∏ –Æ–Ω–∏–∫–æ–¥–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-202">The `string.ToUpperInvariant` method has access to both parts of each surrogate pair, so it can handle all Unicode code points correctly.</span></span>
* <span data-ttu-id="cbb16-203">–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∏—Ç–µ—Ä–∞—Ü–∏—é —Å–∫–∞–ª—è—Ä–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Æ–Ω–∏–∫–æ–¥–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `Rune`, –∞ –Ω–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `char`, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ.</span><span class="sxs-lookup"><span data-stu-id="cbb16-203">Iterate through the Unicode scalar values as `Rune` instances instead of `char` instances, as shown in the following example.</span></span> <span data-ttu-id="cbb16-204">–¢–∞–∫ –∫–∞–∫ —ç–∫–∑–µ–º–ø–ª—è—Ä `Rune` —è–≤–ª—è–µ—Ç—Å—è –¥–æ–ø—É—Å—Ç–∏–º—ã–º —Å–∫–∞–ª—è—Ä–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –Æ–Ω–∏–∫–æ–¥–∞, –µ–≥–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å–∫–∞–ª—è—Ä–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º.</span><span class="sxs-lookup"><span data-stu-id="cbb16-204">Since a `Rune` instance is a valid Unicode scalar value, it can be passed to APIs that expect to operate on a scalar value.</span></span> <span data-ttu-id="cbb16-205">–ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–∑–≤–∞–≤ <xref:System.Text.Rune.ToUpperInvariant%2A?displayProperty=nameWithType>, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ, –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:</span><span class="sxs-lookup"><span data-stu-id="cbb16-205">For example, calling <xref:System.Text.Rune.ToUpperInvariant%2A?displayProperty=nameWithType> as shown in the following example gives correct results:</span></span>

  :::code language="csharp" source="snippets/character-encoding-introduction/csharp/ConvertToUpper.cs" id="SnippetGoodExample":::

### <a name="other-opno-locrune-apis"></a><span data-ttu-id="cbb16-206">–î—Ä—É–≥–∏–µ API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã Rune</span><span class="sxs-lookup"><span data-stu-id="cbb16-206">Other Rune APIs</span></span>

<span data-ttu-id="cbb16-207">–¢–∏–ø `Rune` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞–Ω–∞–ª–æ–≥–∏ –º–Ω–æ–≥–∏—Ö API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ `char`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-207">The `Rune` type exposes analogs of many of the `char` APIs.</span></span> <span data-ttu-id="cbb16-208">–ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–µ –Ω–∏–∂–µ –º–µ—Ç–æ–¥—ã –æ—Ç—Ä–∞–∂–∞—é—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Ç–∏–ø–∞ `char`:</span><span class="sxs-lookup"><span data-stu-id="cbb16-208">For example, the following methods mirror static APIs on the `char` type:</span></span>

* <xref:System.Text.Rune.IsLetter%2A?displayProperty=nameWithType>
* <xref:System.Text.Rune.IsWhiteSpace%2A?displayProperty=nameWithType>
* <xref:System.Text.Rune.IsLetterOrDigit%2A?displayProperty=nameWithType>
* <xref:System.Text.Rune.GetUnicodeCategory%2A?displayProperty=nameWithType>

<span data-ttu-id="cbb16-209">–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ —Å–∫–∞–ª—è—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ `Rune`, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–π—Å—Ç–≤–æ <xref:System.Text.Rune.Value%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="cbb16-209">To get the raw scalar value from a `Rune` instance, use the <xref:System.Text.Rune.Value%2A?displayProperty=nameWithType> property.</span></span>

<span data-ttu-id="cbb16-210">–ß—Ç–æ–±—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä `Rune` –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤ `char`, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ <xref:System.Text.Rune.ToString%2A?displayProperty=nameWithType> –∏–ª–∏ <xref:System.Text.Rune.EncodeToUtf16%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="cbb16-210">To convert a `Rune` instance back to a sequence of `char`s, use <xref:System.Text.Rune.ToString%2A?displayProperty=nameWithType> or the <xref:System.Text.Rune.EncodeToUtf16%2A?displayProperty=nameWithType> method.</span></span>

<span data-ttu-id="cbb16-211">–¢–∞–∫ –∫–∞–∫ –ª—é–±–æ–µ —Å–∫–∞–ª—è—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Æ–Ω–∏–∫–æ–¥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –æ–¥–Ω–∏–º —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º `char` –∏–ª–∏ —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω–æ–π –ø–∞—Ä–æ–π, –ª—é–±–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä `Rune` –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –Ω–µ –±–æ–ª–µ–µ —á–µ–º –¥–≤—É–º—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ `char`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-211">Since any Unicode scalar value is representable by a single `char` or by a surrogate pair, any `Rune` instance can be represented by at most 2 `char` instances.</span></span> <span data-ttu-id="cbb16-212">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ <xref:System.Text.Rune.Utf16SequenceLength%2A?displayProperty=nameWithType>, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `char`, —Ç—Ä–µ–±—É–µ–º—ã—Ö –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ `Rune`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-212">Use <xref:System.Text.Rune.Utf16SequenceLength%2A?displayProperty=nameWithType> to see how many `char` instances are required to represent a `Rune` instance.</span></span>

<span data-ttu-id="cbb16-213">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ —Ç–∏–ø–µ `Rune` .NET —Å–º. –≤ [—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ –ø–æ API –¥–ª—è `Rune`](xref:System.Text.Rune).</span><span class="sxs-lookup"><span data-stu-id="cbb16-213">For more information about the .NET `Rune` type, see the [`Rune` API reference](xref:System.Text.Rune).</span></span>

## <a name="grapheme-clusters"></a><span data-ttu-id="cbb16-214">–ö–ª–∞—Å—Ç–µ—Ä—ã –≥—Ä–∞—Ñ–µ–º</span><span class="sxs-lookup"><span data-stu-id="cbb16-214">Grapheme clusters</span></span>

<span data-ttu-id="cbb16-215">–¢–æ, —á—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª, –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–¥–æ–≤—ã—Ö —Ç–æ—á–µ–∫. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –±–æ–ª–µ–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–º —Ç–µ—Ä–º–∏–Ω–æ–º, –∫–æ—Ç–æ—Ä—ã–π —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ —Ç–µ—Ä–º–∏–Ω–∞ "—Å–∏–º–≤–æ–ª", —è–≤–ª—è–µ—Ç—Å—è [–∫–ª–∞—Å—Ç–µ—Ä –≥—Ä–∞—Ñ–µ–º](https://www.unicode.org/glossary/#grapheme_cluster).</span><span class="sxs-lookup"><span data-stu-id="cbb16-215">What looks like one character might result from a combination of multiple code points, so a more descriptive term that is often used in place of "character" is [grapheme cluster](https://www.unicode.org/glossary/#grapheme_cluster).</span></span> <span data-ttu-id="cbb16-216">–í .NET —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã–º —Ç–µ—Ä–º–∏–Ω–æ–º —è–≤–ª—è–µ—Ç—Å—è [—Ç–µ–∫—Å—Ç–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç](xref:System.Globalization.StringInfo.GetTextElementEnumerator%2A).</span><span class="sxs-lookup"><span data-stu-id="cbb16-216">The equivalent term in .NET is [text element](xref:System.Globalization.StringInfo.GetTextElementEnumerator%2A).</span></span>

<span data-ttu-id="cbb16-217">–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —ç–∫–∑–µ–º–ø–ª—è—Ä—ã `string` "–∞", "√°".</span><span class="sxs-lookup"><span data-stu-id="cbb16-217">Consider the `string` instances "a", "√°".</span></span> <span data-ttu-id="cbb16-218">"aÃÅ" –∏ "`üë©üèΩ‚Äçüöí`".</span><span class="sxs-lookup"><span data-stu-id="cbb16-218">"aÃÅ", and "`üë©üèΩ‚Äçüöí`".</span></span> <span data-ttu-id="cbb16-219">–ï—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –Æ–Ω–∏–∫–æ–¥–∞, –∫–∞–∂–¥—ã–π –∏–∑ —ç—Ç–∏—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `string` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ –æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∏–ª–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ –≥—Ä–∞—Ñ–µ–º.</span><span class="sxs-lookup"><span data-stu-id="cbb16-219">If your operating system handles them as specified by the Unicode standard, each of these `string` instances appears as a single text element or grapheme cluster.</span></span> <span data-ttu-id="cbb16-220">–û–¥–Ω–∞–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–≤–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –±–æ–ª–µ–µ —á–µ–º –æ–¥–Ω–æ–π –∫–æ–¥–æ–≤–æ–π —Ç–æ—á–∫–æ–π —Å–∫–∞–ª—è—Ä–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.</span><span class="sxs-lookup"><span data-stu-id="cbb16-220">But the last two are represented by more than one scalar value code point.</span></span>

* <span data-ttu-id="cbb16-221">–≠–∫–∑–µ–º–ø–ª—è—Ä string "a" –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –æ–¥–Ω–∏–º —Å–∫–∞–ª—è—Ä–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä `char`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-221">The string "a" is represented by one scalar value and contains one `char` instance.</span></span>

  * `U+0061 LATIN SMALL LETTER A`

* <span data-ttu-id="cbb16-222">–≠–∫–∑–µ–º–ø–ª—è—Ä string "√°" –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –æ–¥–Ω–∏–º —Å–∫–∞–ª—è—Ä–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä `char`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-222">The string "aÃÅ" is represented by one scalar value and contains one `char` instance.</span></span>

  * `U+00E1 LATIN SMALL LETTER E WITH ACUTE`

* <span data-ttu-id="cbb16-223">–≠–∫–∑–µ–º–ø–ª—è—Ä string "√°" –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫ –∂–µ, –∫–∞–∫ "√°", –Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –¥–≤—É–º—è —Å–∫–∞–ª—è—Ä–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–≤–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ `char`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-223">The string "aÃÅ" looks the same as "aÃÅ" but is represented by two scalar values and contains two `char` instances.</span></span>

  * `U+0065 LATIN SMALL LETTER A`
  * `U+0301 COMBINING ACUTE ACCENT`

* <span data-ttu-id="cbb16-224">–ù–∞–∫–æ–Ω–µ—Ü, —ç–∫–∑–µ–º–ø–ª—è—Ä string "`üë©üèΩ‚Äçüöí`" –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω —á–µ—Ç—ã—Ä—å–º—è —Å–∫–∞–ª—è—Ä–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ–º—å —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `char`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-224">Finally, the string "`üë©üèΩ‚Äçüöí`" is represented by four scalar values and contains seven `char` instances.</span></span>

  * <span data-ttu-id="cbb16-225">`U+1F469 WOMAN` (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω–∞—è –ø–∞—Ä–∞);</span><span class="sxs-lookup"><span data-stu-id="cbb16-225">`U+1F469 WOMAN` (supplementary range, requires a surrogate pair)</span></span>
  * <span data-ttu-id="cbb16-226">`U+1F3FD EMOJI MODIFIER FITZPATRICK TYPE-4` (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω–∞—è –ø–∞—Ä–∞);</span><span class="sxs-lookup"><span data-stu-id="cbb16-226">`U+1F3FD EMOJI MODIFIER FITZPATRICK TYPE-4` (supplementary range, requires a surrogate pair)</span></span>
  * `U+200D ZERO WIDTH JOINER`
  * <span data-ttu-id="cbb16-227">`U+1F692 FIRE ENGINE` (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω–∞—è –ø–∞—Ä–∞).</span><span class="sxs-lookup"><span data-stu-id="cbb16-227">`U+1F692 FIRE ENGINE` (supplementary range, requires a surrogate pair)</span></span>

<span data-ttu-id="cbb16-228">–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∏–∑ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã—Ö –≤—ã—à–µ –ø—Ä–∏–º–µ—Ä–∞—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–∏–∞–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞–∫–æ–≤ –∏–ª–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–æ–Ω–∞ –∫–æ–∂–∏, –∫–æ–¥–æ–≤–∞—è —Ç–æ—á–∫–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –Ω–∞ —ç–∫—Ä–∞–Ω–µ.</span><span class="sxs-lookup"><span data-stu-id="cbb16-228">In some of the preceding examples - such as the combining accent modifier or the skin tone modifier - the code point does not display as a standalone element on the screen.</span></span> <span data-ttu-id="cbb16-229">–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω–∞ —Å–ª—É–∂–∏—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –¥–æ –Ω–µ–≥–æ.</span><span class="sxs-lookup"><span data-stu-id="cbb16-229">Rather, it serves to modify the appearance of a text element that came before it.</span></span> <span data-ttu-id="cbb16-230">–í —ç—Ç–∏—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö –ø–æ–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–∫–∞–ª—è—Ä–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, —á—Ç–æ–±—ã —Å–æ—Å—Ç–∞–≤–∏—Ç—å –æ–¥–∏–Ω "—Å–∏–º–≤–æ–ª" –∏–ª–∏ "–∫–ª–∞—Å—Ç–µ—Ä –≥—Ä–∞—Ñ–µ–º".</span><span class="sxs-lookup"><span data-stu-id="cbb16-230">These examples show that it might take multiple scalar values to make up what we think of as a single "character," or "grapheme cluster."</span></span>

<span data-ttu-id="cbb16-231">–ß—Ç–æ–±—ã –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –∫–ª–∞—Å—Ç–µ—Ä—ã –≥—Ä–∞—Ñ–µ–º –¥–ª—è `string`, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª–∞—Å—Å <xref:System.Globalization.StringInfo>, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –Ω–∏–∂–µ –ø—Ä–∏–º–µ—Ä–µ.</span><span class="sxs-lookup"><span data-stu-id="cbb16-231">To enumerate the grapheme clusters of a `string`, use the <xref:System.Globalization.StringInfo> class as shown in the following example.</span></span> <span data-ttu-id="cbb16-232">–ï—Å–ª–∏ –≤—ã –∑–Ω–∞–∫–æ–º—ã —Å Swift, —Ç–∏–ø `StringInfo` .NET –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ –ø–æ—Ö–æ–∂ –Ω–∞ [—Ç–∏–ø `character` Swift](https://developer.apple.com/documentation/swift/character).</span><span class="sxs-lookup"><span data-stu-id="cbb16-232">If you're familiar with Swift, the .NET `StringInfo` type is conceptually similar to [Swift's `character` type](https://developer.apple.com/documentation/swift/character).</span></span>

### <a name="example-count-opno-locchar-opno-locrune-and-text-element-instances"></a><span data-ttu-id="cbb16-233">–ü—Ä–∏–º–µ—Ä: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ char, Rune –∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤</span><span class="sxs-lookup"><span data-stu-id="cbb16-233">Example: count char, Rune, and text element instances</span></span>

<span data-ttu-id="cbb16-234">–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö API .NET –∫–ª–∞—Å—Ç–µ—Ä –≥—Ä–∞—Ñ–µ–º –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è *—Ç–µ–∫—Å—Ç–æ–≤—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º*.</span><span class="sxs-lookup"><span data-stu-id="cbb16-234">In .NET APIs, a grapheme cluster is called a *text element*.</span></span> <span data-ttu-id="cbb16-235">–ü—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –Ω–∏–∂–µ –º–µ—Ç–æ–¥ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É `char`, `Rune` –∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ `string`:</span><span class="sxs-lookup"><span data-stu-id="cbb16-235">The following method demonstrates the differences between `char`, `Rune`, and text element instances in a `string`:</span></span>

:::code language="csharp" source="snippets/character-encoding-introduction/csharp/CountTextElements.cs" id="SnippetCountMethod":::

:::code language="csharp" source="snippets/character-encoding-introduction/csharp/CountTextElements.cs" id="SnippetCallCountMethod":::

<span data-ttu-id="cbb16-236">–ï—Å–ª–∏ –≤—ã –∑–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –≤ .NET Framework –∏–ª–∏ .NET Core¬†3.1 –∏–ª–∏ –±–æ–ª–µ–µ —Ä–∞–Ω–Ω–µ–π –≤–µ—Ä—Å–∏–∏, –¥–ª—è —ç–º–æ–¥–∑–∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è `4` —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-236">If you run this code in .NET Framework or .NET Core 3.1 or earlier, the text element count for the emoji shows `4`.</span></span> <span data-ttu-id="cbb16-237">–≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –æ—à–∏–±–∫–æ–π –≤ –∫–ª–∞—Å—Å–µ `StringInfo`, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ .NET¬†5.</span><span class="sxs-lookup"><span data-stu-id="cbb16-237">That is due to a bug in the `StringInfo` class that is fixed in .NET 5.</span></span>

### <a name="example-splitting-opno-locstring-instances"></a><span data-ttu-id="cbb16-238">–ü—Ä–∏–º–µ—Ä: —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ string</span><span class="sxs-lookup"><span data-stu-id="cbb16-238">Example: splitting string instances</span></span>

<span data-ttu-id="cbb16-239">–ü—Ä–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `string` –Ω–µ —Ä–∞–∑–¥–µ–ª—è–π—Ç–µ —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω—ã–µ –ø–∞—Ä—ã –∏ –∫–ª–∞—Å—Ç–µ—Ä—ã –≥—Ä–∞—Ñ–µ–º.</span><span class="sxs-lookup"><span data-stu-id="cbb16-239">When splitting `string` instances, avoid splitting surrogate pairs and grapheme clusters.</span></span> <span data-ttu-id="cbb16-240">–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –Ω–∏–∂–µ –ø—Ä–∏–º–µ—Ä –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª—è—Ç—å —Ä–∞–∑—Ä—ã–≤—ã —Å—Ç—Ä–æ–∫ —á–µ—Ä–µ–∑ –∫–∞–∂–¥—ã–µ 10¬†—Å–∏–º–≤–æ–ª–æ–≤ –≤ string.</span><span class="sxs-lookup"><span data-stu-id="cbb16-240">Consider the following example of incorrect code, which intends to insert line breaks every 10 characters in a string:</span></span>

:::code language="csharp" source="snippets/character-encoding-introduction/csharp/InsertNewlines.cs" id="SnippetBadExample":::

<span data-ttu-id="cbb16-241">–¢–∞–∫ –∫–∞–∫ —ç—Ç–æ—Ç –∫–æ–¥ –ø–µ—Ä–µ—á–∏—Å–ª—è–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä—ã `char`, —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω–∞—è –ø–∞—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç –≥—Ä–∞–Ω–∏—Ü—É¬†10-`char`, –±—É–¥–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –∏ –º–µ–∂–¥—É –Ω–∏–º–∏ –±—É–¥–µ—Ç –≤–≤–µ–¥–µ–Ω–∞ –Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-241">Because this code enumerates `char` instances, a surrogate pair that happens to straddle a 10-`char` boundary will be split and a newline injected between them.</span></span> <span data-ttu-id="cbb16-242">–≠—Ç–∞ –≤—Å—Ç–∞–≤–∫–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–∫ –∫–∞–∫ —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω—ã–µ –∫–æ–¥–æ–≤—ã–µ —Ç–æ—á–∫–∏ –∏–º–µ—é—Ç —Å–º—ã—Å–ª —Ç–æ–ª—å–∫–æ –∫–∞–∫ –ø–∞—Ä—ã.</span><span class="sxs-lookup"><span data-stu-id="cbb16-242">This insertion introduces data corruption, because surrogate code points are meaningful only as pairs.</span></span>

<span data-ttu-id="cbb16-243">–ü—Ä–∏ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `Rune` (—Å–∫–∞–ª—è—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è) –≤–º–µ—Å—Ç–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `char` –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è.</span><span class="sxs-lookup"><span data-stu-id="cbb16-243">The potential for data corruption isn't eliminated if you enumerate `Rune` instances (scalar values) instead of `char` instances.</span></span> <span data-ttu-id="cbb16-244">–ù–∞–±–æ—Ä —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `Rune` –º–æ–∂–µ—Ç —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–ª–∞—Å—Ç–µ—Ä –≥—Ä–∞—Ñ–µ–º, –∫–æ—Ç–æ—Ä—ã–π –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –≥—Ä–∞–Ω–∏—Ü—É 10-`char`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-244">A set of `Rune` instances might make up a grapheme cluster that straddles a 10-`char` boundary.</span></span> <span data-ttu-id="cbb16-245">–ï—Å–ª–∏ –Ω–∞–±–æ—Ä –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –≥—Ä–∞—Ñ–µ–º —Ä–∞–∑–¥–µ–ª–µ–Ω, –æ–Ω –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–Ω.</span><span class="sxs-lookup"><span data-stu-id="cbb16-245">If the grapheme cluster set is split up, it can't be interpreted correctly.</span></span>

<span data-ttu-id="cbb16-246">–õ—É—á—à–∏–º –ø–æ–¥—Ö–æ–¥–æ–º —è–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ string –ø—É—Ç–µ–º –ø–æ–¥—Å—á–µ—Ç–∞ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –≥—Ä–∞—Ñ–µ–º –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –Ω–∏–∂–µ –ø—Ä–∏–º–µ—Ä–µ.</span><span class="sxs-lookup"><span data-stu-id="cbb16-246">A better approach is to break the string by counting grapheme clusters, or text elements, as in the following example:</span></span>

:::code language="csharp" source="snippets/character-encoding-introduction/csharp/InsertNewlines.cs" id="SnippetGoodExample":::

<span data-ttu-id="cbb16-247">–û–¥–Ω–∞–∫–æ, –∫–∞–∫ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å —Ä–∞–Ω–µ–µ, –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö .NET, –æ—Ç–ª–∏—á–Ω—ã—Ö –æ—Ç .NET¬†5, –∫–ª–∞—Å—Å `StringInfo` –º–æ–∂–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–ª–∞—Å—Ç–µ—Ä—ã –≥—Ä–∞—Ñ–µ–º.</span><span class="sxs-lookup"><span data-stu-id="cbb16-247">As noted earlier, however, in implementations of .NET other than .NET 5, the `StringInfo` class might handle some grapheme clusters incorrectly.</span></span>

## <a name="utf-8-and-utf-32"></a><span data-ttu-id="cbb16-248">UTF-8 –∏ UTF-32</span><span class="sxs-lookup"><span data-stu-id="cbb16-248">UTF-8 and UTF-32</span></span>

<span data-ttu-id="cbb16-249">–í –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö –æ—Å–Ω–æ–≤–Ω–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ —É–¥–µ–ª—è–ª–æ—Å—å UTF-16, –ø–æ—Ç–æ–º—É —á—Ç–æ –∏–º–µ–Ω–Ω–æ —ç—Ç—É –∫–æ–¥–∏—Ä–æ–≤–∫—É .NET –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `string`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-249">The preceding sections focused on UTF-16 because that's what .NET uses to encode `string` instances.</span></span> <span data-ttu-id="cbb16-250">–°—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –¥—Ä—É–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –Æ–Ω–∏–∫–æ–¥–∞: [UTF-8](https://www.unicode.org/faq/utf_bom.html#UTF8) –∏ [UTF-32](https://www.unicode.org/faq/utf_bom.html#UTF32).</span><span class="sxs-lookup"><span data-stu-id="cbb16-250">There are other encoding systems for Unicode - [UTF-8](https://www.unicode.org/faq/utf_bom.html#UTF8) and [UTF-32](https://www.unicode.org/faq/utf_bom.html#UTF32).</span></span> <span data-ttu-id="cbb16-251">–≠—Ç–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç 8-—Ä–∞–∑—Ä—è–¥–Ω—ã–µ –∏ 32-—Ä–∞–∑—Ä—è–¥–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã –∫–æ–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.</span><span class="sxs-lookup"><span data-stu-id="cbb16-251">These encodings use 8-bit code units and 32-bit code units, respectively.</span></span>

<span data-ttu-id="cbb16-252">–ö–∞–∫ –∏ –≤ —Å–∏—Å—Ç–µ–º–µ UTF-16, –¥–ª—è UTF-8 —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –µ–¥–∏–Ω–∏—Ü –∫–æ–¥–∞, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∫–∞–ª—è—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Æ–Ω–∏–∫–æ–¥–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-252">Like UTF-16, UTF-8 requires multiple code units to represent some Unicode scalar values.</span></span> <span data-ttu-id="cbb16-253">UTF-32 –º–æ–∂–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å –ª—é–±–æ–µ —Å–∫–∞–ª—è—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –æ–¥–Ω–æ–π 32-—Ä–∞–∑—Ä—è–¥–Ω–æ–π –µ–¥–∏–Ω–∏—Ü–µ –∫–æ–¥–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-253">UTF-32 can represent any scalar value in a single 32-bit code unit.</span></span>

<span data-ttu-id="cbb16-254">–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏—Ö, –∫–∞–∫ –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –∫–æ–¥–æ–≤–∞—è —Ç–æ—á–∫–∞ –Æ–Ω–∏–∫–æ–¥–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –≤ –∫–∞–∂–¥–æ–π –∏–∑ —ç—Ç–∏—Ö —Ç—Ä–µ—Ö —Å–∏—Å—Ç–µ–º –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –Æ–Ω–∏–∫–æ–¥–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-254">Here are some examples showing how the same Unicode code point is represented in each of these three Unicode encoding systems:</span></span>

```
Scalar: U+0061 LATIN SMALL LETTER A ('a')
UTF-8 : [ 61 ]           (1x  8-bit code unit  = 8 bits total)
UTF-16: [ 0061 ]         (1x 16-bit code unit  = 16 bits total)
UTF-32: [ 00000061 ]     (1x 32-bit code unit  = 32 bits total)

Scalar: U+0429 CYRILLIC CAPITAL LETTER SHCHA ('–©')
UTF-8 : [ D0 A9 ]        (2x  8-bit code units = 16 bits total)
UTF-16: [ 0429 ]         (1x 16-bit code unit  = 16 bits total)
UTF-32: [ 00000429 ]     (1x 32-bit code unit  = 32 bits total)

Scalar: U+A992 JAVANESE LETTER GA ('Í¶í')
UTF-8 : [ EA A6 92 ]     (3x  8-bit code units = 24 bits total)
UTF-16: [ A992 ]         (1x 16-bit code unit  = 16 bits total)
UTF-32: [ 0000A992 ]     (1x 32-bit code unit  = 32 bits total)

Scalar: U+104CC OSAGE CAPITAL LETTER TSHA ('êìå')
UTF-8 : [ F0 90 93 8C ]  (4x  8-bit code units = 32 bits total)
UTF-16: [ D801 DCCC ]    (2x 16-bit code units = 32 bits total)
UTF-32: [ 000104CC ]     (1x 32-bit code unit  = 32 bits total)
```

<span data-ttu-id="cbb16-255">–ö–∞–∫ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å —Ä–∞–Ω–µ–µ, –æ–¥–Ω–∞ –µ–¥–∏–Ω–∏—Ü–∞ –∫–æ–¥–∞ UTF-16 –∏–∑ [—Å—É—Ä—Ä–æ–≥–∞—Ç–Ω–æ–π –ø–∞—Ä—ã](#surrogate-pairs) —Å–∞–º–∞ –ø–æ —Å–µ–±–µ –Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-255">As noted earlier, a single UTF-16 code unit from a [surrogate pair](#surrogate-pairs) is meaningless by itself.</span></span> <span data-ttu-id="cbb16-256">–¢–∞–∫–∏–º –∂–µ –æ–±—Ä–∞–∑–æ–º –æ–¥–Ω–∞ –µ–¥–∏–Ω–∏—Ü–∞ –∫–æ–¥–∞ UTF-8 —Å–∞–º–∞ –ø–æ —Å–µ–±–µ –Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–∑ –¥–≤—É—Ö, —Ç—Ä–µ—Ö –∏–ª–∏ —á–µ—Ç—ã—Ä–µ—Ö –µ–¥–∏–Ω–∏—Ü, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å–∫–∞–ª—è—Ä–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.</span><span class="sxs-lookup"><span data-stu-id="cbb16-256">In the same way, a single UTF-8 code unit is meaningless by itself if it's in a sequence of two, three, or four used to calculate a scalar value.</span></span>

### <a name="endianness"></a><span data-ttu-id="cbb16-257">–ü–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç–æ–≤</span><span class="sxs-lookup"><span data-stu-id="cbb16-257">Endianness</span></span>

<span data-ttu-id="cbb16-258">–í .NET –µ–¥–∏–Ω–∏—Ü—ã –∫–æ–¥–∞ UTF-16 string —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –≤ –≤–∏–¥–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ 16-—Ä–∞–∑—Ä—è–¥–Ω—ã—Ö —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª (—ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `char`).</span><span class="sxs-lookup"><span data-stu-id="cbb16-258">In .NET, the UTF-16 code units of a string are stored in contiguous memory as a sequence of 16-bit integers (`char` instances).</span></span> <span data-ttu-id="cbb16-259">–†–∞–∑—Ä—è–¥—ã –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü –∫–æ–¥–∞ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å [–ø–æ—Ä—è–¥–∫–æ–º –±–∞–π—Ç–æ–≤](https://en.wikipedia.org/wiki/Endianness) —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.</span><span class="sxs-lookup"><span data-stu-id="cbb16-259">The bits of individual code units are laid out according to the [endianness](https://en.wikipedia.org/wiki/Endianness) of the current architecture.</span></span>

<span data-ttu-id="cbb16-260">–í –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å –ø—Ä—è–º—ã–º –ø–æ—Ä—è–¥–∫–æ–º –±–∞–π—Ç–æ–≤ —ç–∫–∑–µ–º–ø–ª—è—Ä string, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ –∫–æ–¥–æ–≤—ã—Ö —Ç–æ—á–µ–∫ UTF-16 `[ D801 DCCC ]`, –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω –≤ –ø–∞–º—è—Ç–∏ –≤ –≤–∏–¥–µ –±–∞–π—Ç–æ–≤ `[ 0x01, 0xD8, 0xCC, 0xDC ]`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-260">On a little-endian architecture, the string consisting of the UTF-16 code points `[ D801 DCCC ]` would be laid out in memory as the bytes `[ 0x01, 0xD8, 0xCC, 0xDC ]`.</span></span> <span data-ttu-id="cbb16-261">–í –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å –æ–±—Ä–∞—Ç–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º –±–∞–π—Ç–æ–≤ —Ç–æ—Ç –∂–µ —ç–∫–∑–µ–º–ø–ª—è—Ä string –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω –≤ –ø–∞–º—è—Ç–∏ –≤ –≤–∏–¥–µ –±–∞–π—Ç–æ–≤ `[ 0xD8, 0x01, 0xDC, 0xCC ]`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-261">On a big-endian architecture that same string would be laid out in memory as the bytes `[ 0xD8, 0x01, 0xDC, 0xCC ]`.</span></span>

<span data-ttu-id="cbb16-262">–ö–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º, –¥–æ–ª–∂–Ω—ã —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö.</span><span class="sxs-lookup"><span data-stu-id="cbb16-262">Computer systems that communicate with each other must agree on the representation of data crossing the wire.</span></span> <span data-ttu-id="cbb16-263">–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–∏—Å—Ç–µ–º—É UTF-8 –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ —Ç–µ–∫—Å—Ç–∞, —á–∞—Å—Ç–∏—á–Ω–æ –≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –∫–æ–º–ø—å—é—Ç–µ—Ä —Å –æ–±—Ä–∞—Ç–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º –±–∞–π—Ç–æ–≤ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º —Å –ø—Ä—è–º—ã–º –ø–æ—Ä—è–¥–∫–æ–º –±–∞–π—Ç–æ–≤.</span><span class="sxs-lookup"><span data-stu-id="cbb16-263">Most network protocols use UTF-8 as a standard when transmitting text, partly to avoid issues that might result from a big-endian machine communicating with a little-endian machine.</span></span> <span data-ttu-id="cbb16-264">–≠–∫–∑–µ–º–ø–ª—è—Ä string, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ –∫–æ–¥–æ–≤—ã—Ö —Ç–æ—á–µ–∫ UTF-8 `[ F0 90 93 8C ]`, –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ –≤–∏–¥–µ –±–∞–π—Ç–æ–≤ `[ 0xF0, 0x90, 0x93, 0x8C ]`, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –±–∞–π—Ç–æ–≤.</span><span class="sxs-lookup"><span data-stu-id="cbb16-264">The string consisting of the UTF-8 code points `[ F0 90 93 8C ]` will always be represented as the bytes `[ 0xF0, 0x90, 0x93, 0x8C ]` regardless of endianness.</span></span>

<span data-ttu-id="cbb16-265">–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É UTF-8 –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–µ–∫—Å—Ç–∞, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è .NET —á–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç –∫–æ–¥, –∫–∞–∫ –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ:</span><span class="sxs-lookup"><span data-stu-id="cbb16-265">To use UTF-8 for transmitting text, .NET applications often use code like the following example:</span></span>

```csharp
string stringToWrite = GetString();
byte[] stringAsUtf8Bytes = Encoding.UTF8.GetBytes(stringToWrite);
await outputStream.WriteAsync(stringAsUtf8Bytes, 0, stringAsUtf8Bytes.Length);
```

<span data-ttu-id="cbb16-266">–í –ø—Ä–µ–¥—ã–¥—É—â–µ–º –ø—Ä–∏–º–µ—Ä–µ –º–µ—Ç–æ–¥ [Encoding.UTF8.GetBytes](xref:System.Text.UTF8Encoding.GetBytes%2A) –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä `string`UTF-16 –æ–±—Ä–∞—Ç–Ω–æ –≤ —Ä—è–¥ —Å–∫–∞–ª—è—Ä–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Æ–Ω–∏–∫–æ–¥–∞, –∑–∞—Ç–µ–º –æ–Ω –ø–æ–≤—Ç–æ—Ä–Ω–æ –∫–æ–¥–∏—Ä—É–µ—Ç —ç—Ç–∏ —Å–∫–∞–ª—è—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ UTF-8 –∏ –ø–æ–º–µ—â–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∞—Å—Å–∏–≤ `byte`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-266">In the preceding example, the method [Encoding.UTF8.GetBytes](xref:System.Text.UTF8Encoding.GetBytes%2A) decodes the UTF-16 `string` back into a series of Unicode scalar values, then it re-encodes those scalar values into UTF-8 and places the resulting sequence into a `byte` array.</span></span> <span data-ttu-id="cbb16-267">–ú–µ—Ç–æ–¥ [Encoding.UTF8.GetString](xref:System.Text.UTF8Encoding.GetString%2A) –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—è –º–∞—Å—Å–∏–≤ `byte` UTF-8 –≤ `string` UTF-16.</span><span class="sxs-lookup"><span data-stu-id="cbb16-267">The method [Encoding.UTF8.GetString](xref:System.Text.UTF8Encoding.GetString%2A) performs the opposite transformation, converting a UTF-8 `byte` array to a UTF-16 `string`.</span></span>

> [!WARNING]
> <span data-ttu-id="cbb16-268">–¢–∞–∫ –∫–∞–∫ —Å–∏—Å—Ç–µ–º–∞ UTF-8 –æ—á–µ–Ω—å —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–µ, –æ—á–µ–≤–∏–¥–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —Å—á–∏—Ç—ã–≤–∞—Ç—å –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –±–∞–π—Ç—ã –∏–∑ —Å–µ—Ç–∏ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –∫–∞–∫ –µ—Å–ª–∏ –±—ã —ç—Ç–æ –±—ã–ª–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ UTF-8.</span><span class="sxs-lookup"><span data-stu-id="cbb16-268">Since UTF-8 is commonplace on the internet, it may be tempting to read raw bytes from the wire and to treat the data as if it were UTF-8.</span></span> <span data-ttu-id="cbb16-269">–û–¥–Ω–∞–∫–æ –≤—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ–Ω–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç.</span><span class="sxs-lookup"><span data-stu-id="cbb16-269">However, you should validate that it is indeed well-formed.</span></span> <span data-ttu-id="cbb16-270">–í—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —Å–ª—É–∂–±—É –Ω–µ–≤–µ—Ä–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–¥–∏—Ä–æ–≤–∫—É UTF-8.</span><span class="sxs-lookup"><span data-stu-id="cbb16-270">A malicious client might submit ill-formed UTF-8 to your service.</span></span> <span data-ttu-id="cbb16-271">–ï—Å–ª–∏ –≤—ã –≤—ã–ø–æ–ª–Ω—è–µ—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —ç—Ç–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —Ç–∞–∫, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –æ–Ω–∏ –±—ã–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω—ã, —ç—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –∏–ª–∏ –±—Ä–µ—à–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.</span><span class="sxs-lookup"><span data-stu-id="cbb16-271">If you operate on that data as if it were well-formed, it could cause errors or security holes in your application.</span></span> <span data-ttu-id="cbb16-272">–ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ UTF-8, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥, –Ω–∞–ø—Ä–∏–º–µ—Ä `Encoding.UTF8.GetString`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏ –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ `string` –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É.</span><span class="sxs-lookup"><span data-stu-id="cbb16-272">To validate UTF-8 data, you can use a method like `Encoding.UTF8.GetString`, which will perform validation while converting the incoming data to a `string`.</span></span>

### <a name="well-formed-encoding"></a><span data-ttu-id="cbb16-273">–ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º</span><span class="sxs-lookup"><span data-stu-id="cbb16-273">Well-formed encoding</span></span>

<span data-ttu-id="cbb16-274">–ö–æ–¥–∏—Ä–æ–≤–∫–∞ –Æ–Ω–∏–∫–æ–¥ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º¬†‚Äî —ç—Ç–æ —ç–∫–∑–µ–º–ø–ª—è—Ä string –∫–æ–¥–æ–≤—ã—Ö –µ–¥–∏–Ω–∏—Ü, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –∏ –±–µ–∑ –æ—à–∏–±–æ–∫ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∫–∞–ª—è—Ä–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Æ–Ω–∏–∫–æ–¥–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-274">A well-formed Unicode encoding is a string of code units that can be decoded unambiguously and without error into a sequence of Unicode scalar values.</span></span> <span data-ttu-id="cbb16-275">–î–∞–Ω–Ω—ã–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –º–æ–≥—É—Ç –±—ã—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ –ø–µ—Ä–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω—ã –º–µ–∂–¥—É UTF-8, UTF-16 –∏ UTF-32.</span><span class="sxs-lookup"><span data-stu-id="cbb16-275">Well-formed data can be transcoded freely back and forth between UTF-8, UTF-16, and UTF-32.</span></span>

<span data-ttu-id="cbb16-276">–í–æ–ø—Ä–æ—Å –≤ —Ç–æ–º, –∏–º–µ–µ—Ç –ª–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∏–ª–∏ –Ω–µ—Ç, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø–æ—Ä—è–¥–∫–∞ –±–∞–π—Ç–æ–≤ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-276">The question of whether an encoding sequence is well-formed or not is unrelated to the endianness of a machine's architecture.</span></span> <span data-ttu-id="cbb16-277">–ù–µ–≤–µ—Ä–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å UTF-8 –∏–º–µ–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–∞–∫ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞—Ö —Å –æ–±—Ä–∞—Ç–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º –±–∞–π—Ç–æ–≤, —Ç–∞–∫ –∏ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞—Ö —Å –ø—Ä—è–º—ã–º –ø–æ—Ä—è–¥–∫–æ–º –±–∞–π—Ç–æ–≤.</span><span class="sxs-lookup"><span data-stu-id="cbb16-277">An ill-formed UTF-8 sequence is ill-formed in the same way on both big-endian and little-endian machines.</span></span>

<span data-ttu-id="cbb16-278">–í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –∫–æ–¥–∏—Ä–æ–≤–æ–∫ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º:</span><span class="sxs-lookup"><span data-stu-id="cbb16-278">Here are some examples of ill-formed encodings:</span></span>

* <span data-ttu-id="cbb16-279">–í UTF-8 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å `[ 6C C2 61 ]` –∏–º–µ–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –∑–∞ `C2` –Ω–µ –º–æ–∂–µ—Ç —Å–ª–µ–¥–æ–≤–∞—Ç—å `61`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-279">In UTF-8, the sequence `[ 6C C2 61 ]` is ill-formed because `C2` cannot be followed by `61`.</span></span>

* <span data-ttu-id="cbb16-280">–í UTF-16 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å `[ DC00 DD00 ]` (–∏–ª–∏, –≤ C#, string `"\udc00\udd00"`) –∏–º–µ–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –∑–∞ –º–ª–∞–¥—à–µ–π –∑–∞–º–µ–Ω—è—é—â–µ–π –∫–æ–¥–æ–≤–æ–π —Ç–æ—á–∫–æ–π `DC00` –Ω–µ –º–æ–∂–µ—Ç —Å–ª–µ–¥–æ–≤–∞—Ç—å –¥—Ä—É–≥–∞—è –º–ª–∞–¥—à–∞—è –∑–∞–º–µ–Ω—è—é—â–∞—è —Ç–æ—á–∫–∞ `DD00`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-280">In UTF-16, the sequence `[ DC00 DD00 ]` (or, in C#, the string `"\udc00\udd00"`) is ill-formed because the low surrogate `DC00` cannot be followed by another low surrogate `DD00`.</span></span>

* <span data-ttu-id="cbb16-281">–í UTF-32 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å `[ 0011ABCD ]` –∏–º–µ–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, —Ç–∞–∫ –∫–∞–∫ `0011ABCD` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —Å–∫–∞–ª—è—Ä–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Æ–Ω–∏–∫–æ–¥–∞.</span><span class="sxs-lookup"><span data-stu-id="cbb16-281">In UTF-32, the sequence `[ 0011ABCD ]` is ill-formed because `0011ABCD` is outside the range of Unicode scalar values.</span></span>

<span data-ttu-id="cbb16-282">–í .NET —ç–∫–∑–µ–º–ø–ª—è—Ä—ã `string` –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–∞–Ω–Ω—ã–µ UTF-16 —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º, –Ω–æ —ç—Ç–æ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ.</span><span class="sxs-lookup"><span data-stu-id="cbb16-282">In .NET, `string` instances almost always contain well-formed UTF-16 data, but that isn't guaranteed.</span></span> <span data-ttu-id="cbb16-283">–í —Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö –ø–æ–∫–∞–∑–∞–Ω –¥–æ–ø—É—Å—Ç–∏–º—ã–π –∫–æ–¥ C#, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ UTF-16 —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞—Ö `string`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-283">The following examples show valid C# code that creates ill-formed UTF-16 data in `string` instances.</span></span>

* <span data-ttu-id="cbb16-284">–õ–∏—Ç–µ—Ä–∞–ª —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º:</span><span class="sxs-lookup"><span data-stu-id="cbb16-284">An ill-formed literal:</span></span>

  ```csharp
  const string s = "\ud800";
  ```

* <span data-ttu-id="cbb16-285">–ü–æ–¥—Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–∑–¥–µ–ª—è–µ—Ç —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω—É—é –ø–∞—Ä—É:</span><span class="sxs-lookup"><span data-stu-id="cbb16-285">A substring that splits up a surrogate pair:</span></span>

  ```csharp
  string x = "\ud83e\udd70"; // "ü•∞"
  string y = x.Substring(1, 1); // "\udd70" standalone low surrogate
  ```

<span data-ttu-id="cbb16-286">API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ [`Encoding.UTF8.GetString`](xref:System.Text.UTF8Encoding.GetString%2A), –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä—ã `string` —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º.</span><span class="sxs-lookup"><span data-stu-id="cbb16-286">APIs like [`Encoding.UTF8.GetString`](xref:System.Text.UTF8Encoding.GetString%2A) never return ill-formed `string` instances.</span></span> <span data-ttu-id="cbb16-287">–ú–µ—Ç–æ–¥—ã `Encoding.GetString` –∏ `Encoding.GetBytes` –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç –∑–∞–º–µ–Ω—É —Å–∏–º–≤–æ–ª–æ–≤ –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.</span><span class="sxs-lookup"><span data-stu-id="cbb16-287">`Encoding.GetString` and `Encoding.GetBytes` methods detect ill-formed sequences in the input and perform character substitution when generating the output.</span></span> <span data-ttu-id="cbb16-288">–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –¥–ª—è –º–µ—Ç–æ–¥–∞ [`Encoding.ASCII.GetString(byte[])`](xref:System.Text.ASCIIEncoding.GetString%2A) –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –±–∞–π—Ç, –æ—Ç–ª–∏—á–Ω—ã–π –æ—Ç ASCII (–≤–Ω–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ U+0000‚ÄìU+007F), –æ–Ω –≤—Å—Ç–∞–≤–ª—è–µ—Ç —Å–∏–º–≤–æ–ª "?" –≤ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä `string`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-288">For example, if [`Encoding.ASCII.GetString(byte[])`](xref:System.Text.ASCIIEncoding.GetString%2A) sees a non-ASCII byte in the input (outside the range U+0000..U+007F), it inserts a '?' into the returned `string` instance.</span></span> <span data-ttu-id="cbb16-289">–ú–µ—Ç–æ–¥ [`Encoding.UTF8.GetString(byte[])`](xref:System.Text.UTF8Encoding.GetString%2A) –∑–∞–º–µ–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ UTF-8 —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –Ω–∞ `U+FFFD REPLACEMENT CHARACTER ('ÔøΩ')` –≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–µ `string`.</span><span class="sxs-lookup"><span data-stu-id="cbb16-289">[`Encoding.UTF8.GetString(byte[])`](xref:System.Text.UTF8Encoding.GetString%2A) replaces ill-formed UTF-8 sequences with `U+FFFD REPLACEMENT CHARACTER ('ÔøΩ')` in the returned `string` instance.</span></span> <span data-ttu-id="cbb16-290">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è —Å–º. –≤ —Ä–∞–∑–¥–µ–ª–∞—Ö¬†5.22 –∏¬†3.9 [—Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ –Æ–Ω–∏–∫–æ–¥–∞](https://www.unicode.org/versions/latest/).</span><span class="sxs-lookup"><span data-stu-id="cbb16-290">For more information, see [the Unicode Standard](https://www.unicode.org/versions/latest/), Sections 5.22 and 3.9.</span></span>

<span data-ttu-id="cbb16-291">–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã `Encoding` —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –∞ –Ω–µ –¥–ª—è –∑–∞–º–µ–Ω—ã —Å–∏–º–≤–æ–ª–æ–≤, –∫–æ–≥–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º.</span><span class="sxs-lookup"><span data-stu-id="cbb16-291">The built-in `Encoding` classes can also be configured to throw an exception rather than perform character substitution when ill-formed sequences are seen.</span></span> <span data-ttu-id="cbb16-292">–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, —Ç—Ä–µ–±—É—é—â–∏—Ö –æ—Å–æ–±—ã—Ö –º–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –≥–¥–µ –∑–∞–º–µ–Ω–∞ —Å–∏–º–≤–æ–ª–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∏–µ–º–ª–µ–º–æ–π.</span><span class="sxs-lookup"><span data-stu-id="cbb16-292">This approach is often used in security-sensitive applications where character substitution might not be acceptable.</span></span>

```csharp
byte[] utf8Bytes = ReadFromNetwork();
UTF8Encoding encoding = new UTF8Encoding(encoderShouldEmitUTF8Identifier: false, throwOnInvalidBytes: true);
string asString = encoding.GetString(utf8Bytes); // will throw if 'utf8Bytes' is ill-formed
```

<span data-ttu-id="cbb16-293">–°–≤–µ–¥–µ–Ω–∏—è –æ —Ç–æ–º, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã `Encoding`, —Å–º. –≤ —Å—Ç–∞—Ç—å–µ [–ö–æ–¥–∏—Ä–æ–≤–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤ –≤ .NET](character-encoding.md).</span><span class="sxs-lookup"><span data-stu-id="cbb16-293">For information about how to use the built-in `Encoding` classes, see [How to use character encoding classes in .NET](character-encoding.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="cbb16-294">–°–º. —Ç–∞–∫–∂–µ</span><span class="sxs-lookup"><span data-stu-id="cbb16-294">See also</span></span>

- <xref:System.String>
- <xref:System.Char>
- <xref:System.Text.Rune>
- [<span data-ttu-id="cbb16-295">–ì–ª–æ–±–∞–ª–∏–∑–∞—Ü–∏—è –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è</span><span class="sxs-lookup"><span data-stu-id="cbb16-295">Globalization and Localization</span></span>](../../../docs/standard/globalization-localization/index.md)
