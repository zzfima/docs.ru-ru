---
title: Реляционные и ноСЗЛ данные
description: Узнайте о реляционных данных и данных NoS'L в облачных приложениях
author: robvet
ms.date: 01/22/2020
ms.openlocfilehash: 04693e30ba3848f1e51f1c69a75be5f18ead4cf1
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2020
ms.locfileid: "79141423"
---
# <a name="relational-vs-nosql-data"></a><span data-ttu-id="c37a5-103">Реляционные и ноСЗЛ данные</span><span class="sxs-lookup"><span data-stu-id="c37a5-103">Relational vs. NoSQL data</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="c37a5-104">Relational и NoS'L — это два типа систем баз данных, обычно внедряемых в облачных приложениях.</span><span class="sxs-lookup"><span data-stu-id="c37a5-104">Relational and NoSQL are two types of database systems commonly implemented in cloud-native apps.</span></span> <span data-ttu-id="c37a5-105">Они построены по-разному, хранят данные по-разному, и доступ по-разному.</span><span class="sxs-lookup"><span data-stu-id="c37a5-105">They're built differently, store data differently, and accessed differently.</span></span> <span data-ttu-id="c37a5-106">В этом разделе мы рассмотрим и то, и другое.</span><span class="sxs-lookup"><span data-stu-id="c37a5-106">In this section, we'll look at both.</span></span> <span data-ttu-id="c37a5-107">Позже в этой главе мы рассмотрим новую технологию баз данных под названием *NewS'SL*.</span><span class="sxs-lookup"><span data-stu-id="c37a5-107">Later in this chapter, we'll look at an emerging database technology called *NewSQL*.</span></span>

<span data-ttu-id="c37a5-108">*Реляционные базы данных* были распространенной технологией на протяжении десятилетий.</span><span class="sxs-lookup"><span data-stu-id="c37a5-108">*Relational databases* have been a prevalent technology for decades.</span></span> <span data-ttu-id="c37a5-109">Они зрелые, проверенные и широко реализованные.</span><span class="sxs-lookup"><span data-stu-id="c37a5-109">They're mature, proven, and widely implemented.</span></span> <span data-ttu-id="c37a5-110">Конкурирующие продукты баз данных, инструментарий и опыт изобилуют.</span><span class="sxs-lookup"><span data-stu-id="c37a5-110">Competing database products, tooling, and expertise abound.</span></span> <span data-ttu-id="c37a5-111">Реляционные базы данных обеспечивают хранилище соответствующих таблиц данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-111">Relational databases provide a store of related data tables.</span></span> <span data-ttu-id="c37a5-112">Эти таблицы имеют фиксированную схему, используйте S'L (структурированный язык запросов) для управления данными и поддерживают гарантии ACID.</span><span class="sxs-lookup"><span data-stu-id="c37a5-112">These tables have a fixed schema, use SQL (Structured Query Language) to manage data, and support ACID guarantees.</span></span>

<span data-ttu-id="c37a5-113">*Базы данных без СЗЛ* относятся к высокопроизводительным, нерелоняционным хранилищам данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-113">*No-SQL databases* refer to high-performance, non-relational data stores.</span></span> <span data-ttu-id="c37a5-114">Они преуспевают в своих характеристиках простоты использования, масштабируемости, устойчивости и доступности.</span><span class="sxs-lookup"><span data-stu-id="c37a5-114">They excel in their ease-of-use, scalability, resilience, and availability characteristics.</span></span> <span data-ttu-id="c37a5-115">Вместо присоединения к таблицам нормализованных данных, НоСЗЛ хранит неструктурированные или полуструктурированные данные, часто в парах с ключевыми значениями или документами JSON.</span><span class="sxs-lookup"><span data-stu-id="c37a5-115">Instead of joining tables of normalized data, NoSQL stores unstructured or semi-structured data, often in key-value pairs or JSON documents.</span></span> <span data-ttu-id="c37a5-116">Базы данных без СЗЛ, как правило, не предоставляют acid гарантии, выходящие за рамки единого раздела базы данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-116">No-SQL databases typically don't provide ACID guarantees beyond the scope of a single database partition.</span></span> <span data-ttu-id="c37a5-117">Услуги высокого объема, требующие второго времени отклика, отдают предпочтение хранилищам данных NoS'L.</span><span class="sxs-lookup"><span data-stu-id="c37a5-117">High volume services that require sub second response time favor NoSQL datastores.</span></span>

<span data-ttu-id="c37a5-118">Влияние технологий [НоСЗЛ](https://www.geeksforgeeks.org/introduction-to-nosql/) на распределенные облачные системы невозможно переоценить.</span><span class="sxs-lookup"><span data-stu-id="c37a5-118">The impact of [NoSQL](https://www.geeksforgeeks.org/introduction-to-nosql/) technologies for distributed cloud-native systems can't be overstated.</span></span> <span data-ttu-id="c37a5-119">Распространение новых технологий передачи данных в этом пространстве привело к нарушению решений, которые когда-то опирались исключительно на реляционные базы данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-119">The proliferation of new data technologies in this space has disrupted solutions that once exclusively relied on relational databases.</span></span>

<span data-ttu-id="c37a5-120">Базы данных NoS'L включают в себя несколько различных моделей для доступа к данным и управления ими, каждая из которых подходит для конкретных случаев использования.</span><span class="sxs-lookup"><span data-stu-id="c37a5-120">NoSQL databases include several different models for accessing and managing data, each suited to specific use cases.</span></span> <span data-ttu-id="c37a5-121">На рисунке 5-9 представлены четыре общие модели.</span><span class="sxs-lookup"><span data-stu-id="c37a5-121">Figure 5-9 presents four common models.</span></span>

![Модели данных NoS'L](./media/types-of-nosql-datastores.png)

<span data-ttu-id="c37a5-123">**Рисунок 5-9**: Модели данных для баз данных НоСЗЛ</span><span class="sxs-lookup"><span data-stu-id="c37a5-123">**Figure 5-9**: Data models for NoSQL databases</span></span>

| <span data-ttu-id="c37a5-124">Модель</span><span class="sxs-lookup"><span data-stu-id="c37a5-124">Model</span></span> | <span data-ttu-id="c37a5-125">Характеристики</span><span class="sxs-lookup"><span data-stu-id="c37a5-125">Characteristics</span></span> |
| :-------- | :-------- |
| <span data-ttu-id="c37a5-126">Хранилище документов</span><span class="sxs-lookup"><span data-stu-id="c37a5-126">Document Store</span></span> | <span data-ttu-id="c37a5-127">Данные и метаданные хранятся иерархически в документах на основе JSON внутри базы данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-127">Data and metadata are stored hierarchically in JSON-based documents inside the database.</span></span> |
| <span data-ttu-id="c37a5-128">Магазин добавленных значений</span><span class="sxs-lookup"><span data-stu-id="c37a5-128">Key Value Store</span></span> | <span data-ttu-id="c37a5-129">Самые простые из баз данных НоСЗЛ, данные представлены как набор пар с ключевыми значениями.</span><span class="sxs-lookup"><span data-stu-id="c37a5-129">The simplest of the NoSQL databases, data is represented as a collection of key-value pairs.</span></span> |
| <span data-ttu-id="c37a5-130">Широкий колонок магазин</span><span class="sxs-lookup"><span data-stu-id="c37a5-130">Wide-Column Store</span></span> | <span data-ttu-id="c37a5-131">Связанные данные хранятся в виде набора вложенных ключей/значенийных пар в одном столбце.</span><span class="sxs-lookup"><span data-stu-id="c37a5-131">Related data is stored as a set of nested-key/value pairs within a single column.</span></span> |
| <span data-ttu-id="c37a5-132">Графический магазин</span><span class="sxs-lookup"><span data-stu-id="c37a5-132">Graph Store</span></span> | <span data-ttu-id="c37a5-133">Данные хранятся в структуре графика в виде свойств узлов, краев и данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-133">Data is stored in a graph structure as node, edge, and data properties.</span></span> |

## <a name="the-cap-theorem"></a><span data-ttu-id="c37a5-134">Теорема CAP</span><span class="sxs-lookup"><span data-stu-id="c37a5-134">The CAP theorem</span></span>

<span data-ttu-id="c37a5-135">Чтобы понять различия между этими типами баз данных, рассмотрим теорему CAP, набор принципов, применяемых к распределенным системам, которые хранят состояние.</span><span class="sxs-lookup"><span data-stu-id="c37a5-135">As a way to understand the differences between these types of databases, consider the CAP theorem, a set of principles applied to distributed systems that store state.</span></span> <span data-ttu-id="c37a5-136">На рисунке 5-10 показаны три свойства теоремы CAP.</span><span class="sxs-lookup"><span data-stu-id="c37a5-136">Figure 5-10 shows the three properties of the CAP theorem.</span></span>

![Теорема CAP](./media/cap-theorem.png)

<span data-ttu-id="c37a5-138">**Рис. 5-10**.</span><span class="sxs-lookup"><span data-stu-id="c37a5-138">**Figure 5-10**.</span></span> <span data-ttu-id="c37a5-139">Теорема CAP</span><span class="sxs-lookup"><span data-stu-id="c37a5-139">The CAP theorem</span></span>

<span data-ttu-id="c37a5-140">В теореме говорится, что распределенные системы данных будут предлагать компромисс между согласованностью, доступностью и допуском разделов.</span><span class="sxs-lookup"><span data-stu-id="c37a5-140">The theorem states that distributed data systems will offer a trade-off between consistency, availability, and partition tolerance.</span></span> <span data-ttu-id="c37a5-141">И, что любая база данных может гарантировать только *два* из трех свойств:</span><span class="sxs-lookup"><span data-stu-id="c37a5-141">And, that any database can only guarantee *two* of the three properties:</span></span>

- <span data-ttu-id="c37a5-142">*Согласованности.*</span><span class="sxs-lookup"><span data-stu-id="c37a5-142">*Consistency.*</span></span> <span data-ttu-id="c37a5-143">Каждый узла в кластере отвечает самым последним данным, даже если система должна заблокировать запрос до тех пор, пока все реплики не будут обновлены.</span><span class="sxs-lookup"><span data-stu-id="c37a5-143">Every node in the cluster responds with the most recent data, even if the system must block the request until all replicas update.</span></span> <span data-ttu-id="c37a5-144">Если вы запросите «согласованную систему» для элемента, который в настоящее время обновляется, вы будете ждать этого ответа, пока все реплики успешно не обновятся.</span><span class="sxs-lookup"><span data-stu-id="c37a5-144">If you query a "consistent system" for an item that is currently updating, you'll wait for that response until all replicas successfully update.</span></span> <span data-ttu-id="c37a5-145">Тем не менее, вы получите самые актуальные данные.</span><span class="sxs-lookup"><span data-stu-id="c37a5-145">However, you'll receive the most current data.</span></span>

- <span data-ttu-id="c37a5-146">*Доступности.*</span><span class="sxs-lookup"><span data-stu-id="c37a5-146">*Availability.*</span></span> <span data-ttu-id="c37a5-147">Каждый узла возвращает немедленный ответ, даже если этот ответ не является самым последним и последними данными.</span><span class="sxs-lookup"><span data-stu-id="c37a5-147">Every node returns an immediate response, even if that response isn't the most recent data.</span></span> <span data-ttu-id="c37a5-148">Если вы запросите «доступную систему» для обновления товара, вы получите наилучший ответ, который служба может предоставить в этот момент.</span><span class="sxs-lookup"><span data-stu-id="c37a5-148">If you query an "available system" for an item that is updating, you'll get the best possible answer the service can provide at that moment.</span></span>

- <span data-ttu-id="c37a5-149">*Толерантность к разделу.*</span><span class="sxs-lookup"><span data-stu-id="c37a5-149">*Partition Tolerance.*</span></span> <span data-ttu-id="c37a5-150">Гарантирует, что система продолжает работать, даже если реплицированный узла данных выходит из строя или теряет связь с другими реплицированными узлами данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-150">Guarantees the system continues to operate even if a replicated data node fails or loses connectivity with other replicated data nodes.</span></span>

<span data-ttu-id="c37a5-151">Реляционные базы данных обычно обеспечивают согласованность и доступность, но не допуск раздела.</span><span class="sxs-lookup"><span data-stu-id="c37a5-151">Relational databases typically provide consistency and availability, but not partition tolerance.</span></span> <span data-ttu-id="c37a5-152">Они обычно готовятся к одному серверу и масштабируются вертикально, добавляя больше ресурсов в машину.</span><span class="sxs-lookup"><span data-stu-id="c37a5-152">They're typically provisioned to a single server and scale vertically by adding more resources to the machine.</span></span>

<span data-ttu-id="c37a5-153">Многие реляционные системы баз данных поддерживают встроенные функции репликации, в которых копии первичной базы данных могут быть сделаны в другие экземпляры вторичного сервера.</span><span class="sxs-lookup"><span data-stu-id="c37a5-153">Many relational database systems support built-in replication features where copies of the primary database can be made to other secondary server instances.</span></span> <span data-ttu-id="c37a5-154">Операции записи производятся в основной экземпляр и реплицируются каждому из второстепенных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-154">Write operations are made to the primary instance and replicated to each of the secondaries.</span></span> <span data-ttu-id="c37a5-155">При сбое основной экземпляр может выйти на вторичку, чтобы обеспечить высокую доступность.</span><span class="sxs-lookup"><span data-stu-id="c37a5-155">Upon a failure, the primary instance can fail over to a secondary to provide high availability.</span></span> <span data-ttu-id="c37a5-156">Вторые также могут быть использованы для распространения считываемых операций.</span><span class="sxs-lookup"><span data-stu-id="c37a5-156">Secondaries can also be used to distribute read operations.</span></span> <span data-ttu-id="c37a5-157">В то время как операции записей всегда идут вразрез с основной репликой, считываемые операции могут быть направлены на любой из второстепенных для снижения загрузки системы.</span><span class="sxs-lookup"><span data-stu-id="c37a5-157">While writes operations always go against the primary replica, read operations can be routed to any of the secondaries to reduce system load.</span></span>

<span data-ttu-id="c37a5-158">Данные также могут быть горизонтально разделены на несколько узлов, например, с [осколками.](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-introduction)</span><span class="sxs-lookup"><span data-stu-id="c37a5-158">Data can also be horizontally partitioned across multiple nodes, such as with [sharding](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-introduction).</span></span> <span data-ttu-id="c37a5-159">Но, sharding резко увеличивает операционные накладные расходы, плюя данные по многим частям, которые не могут легко общаться.</span><span class="sxs-lookup"><span data-stu-id="c37a5-159">But, sharding dramatically increases operational overhead by spitting data across many pieces that cannot easily communicate.</span></span> <span data-ttu-id="c37a5-160">Управление может быть дорогостоящим и отнимает много времени.</span><span class="sxs-lookup"><span data-stu-id="c37a5-160">It can be costly and time consuming to manage.</span></span> <span data-ttu-id="c37a5-161">Это может в конечном итоге повлиять на производительность, таблицы соединения, и референциальной целостности.</span><span class="sxs-lookup"><span data-stu-id="c37a5-161">It can end up impacting performance, table joins, and referential integrity.</span></span>

<span data-ttu-id="c37a5-162">Если реплики данных потеряют подключение к сети в "высокосогласованном" реляционном кластере базы данных, вы не сможете написать в базу данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-162">If data replicas were to lose network connectivity in a "highly consistent" relational database cluster, you wouldn't be able to write to the database.</span></span> <span data-ttu-id="c37a5-163">Система откажется от операции записи, так как не может воспроизвести это изменение в другой реплике данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-163">The system would reject the write operation as it can't replicate that change to the other data replica.</span></span> <span data-ttu-id="c37a5-164">Каждая реплика данных должна обновляться до завершения транзакции.</span><span class="sxs-lookup"><span data-stu-id="c37a5-164">Every data replica has to update before the transaction can complete.</span></span>

<span data-ttu-id="c37a5-165">Базы данных NoS'L обычно поддерживают высокую доступность и допуск разделов.</span><span class="sxs-lookup"><span data-stu-id="c37a5-165">NoSQL databases typically support high availability and partition tolerance.</span></span> <span data-ttu-id="c37a5-166">Они масштабируются горизонтально, часто через товарные серверы.</span><span class="sxs-lookup"><span data-stu-id="c37a5-166">They scale out horizontally, often across commodity servers.</span></span> <span data-ttu-id="c37a5-167">Такой подход обеспечивает огромную доступность как внутри географических регионов, так и между регионами по сниженным ценам.</span><span class="sxs-lookup"><span data-stu-id="c37a5-167">This approach provides tremendous availability, both within and across geographical regions at a reduced cost.</span></span> <span data-ttu-id="c37a5-168">Вы разделите и воспроизводите данные на этих машинах или узлах, обеспечивая избыточность и допуск неисправностей.</span><span class="sxs-lookup"><span data-stu-id="c37a5-168">You partition and replicate data across these machines, or nodes, providing redundancy and fault tolerance.</span></span> <span data-ttu-id="c37a5-169">Недостатком является последовательность.</span><span class="sxs-lookup"><span data-stu-id="c37a5-169">The downside is consistency.</span></span> <span data-ttu-id="c37a5-170">Изменение данных на одном узле НоСЗЛ может занять некоторое время для распространения на другие узлы.</span><span class="sxs-lookup"><span data-stu-id="c37a5-170">A change to data on one NoSQL node can take some time to propagate to other nodes.</span></span> <span data-ttu-id="c37a5-171">Как правило, узл базы данных NoS'L обеспечивает немедленный ответ на запрос, даже если представленные данные устарели и еще не обновлены.</span><span class="sxs-lookup"><span data-stu-id="c37a5-171">Typically, a NoSQL database node will provide an immediate response to a query - even if the data that is presented is stale and hasn't updated yet.</span></span>

<span data-ttu-id="c37a5-172">Если реплики данных потеряют подключение в «высокодоступном» кластере базы данных НоСЗЛ, все равно можно завершить операцию записи в базу данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-172">If data replicas were to lose connectivity in a "highly available" NoSQL database cluster, you could still complete a write operation to the database.</span></span> <span data-ttu-id="c37a5-173">Кластер базы данных позволит операции записи и обновлять каждую реплику данных по мере ее появления.</span><span class="sxs-lookup"><span data-stu-id="c37a5-173">The database cluster would allow the write operation and update each data replica as it becomes available.</span></span>

<span data-ttu-id="c37a5-174">Этот результат известен как конечная согласованность, характеристика распределенных систем данных, где транзакции ACID не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="c37a5-174">This kind of result is known as eventual consistency, a characteristic of distributed data systems where ACID transactions aren't supported.</span></span> <span data-ttu-id="c37a5-175">Это краткая задержка между обновлением элемента данных и временем, которое требуется для распространения обновления каждого из узлов реплики.</span><span class="sxs-lookup"><span data-stu-id="c37a5-175">It's a brief delay between the update of a data item and time that it takes to propagate that update to each of the replica nodes.</span></span> <span data-ttu-id="c37a5-176">В нормальных условиях, отставание, как правило, короткий, но может увеличиваться, когда возникают проблемы.</span><span class="sxs-lookup"><span data-stu-id="c37a5-176">Under normal conditions, the lag is typically short, but can increase when problems arise.</span></span> <span data-ttu-id="c37a5-177">Например, что произойдет, если обновить элемент продукта в базе данных НоСЗЛ в США и запросить тот же элемент данных из узла реплики в Европе?</span><span class="sxs-lookup"><span data-stu-id="c37a5-177">For example, what would happen if you were to update a product item in a NoSQL database in the United States and query that same data item from a replica node in Europe?</span></span> <span data-ttu-id="c37a5-178">Вы получите более раннюю информацию о продукте до тех пор, пока кластер не обновит европейский узлы с изменением продукта.</span><span class="sxs-lookup"><span data-stu-id="c37a5-178">You would receive the earlier product information, until the cluster updates the European node with the product change.</span></span> <span data-ttu-id="c37a5-179">Немедленно вернув результат запроса и не дожидаясь обновления всех узлов реплики, вы приобретаете огромный масштаб и объем, но с возможностью представления старых данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-179">By immediately returning a query result and not waiting for all replica nodes to update, you gain enormous scale and volume, but with the possibility of presenting older data.</span></span>

<span data-ttu-id="c37a5-180">Высокая доступность и массовая масштабируемость часто имеют более важное значение для бизнеса, чем сильная согласованность.</span><span class="sxs-lookup"><span data-stu-id="c37a5-180">High availability and massive scalability are often more critical to the business than strong consistency.</span></span> <span data-ttu-id="c37a5-181">Разработчики могут внедрять методы и шаблоны, такие как Sagas, C'RS и асинхронные сообщения, чтобы охватить окончательную согласованность.</span><span class="sxs-lookup"><span data-stu-id="c37a5-181">Developers can implement techniques and patterns such as Sagas, CQRS, and asynchronous messaging to embrace eventual consistency.</span></span>

> <span data-ttu-id="c37a5-182">В настоящее время, осторожность должна быть принята при потворствух CAP теоремы ограничений.</span><span class="sxs-lookup"><span data-stu-id="c37a5-182">Nowadays, care must be taken when conidering the CAP theorem constraints.</span></span> <span data-ttu-id="c37a5-183">Появился новый тип базы данных, который называется NewS'L, который расширяет реляционную базу данных для поддержки как горизонтальной масштабируемости, так и масштабируемой производительности систем НоСЗЛ.</span><span class="sxs-lookup"><span data-stu-id="c37a5-183">A new type of database, called NewSQL, has emerged which extends the relational database engine to support both horizontal scalability and the scalable performance of NoSQL systems.</span></span>

## <a name="considerations-for-relational-vs-nosql-systems"></a><span data-ttu-id="c37a5-184">Рассмотрение реляционных и ноСЗЛ систем</span><span class="sxs-lookup"><span data-stu-id="c37a5-184">Considerations for relational vs. NoSQL systems</span></span>

<span data-ttu-id="c37a5-185">Основываясь на конкретных требованиях к данным, микрослужба на основе облачных технологий может реализовывать реляционный, ноСЗЛ-хранилище данных или и то, и другое.</span><span class="sxs-lookup"><span data-stu-id="c37a5-185">Based upon specific data requirements, a cloud-native-based microservice can implement a relational, NoSQL datastore or both.</span></span>

|  <span data-ttu-id="c37a5-186">Рассмотрим хранилище данных NoS'L, когда:</span><span class="sxs-lookup"><span data-stu-id="c37a5-186">Consider a NoSQL datastore when:</span></span> | <span data-ttu-id="c37a5-187">Рассмотрим реляционную базу данных, когда:</span><span class="sxs-lookup"><span data-stu-id="c37a5-187">Consider a relational database when:</span></span> |
| :-------- | :-------- |
| <span data-ttu-id="c37a5-188">У вас есть большие объемные нагрузки, которые требуют больших масштабов</span><span class="sxs-lookup"><span data-stu-id="c37a5-188">You have high volume workloads that require large scale</span></span> | <span data-ttu-id="c37a5-189">Объем рабочей нагрузки соответствует и требует среднего и крупного масштаба</span><span class="sxs-lookup"><span data-stu-id="c37a5-189">Your workload volume is consistent and requires medium to large scale</span></span> |
| <span data-ttu-id="c37a5-190">Ваши рабочие нагрузки не требуют гарантий ACID</span><span class="sxs-lookup"><span data-stu-id="c37a5-190">Your workloads don't require ACID guarantees</span></span> |  <span data-ttu-id="c37a5-191">Требуются гарантии ACID</span><span class="sxs-lookup"><span data-stu-id="c37a5-191">ACID guarantees are required</span></span> |
| <span data-ttu-id="c37a5-192">Ваши данные динамичны и часто меняются</span><span class="sxs-lookup"><span data-stu-id="c37a5-192">Your data is dynamic and frequently changes</span></span> | <span data-ttu-id="c37a5-193">Ваши данные предсказуемы и высоко структурированы</span><span class="sxs-lookup"><span data-stu-id="c37a5-193">Your data is predictable and highly structured</span></span> |
| <span data-ttu-id="c37a5-194">Данные могут быть выражены без связи</span><span class="sxs-lookup"><span data-stu-id="c37a5-194">Data can be expressed without relationships</span></span> | <span data-ttu-id="c37a5-195">Данные лучше всего выражаются в реляционно</span><span class="sxs-lookup"><span data-stu-id="c37a5-195">Data is best expressed relationally</span></span> |  
| <span data-ttu-id="c37a5-196">Вам нужно быстро писать и писать безопасности не является критическим</span><span class="sxs-lookup"><span data-stu-id="c37a5-196">You need fast writes and write safety isn't critical</span></span> | <span data-ttu-id="c37a5-197">Безопасность написания является обязательным требованием</span><span class="sxs-lookup"><span data-stu-id="c37a5-197">Write safety is a requirement</span></span> |  
| <span data-ttu-id="c37a5-198">Поиск данных прост и имеет тенденцию быть плоским</span><span class="sxs-lookup"><span data-stu-id="c37a5-198">Data retrieval is simple and tends to be flat</span></span> | <span data-ttu-id="c37a5-199">Вы работаете со сложными запросами и отчетами</span><span class="sxs-lookup"><span data-stu-id="c37a5-199">You work with complex queries and reports</span></span>|
| <span data-ttu-id="c37a5-200">Ваши данные требуют широкого географического распространения</span><span class="sxs-lookup"><span data-stu-id="c37a5-200">Your data requires a wide geographic distribution</span></span> | <span data-ttu-id="c37a5-201">Ваши пользователи более централизованы</span><span class="sxs-lookup"><span data-stu-id="c37a5-201">Your users are more centralized</span></span> |
| <span data-ttu-id="c37a5-202">Ваше приложение будет развернуто на товарном оборудовании, например, в общедоступных облаках</span><span class="sxs-lookup"><span data-stu-id="c37a5-202">Your application will be deployed to commodity hardware, such as with public clouds</span></span> | <span data-ttu-id="c37a5-203">Ваше приложение будет развернуто на большом и высококачественном оборудовании</span><span class="sxs-lookup"><span data-stu-id="c37a5-203">Your application will be deployed to large, high-end hardware</span></span> |
|||

<span data-ttu-id="c37a5-204">В следующих разделах мы рассмотрим варианты, доступные в облаке Azure для хранения и управления облачными данными.</span><span class="sxs-lookup"><span data-stu-id="c37a5-204">In the next sections, we'll explore the options available in the Azure cloud for storing and managing your cloud-native data.</span></span>

## <a name="database-as-a-service"></a><span data-ttu-id="c37a5-205">База данных как услуга</span><span class="sxs-lookup"><span data-stu-id="c37a5-205">Database as a Service</span></span>

<span data-ttu-id="c37a5-206">Для начала можно предоставить виртуальную машину Azure и установить подвыборную базу данных для каждой службы.</span><span class="sxs-lookup"><span data-stu-id="c37a5-206">To start, you could provision an Azure virtual machine and install your database of choice for each service.</span></span> <span data-ttu-id="c37a5-207">Хотя вы будете иметь полный контроль над окружающей средой, вы бы откавылись от многих встроенных функций облачной платформы.</span><span class="sxs-lookup"><span data-stu-id="c37a5-207">While you'd have full control over the environment, you'd forgo many built-in features of the cloud platform.</span></span> <span data-ttu-id="c37a5-208">Вы также будете отвечать за управление виртуальной машиной и базой данных для каждой службы.</span><span class="sxs-lookup"><span data-stu-id="c37a5-208">You'd also be responsible for managing the virtual machine and database for each service.</span></span> <span data-ttu-id="c37a5-209">Такой подход может быстро стать трудоемким и дорогостоящим.</span><span class="sxs-lookup"><span data-stu-id="c37a5-209">This approach could quickly become time-consuming and expensive.</span></span>

<span data-ttu-id="c37a5-210">Вместо этого облачные приложения отдают предпочтение службам данных, которые рассматриваются как [база данных как служба (DBaaS).](https://www.stratoscale.com/blog/dbaas/what-is-database-as-a-service/)</span><span class="sxs-lookup"><span data-stu-id="c37a5-210">Instead, cloud-native applications favor data services exposed as a [Database as a Service (DBaaS)](https://www.stratoscale.com/blog/dbaas/what-is-database-as-a-service/).</span></span> <span data-ttu-id="c37a5-211">Эти службы, полностью управляемые облачным поставщиком, обеспечивают встроенную безопасность, масштабируемость и мониторинг.</span><span class="sxs-lookup"><span data-stu-id="c37a5-211">Fully managed by a cloud vendor, these services provide built-in security, scalability, and monitoring.</span></span> <span data-ttu-id="c37a5-212">Вместо того, чтобы владеть услугой, вы просто потребляете ее в качестве [резервной службы.](./definition.md#backing-services)</span><span class="sxs-lookup"><span data-stu-id="c37a5-212">Instead of owning the service, you simply consume it as a [backing service](./definition.md#backing-services).</span></span> <span data-ttu-id="c37a5-213">Поставщик управляет ресурсом в масштабе и несет ответственность за производительность и техническое обслуживание.</span><span class="sxs-lookup"><span data-stu-id="c37a5-213">The provider operates the resource at scale and bears the responsibility for performance and maintenance.</span></span>

<span data-ttu-id="c37a5-214">Они могут быть настроены в зонах доступности облаков и регионах для достижения высокой доступности.</span><span class="sxs-lookup"><span data-stu-id="c37a5-214">They can be configured across cloud availability zones and regions to achieve high availability.</span></span> <span data-ttu-id="c37a5-215">Все они поддерживают просто в срок емкости и платить по мере вас-го модели.</span><span class="sxs-lookup"><span data-stu-id="c37a5-215">They all support just-in-time capacity and a pay-as-you-go model.</span></span> <span data-ttu-id="c37a5-216">Azure имеет различные виды управляемых вариантов обслуживания данных, каждый из которых имеет определенные преимущества.</span><span class="sxs-lookup"><span data-stu-id="c37a5-216">Azure features different kinds of managed data service options, each with specific benefits.</span></span>

<span data-ttu-id="c37a5-217">Сначала рассмотрим реляционные dBaaS-службы, доступные в Azure.</span><span class="sxs-lookup"><span data-stu-id="c37a5-217">We'll first look at relational DBaaS services available in Azure.</span></span> <span data-ttu-id="c37a5-218">Вы увидите, что флагманская база данных Microsoft s'L Server доступна вместе с несколькими вариантами с открытым исходным кодом.</span><span class="sxs-lookup"><span data-stu-id="c37a5-218">You'll see that Microsoft's flagship SQL Server database is available along with several open-source options.</span></span> <span data-ttu-id="c37a5-219">Затем мы поговорим об службах данных NoS'L в Azure.</span><span class="sxs-lookup"><span data-stu-id="c37a5-219">Then, we'll talk about the NoSQL data services in Azure.</span></span>

## <a name="azure-relational-databases"></a><span data-ttu-id="c37a5-220">Реляционные базы данных Azure</span><span class="sxs-lookup"><span data-stu-id="c37a5-220">Azure relational databases</span></span>

<span data-ttu-id="c37a5-221">Для облачных микрослужб, требующих реляционных данных, Azure предлагает четыре управляемые реляционные базы данных в качестве услуги (DBaaS), показанные на рисунке 5-11.</span><span class="sxs-lookup"><span data-stu-id="c37a5-221">For cloud-native microservices that require relational data, Azure offers four managed relational databases as a service (DBaaS) offerings, shown in Figure 5-11.</span></span>

![Управляемые реляционные базы данных в Azure](./media/azure-managed-databases.png)

<span data-ttu-id="c37a5-223">**Рис. 5-11**.</span><span class="sxs-lookup"><span data-stu-id="c37a5-223">**Figure 5-11**.</span></span> <span data-ttu-id="c37a5-224">Управляемые реляционные базы данных, доступные в Azure</span><span class="sxs-lookup"><span data-stu-id="c37a5-224">Managed relational databases available in Azure</span></span>

<span data-ttu-id="c37a5-225">На предыдущем рисунке обратите внимание на то, как каждый из них находится на общей инфраструктуре DBaaS, которая имеет ключевые возможности без каких-либо дополнительных затрат.</span><span class="sxs-lookup"><span data-stu-id="c37a5-225">In the previous figure, note how each sits upon a common DBaaS infrastructure which features key capabilities at no additional cost.</span></span>

<span data-ttu-id="c37a5-226">Эти функции особенно важны для организаций, которые предоставляет большое количество баз данных, но имеют ограниченные ресурсы для их управления.</span><span class="sxs-lookup"><span data-stu-id="c37a5-226">These features are especially important to organizations who provision large numbers of databases, but have limited resources to administer them.</span></span>
<span data-ttu-id="c37a5-227">Базу данных Azure можно предоставить за считанные минуты, выбрав объем обрабатывающих ядер, память и базовое хранилище.</span><span class="sxs-lookup"><span data-stu-id="c37a5-227">You can provision an Azure database in minutes by selecting the amount of processing cores, memory, and underlying storage.</span></span> <span data-ttu-id="c37a5-228">Вы можете масштабировать базу данных на лету и динамически корректировать ресурсы практически без простоев.</span><span class="sxs-lookup"><span data-stu-id="c37a5-228">You can scale the database on-the-fly and dynamically adjust resources with little to no downtime.</span></span>

## <a name="azure-sql-database"></a><span data-ttu-id="c37a5-229">База данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="c37a5-229">Azure SQL Database</span></span>

<span data-ttu-id="c37a5-230">Команды разработчиков, имеющих опыт работы в microsoft S'L Server, должны рассмотреть [базу данных Azure S'L.](https://docs.microsoft.com/azure/sql-database/)</span><span class="sxs-lookup"><span data-stu-id="c37a5-230">Development teams with expertise in Microsoft SQL Server should consider [Azure SQL Database](https://docs.microsoft.com/azure/sql-database/).</span></span> <span data-ttu-id="c37a5-231">Это полностью управляемая реляционная база данных как услуга (DBaaS) на основе серверной базы данных Microsoft S'L.</span><span class="sxs-lookup"><span data-stu-id="c37a5-231">It's a fully managed relational database-as-a-service (DBaaS) based on the Microsoft SQL Server Database Engine.</span></span> <span data-ttu-id="c37a5-232">Служба разделяет множество функций, найденных в предварительной версии сервера S'L, и запускает последнюю стабильную версию серверного движка базы данных S'L.</span><span class="sxs-lookup"><span data-stu-id="c37a5-232">The service shares many features found in the on-premises version of SQL Server and runs the latest stable version of the SQL Server Database Engine.</span></span>

<span data-ttu-id="c37a5-233">Для использования в облачной микрослужбе база данных Azure S'L доступна с тремя вариантами развертывания:</span><span class="sxs-lookup"><span data-stu-id="c37a5-233">For use with a cloud-native microservice, Azure SQL Database is available with three deployment options:</span></span>

- <span data-ttu-id="c37a5-234">Единая база данных представляет собой полностью управляемую базу данных S'L, работающего на [сервере базы данных Azure s'L](https://docs.microsoft.com/azure/sql-database/sql-database-servers) в облаке Azure.</span><span class="sxs-lookup"><span data-stu-id="c37a5-234">A Single Database represents a fully managed SQL Database running on an [Azure SQL Database server](https://docs.microsoft.com/azure/sql-database/sql-database-servers) in the Azure cloud.</span></span> <span data-ttu-id="c37a5-235">База данных считается [*содержащейся,*](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases) поскольку она не имеет зависимостей конфигурации от базового сервера базы данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-235">The database is considered [*contained*](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases) as it has no configuration dependencies on the underlying database server.</span></span>
  
- <span data-ttu-id="c37a5-236">[Управляемая инстанция](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance) — это полностью управляемый экземпляр серверной базы данных Microsoft S'L, обеспечивающий почти 100% совместимость с предприимчивым сервером S'L.</span><span class="sxs-lookup"><span data-stu-id="c37a5-236">A [Managed Instance](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance) is a fully managed instance of the Microsoft SQL Server Database Engine that provides near-100% compatibility with an on-premises SQL Server.</span></span> <span data-ttu-id="c37a5-237">Эта опция поддерживает более крупные базы данных, до 35 ТБ, и помещается в [виртуальную сеть Azure](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) для лучшей изоляции.</span><span class="sxs-lookup"><span data-stu-id="c37a5-237">This option supports larger databases, up to 35 TB and is placed in an [Azure Virtual Network](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) for better isolation.</span></span>

- <span data-ttu-id="c37a5-238">[База данных Azure s'L без сервера](https://docs.microsoft.com/azure/sql-database/sql-database-serverless) — это вычислительный уровень для одной базы данных, который автоматически масштабируется в зависимости от спроса на рабочую нагрузку.</span><span class="sxs-lookup"><span data-stu-id="c37a5-238">[Azure SQL Database serverless](https://docs.microsoft.com/azure/sql-database/sql-database-serverless) is a compute tier for a single database that automatically scales based on workload demand.</span></span> <span data-ttu-id="c37a5-239">Он выставляет счета только за количество вычислений, используемых в секунду.</span><span class="sxs-lookup"><span data-stu-id="c37a5-239">It bills only for the amount of compute used per second.</span></span> <span data-ttu-id="c37a5-240">Услуга хорошо подходит для рабочих нагрузок с прерывистыми, непредсказуемыми моделями использования, перемежаются с периодами бездействия.</span><span class="sxs-lookup"><span data-stu-id="c37a5-240">The service is well suited for workloads with intermittent, unpredictable usage patterns, interspersed with periods of inactivity.</span></span> <span data-ttu-id="c37a5-241">Уровень без сервера вычисляет также автоматически приостанавливает базы данных во время неактивных периодов, так что выставляются только платежи за хранение.</span><span class="sxs-lookup"><span data-stu-id="c37a5-241">The serverless compute tier also automatically pauses databases during inactive periods so that only storage charges are billed.</span></span> <span data-ttu-id="c37a5-242">Он автоматически возобновляется при возврате действия.</span><span class="sxs-lookup"><span data-stu-id="c37a5-242">It automatically resumes when activity returns.</span></span>

<span data-ttu-id="c37a5-243">Помимо традиционного стека серверов Microsoft S'L Server, Azure также имеет управляемые версии трех популярных баз данных с открытым исходным кодом.</span><span class="sxs-lookup"><span data-stu-id="c37a5-243">Beyond the traditional Microsoft SQL Server stack, Azure also features managed versions of three popular open-source databases.</span></span>

## <a name="open-source-databases-in-azure"></a><span data-ttu-id="c37a5-244">Базы данных с открытым исходным кодом в Azure</span><span class="sxs-lookup"><span data-stu-id="c37a5-244">Open-source databases in Azure</span></span>

<span data-ttu-id="c37a5-245">Реляционные базы данных с открытым исходным кодом стали популярным выбором для облачных приложений.</span><span class="sxs-lookup"><span data-stu-id="c37a5-245">Open-source relational databases have become a popular choice for cloud-native applications.</span></span> <span data-ttu-id="c37a5-246">Многие предприятия отдают им предпочтение по сравнению с коммерческими продуктами баз данных, особенно для экономии средств.</span><span class="sxs-lookup"><span data-stu-id="c37a5-246">Many enterprises favor them over commercial database products, especially for cost savings.</span></span> <span data-ttu-id="c37a5-247">Многие группы разработчиков пользуются гибкостью, развитием, поддерживаемым сообществом, а также экосистемой инструментов и расширений.</span><span class="sxs-lookup"><span data-stu-id="c37a5-247">Many development teams enjoy their flexibility, community-backed development, and ecosystem of tools and extensions.</span></span> <span data-ttu-id="c37a5-248">Базы данных с открытым исходным кодом могут быть развернуты в нескольких облачных провайдерах, что помогает свести к минимуму проблему блокировки поставщиков.</span><span class="sxs-lookup"><span data-stu-id="c37a5-248">Open-source databases can be deployed across multiple cloud providers, helping minimize the concern of "vendor lock-in."</span></span>

<span data-ttu-id="c37a5-249">Разработчики могут легко самостоятельно разместить любую базу данных с открытым исходным кодом на Azure VM.</span><span class="sxs-lookup"><span data-stu-id="c37a5-249">Developers can easily self-host any open-source database on an Azure VM.</span></span> <span data-ttu-id="c37a5-250">Обеспечивая полный контроль, этот подход ставит вас на крючок для управления, мониторинга и обслуживания базы данных и VM.</span><span class="sxs-lookup"><span data-stu-id="c37a5-250">While providing full control, this approach puts you on the hook for the management, monitoring, and maintenance of the database and VM.</span></span>

<span data-ttu-id="c37a5-251">Тем не менее, корпорация Майкрософт продолжает свою приверженность сохранению Azure «открытой платформы», предлагая несколько популярных баз данных с открытым исходным кодом в качестве *полностью управляемых* служб DBaaS.</span><span class="sxs-lookup"><span data-stu-id="c37a5-251">However, Microsoft continues its commitment to keeping Azure an “open platform” by offering several popular open-source databases as *fully managed* DBaaS services.</span></span>

### <a name="azure-database-for-mysql"></a><span data-ttu-id="c37a5-252">База данных Azure для MySQL</span><span class="sxs-lookup"><span data-stu-id="c37a5-252">Azure Database for MySQL</span></span>

<span data-ttu-id="c37a5-253">[MyS'L](https://en.wikipedia.org/wiki/MySQL) — это реляционная база данных с открытым исходным кодом и столп для приложений, построенных на [стеку программного обеспечения LAMP.](https://en.wikipedia.org/wiki/LAMP_(software_bundle))</span><span class="sxs-lookup"><span data-stu-id="c37a5-253">[MySQL](https://en.wikipedia.org/wiki/MySQL) is an open-source relational database and a pillar for applications built on the [LAMP software stack](https://en.wikipedia.org/wiki/LAMP_(software_bundle)).</span></span> <span data-ttu-id="c37a5-254">Широко подобраны для *чтения тяжелых* рабочих нагрузок, он используется многими крупными организациями, в том числе Facebook, Twitter и YouTube.</span><span class="sxs-lookup"><span data-stu-id="c37a5-254">Widely chosen for *read heavy* workloads, it's used by many large organizations, including Facebook, Twitter, and YouTube.</span></span> <span data-ttu-id="c37a5-255">Сообщество издание доступно бесплатно, в то время как предприятие издание требует покупки лицензии.</span><span class="sxs-lookup"><span data-stu-id="c37a5-255">The community edition is available for free, while the enterprise edition requires a license purchase.</span></span> <span data-ttu-id="c37a5-256">Первоначально созданный в 1995 году, продукт был приобретен Sun Microsystems в 2008 году.</span><span class="sxs-lookup"><span data-stu-id="c37a5-256">Originally created in 1995, the product was purchased by Sun Microsystems in 2008.</span></span> <span data-ttu-id="c37a5-257">Oracle приобрела Sun и MyS'L в 2010 году.</span><span class="sxs-lookup"><span data-stu-id="c37a5-257">Oracle acquired Sun and MySQL in 2010.</span></span>

<span data-ttu-id="c37a5-258">[База данных Azure для MyS'L](https://azure.microsoft.com/services/mysql/) — это управляемая реляционная служба баз данных, основанная на движке MyS'L Server с открытым исходным кодом.</span><span class="sxs-lookup"><span data-stu-id="c37a5-258">[Azure Database for MySQL](https://azure.microsoft.com/services/mysql/) is a managed relational database service based on the open-source MySQL Server engine.</span></span> <span data-ttu-id="c37a5-259">В нем используется издание сообщества MyS'L.</span><span class="sxs-lookup"><span data-stu-id="c37a5-259">It uses the MySQL Community edition.</span></span> <span data-ttu-id="c37a5-260">Сервер Azure MyS'L является административной точкой службы.</span><span class="sxs-lookup"><span data-stu-id="c37a5-260">The Azure MySQL server is the administrative point for the service.</span></span> <span data-ttu-id="c37a5-261">Это тот же серверный движок MyS'L, используемый для развертывания на месте.</span><span class="sxs-lookup"><span data-stu-id="c37a5-261">It's the same MySQL server engine used for on-premises deployments.</span></span> <span data-ttu-id="c37a5-262">Двигатель может создавать единую базу данных на сервер или несколько баз данных на сервер, которые разделяют ресурсы.</span><span class="sxs-lookup"><span data-stu-id="c37a5-262">The engine can create a single database per server or multiple databases per server that share resources.</span></span> <span data-ttu-id="c37a5-263">Вы можете продолжать управлять данными с помощью тех же инструментов с открытым исходным кодом, не осваивая новые навыки или управляя виртуальными машинами.</span><span class="sxs-lookup"><span data-stu-id="c37a5-263">You can continue to manage data using the same open-source tools without having to learn new skills or manage virtual machines.</span></span>

### <a name="azure-database-for-mariadb"></a><span data-ttu-id="c37a5-264">База данных Azure для MariaDB</span><span class="sxs-lookup"><span data-stu-id="c37a5-264">Azure Database for MariaDB</span></span>

<span data-ttu-id="c37a5-265">[MariaDB](https://mariadb.com/) Сервер является еще одним популярным сервером баз данных с открытым исходным кодом.</span><span class="sxs-lookup"><span data-stu-id="c37a5-265">[MariaDB](https://mariadb.com/) Server is another popular open-source database server.</span></span> <span data-ttu-id="c37a5-266">Он был создан в качестве *вилки* MyS'L, когда Oracle приобрела Sun Microsystems, который владел MyS'L.</span><span class="sxs-lookup"><span data-stu-id="c37a5-266">It was created as a *fork* of MySQL when Oracle purchased Sun Microsystems, who owned MySQL.</span></span> <span data-ttu-id="c37a5-267">Цель состояла в том, чтобы гарантировать, что MariaDB остается открытым исходным кодом.</span><span class="sxs-lookup"><span data-stu-id="c37a5-267">The intent was to ensure that MariaDB remained open-source.</span></span> <span data-ttu-id="c37a5-268">Поскольку MariaDB является вилкой MyS'L, определения данных и таблицсовместимы, а клиентские протоколы, структуры и AI являются сплоченными.</span><span class="sxs-lookup"><span data-stu-id="c37a5-268">As MariaDB is a fork of MySQL, the data and table definitions are compatible, and the client protocols, structures, and APIs, are close-knit.</span></span>

<span data-ttu-id="c37a5-269">MariaDB имеет сильное сообщество и используется многими крупными предприятиями.</span><span class="sxs-lookup"><span data-stu-id="c37a5-269">MariaDB has a strong community and is used by many large enterprises.</span></span> <span data-ttu-id="c37a5-270">В то время как Oracle продолжает поддерживать, укреплять и поддерживать MyS'L, фонд MariaDB управляет MariaDB, позволяя публичный вклад в продукт и документацию.</span><span class="sxs-lookup"><span data-stu-id="c37a5-270">While Oracle continues to maintain, enhance, and support MySQL, the MariaDB foundation manages MariaDB, allowing public contributions to the product and documentation.</span></span>

<span data-ttu-id="c37a5-271">[База данных Azure для MariaDB](https://azure.microsoft.com/services/mariadb/) — это полностью управляемая реляционная база данных как служба в облаке Azure.</span><span class="sxs-lookup"><span data-stu-id="c37a5-271">[Azure Database for MariaDB](https://azure.microsoft.com/services/mariadb/) is a fully managed relational database as a service in the Azure cloud.</span></span> <span data-ttu-id="c37a5-272">Услуга основана на серверном движке серверного выпуска сообщества MariaDB.</span><span class="sxs-lookup"><span data-stu-id="c37a5-272">The service is based on the MariaDB community edition server engine.</span></span> <span data-ttu-id="c37a5-273">Он может обрабатывать критически важные рабочие нагрузки с предсказуемой производительностью и динамической масштабируемостью.</span><span class="sxs-lookup"><span data-stu-id="c37a5-273">It can handle mission-critical workloads with predictable performance and dynamic scalability.</span></span>

### <a name="azure-database-for-postgresql"></a><span data-ttu-id="c37a5-274">База данных Azure для PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="c37a5-274">Azure Database for PostgreSQL</span></span>

<span data-ttu-id="c37a5-275">[PostgreS'L](https://www.postgresql.org/) является реляционной базой данных с открытым исходным кодом с более чем 30-летним активным развитием.</span><span class="sxs-lookup"><span data-stu-id="c37a5-275">[PostgreSQL](https://www.postgresql.org/) is an open-source relational database with over 30 years of active development.</span></span> <span data-ttu-id="c37a5-276">PostgresSSL имеет прочную репутацию надежности и целостности данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-276">PostgresSQL has a strong reputation for reliability and data integrity.</span></span> <span data-ttu-id="c37a5-277">Это многофункциональный, совместимый с функцией, и считается более исполнительным, чем MyS'L - особенно для рабочих нагрузок со сложными запросами и тяжелыми пишет.</span><span class="sxs-lookup"><span data-stu-id="c37a5-277">It’s feature rich, SQL compliant, and considered more performant than MySQL - especially for workloads with complex queries and heavy writes.</span></span> <span data-ttu-id="c37a5-278">Многие крупные предприятия, втоместь Apple, Red Hat и Fujitsu, создали продукты с использованием PostgreS'L.</span><span class="sxs-lookup"><span data-stu-id="c37a5-278">Many large enterprises including Apple, Red Hat, and Fujitsu have built products using PostgreSQL.</span></span>

<span data-ttu-id="c37a5-279">[База данных Azure для PostgreS'L](https://azure.microsoft.com/services/postgresql/) — это полностью управляемая реляционная служба баз данных, основанная на движке базы данных Postgres с открытым исходным кодом.</span><span class="sxs-lookup"><span data-stu-id="c37a5-279">[Azure Database for PostgreSQL](https://azure.microsoft.com/services/postgresql/) is a fully managed relational database service, based on the open-source Postgres database engine.</span></span> <span data-ttu-id="c37a5-280">Сервис поддерживает многие платформы разработки, в том числе СЗ, Ява, Python, Узла, C\#и PHP.</span><span class="sxs-lookup"><span data-stu-id="c37a5-280">The service supports many development platforms, including C++, Java, Python, Node, C\#, and PHP.</span></span> <span data-ttu-id="c37a5-281">Вы можете перенести в него базы данных PostgreS'L с помощью инструмента [интерфейса командной строки](https://datamigration.microsoft.com/scenario/postgresql-to-azurepostgresql?step=1) или службы миграции данных Azure.</span><span class="sxs-lookup"><span data-stu-id="c37a5-281">You can migrate PostgreSQL databases to it using the [command-line interface](https://datamigration.microsoft.com/scenario/postgresql-to-azurepostgresql?step=1) tool or Azure Data Migration Service.</span></span>

<span data-ttu-id="c37a5-282">База данных Azure для PostgreS'L доступна с двумя вариантами развертывания:</span><span class="sxs-lookup"><span data-stu-id="c37a5-282">Azure Database for PostgreSQL is available with two deployment options:</span></span>

- <span data-ttu-id="c37a5-283">Опция развертывания [Единого сервера](https://docs.microsoft.com/azure/postgresql/concepts-servers) является центральной административной точкой для нескольких баз данных, в которые можно развернуть множество баз данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-283">The [Single Server](https://docs.microsoft.com/azure/postgresql/concepts-servers) deployment option is a central administrative point for multiple databases to which you can deploy many databases.</span></span> <span data-ttu-id="c37a5-284">Ценообразование структурировано на сервер на основе ядер и хранения.</span><span class="sxs-lookup"><span data-stu-id="c37a5-284">The pricing is structured per-server based upon cores and storage.</span></span>

- <span data-ttu-id="c37a5-285">Гипермасштаб [(Citus) вариант](https://azure.microsoft.com/blog/get-high-performance-scaling-for-your-azure-database-workloads-with-hyperscale/) питается от технологии Citus Data.</span><span class="sxs-lookup"><span data-stu-id="c37a5-285">The [Hyperscale (Citus) option](https://azure.microsoft.com/blog/get-high-performance-scaling-for-your-azure-database-workloads-with-hyperscale/) is powered by Citus Data technology.</span></span> <span data-ttu-id="c37a5-286">Это позволяет повысить производительность за счет *горизонтального масштабирования* единой базы данных на сотнях узлов для обеспечения быстрой производительности и масштабирования.</span><span class="sxs-lookup"><span data-stu-id="c37a5-286">It enables high performance by *horizontally scaling* a single database across hundreds of nodes to deliver fast performance and scale.</span></span> <span data-ttu-id="c37a5-287">Эта опция позволяет движку вписывать больше данных в память, параллелизировать запросы в сотнях узлов и быстрее индексировать данные.</span><span class="sxs-lookup"><span data-stu-id="c37a5-287">This option allows the engine to fit more data in memory, parallelize queries across hundreds of nodes, and index data faster.</span></span>

## <a name="nosql-data-in-azure"></a><span data-ttu-id="c37a5-288">Данные NoS'L в Azure</span><span class="sxs-lookup"><span data-stu-id="c37a5-288">NoSQL data in Azure</span></span>

<span data-ttu-id="c37a5-289">Cosmos DB — это полностью управляемый, глобально распределенный сервис баз данных NoS'L в облаке Azure.</span><span class="sxs-lookup"><span data-stu-id="c37a5-289">Cosmos DB is a fully managed, globally distributed NoSQL database service in the Azure cloud.</span></span> <span data-ttu-id="c37a5-290">Он был принят многими крупными компаниями по всему миру, включая Coca-Cola, Skype, ExxonMobil и Liberty Mutual.</span><span class="sxs-lookup"><span data-stu-id="c37a5-290">It has been adopted by many large companies across the world,  including Coca-Cola, Skype, ExxonMobil, and Liberty Mutual.</span></span>

<span data-ttu-id="c37a5-291">Если ваши услуги требуют быстрого реагирования из любой точки мира, высокой доступности или эластичной масштабируемости, Cosmos DB является отличным выбором.</span><span class="sxs-lookup"><span data-stu-id="c37a5-291">If your services require fast response from anywhere in the world, high availability, or elastic scalability, Cosmos DB is a great choice.</span></span> <span data-ttu-id="c37a5-292">На рисунке 5-12 показан космос DB.</span><span class="sxs-lookup"><span data-stu-id="c37a5-292">Figure 5-12 shows Cosmos DB.</span></span>

![Обзор Космос DB](./media/cosmos-db-overview.png)

<span data-ttu-id="c37a5-294">**Рисунок 5-12**: Обзор Космос DB</span><span class="sxs-lookup"><span data-stu-id="c37a5-294">**Figure 5-12**: Overview of Cosmos DB</span></span>

<span data-ttu-id="c37a5-295">Предыдущая цифра представляет многие из встроенных облачных возможностей, доступных в Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="c37a5-295">The previous figure presents many of the built-in cloud-native capabilities available in Cosmos DB.</span></span> <span data-ttu-id="c37a5-296">В этом разделе мы рассмотрим их поближе.</span><span class="sxs-lookup"><span data-stu-id="c37a5-296">In this section, we’ll take a closer look at them.</span></span>

### <a name="global-support"></a><span data-ttu-id="c37a5-297">Глобальная поддержка</span><span class="sxs-lookup"><span data-stu-id="c37a5-297">Global support</span></span>

<span data-ttu-id="c37a5-298">Облачные приложения часто имеют глобальную аудиторию и требуют глобального масштаба.</span><span class="sxs-lookup"><span data-stu-id="c37a5-298">Cloud-native applications often have a global audience and require global scale.</span></span>

<span data-ttu-id="c37a5-299">Вы можете распространять базы данных Cosmos по регионам или по всему миру, размещая данные рядом с пользователями, улучшая время отклика и уменьшая задержку.</span><span class="sxs-lookup"><span data-stu-id="c37a5-299">You can distribute Cosmos databases across regions or around the world, placing data close to your users, improving response time, and reducing latency.</span></span> <span data-ttu-id="c37a5-300">Можно добавить или удалить базу данных из региона без приостановки или передислокации служб.</span><span class="sxs-lookup"><span data-stu-id="c37a5-300">You can add or remove a database from a region without pausing or redeploying your services.</span></span> <span data-ttu-id="c37a5-301">На заднем плане Cosmos DB прозрачно реплицирует данные в каждый из настроенных регионов.</span><span class="sxs-lookup"><span data-stu-id="c37a5-301">In the background, Cosmos DB transparently replicates the data to each of the configured regions.</span></span>

<span data-ttu-id="c37a5-302">Cosmos DB поддерживает [активную/активную](https://kemptechnologies.com/white-papers/unfog-confusion-active-passive-activeactive-load-balancing/) кластеризм на глобальном уровне, позволяя настроить любой из регионов базы данных для поддержки *как записей,* так и чтения.</span><span class="sxs-lookup"><span data-stu-id="c37a5-302">Cosmos DB supports [active/active](https://kemptechnologies.com/white-papers/unfog-confusion-active-passive-activeactive-load-balancing/) clustering at the global level, enabling you to configure any of your database regions to support *both writes and reads*.</span></span>

<span data-ttu-id="c37a5-303">[Протокол Multi-Master](https://docs.microsoft.com/azure/cosmos-db/multi-master-benefits) является важной функцией в Cosmos DB, которая обеспечивает следующую функциональность:</span><span class="sxs-lookup"><span data-stu-id="c37a5-303">The [Multi-Master](https://docs.microsoft.com/azure/cosmos-db/multi-master-benefits) protocol is an important feature in Cosmos DB that enables the following functionality:</span></span>

- <span data-ttu-id="c37a5-304">Неограниченная эластичная писать и читать масштабируемость.</span><span class="sxs-lookup"><span data-stu-id="c37a5-304">Unlimited elastic write and read scalability.</span></span>

- <span data-ttu-id="c37a5-305">доступность для чтения и записи на 99,999 % по всему миру;</span><span class="sxs-lookup"><span data-stu-id="c37a5-305">99.999% read and write availability all around the world.</span></span>

- <span data-ttu-id="c37a5-306">гарантированные операции чтения или записи, обслуживаемые менее чем за 10 миллисекунд в 99-м процентиле.</span><span class="sxs-lookup"><span data-stu-id="c37a5-306">Guaranteed reads and writes served in less than 10 milliseconds at the 99th percentile.</span></span>

<span data-ttu-id="c37a5-307">С помощью AIS Cosmos DB [Multi-Homing](https://docs.microsoft.com/azure/cosmos-db/distribute-data-globally)ваша микрослужба автоматически знает о ближайшем регионе Azure и отправляет запросы в нее.</span><span class="sxs-lookup"><span data-stu-id="c37a5-307">With the Cosmos DB [Multi-Homing APIs](https://docs.microsoft.com/azure/cosmos-db/distribute-data-globally), your microservice is automatically aware of the nearest Azure region and sends requests to it.</span></span> <span data-ttu-id="c37a5-308">Ближайший регион идентифицируется Cosmos DB без каких-либо изменений конфигурации.</span><span class="sxs-lookup"><span data-stu-id="c37a5-308">The nearest region is identified by Cosmos DB without any configuration changes.</span></span> <span data-ttu-id="c37a5-309">Если регион становится недоступным, функция Multi-Homing автоматически направит запросы в ближайший доступный регион.</span><span class="sxs-lookup"><span data-stu-id="c37a5-309">Should a region become unavailable, the Multi-Homing feature will automatically route requests to the next nearest available region.</span></span>

### <a name="multi-model-support"></a><span data-ttu-id="c37a5-310">Поддержка мультимодели</span><span class="sxs-lookup"><span data-stu-id="c37a5-310">Multi-model support</span></span>

<span data-ttu-id="c37a5-311">При реплатформении монолитных приложений в облачную архитектуру группам разработчиков иногда приходится мигрировать с открытым исходным кодом, ноСЗЛ.</span><span class="sxs-lookup"><span data-stu-id="c37a5-311">When replatforming monolithic applications to a cloud-native architecture, development teams sometimes have to migrate open-source, NoSQL data stores.</span></span> <span data-ttu-id="c37a5-312">Cosmos DB может помочь вам сохранить свои инвестиции в эти хранилища данных NoS'L с *помощью мультимодельной* платформы данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-312">Cosmos DB can help you preserve your investment in these NoSQL datastores with its *multi-model* data platform.</span></span> <span data-ttu-id="c37a5-313">На рисунке 5-13 показаны поддерживаемые [AA'L совместимости](https://www.wikiwand.com/en/Cosmos_DB)НоСЗЛ.</span><span class="sxs-lookup"><span data-stu-id="c37a5-313">Figure 5-13 shows the supported NoSQL [compatibility APIs](https://www.wikiwand.com/en/Cosmos_DB).</span></span>

![Поставщики Cosmos DB](./media/cosmos-db-providers.png)

<span data-ttu-id="c37a5-315">**Рисунок 5-13**: Поставщики Космос DB</span><span class="sxs-lookup"><span data-stu-id="c37a5-315">**Figure 5-13**: Cosmos DB providers</span></span>

<span data-ttu-id="c37a5-316">Команды разработчиков могут перенести существующие базы данных Mongo, Gremlin или Cassandra в Cosmos DB с минимальными изменениями в данных или коде.</span><span class="sxs-lookup"><span data-stu-id="c37a5-316">Development teams can migrate existing Mongo, Gremlin, or Cassandra databases into Cosmos DB with minimal changes to data or code.</span></span> <span data-ttu-id="c37a5-317">Для новых приложений команды разработчиков могут выбирать среди опций с открытым исходным кодом или встроенной модели API S-L.</span><span class="sxs-lookup"><span data-stu-id="c37a5-317">For new apps, development teams can choose among open-source options or the built-in SQL API model.</span></span>

> <span data-ttu-id="c37a5-318">Внутри компании Cosmos хранит данные в простом формате структурирования, состоящем из примитивных типов данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-318">Internally, Cosmos stores the data in a simple struct format made up of primitive data types.</span></span> <span data-ttu-id="c37a5-319">Для каждого запроса движок базы данных преобразует примитивные данные в выбранное моделью представление.</span><span class="sxs-lookup"><span data-stu-id="c37a5-319">For each request, the database engine translates the primitive data into the model representation you've selected.</span></span>

<span data-ttu-id="c37a5-320">В предыдущем рисунке, 5-13, обратите внимание на вариант [API таблицы.](https://docs.microsoft.com/azure/cosmos-db/table-introduction)</span><span class="sxs-lookup"><span data-stu-id="c37a5-320">In the previous figure, 5-13, note the [Table API](https://docs.microsoft.com/azure/cosmos-db/table-introduction) option.</span></span> <span data-ttu-id="c37a5-321">Этот API является эволюцией хранилища таблиц Azure.</span><span class="sxs-lookup"><span data-stu-id="c37a5-321">This API is an evolution of Azure Table Storage.</span></span> <span data-ttu-id="c37a5-322">Обе модели имеют одинаковую базовую таблицу, но API таблицы Cosmos DB добавляет улучшения премиум-класса, недоступные в API хранения Azure.</span><span class="sxs-lookup"><span data-stu-id="c37a5-322">Both share the same underlying table model, but the Cosmos DB Table API adds premium enhancements not available in the Azure Storage API.</span></span> <span data-ttu-id="c37a5-323">Эти особенности контрастируют на рисунке 5-4.</span><span class="sxs-lookup"><span data-stu-id="c37a5-323">These features are contrasted in Figure 5-4.</span></span>

![API таблиц Azure](media/azure-table-api.png)

<span data-ttu-id="c37a5-325">**Рисунок 5-14**: Поставщики API таблицы Azure</span><span class="sxs-lookup"><span data-stu-id="c37a5-325">**Figure 5-14**: Azure Table API Providers</span></span>

<span data-ttu-id="c37a5-326">Микрослужбы, потребляющие хранилище таблицы Azure, могут легко мигрировать в API таблицы таблицы Космоса.</span><span class="sxs-lookup"><span data-stu-id="c37a5-326">Microservices that consume Azure Table storage can easily migrate to the Cosmos DB Table API.</span></span> <span data-ttu-id="c37a5-327">Изменения кода не требуются.</span><span class="sxs-lookup"><span data-stu-id="c37a5-327">No code changes are required.</span></span>

### <a name="tunable-consistency"></a><span data-ttu-id="c37a5-328">Настраиваемый согласованность</span><span class="sxs-lookup"><span data-stu-id="c37a5-328">Tunable consistency</span></span>

<span data-ttu-id="c37a5-329">Ранее в разделе *Реляционные против НоСЗЛ* мы обсуждали тему *согласованности данных.*</span><span class="sxs-lookup"><span data-stu-id="c37a5-329">Earlier in the *Relational vs. NoSQL* section, we discussed the subject of *data consistency*.</span></span> <span data-ttu-id="c37a5-330">Согласованность данных относится к *целостности* данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-330">Data consistency refers to the *integrity* of your data.</span></span> <span data-ttu-id="c37a5-331">Облачные службы с распределенными данными полагаются на репликацию и должны сделать фундаментальный компромисс между согласованностью чтения, доступностью и задержкой.</span><span class="sxs-lookup"><span data-stu-id="c37a5-331">Cloud-native services with distributed data rely on replication and must make a fundamental tradeoff between read consistency, availability, and latency.</span></span>

<span data-ttu-id="c37a5-332">Большинство распределенных баз данных позволяют разработчикам выбирать между двумя моделями согласованности: сильной согласованностью и возможной согласованностью.</span><span class="sxs-lookup"><span data-stu-id="c37a5-332">Most distributed databases allow developers to choose between two consistency models: strong consistency and eventual consistency.</span></span> <span data-ttu-id="c37a5-333">*Сильная консистенция* является золотым стандартом программируемости данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-333">*Strong consistency* is the gold standard of data programmability.</span></span> <span data-ttu-id="c37a5-334">Это гарантирует, что запрос всегда будет возвращать самые актуальные данные, даже если система должна иметь задержку в ожидании обновления для репликации во всех копиях базы данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-334">It guarantees that a query will always return the most current data - even if the system must incur latency waiting for an update to replicate across all database copies.</span></span> <span data-ttu-id="c37a5-335">В то время как база данных, настроенная для *возможной согласованности,* немедленно вернет данные, даже если эти данные не самая актуальная копия.</span><span class="sxs-lookup"><span data-stu-id="c37a5-335">While a database configured for *eventual consistency* will return data immediately, even if that data isn't the most current copy.</span></span> <span data-ttu-id="c37a5-336">Последний вариант обеспечивает более высокую доступность, больший масштаб и повышенную производительность.</span><span class="sxs-lookup"><span data-stu-id="c37a5-336">The latter option enables higher availability, greater scale, and increased performance.</span></span>

<span data-ttu-id="c37a5-337">Azure Cosmos DB предлагает пять четко определенных [моделей согласованности,](https://docs.microsoft.com/azure/cosmos-db/consistency-levels) показанных на рисунке 5-15.</span><span class="sxs-lookup"><span data-stu-id="c37a5-337">Azure Cosmos DB offers five well-defined [consistency models](https://docs.microsoft.com/azure/cosmos-db/consistency-levels) shown in Figure 5-15.</span></span>

![График консистенции Cosmos DB](./media/cosmos-consistency-level-graph.png)

<span data-ttu-id="c37a5-339">**Рисунок 5-15**: Уровни согласованности космоса DB</span><span class="sxs-lookup"><span data-stu-id="c37a5-339">**Figure 5-15**: Cosmos DB Consistency Levels</span></span>

 <span data-ttu-id="c37a5-340">Эти опции позволяют делать точные выборы и детальные компромиссы для согласованности, доступности и производительности данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-340">These options enable you to make precise choices and granular tradeoffs for consistency, availability, and the performance for your data.</span></span> <span data-ttu-id="c37a5-341">Рисунок 5-16 описывает каждый уровень.</span><span class="sxs-lookup"><span data-stu-id="c37a5-341">Figure 5-16 describes each level.</span></span>

![Уровни консистенции Cosmos DB](./media/cosmos-db-consistency-levels.png)

<span data-ttu-id="c37a5-343">**Рисунок 5-16**: Описание уровня согласованности Космосd DB</span><span class="sxs-lookup"><span data-stu-id="c37a5-343">**Figure 5-16**: Cosmos DB Consistency Level Description</span></span>

<span data-ttu-id="c37a5-344">В статье [Getting Behind 9-Ball: Космос DB Уровни согласованности Разъяснения](https://blog.jeremylikness.com/blog/2018-03-23_getting-behind-the-9ball-cosmosdb-consistency-levels/), Microsoft Облако разработчик адвокат Джереми Likeness обеспечивает отличное объяснение пяти моделей.</span><span class="sxs-lookup"><span data-stu-id="c37a5-344">In the article [Getting Behind the 9-Ball: Cosmos DB Consistency Levels Explained](https://blog.jeremylikness.com/blog/2018-03-23_getting-behind-the-9ball-cosmosdb-consistency-levels/), Microsoft Cloud Developer Advocate Jeremy Likeness provides an excellent explanation of the five models.</span></span>

### <a name="partitioning"></a><span data-ttu-id="c37a5-345">Секционирование</span><span class="sxs-lookup"><span data-stu-id="c37a5-345">Partitioning</span></span>

<span data-ttu-id="c37a5-346">Azure Cosmos DB включает автоматическое [разъезжание](https://docs.microsoft.com/azure/cosmos-db/partitioning-overview) для масштабирования базы данных для удовлетворения потребностей в производительности облачных служб.</span><span class="sxs-lookup"><span data-stu-id="c37a5-346">Azure Cosmos DB embraces automatic [partitioning](https://docs.microsoft.com/azure/cosmos-db/partitioning-overview) to scale a database to meet the performance needs of your cloud-native services.</span></span>

<span data-ttu-id="c37a5-347">Вы управляете данными в данных Cosmos DB, создавая базы данных, контейнеры и элементы.</span><span class="sxs-lookup"><span data-stu-id="c37a5-347">You manage data in Cosmos DB data by creating databases, containers, and items.</span></span>

<span data-ttu-id="c37a5-348">Контейнеры живут в базе данных Cosmos DB и представляют собой схемно-агностикную группировку элементов.</span><span class="sxs-lookup"><span data-stu-id="c37a5-348">Containers live in a Cosmos DB database and represent a schema-agnostic grouping of items.</span></span> <span data-ttu-id="c37a5-349">Элементы – это данные, которые вы добавляете в контейнер.</span><span class="sxs-lookup"><span data-stu-id="c37a5-349">Items are the data that you add to the container.</span></span> <span data-ttu-id="c37a5-350">Они представлены как документы, строки, узлы или края.</span><span class="sxs-lookup"><span data-stu-id="c37a5-350">They're represented as documents, rows, nodes, or edges.</span></span> <span data-ttu-id="c37a5-351">Все элементы, добавленные в контейнер, автоматически индексируются.</span><span class="sxs-lookup"><span data-stu-id="c37a5-351">All items added to a container are automatically indexed.</span></span>

<span data-ttu-id="c37a5-352">Для раздела контейнера элементы делятся на отдельные подмножества, называемые логическими разделами.</span><span class="sxs-lookup"><span data-stu-id="c37a5-352">To partition the container, items are divided into distinct subsets called logical partitions.</span></span> <span data-ttu-id="c37a5-353">Логические разделы заполняются в зависимости от значения ключа раздела, связанного с каждым элементом в контейнере.</span><span class="sxs-lookup"><span data-stu-id="c37a5-353">Logical partitions are populated based on the value of a partition key that is associated with each item in a container.</span></span> <span data-ttu-id="c37a5-354">На рисунке 5-18 показаны два контейнера с логическим разделом, основанным на значении ключа раздела.</span><span class="sxs-lookup"><span data-stu-id="c37a5-354">Figure 5-18 shows two containers each with a logical partition based on a partition key value.</span></span>

![Механика расставания Cosmos DB](./media/cosmos-db-partitioning.png)

<span data-ttu-id="c37a5-356">**Рисунок 5-18**: Механика раздела Космос DB</span><span class="sxs-lookup"><span data-stu-id="c37a5-356">**Figure 5-18**: Cosmos DB partitioning mechanics</span></span>

<span data-ttu-id="c37a5-357">Примечание в предыдущей цифре, как каждый элемент включает ключ раздела либо "город" или "аэропорт".</span><span class="sxs-lookup"><span data-stu-id="c37a5-357">Note in the  previous figure how each item includes a partition key of either ‘city’ or ‘airport’.</span></span> <span data-ttu-id="c37a5-358">Ключ определяет логический раздел элемента.</span><span class="sxs-lookup"><span data-stu-id="c37a5-358">The key determines the item’s logical partition.</span></span> <span data-ttu-id="c37a5-359">Элементы с городским кодом присваиваются контейнеру слева, а элементы с кодом аэропорта — контейнеру справа.</span><span class="sxs-lookup"><span data-stu-id="c37a5-359">Items with a city code are assigned to the container on the left, and items with an airport code, to the container on the right.</span></span> <span data-ttu-id="c37a5-360">Объединение значения ключа раздела с значением идентификатора создает индекс элемента, который однозначно идентифицирует элемент.</span><span class="sxs-lookup"><span data-stu-id="c37a5-360">Combining the partition key value with the ID value creates an item's index, which uniquely identifies the item.</span></span>

<span data-ttu-id="c37a5-361">Внутренне, Космос DB автоматически управляет размещением [логических разделов](https://docs.microsoft.com/azure/cosmos-db/partition-data) на физических разделах для удовлетворения масштабируемости и производительности контейнера.</span><span class="sxs-lookup"><span data-stu-id="c37a5-361">Internally, Cosmos DB automatically manages the placement of [logical partitions](https://docs.microsoft.com/azure/cosmos-db/partition-data) on physical partitions to satisfy the scalability and performance needs of the container.</span></span> <span data-ttu-id="c37a5-362">По мере увеличения пропускной памяти и требований к хранению приложений Azure Cosmos DB перераспределяет логические разделы на большем количестве серверов.</span><span class="sxs-lookup"><span data-stu-id="c37a5-362">As application throughput and storage requirements  increase, Azure Cosmos DB redistributes logical partitions across a greater number of servers.</span></span> <span data-ttu-id="c37a5-363">Операции перераспределения управляются Cosmos DB и вызываются без перерыва или простоя.</span><span class="sxs-lookup"><span data-stu-id="c37a5-363">Redistribution operations are managed by Cosmos DB and invoked without interruption or downtime.</span></span>

## <a name="newsql-databases"></a><span data-ttu-id="c37a5-364">Новые базы данных SSL</span><span class="sxs-lookup"><span data-stu-id="c37a5-364">NewSQL databases</span></span>

<span data-ttu-id="c37a5-365">*NewS'L* — это новая технология баз данных, которая сочетает распределенную масштабируемость НоСЗЛ с гарантиями acid релятивной базы данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-365">*NewSQL* is an emerging database technology that combines the distributed scalability of NoSQL with the ACID guarantees of a relational database.</span></span> <span data-ttu-id="c37a5-366">Новые базы данных sS'L имеют важное значение для бизнес-систем, которые должны обрабатывать большие объемы данных, в распределенных средах, с полной поддержкой транзакций и соответствием ACID.</span><span class="sxs-lookup"><span data-stu-id="c37a5-366">NewSQL databases are important for business systems that must process high-volumes of data, across distributed environments, with full transactional support and ACID compliance.</span></span> <span data-ttu-id="c37a5-367">Хотя база данных NoS'L может обеспечить масштабируемость, она не гарантирует согласованность данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-367">While a NoSQL database can provide massive scalability, it does not guarantee data consistency.</span></span> <span data-ttu-id="c37a5-368">Периодические проблемы из-за несогласованных данных могут нанести бремя команде разработчиков.</span><span class="sxs-lookup"><span data-stu-id="c37a5-368">Intermittent problems from inconsistent data can place a burden on the development team.</span></span> <span data-ttu-id="c37a5-369">Разработчики должны создавать гарантии в свой код микрослужб для управления проблемами, вызванными несовместимыми данными.</span><span class="sxs-lookup"><span data-stu-id="c37a5-369">Developers must construct safeguards into their microservice code to manage problems caused by inconsistent data.</span></span>

<span data-ttu-id="c37a5-370">Фонд облачных вычислений (CNCF) включает в себя несколько проектов по базам данных NewS'L.</span><span class="sxs-lookup"><span data-stu-id="c37a5-370">The Cloud Native Computing Foundation (CNCF) features several NewSQL database projects.</span></span>

| <span data-ttu-id="c37a5-371">Проект</span><span class="sxs-lookup"><span data-stu-id="c37a5-371">Project</span></span> | <span data-ttu-id="c37a5-372">Характеристики</span><span class="sxs-lookup"><span data-stu-id="c37a5-372">Characteristics</span></span> |
| :-------- | :-------- |
| <span data-ttu-id="c37a5-373">Таракан DB</span><span class="sxs-lookup"><span data-stu-id="c37a5-373">Cockroach DB</span></span> |<span data-ttu-id="c37a5-374">Совместимая с ACID реляционная база данных, масштабирующаяся по всему миру.</span><span class="sxs-lookup"><span data-stu-id="c37a5-374">An ACID compliant, relational database that scales globally.</span></span> <span data-ttu-id="c37a5-375">Добавьте новый узлы в кластер, и CockroachDB позаботится о балансировании данных в экземплярах и географических регионах.</span><span class="sxs-lookup"><span data-stu-id="c37a5-375">Add a new node to a cluster and CockroachDB takes care of balancing the data across instances and geographies.</span></span> <span data-ttu-id="c37a5-376">Он создает, управляет и распространяет реплики для обеспечения надежности.</span><span class="sxs-lookup"><span data-stu-id="c37a5-376">It creates, manages and distributes replicas to ensure reliability.</span></span> <span data-ttu-id="c37a5-377">Это с открытым исходным кодом и в свободном доступе.</span><span class="sxs-lookup"><span data-stu-id="c37a5-377">It’s open source and freely available.</span></span>  |
| <span data-ttu-id="c37a5-378">TiDB</span><span class="sxs-lookup"><span data-stu-id="c37a5-378">TiDB</span></span> | <span data-ttu-id="c37a5-379">База данных с открытым исходным кодом, поддерживающая рабочие нагрузки гибридных транзакционных и аналитических процессов (HTAP).</span><span class="sxs-lookup"><span data-stu-id="c37a5-379">An open-source database that supports Hybrid Transactional and Analytical Processing (HTAP) workloads.</span></span> <span data-ttu-id="c37a5-380">Это MyS'L-совместимо и имеет горизонтальную масштабируемость, сильную согласованность и высокую доступность.</span><span class="sxs-lookup"><span data-stu-id="c37a5-380">It is MySQL-compatible and features horizontal scalability, strong consistency, and high availability.</span></span>  <span data-ttu-id="c37a5-381">TiDB действует как сервер MyS'L.</span><span class="sxs-lookup"><span data-stu-id="c37a5-381">TiDB acts like a MySQL server.</span></span> <span data-ttu-id="c37a5-382">Вы можете продолжать использовать существующие клиентские библиотеки MyS'L, не требуя значительных изменений кода в приложении.</span><span class="sxs-lookup"><span data-stu-id="c37a5-382">You can continue to use existing MySQL client libraries, without requiring extensive code changes to your application.</span></span> |
| <span data-ttu-id="c37a5-383">YugabyteDB</span><span class="sxs-lookup"><span data-stu-id="c37a5-383">YugabyteDB</span></span> | <span data-ttu-id="c37a5-384">Открытая исходная база данных с открытым исходным кодом, высокопроизводительная, распределенная база данных S'L.</span><span class="sxs-lookup"><span data-stu-id="c37a5-384">An open source, high-performance, distributed SQL database.</span></span> <span data-ttu-id="c37a5-385">Он поддерживает низкую задержку запросов, устойчивость к сбоям и глобальное распределение данных.</span><span class="sxs-lookup"><span data-stu-id="c37a5-385">It supports low query latency, resilience against failures, and global data distribution.</span></span> <span data-ttu-id="c37a5-386">YugabyteDB является PostgressSS-совместимым и обрабатывает масштабирование RDBMS и интернет-масштабol.</span><span class="sxs-lookup"><span data-stu-id="c37a5-386">YugabyteDB is PostgressSQL-compatible and handles scale-out RDBMS and internet-scale OLTP workloads.</span></span> <span data-ttu-id="c37a5-387">Продукт также поддерживает НоСЗЛ и совместим с Cassandra.</span><span class="sxs-lookup"><span data-stu-id="c37a5-387">The product also support NoSQL and is compatible with Cassandra.</span></span> |
|<span data-ttu-id="c37a5-388">Витесс</span><span class="sxs-lookup"><span data-stu-id="c37a5-388">Vitess</span></span> | <span data-ttu-id="c37a5-389">Vitess — это решение базы данных для развертывания, масштабирования и управления большими кластерами экземпляров MyS'L.</span><span class="sxs-lookup"><span data-stu-id="c37a5-389">Vitess is a database solution for deploying, scaling and managing large clusters of MySQL instances.</span></span> <span data-ttu-id="c37a5-390">Он может работать в публичной или частной облачной архитектуре.</span><span class="sxs-lookup"><span data-stu-id="c37a5-390">It’s can run in a public or private cloud architecture.</span></span> <span data-ttu-id="c37a5-391">Он сочетает в себе и расширяет многие важные функции MyS'L и имеет вертикальную и горизонтальную поддержку осколков.</span><span class="sxs-lookup"><span data-stu-id="c37a5-391">It combines and extends many important MySQL features and features both vertical and horizontal sharding support.</span></span> <span data-ttu-id="c37a5-392">Основанная на YouTube, Vitess обслуживает весь трафик базы данных YouTube с 2011 года.</span><span class="sxs-lookup"><span data-stu-id="c37a5-392">Originated by YouTube, Vitess has been serving all YouTube database traffic since 2011 .</span></span> |

<span data-ttu-id="c37a5-393">Проекты с открытым исходным кодом в предыдущем рисунке доступны в Фонде облачных вычислений.</span><span class="sxs-lookup"><span data-stu-id="c37a5-393">The open-source projects in the previous figure are available from the Cloud Native Computing Foundation.</span></span> <span data-ttu-id="c37a5-394">Три предложения являются полноценными продуктами базы данных, которые включают поддержку .NET Core.</span><span class="sxs-lookup"><span data-stu-id="c37a5-394">Three of the offerings are full database products, which include .NET Core support.</span></span> <span data-ttu-id="c37a5-395">Другая, Vitess, представляет собой систему кластеризации баз данных, которая горизонтально масштабирует большие кластеры экземпляров MyS'L.</span><span class="sxs-lookup"><span data-stu-id="c37a5-395">The other, Vitess, is a database clustering system that horizontally scales large clusters of MySQL instances.</span></span>

<span data-ttu-id="c37a5-396">Ключевой целью проектирования для баз данных NewS'L является работа на родном уровне в Kubernetes, пользуясь устойчивостью и масштабируемостью платформы.</span><span class="sxs-lookup"><span data-stu-id="c37a5-396">A key design goal for NewSQL databases is to work natively in Kubernetes, taking advantage of the platform's resiliency and scalability.</span></span>

<span data-ttu-id="c37a5-397">Базы данных NewS'L предназначены для процветания в эфемерных облачных средах, где базовые виртуальные машины могут быть перезапущены или перенесены в любой момент.</span><span class="sxs-lookup"><span data-stu-id="c37a5-397">NewSQL databases are designed to thrive in ephemeral cloud environments where underlying virtual machines can be restarted or rescheduled at a moment’s notice.</span></span> <span data-ttu-id="c37a5-398">Базы данных предназначены для выживания сбоев узлов без потери данных и простоев.</span><span class="sxs-lookup"><span data-stu-id="c37a5-398">The databases are designed to survive node failures without data loss nor downtime.</span></span> <span data-ttu-id="c37a5-399">Например, cockroachDB способен пережить потерю машины, поддерживая три последовательные копии любых данных в кластере.</span><span class="sxs-lookup"><span data-stu-id="c37a5-399">CockroachDB, for example, is able to survive a machine loss by maintaining three consistent replicas of any data across the nodes in a cluster.</span></span>

<span data-ttu-id="c37a5-400">Kubernetes использует *конструкцию Службы,* позволяющую клиенту обращаться к группе идентичных процессов баз данных NewS'L из одной записи DNS.</span><span class="sxs-lookup"><span data-stu-id="c37a5-400">Kubernetes uses a *Services construct* to allow a client to address a group of identical NewSQL databases processes from a single DNS entry.</span></span> <span data-ttu-id="c37a5-401">Отделяя экземпляры базы данных от адреса службы, с которой она связана, мы можем масштабироваться, не нарушая существующие экземпляры приложения.</span><span class="sxs-lookup"><span data-stu-id="c37a5-401">By decoupling the database instances from the address of the service with which it's associated, we can scale without disrupting existing application instances.</span></span> <span data-ttu-id="c37a5-402">Отправка запроса в любую службу в данный момент всегда даст один и тот же результат.</span><span class="sxs-lookup"><span data-stu-id="c37a5-402">Sending a request to any service at a given time will always yield the same result.</span></span>

<span data-ttu-id="c37a5-403">В этом сценарии все экземпляры базы данных равны.</span><span class="sxs-lookup"><span data-stu-id="c37a5-403">In this scenario, all database instances are equal.</span></span> <span data-ttu-id="c37a5-404">Нет никаких первичных или вторичных отношений.</span><span class="sxs-lookup"><span data-stu-id="c37a5-404">There are no primary or secondary relationships.</span></span> <span data-ttu-id="c37a5-405">Такие методы, как *репликация консенсуса,* найденная в CockroachDB, позволяют любому узло базы данных обрабатывать любой запрос.</span><span class="sxs-lookup"><span data-stu-id="c37a5-405">Techniques like *consensus replication* found in CockroachDB allow any database node to handle any request.</span></span> <span data-ttu-id="c37a5-406">Если узла, получаюого запрос на сбалансированную нагрузку, имеют сяваные данные локально, он немедленно реагирует.</span><span class="sxs-lookup"><span data-stu-id="c37a5-406">If the node that receives a load-balanced request has the data it needs locally, it responds immediately.</span></span> <span data-ttu-id="c37a5-407">В противном случае узел становится шлюзом и направляет запрос в соответствующие узлы, чтобы получить правильный ответ.</span><span class="sxs-lookup"><span data-stu-id="c37a5-407">If not, the node becomes a gateway and forwards the request to the appropriate nodes to get the correct answer.</span></span> <span data-ttu-id="c37a5-408">С точки зрения клиента, каждый узлы базы данных одинаковы: они отображаются как единая *логическая* база данных с гарантиями согласованности одномашинной системы, несмотря на наличие десятков или даже сотен узлов, которые работают за кулисами.</span><span class="sxs-lookup"><span data-stu-id="c37a5-408">From the client's perspective, every database node is the same: They appear as a single *logical* database with the consistency guarantees of a single-machine system, despite having dozens or even hundreds of nodes that are working behind the scenes.</span></span>

<span data-ttu-id="c37a5-409">Подробный взгляд на механику, лежащую в [основе](https://thenewstack.io/dash-four-properties-of-kubernetes-native-databases/) баз данных NewS'L, см.</span><span class="sxs-lookup"><span data-stu-id="c37a5-409">For a detailed look at the mechanics behind NewSQL databases, see the [DASH: Four Properties of Kubernetes-Native Databases](https://thenewstack.io/dash-four-properties-of-kubernetes-native-databases/) article.</span></span>

## <a name="data-migration-to-the-cloud"></a><span data-ttu-id="c37a5-410">Миграция данных в облако</span><span class="sxs-lookup"><span data-stu-id="c37a5-410">Data migration to the cloud</span></span>

<span data-ttu-id="c37a5-411">Одной из наиболее трудоемких задач является перенос данных с одной платформы данных на другую.</span><span class="sxs-lookup"><span data-stu-id="c37a5-411">One of the more time-consuming tasks is migrating data from one data platform to another.</span></span> <span data-ttu-id="c37a5-412">Миграционная [служба данных Azure](https://azure.microsoft.com/services/database-migration/) может помочь ускорить такие усилия.</span><span class="sxs-lookup"><span data-stu-id="c37a5-412">The [Azure Data Migration Service](https://azure.microsoft.com/services/database-migration/) can help expedite such efforts.</span></span> <span data-ttu-id="c37a5-413">Он может мигрировать данные из нескольких внешних источников базы данных на платформы Azure Data с минимальным временем простоя.</span><span class="sxs-lookup"><span data-stu-id="c37a5-413">It can migrate data from several external database sources into Azure Data platforms with minimal downtime.</span></span> <span data-ttu-id="c37a5-414">Целевые платформы включают в себя следующие услуги:</span><span class="sxs-lookup"><span data-stu-id="c37a5-414">Target platforms include the following services:</span></span>

- <span data-ttu-id="c37a5-415">База данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="c37a5-415">Azure SQL Database</span></span>
- <span data-ttu-id="c37a5-416">База данных Azure для MySQL</span><span class="sxs-lookup"><span data-stu-id="c37a5-416">Azure Database for MySQL</span></span>
- <span data-ttu-id="c37a5-417">База данных Azure для MariaDB</span><span class="sxs-lookup"><span data-stu-id="c37a5-417">Azure Database for MariaDB</span></span>
- <span data-ttu-id="c37a5-418">База данных Azure для PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="c37a5-418">Azure Database for PostgreSQL</span></span>
- <span data-ttu-id="c37a5-419">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="c37a5-419">CosmosDB</span></span>
  
<span data-ttu-id="c37a5-420">Служба предоставляет рекомендации, которые помогут вам пройти через изменения, необходимые для выполнения миграции, как малых, так и больших.</span><span class="sxs-lookup"><span data-stu-id="c37a5-420">The service provides recommendations to guide you through the changes required to execute a migration, both small or large.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="c37a5-421">[Предыдущий](Database-per-microservice.md)
>[Следующий](azure-caching.md)</span><span class="sxs-lookup"><span data-stu-id="c37a5-421">[Previous](Database-per-microservice.md)
[Next](azure-caching.md)</span></span>
