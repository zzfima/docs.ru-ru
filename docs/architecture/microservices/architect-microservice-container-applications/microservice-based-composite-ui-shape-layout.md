---
title: Создание составного пользовательского интерфейса на основе микрослужб
description: Архитектура микрослужб подходит не только для серверной части. Здесь вы можете кратко ознакомиться с ее применением во внешней интерфейсной части.
ms.date: 09/20/2018
ms.openlocfilehash: 1861d3bb6e5d4a0226aa8f3f72a2e0d3e83be56f
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/14/2020
ms.locfileid: "72275742"
---
# <a name="creating-composite-ui-based-on-microservices"></a><span data-ttu-id="46420-104">Создание составного пользовательского интерфейса на основе микрослужб</span><span class="sxs-lookup"><span data-stu-id="46420-104">Creating composite UI based on microservices</span></span>

<span data-ttu-id="46420-105">Архитектура микрослужб часто начинается с того, что сервер обрабатывает данные и логику, но часто пользовательский интерфейс по-прежнему обрабатывается как монолит.</span><span class="sxs-lookup"><span data-stu-id="46420-105">Microservices architecture often starts with the server-side handling data and logic, but, in many cases, the UI is still handled as a monolith.</span></span> <span data-ttu-id="46420-106">Однако более сложный подход, называемый [микроинтерфейсы](https://martinfowler.com/articles/micro-frontends.html), — разработать пользовательский интерфейс приложения также на основе микрослужб.</span><span class="sxs-lookup"><span data-stu-id="46420-106">However, a more advanced approach, called [micro frontends](https://martinfowler.com/articles/micro-frontends.html), is to design your application UI based on microservices as well.</span></span> <span data-ttu-id="46420-107">Это означает, что у вас появляется составной пользовательский интерфейс, создаваемый микрослужбами, вместо размещения микрослужб на сервере и наличия монолитного клиентского приложения, которое использует эти микрослужбы.</span><span class="sxs-lookup"><span data-stu-id="46420-107">That means having a composite UI produced by the microservices, instead of having microservices on the server and just a monolithic client app consuming the microservices.</span></span> <span data-ttu-id="46420-108">При использовании этого подхода создаваемые микрослужбы можно дополнить логикой и визуальным представлением.</span><span class="sxs-lookup"><span data-stu-id="46420-108">With this approach, the microservices you build can be complete with both logic and visual representation.</span></span>

<span data-ttu-id="46420-109">На рис. 4-20 показан более простой подход, при котором монолитное клиентское приложение просто использует микрослужбы.</span><span class="sxs-lookup"><span data-stu-id="46420-109">Figure 4-20 shows the simpler approach of just consuming microservices from a monolithic client application.</span></span> <span data-ttu-id="46420-110">Конечно, вы можете использовать промежуточную службу ASP.NET MVC между формированием HTML и JavaScript.</span><span class="sxs-lookup"><span data-stu-id="46420-110">Of course, you could have an ASP.NET MVC service in between producing the HTML and JavaScript.</span></span> <span data-ttu-id="46420-111">На рисунке показана упрощенная схема, которая выделяет наличие единого (монолитного) пользовательского интерфейса клиента, использующего микрослужбы. Эта схема делает акцент на логике и данных, а не на форме пользовательского интерфейса (HTML и JavaScript).</span><span class="sxs-lookup"><span data-stu-id="46420-111">The figure is a simplification that highlights that you have a single (monolithic) client UI consuming the microservices, which just focus on logic and data and not on the UI shape (HTML and JavaScript).</span></span>

![Схема приложения монолитного пользовательского интерфейса, подключающегося к микрослужбам.](./media/microservice-based-composite-ui-shape-layout/monolith-ui-consume-microservices.png)

<span data-ttu-id="46420-113">**Рис. 4-20**.</span><span class="sxs-lookup"><span data-stu-id="46420-113">**Figure 4-20**.</span></span> <span data-ttu-id="46420-114">Приложение с монолитным пользовательским интерфейсом, использующее серверные микрослужбы</span><span class="sxs-lookup"><span data-stu-id="46420-114">A monolithic UI application consuming back-end microservices</span></span>

<span data-ttu-id="46420-115">В отличие от монолитного пользовательского интерфейса составной пользовательский интерфейс создается и формируется самими микрослужбами.</span><span class="sxs-lookup"><span data-stu-id="46420-115">In contrast, a composite UI is precisely generated and composed by the microservices themselves.</span></span> <span data-ttu-id="46420-116">Некоторые микрослужбы отвечают за внешний вид определенных областей пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="46420-116">Some of the microservices drive the visual shape of specific areas of the UI.</span></span> <span data-ttu-id="46420-117">Основное различие состоит в том, что у вас есть компоненты пользовательского интерфейса клиента на основе шаблонов (например, классы TypeScript), и модель представления, определяющая форму данных пользовательского интерфейса для этих шаблонов, поступает от каждой микрослужбы.</span><span class="sxs-lookup"><span data-stu-id="46420-117">The key difference is that you have client UI components (TypeScript classes, for example) based on templates, and the data-shaping-UI ViewModel for those templates comes from each microservice.</span></span>

<span data-ttu-id="46420-118">Во время запуска приложения клиента каждый из компонентов пользовательского интерфейса клиента (например, классы TypeScript) регистрируется в микрослужбе инфраструктуры, которая предоставляет модели представления для данного сценария.</span><span class="sxs-lookup"><span data-stu-id="46420-118">At client application start-up time, each of the client UI components (TypeScript classes, for example) registers itself with an infrastructure microservice capable of providing ViewModels for a given scenario.</span></span> <span data-ttu-id="46420-119">Если микрослужба изменяет форму интерфейса, это приводит к изменению пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="46420-119">If the microservice changes the shape, the UI changes also.</span></span>

<span data-ttu-id="46420-120">На рисунке 4-21 показан вариант составного пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="46420-120">Figure 4-21 shows a version of this composite UI approach.</span></span> <span data-ttu-id="46420-121">Это упрощенный вариант, так как у вас могут использоваться другие микрослужбы, агрегирующие отдельные фрагменты на основе различных методов.</span><span class="sxs-lookup"><span data-stu-id="46420-121">This is simplified because you might have other microservices that are aggregating granular parts that are based on different techniques.</span></span> <span data-ttu-id="46420-122">Это зависит от того, используете ли вы традиционный подход к созданию веб-приложения (ASP.NET MVC) или одностраничное приложение (SPA).</span><span class="sxs-lookup"><span data-stu-id="46420-122">It depends on whether you're building a traditional web approach (ASP.NET MVC) or an SPA (Single Page Application).</span></span>

![Схема составного пользовательского интерфейса, состоящего из многих моделей представления.](./media/microservice-based-composite-ui-shape-layout/microservice-generate-composite-ui.png)

<span data-ttu-id="46420-124">**Рис. 4-21**.</span><span class="sxs-lookup"><span data-stu-id="46420-124">**Figure 4-21**.</span></span> <span data-ttu-id="46420-125">Пример составного пользовательского интерфейса приложения, форма которого определяется серверными микрослужбами</span><span class="sxs-lookup"><span data-stu-id="46420-125">Example of a composite UI application shaped by back-end microservices</span></span>

<span data-ttu-id="46420-126">Каждая из этих микрослужб, составляющих пользовательский интерфейс, похожа на небольшой шлюз API.</span><span class="sxs-lookup"><span data-stu-id="46420-126">Each of those UI composition microservices would be similar to a small API Gateway.</span></span> <span data-ttu-id="46420-127">Однако в этом случае каждая микрослужба отвечает за небольшую область пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="46420-127">But in this case, each one is responsible for a small UI area.</span></span>

<span data-ttu-id="46420-128">Подход с составным пользовательским интерфейсом, который формируется микрослужбами, может быть более или менее трудным в зависимости от того, какие методы создания пользовательского интерфейса применяются.</span><span class="sxs-lookup"><span data-stu-id="46420-128">A composite UI approach that's driven by microservices can be more challenging or less so, depending on what UI technologies you're using.</span></span> <span data-ttu-id="46420-129">Например, вы не сможете использовать одни и те же методы для создания традиционного веб-приложения, одностраничного приложения или собственного мобильного приложения (как при разработке приложений Xamarin, для которых этот подход может оказаться более трудным).</span><span class="sxs-lookup"><span data-stu-id="46420-129">For instance, you won't use the same techniques for building a traditional web application that you use for building an SPA or for native mobile app (as when developing Xamarin apps, which can be more challenging for this approach).</span></span>

<span data-ttu-id="46420-130">В примере приложения [EShopOnContainers](https://aka.ms/MicroservicesArchitecture) используется монолитный пользовательский интерфейс по различным причинам.</span><span class="sxs-lookup"><span data-stu-id="46420-130">The [eShopOnContainers](https://aka.ms/MicroservicesArchitecture) sample application uses the monolithic UI approach for multiple reasons.</span></span> <span data-ttu-id="46420-131">Во-первых, он позволяет новичкам познакомиться с микрослужбами и контейнерами.</span><span class="sxs-lookup"><span data-stu-id="46420-131">First, it's an introduction to microservices and containers.</span></span> <span data-ttu-id="46420-132">Подход с составным пользовательским интерфейсом более сложен, но он еще больше усложняется при проектировании и разработки пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="46420-132">A composite UI is more advanced but also requires further complexity when designing and developing the UI.</span></span> <span data-ttu-id="46420-133">Во-вторых, eShopOnContainers также предоставляет собственное мобильное приложение на основе Xamarin, что усложнило бы разработку на C\# для клиента.</span><span class="sxs-lookup"><span data-stu-id="46420-133">Second, eShopOnContainers also provides a native mobile app based on Xamarin, which would make it more complex on the client C\# side.</span></span>

<span data-ttu-id="46420-134">Тем не менее мы рекомендуем воспользоваться следующими ресурсами для дальнейшего изучения составных пользовательских интерфейсов на основе микрослужб.</span><span class="sxs-lookup"><span data-stu-id="46420-134">However, we encourage you to use the following references to learn more about composite UI based on microservices.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="46420-135">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="46420-135">Additional resources</span></span>

- <span data-ttu-id="46420-136">**Микроинтерфейсы (блог Мартина Фаулера (Martin Fowler))**</span><span class="sxs-lookup"><span data-stu-id="46420-136">**Micro Frontends (Martin Fowler's blog)**</span></span>  
  <https://martinfowler.com/articles/micro-frontends.html>
  
- <span data-ttu-id="46420-137">**Микроинтерфейсы (сайта Майкла Гирса (Michael Geers))**</span><span class="sxs-lookup"><span data-stu-id="46420-137">**Micro Frontends (Michael Geers site)**</span></span>  
  <https://micro-frontends.org/>
  
- <span data-ttu-id="46420-138">**Составной пользовательский интерфейс в ASP.NET (семинар от Particular)**</span><span class="sxs-lookup"><span data-stu-id="46420-138">**Composite UI using ASP.NET (Particular's Workshop)**</span></span>  
  <https://github.com/Particular/Workshop/tree/master/demos/asp-net-core>

- <span data-ttu-id="46420-139">**Рубен Оостинга (Ruben Oostinga). Монолитный пользовательский интерфейс в архитектуре микрослужб**</span><span class="sxs-lookup"><span data-stu-id="46420-139">**Ruben Oostinga. The Monolithic Frontend in the Microservices Architecture**</span></span>  
  <https://xebia.com/blog/the-monolithic-frontend-in-the-microservices-architecture/>

- <span data-ttu-id="46420-140">**Мауро Сервьенти (Mauro Servienti). Как лучше всего скомпоновать пользовательский интерфейс**</span><span class="sxs-lookup"><span data-stu-id="46420-140">**Mauro Servienti. The secret of better UI composition**</span></span>  
  <https://particular.net/blog/secret-of-better-ui-composition>

- <span data-ttu-id="46420-141">**Виктор Фарчич (Viktor Farcic). Включение внешних веб-компонентов в микрослужбы**</span><span class="sxs-lookup"><span data-stu-id="46420-141">**Viktor Farcic. Including Front-End Web Components Into Microservices**</span></span>  
  <https://technologyconversations.com/2015/08/09/including-front-end-web-components-into-microservices/>

- <span data-ttu-id="46420-142">**Управление клиентской частью в архитектуре микрослужб**</span><span class="sxs-lookup"><span data-stu-id="46420-142">**Managing Frontend in the Microservices Architecture**</span></span>  
  <https://allegro.tech/2016/03/Managing-Frontend-in-the-microservices-architecture.html>

>[!div class="step-by-step"]
><span data-ttu-id="46420-143">[Назад](microservices-addressability-service-registry.md)
>[Вперед](resilient-high-availability-microservices.md)</span><span class="sxs-lookup"><span data-stu-id="46420-143">[Previous](microservices-addressability-service-registry.md)
[Next](resilient-high-availability-microservices.md)</span></span>
