---
title: Обзор пошаговых руководств и технических описаний по началу работы
description: Модернизация существующих приложений .NET с помощью облака Azure и контейнеров Windows | Обзор пошаговых руководств и технических описаний по началу работы
ms.date: 04/28/2018
ms.openlocfilehash: 190b33c4307b09bab0543d481e66ac9328074a0d
ms.sourcegitcommit: 22be09204266253d45ece46f51cc6f080f2b3fd6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/08/2019
ms.locfileid: "69660886"
---
# <a name="walkthroughs-and-technical-get-started-overview"></a>Обзор пошаговых руководств и технических описаний по началу работы

Чтобы ограничить размер этой электронной книги, в репозитории GitHub размещена дополнительная техническая документация и полные пошаговые руководства. В интерактивной серии пошаговых руководств, описанных в этой главе, рассматривается пошаговая настройка нескольких сред на основе контейнеров Windows и развертывание в Azure.

В следующих разделах объясняется, что представляет собой каждое пошаговое руководство, его цели и общее описание, а также приводится задействованная схема задач. Вы можете ознакомиться с пошаговыми руководствами в вики-разделе репозитория приложений *eShopModernizing* на сайте GitHub по адресу <https://github.com/dotnet-architecture/eShopModernizing/wiki>.

## <a name="technical-walkthrough-list"></a>Список технических пошаговых руководств

Приведенные ниже пошаговые руководства по началу работы предоставляют согласованные и исчерпывающие технические рекомендации по работе с примерами приложений, которые можно переместить с помощью контейнеров, а затем с использованием нескольких вариантов развертывания в Azure.

В каждом из приведенных ниже пошаговых руководств используются новые примеры приложений eShopLegacy и eShopModernizing, которые доступны на сайте GitHub по адресу <https://github.com/dotnet-architecture/eShopModernizing>.

- **Обзор приложений eShop прежних версий (базовые приложения для модернизации)**

- **Контейнеризация имеющихся веб-приложений ASP NET (веб-формы и MVC) с помощью контейнеров Windows**

- **Контейнеризация имеющихся служб WCF (n-уровневых приложений) с помощью контейнеров Windows**

- **Развертывание приложений на основе контейнеров Windows на виртуальных машинах Azure**

- **Развертывание приложений на основе контейнеров Windows в Kubernetes в Службе контейнеров Azure**

## <a name="walkthrough-1-tour-of-eshop-legacy-apps"></a>Пошаговое руководство 1. Обзор приложений eShop прежних версий

### <a name="technical-walkthrough-availability"></a>Доступность технического пошагового руководства

Полное техническое руководство доступно в вики-разделе репозитория eShopModernizing на сайте GitHub:

[Пошаговые руководства в вики-разделе eShopModernizing](https://github.com/dotnet-architecture/eShopModernizing/wiki)

### <a name="overview"></a>Обзор

В этом пошаговом руководстве приведены сведения о первоначальной реализации трех примеров приложений прежних версий. Первые два примера веб-приложений имеют монолитную архитектуру и созданы с помощью классической платформы ASP.NET. Одно приложение основано на ASP.NET 4.x MVC, а второе — на веб-формах ASP.NET 4.x.
Третье приложение — это 3-уровневое приложение, состоящее из клиентского приложения WinForms и серверной службы [Windows Communication Foundation (WCF)](../../framework/wcf/whats-wcf.md).

Все эти приложения доступны в репозитории [eShopModernizing на сайте GitHub](https://github.com/dotnet-architecture/eShopModernizing).

### <a name="goals"></a>Цели

Основной целью этого пошагового руководства является знакомство с этими приложениями, а также с их кодом и конфигурацией. В целях тестирования можно настроить приложения таким образом, чтобы они создавали и использовали фиктивные данные без применения базы данных SQL. Эта необязательная конфигурация основана на внедрении зависимостей в несвязанном виде.

### <a name="scenario-1-aspnet-web-apps"></a>Сценарий 1. Веб-приложения ASP.NET

На рисунке ниже показан простой вариант исходных веб-приложений ASP.NET прежних версий.

![Простой вариант архитектуры исходных веб-приложений ASP.NET прежних версий](./media/image5-1.png)

С точки зрения предметной области бизнеса оба приложения предлагают одни и те же функции управления каталогом. Участники корпоративной команды eShop будут использовать приложение для просмотра и редактирования каталога продуктов.

На рисунке ниже показаны снимки экрана первоначального приложения.

![Приложения ASP.NET MVC ASP.NET MVC и веб-форм ASP.NET (имеющиеся и устаревшие технологии)](./media/image5-2.png)

Наличие зависимостей в ASP.NET 4.x или более ранних версиях (для MVC или для веб-форм) означает, что эти приложения не будут работать в .NET Core, если код не будет полностью переписан с использованием ASP.NET Core MVC.

### <a name="scenario-2-wcf-service-and-winforms-client-app-3-tier-app"></a>Сценарий 2. Служба WCF и клиентское приложение WinForms (3-уровневое)

На рисунке ниже показан простой вариант исходного 3-уровневого приложения прежних версий.

![Вариант простой архитектуры исходного 3-уровневого приложения прежних версий со службой WCF и клиентским приложением WinForms](./media/image5-1.5.png)

### <a name="benefits"></a>Преимущества

В этом пошаговом руководстве вы ознакомитесь с кодом и начальными приложениями.

### <a name="next-steps"></a>Следующие шаги

Подробно изучите это содержимое в вики-разделе на сайте GitHub:

- [Обзор базовых приложений ASP.NET MVC и веб-форм прежних версий](https://github.com/dotnet-architecture/eShopModernizing/wiki/01.-Tour-on-the-ASP.NET-MVC-and-WebForms-apps-implementation-code)
- [Обзор базовой службы WCF и приложения WinForms (3-уровневого) прежних версий](https://github.com/dotnet-architecture/eShopModernizing/wiki/21.-Tour-on-the-WCF-service-and-WinForms-apps)

## <a name="walkthrough-2-containerize-your-existing-net-applications-with-windows-containers"></a>Пошаговое руководство 2. Контейнеризация имеющихся приложений .NET с помощью контейнеров Windows

### <a name="overview"></a>Обзор

Контейнеры Windows можно использовать для улучшения развертывания имеющихся приложений .NET, например, на основе MVC, веб-форм или WCF, в рабочей среде, среде разработки и тестирования.

### <a name="goals"></a>Цели

Цель этого пошагового руководства — продемонстрировать несколько вариантов контейнеризации имеющегося приложения .NET Framework. Можно выполнить следующие действия.

- Контейнеризовать приложение с помощью [средств Visual Studio 2017 для DOCKER](/aspnet/core/host-and-deploy/docker/visual-studio-tools-for-docker) (Visual Studio 2017 или более поздней версии).

- Контейнеризовать приложение, вручную добавив [Dockerfile](https://docs.docker.com/engine/reference/builder/), а затем используя [Docker CLI](https://docs.docker.com/engine/reference/commandline/cli/).

- Контейнеризовать приложение с помощью средства [Img2Docker](https://github.com/docker/communitytools-image2docker-win) (средство с открытым кодом из Docker).

В этом пошаговом руководстве рассматривается подход с применением средств Visual Studio 2017 для Docker, но два других подхода довольно схожи в контексте использования файлов Dockerfile.

### <a name="scenario-1-containerized-aspnet-web-apps"></a>Сценарий 1. Контейнерные веб-приложения ASP.NET

На рисунке ниже показан сценарий для контейнерных приложений веб-приложений eShop прежних версий.

![Упрощенная схема архитектуры контейнерных приложений ASP.NET в среде разработки](./media/image5-3.png)

### <a name="scenario-2-containerized-wcf-service"></a>Сценарий 2. Контейнерная служба WCF

На рисунке ниже показан сценарий для 3-уровневого приложения с контейнерной службой WCF.

![Упрощенная схема архитектуры контейнерной службы WCF в среде разработки](./media/image5-3.5.png)

### <a name="benefits"></a>Преимущества

Выполнение монолитного приложения в контейнере имеет свои преимущества. Вы создаете образ для приложения. В дальнейшем каждое развертывание будет производиться в одной и той же среде. Каждый контейнер использует одну и ту же версию ОС, в нем установлены одни и те же версии зависимостей, применяется одна и та же версия платформы .NET Framework, и для сборки применяется один и тот же процесс. По сути, вы управляете зависимостями приложения с помощью образа Docker. Зависимости передаются вместе с приложением при развертывании контейнеров.

Дополнительное преимущество заключается в том, что разработчики могут запускать приложение в единообразной среде, предоставляемой контейнерами Windows. Проблемы, которые появляются только с определенными версиями, можно обнаружить немедленно, а не в процессе взаимодействия с промежуточной или рабочей средой. Когда приложения выполняются в контейнерах, различия между средами разработки, используемыми участниками команды разработчиков, не так важны.

Контейнерные приложения также имеют более плоскую кривую горизонтального масштабирования. Контейнерные приложения позволяют создавать больше экземпляров приложений и служб (на основе контейнеров) на виртуальной машине или физическом компьютере по сравнению с обычными развертываниями приложений на каждом компьютере. Это обеспечивает высокую плотность и снижает требования к количеству требуемых ресурсов, особенно при использовании средства оркестрации, например Kubernetes.

В идеальной ситуации не требуется вносить изменения в код приложения (C\#). В большинстве случаев требуются только файлы метаданных развертывания Docker (файлы Dockerfile и Docker Compose).

### <a name="next-steps"></a>Следующие шаги

Подробно изучите это содержимое в вики-разделе на сайте GitHub:

- [Контейнеризация веб-приложений .NET Framework с помощью контейнеров Windows и Docker](https://github.com/dotnet-architecture/eShopModernizing/wiki/02.-How-to-containerize-the-.NET-Framework-web-apps-with-Windows-Containers-and-Docker)
- [Добавление поддержки Docker в службу WCF](https://github.com/dotnet-architecture/eShopModernizing/wiki/22.-Adding-Docker-Support)

## <a name="walkthrough-3-deploy-your-windows-containers-based-app-to-azure-vms"></a>Пошаговое руководство 3. Развертывание приложений на основе контейнеров Windows на виртуальных машинах Azure

### <a name="technical-walkthrough-availability"></a>Доступность технического пошагового руководства

Полное техническое руководство доступно в вики-разделе репозитория eShopModernizing на сайте GitHub: <https://github.com/dotnet-architecture/eShopModernizing/wiki/06.-Deploying-your-Windows-Containers-based-app-into-Azure-VMs-(Including-CI-CD)>

### <a name="overview"></a>Обзор

Развертывание на узле Docker на виртуальной машине Windows Server 2016 в Azure позволяет быстро настроить среды разработки, тестирования и промежуточного хранения. Это также позволяет тестировщикам или бизнес-пользователям часто проверять приложение. Виртуальные машины также можно использовать в качестве рабочих сред модели "инфраструктура как услуга" (IaaS).

### <a name="goals"></a>Цели

Цель этого пошагового руководства — продемонстрировать несколько вариантов, которые можно использовать при развертывании контейнеров Windows на виртуальных машинах Azure с Windows Server 2016 или более поздних версий.

### <a name="scenarios"></a>Сценарии

В этом пошаговом руководстве рассматривается несколько сценариев.

#### <a name="scenario-a-deploy-to-an-azure-vm-from-a-dev-pc-through-docker-engine-connection"></a>Сценарий А. Развертывание на виртуальной машине Azure с компьютера разработки с помощью подключения к модулю Docker

![Развертывание на виртуальной машине Azure с компьютера разработки с помощью подключения к модулю Docker](./media/image5-4.png)

**Рис. 5-4.** Развертывание на виртуальной машине Azure с компьютера разработки с помощью подключения к модулю Docker

#### <a name="scenario-b-deploy-to-an-azure-vm-through-a-docker-registry"></a>Сценарий Б. Развертывание на виртуальной машине Azure с помощью реестра Docker

![Развертывание на виртуальной машине Azure с помощью реестра Docker](./media/image5-5.png)

**Рис. 5-5.** Развертывание на виртуальной машине Azure с помощью реестра Docker

#### <a name="scenario-c-deploy-to-an-azure-vm-from-cicd-pipelines-in-azure-devops-services"></a>Сценарий В. Развертывание на виртуальной машине Azure из конвейеров CI/CD в Azure DevOps Services

![Развертывание на виртуальной машине Azure из конвейеров CI/CD в Azure DevOps Services](./media/image5-6.png)

**Рис. 5-6**. Развертывание на виртуальной машине Azure из конвейеров CI/CD в Azure DevOps Services

### <a name="azure-vms-for-windows-containers"></a>Виртуальные машины Azure для контейнеров Windows

Виртуальные машины Azure для контейнеров Windows — это виртуальные машины с Windows Server 2016, Windows 10 или более поздних версий с установленным модулем Docker. В большинстве случаев Windows Server 2016 используется на виртуальных машинах Azure.

В настоящее время Azure предоставляет виртуальную машину с именем **Windows Server 2016 с контейнерами**. Она подходит для испытания новой функции контейнера Windows Server с Windows Server Core или Windows Nano Server. После установки образов ОС контейнера виртуальную машину можно использовать вместе с Docker.

### <a name="benefits"></a>Преимущества

Несмотря на то что контейнеры Windows можно развертывать на локальных виртуальных машинах Windows Server 2016, при развертывании в Azure вам проще начать работу благодаря готовым к использованию виртуальным машинам контейнеров Windows Server. Вы также получите общее сетевое расположение, доступное для инженеров-тестировщиков, и возможность автоматического масштабирования с помощью масштабируемых наборов виртуальных машин Azure.

### <a name="next-steps"></a>Следующие шаги

Подробно изучите это содержимое в вики-разделе на сайте GitHub:

<https://github.com/dotnet-architecture/eShopModernizing/wiki/06.-Deploying-your-Windows-Containers-based-app-into-Azure-VMs-(Including-CI-CD)>

## <a name="walkthrough-4-deploy-your-windows-containers-based-apps-to-azure-container-instances-aci"></a>Пошаговое руководство 4. Развертывание приложений на основе контейнеров Windows в службе "Экземпляры контейнеров Azure" (ACI)

### <a name="technical-walkthrough-availability"></a>Доступность технического пошагового руководства

Полное техническое руководство доступно в вики-разделе репозитория eShopModernizing на сайте GitHub:

[Развертывание приложений в ACI (служба "Экземпляры контейнеров Azure")](https://github.com/dotnet-architecture/eShopModernizing/wiki/05.-Deploying-the-Apps-to-ACI-(Azure-Container-Instances))

### <a name="overview"></a>Обзор

[Служба "Экземпляры контейнеров Azure" (ACI)](https://docs.microsoft.com/azure/container-instances/) предоставляет самый быстрый способ использовать среду разработки, тестирования и промежуточного хранения контейнеров, где можно развернуть отдельные экземпляры контейнеров.

### <a name="goals"></a>Цели

В этом пошаговом руководстве продемонстрированы основные сценарии развертывания контейнеров Windows в службе "Экземпляры контейнеров Azure", а также способы развертывания приложений eShopModernizing в ACI.

### <a name="scenarios"></a>Сценарии

В ACI можно по-разному развертывать приложения eShopModernizing, например развернуть только одно или все приложения (приложение MVC, приложение веб-форм или служба WCF). В приведенном ниже сценарии показано приложение ASP.NET MVC и контейнер SQL Server, развернутые в виде контейнеров в ACI (Экземпляры контейнеров Azure).

![Развертывание в ACI из среды разработки](./media/image5-3.5.6.png)

### <a name="benefits"></a>Преимущества

Служба "Экземпляры контейнеров Azure" упрощает создание контейнеров Docker и управление ими в Azure, избавляя от необходимости подготавливать виртуальные машины или применять службу более высокого уровня. С помощью ACI можно напрямую развернуть контейнер Windows в Azure и моментально предоставить его в Интернете с полным доменным именем (FQDN) (при условии, что образ контейнера Windows готов в реестре Docker, например в Docker Hub или в Реестре контейнеров Azure).

### <a name="considerations"></a>Особенности

Развертывание контейнеров Windows с полной платформой .NET Framework, ASP.NET или SQL Server в службе "Экземпляры контейнеров Azure" (ACI) выполняется не так быстро, как развертывание на обычном узле Docker (например, Windows Server 2016 с контейнерами Windows), так как образ Docker должен загружаться (извлекаться из реестра Docker) каждый раз, а размеры образов контейнера SQL (15,1 ГБ) и ASP.NET (13,9 ГБ) существенно больше. Тем не менее это намного дешевле, чем поддерживать свой собственный узел Docker (постоянно работающий экземпляр Windows Server 2016 с виртуальной машиной контейнеров Windows в Azure), не говоря уже о целом оркестраторе, таком как Kubernetes в Azure (AKS), что, с другой стороны, отлично подходит для рабочих развертываний.

Таким образом, использование службы "Экземпляры контейнеров Azure" является очень удобным вариантом для реализации сценариев разработки и тестирования, а также для конвейеров CI/CD.

## <a name="next-steps"></a>Следующие шаги

Подробно изучите это содержимое в вики-разделе на сайте GitHub:

[https://github.com/dotnet-architecture/eShopModernizing/wiki/05.-Deploying-the-Apps-to-ACI-(Azure-Container-Instances)](https://github.com/dotnet-architecture/eShopModernizing/wiki/05.-Deploying-the-Apps-to-ACI-(Azure-Container-Instances))

## <a name="walkthrough-5-deploy-your-windows-containers-based-apps-to-kubernetes-in-azure-container-service"></a>Пошаговое руководство 5. Развертывание приложений на основе контейнеров Windows в Kubernetes в Службе контейнеров Azure

### <a name="technical-walkthrough-availability"></a>Доступность технического пошагового руководства

Полное техническое руководство доступно в вики-разделе репозитория eShopModernizing на сайте GitHub:

<https://github.com/dotnet-architecture/eShopModernizing/wiki/04.-How-to-deploy-your-Windows-Containers-based-apps-into-Kubernetes-in-Azure-Container-Service-(Including-CI-CD)>

### <a name="overview"></a>Обзор

Приложению на основе контейнеров Windows очень скоро потребуется использовать платформы, отходя от виртуальных машин IaaS. Это требуется, чтобы упростить обеспечение высокого уровня масштабируемости и улучшить автоматическое масштабирование, а также значительно улучшить автоматизированные развертывания и управление версиями. Этого можно достичь с помощью оркестратора [Kubernetes](https://kubernetes.io/), доступного в [Службе контейнеров Azure](https://azure.microsoft.com/services/container-service/).

### <a name="goals"></a>Цели

Цель этого пошагового руководства — узнать, как развернуть приложение на основе контейнеров Windows в Kubernetes (также называется *K8s*) в Службе контейнеров Azure. Развертывание в Kubernetes с нуля состоит из двух этапов:

1. Развертывание кластера Kubernetes в Службе контейнеров Azure.

2. Развертывание приложения и связанных ресурсов в кластере Kubernetes.

### <a name="scenarios"></a>Сценарии

#### <a name="scenario-a-deploy-directly-to-a-kubernetes-cluster-from-a-dev-environment"></a>Сценарий А. Развертывание непосредственно в кластере Kubernetes из среды разработки

![Развертывание непосредственно в кластере Kubernetes из среды разработки](./media/image5-7.png)

**Рис. 5-7.** Развертывание непосредственно в кластере Kubernetes из среды разработки

#### <a name="scenario-b-deploy-to-a-kubernetes-cluster-from-cicd-pipelines-in-azure-devops-services"></a>Сценарий Б. Развертывание в кластере Kubernetes из конвейеров CI/CD в Azure DevOps Services

![Развертывание в кластере Kubernetes из конвейеров CI/CD в Azure DevOps Services](./media/image5-8.png)

**Рис. 5-8.** Развертывание в кластере Kubernetes из конвейеров CI/CD в Azure DevOps Services

### <a name="benefits"></a>Преимущества

Развертывание в кластер в Kubernetes имеет множество преимуществ. Главное преимущество заключается в том, что вы получаете готовую к работе среду, в которой можно горизонтально масштабировать приложение на основе количества экземпляров контейнера, которые требуется использовать (внутренняя масштабируемость в имеющихся узлах), и на основе количества узлов или виртуальных машин в кластере (глобальная масштабируемость кластера).

Служба контейнеров Azure оптимизирует популярные средства и технологии с открытым исходным кодом специально для Azure. Вы получаете открытое решение, которое обеспечивает переносимость как контейнеров, так и конфигурации приложения. Вы выбираете размер, число узлов и средства оркестрации, а Служба контейнеров делает все остальное.

Благодаря Kubernetes разработчики могут рассмотреть возможность использования физических и виртуальных машин, а также планировать инфраструктуру, ориентированную на контейнер, которая упростит такие возможности:

- Приложения на основе нескольких контейнеров.

- Репликация экземпляров контейнеров и горизонтальное автомасштабирование.

- Именование и обнаружение (например, внутренняя служба DNS).

- Балансировка нагрузки.

- Последовательное обновление.

- Распространение секретов.

- Проверка работоспособности приложений.

## <a name="next-steps"></a>Следующие шаги

Подробно изучите это содержимое в вики-разделе на сайте GitHub: <https://github.com/dotnet-architecture/eShopModernizing/wiki/04.-How-to-deploy-your-Windows-Containers-based-apps-into-Kubernetes-in-Azure-Container-Service-(Including-CI-CD)>

## <a name="walkthrough-6-deploy-your-windows-containers-based-apps-to-azure-app-service-for-containers"></a>Пошаговое руководство 6. Развертывание приложений на основе контейнеров Windows в Службе приложений Azure для контейнеров

### <a name="technical-walkthrough-availability"></a>Доступность технического пошагового руководства

Полное техническое руководство доступно в вики-разделе репозитория eShopModernizing на сайте GitHub:

<https://github.com/dotnet-architecture/eShopModernizing/wiki/Deploy-Windows-Container-to-Azure-App-Service>

### <a name="overview"></a>Обзор

Простое контейнерное приложение, использующее контейнеры Windows, можно легко развернуть в Службе приложений Azure для контейнеров. Это рекомендуемый подход для большинства приложений на основе контейнеров Windows.

### <a name="goals"></a>Цели

Цель этого пошагового руководства — узнать, как развернуть приложение на основе контейнера Windows в Службе приложений Azure для контейнеров из реестра (Docker Hub или Реестра контейнеров Azure).

### <a name="scenario"></a>Сценарий

![Развертывание приложений на основе контейнеров Windows в Службе приложений Azure для контейнеров](./media/image5-11.png)

### <a name="benefits"></a>Преимущества

Развертывание в Службе приложений Azure для контейнеров предоставляет преимущества контейнеров в паре с преимуществами PaaS Службы приложений Azure. Службу приложений можно легко масштабировать как по вертикали, так и по горизонтали, а также настроить для автоматического масштабирования в соответствии с изменяющимися потребностями. Обновления можно выполнять с нулевым временем простоя, а также можно легко настроить непрерывное развертывание из реестра.

## <a name="next-steps"></a>Следующие шаги

Подробно изучите это содержимое в вики-разделе на сайте GitHub: <https://github.com/dotnet-architecture/eShopModernizing/wiki/Deploy-Windows-Container-to-Azure-App-Service>

> [!div class="step-by-step"]
> [Назад](modernize-existing-apps-to-cloud-optimized/migrate-to-hybrid-cloud-scenarios.md)
> [Вперед](conclusions.md) <!-- Next Chapter -->
