---
title: Средства Visual Studio для Docker в Windows
description: Изучите средства Docker, доступные в Visual Studio 2017 версии 15.7 и более поздних.
ms.date: 02/15/2019
ms.custom: vs-dotnet
ms.openlocfilehash: 2b6fdc33f9cf850cf9e52fca4a1a9754cd412567
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/14/2020
ms.locfileid: "68673881"
---
# <a name="use-docker-tools-in-visual-studio-2017-on-windows"></a>Использование Средств Docker в Visual Studio 2017 для Windows

Разработка с помощью Средств Docker, входящих в состав Visual Studio 2017 версии 15.7 и более поздних, осуществляется так же, как с помощью Visual Studio Code и CLI Docker (по сути, они также основаны на CLI Docker). Однако их проще запускать, с ними проще работать и они повышают продуктивность при выполнении сборки, запуска и компоновки. Они также позволяют запускать и отлаживать контейнеры с помощью стандартных сочетаний клавиш `F5` и `Ctrl+F5` в Visual Studio. Вы можете даже отладить все решение, если его контейнеры определены в одном файле `docker-compose.yml` на уровне решения.

## <a name="configure-your-local-environment"></a>Настройка локальной среды

С помощью последних версий Docker для Windows разрабатывать приложения Docker стало еще легче благодаря простоте настройки, как описано в следующих справочниках.

> [!TIP]
> Дополнительные сведения об установке Docker для Windows см. на странице <https://docs.docker.com/docker-for-windows/>.

## <a name="docker-support-in-visual-studio-2017"></a>Поддержка Docker в Visual Studio 2017

В проект можно добавить два уровня поддержки Docker. В проект ASP.NET Core можно просто добавить файл `Dockerfile`. Следующий уровень — это поддержка оркестрации контейнеров, в рамках которой в проект добавляется файл `Dockerfile` (если его еще нет), а на уровне решения добавляется файл `docker-compose.yml`. Поддержка оркестрации контейнеров с помощью Docker Compose добавляется по умолчанию в Visual Studio 2017 в версиях с 15.0 по 15.7. В Visual Studio 2017 версии 15.8 и более поздних поддержка оркестрации контейнеров — необязательная функция. В версии 15.8 и более поздних поддерживаются Docker Compose и Service Fabric.

Для проектов ASP.NET Core команды **Добавить > Поддержка Docker** и **Добавить > Поддержка оркестратора контейнеров** доступны в контекстном меню, открываемом правым щелчком мыши по узлу проекта в **обозревателе решений**, как показано на рис. 4-31:

![Добавление поддержки Docker из меню в Visual Studio](./media/add-docker-support-menu.png)

**Рис. 4-31**. Добавление поддержки Docker в проект Visual Studio 2017

### <a name="add-docker-support"></a>Добавление поддержки Docker

Поддержку Docker можно добавить в существующий проект ASP.NET Core, выбрав **Добавить** > **Поддержка Docker** в **обозревателе решений**. Поддержку Docker можно также включить при создании проекта, выбрав **Включить поддержку Docker** в диалоговом окне **Новое веб-приложение ASP.NET Core**, которое открывается после нажатия кнопки **ОК** в диалоговом окне **Новый проект**, как показано на рис. 4-32.

![Включение поддержки Docker для нового веб-приложения ASP.NET Core в Visual Studio](./media/enable-docker-support-visual-studio.png)

**Рис. 4-32.** Включение поддержки Docker во время создания проекта в Visual Studio 2017

При добавлении или включении поддержки Docker Visual Studio добавляет в проект файл *Dockerfile*.

> [!NOTE]
> Если вы включаете поддержку Docker Compose при создании проекта ASP.NET (проекта .NET Framework, а не .NET Core), как показано на рис. 4-33, при этом добавляется поддержка оркестрации контейнеров.

![Включение поддержки Docker Compose для проекта ASP.NET](media/enable-docker-compose-support.png)

**Рис. 4-33.** Включение поддержки Docker Compose для проекта ASP.NET в Visual Studio 2017

### <a name="add-container-orchestration-support"></a>Добавление поддержки оркестрации контейнеров

Если требуется создать многоконтейнерное решение, добавьте в проекты поддержку оркестрации контейнеров. Это позволит выполнять и отлаживать группу контейнеров (все решение) одновременно, если они определяются в одном файле *docker-compose.yml*.

Чтобы добавить поддержку оркестрации контейнеров, щелкните правой кнопкой мыши узел решения или проекта в **обозревателе решений** и выберите **Добавить > Поддержка оркестрации контейнеров**. Затем выберите **Docker Compose** или **Service Fabric** для управления контейнерами.

После добавления поддержки оркестрации контейнеров в проект в него добавится файл Dockerfile, а в само решение в **обозревателе решений** — папка **docker-compose**, как показано на рис. 4-34:

![Файлы Docker в обозревателе решений Visual Studio](media/docker-support-solution-explorer.png)

**Рис. 4-34**. Файлы Docker в обозревателе решений Visual Studio 2017

Если файл *docker-compose.yml* уже существует, Visual Studio просто добавит в него необходимые строки кода конфигурации.

## <a name="configure-docker-tools"></a>Настройка средств Docker

В главном меню выберите **Сервис > Параметры** и разверните узлы **Инструменты для контейнера > Параметры**. Появятся параметры инструментов для контейнера.

![Параметры Средств Visual Studio для Docker: "Автоматически извлекать необходимые образы Docker при загрузке проекта", "Автоматически запускать контейнеры в фоновом режиме", "Автоматически уничтожать контейнеры при закрытии решения" и "Не запрашивать надежный SSL-сертификат".](./media/visual-studio-docker-tools-options.png)

**Рис. 4-35**. Параметры средств Docker

Приведенная ниже таблица может помочь вам настроить эти параметры.

| name | Параметр по умолчанию | Применение | Описание |
| -----|:---------------:|:----------:| ----------- |
| Автоматически извлекать необходимые образы Docker при загрузке проекта | включить | Docker Compose | Для повышения производительности при загрузке проектов Visual Studio будет запускать операцию извлечения Docker в фоновом режиме, чтобы когда код был готов к выполнению, образ уже был скачан или находился в процессе скачивания. Если вы загружаете проекты просто для просмотра кода, эту возможность можно отключить, чтобы избежать скачивания ненужных образов контейнеров. |
| Автоматически запускать контейнеры в фоновом режиме | включить | Docker Compose | Для повышения производительности Visual Studio создает контейнер с уже подключенными томами, который готов к сборке и запуску. Если вы хотите управлять созданием контейнера, отключите эту возможность. |
| Автоматически уничтожать контейнеры при закрытии решения | включить | Docker Compose | Отключите этот параметр, если контейнеры решения должны продолжать выполняться после закрытия решения или среды Visual Studio. |
| Не запрашивать надежный SSL-сертификат localhost | Off | Проекты ASP.NET Core 2.2 | Если SSL-сертификат localhost не является доверенным, Visual Studio будет выводить запрос при каждом запуске проекта, когда этот флажок не установлен. |

> [!WARNING]
> Если SSL-сертификат localhost не является доверенным и этот флажок установлен, веб-запросы HTTPS могут завершаться сбоем во время выполнения приложения или службы. В этом случае снимите флажок **Не запрашивать**, запустите проект и включите доверие сертификату при появлении запроса.

> [!TIP]
> Чтобы получить дополнительные сведения о реализации служб и использовании средств Visual Studio для Docker, ознакомьтесь со следующими статьями:
>
>Отладка приложений в локальном контейнере Docker: <https://docs.microsoft.com/azure/vs-azure-tools-docker-edit-and-refresh>
>
>Развертывание контейнера ASP.NET в реестре контейнеров с использованием Visual Studio: <https://docs.microsoft.com/azure/vs-azure-tools-docker-hosting-web-apps-in-docker>

>[!div class="step-by-step"]
>[Назад](docker-apps-inner-loop-workflow.md)
>[Вперед](set-up-windows-containers-with-powershell.md)
